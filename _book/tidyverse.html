<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Cap√≠tulo 5 Tidyverse | Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Cap√≠tulo 5 Tidyverse | Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cap√≠tulo 5 Tidyverse | Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2021-03-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"/>
<link rel="next" href="gr√°ficos.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Pr√©-requisitos</a></li>
<li class="chapter" data-level="2" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html"><i class="fa fa-check"></i><b>2</b> Pr√©-requisitos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#introdu√ß√£o"><i class="fa fa-check"></i><b>2.1</b> Introdu√ß√£o</a></li>
<li class="chapter" data-level="2.2" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#r-e-rstudio"><i class="fa fa-check"></i><b>2.2</b> R e RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#funcionamento-da-linguagem-r"><i class="fa fa-check"></i><b>2.3</b> Funcionamento da linguagem R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#console"><i class="fa fa-check"></i><b>2.3.1</b> Console</a></li>
<li class="chapter" data-level="2.3.2" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#scripts"><i class="fa fa-check"></i><b>2.3.2</b> Scripts</a></li>
<li class="chapter" data-level="2.3.3" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#operadores"><i class="fa fa-check"></i><b>2.3.3</b> Operadores</a></li>
<li class="chapter" data-level="2.3.4" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#objetos"><i class="fa fa-check"></i><b>2.3.4</b> Objetos</a></li>
<li class="chapter" data-level="2.3.5" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#fun√ß√µes"><i class="fa fa-check"></i><b>2.3.5</b> Fun√ß√µes</a></li>
<li class="chapter" data-level="2.3.6" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#pacotes"><i class="fa fa-check"></i><b>2.3.6</b> Pacotes</a></li>
<li class="chapter" data-level="2.3.7" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#ajuda-help"><i class="fa fa-check"></i><b>2.3.7</b> Ajuda (<em>Help</em>)</a></li>
<li class="chapter" data-level="2.3.8" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#ambiente-environment"><i class="fa fa-check"></i><b>2.3.8</b> Ambiente (<em>Environment</em>)</a></li>
<li class="chapter" data-level="2.3.9" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#cita√ß√µes"><i class="fa fa-check"></i><b>2.3.9</b> Cita√ß√µes</a></li>
<li class="chapter" data-level="2.3.10" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#principais-erros-de-iniciantes"><i class="fa fa-check"></i><b>2.3.10</b> Principais erros de iniciantes</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#estrutura-e-manipula√ß√£o-de-objetos"><i class="fa fa-check"></i><b>2.4</b> Estrutura e manipula√ß√£o de objetos</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#atributo-dos-objetos"><i class="fa fa-check"></i><b>2.4.1</b> Atributo dos objetos</a></li>
<li class="chapter" data-level="2.4.2" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#manipula√ß√£o-de-objetos-unidimensionais"><i class="fa fa-check"></i><b>2.4.2</b> Manipula√ß√£o de objetos unidimensionais</a></li>
<li class="chapter" data-level="2.4.3" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#manipula√ß√£o-de-objetos-multidimensionais"><i class="fa fa-check"></i><b>2.4.3</b> Manipula√ß√£o de objetos multidimensionais</a></li>
<li class="chapter" data-level="2.4.4" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#valores-faltantes-e-especiais"><i class="fa fa-check"></i><b>2.4.4</b> Valores faltantes e especiais</a></li>
<li class="chapter" data-level="2.4.5" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#diret√≥rio-de-trabalho"><i class="fa fa-check"></i><b>2.4.5</b> Diret√≥rio de trabalho</a></li>
<li class="chapter" data-level="2.4.6" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#importar-dados"><i class="fa fa-check"></i><b>2.4.6</b> Importar dados</a></li>
<li class="chapter" data-level="2.4.7" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#confer√™ncia-de-dados-importados"><i class="fa fa-check"></i><b>2.4.7</b> Confer√™ncia de dados importados</a></li>
<li class="chapter" data-level="2.4.8" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#exportar-dados"><i class="fa fa-check"></i><b>2.4.8</b> Exportar dados</a></li>
<li class="chapter" data-level="2.4.9" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#base-r"><i class="fa fa-check"></i><b>2.4.9</b> Base R</a></li>
<li class="chapter" data-level="2.4.10" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#tidyverse"><i class="fa fa-check"></i><b>2.4.10</b> <em>tidyverse</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introdu√ß√£o-1.html"><a href="introdu√ß√£o-1.html"><i class="fa fa-check"></i><b>3</b> Introdu√ß√£o</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introdu√ß√£o-1.html"><a href="introdu√ß√£o-1.html#hist√≥rico-deste-livro"><i class="fa fa-check"></i><b>3.1</b> Hist√≥rico deste livro</a></li>
<li class="chapter" data-level="3.2" data-path="introdu√ß√£o-1.html"><a href="introdu√ß√£o-1.html#objetivo-deste-livro"><i class="fa fa-check"></i><b>3.2</b> Objetivo deste livro</a></li>
<li class="chapter" data-level="3.3" data-path="introdu√ß√£o-1.html"><a href="introdu√ß√£o-1.html#o-que-voc√™-n√£o-encontrar√°-neste-livro"><i class="fa fa-check"></i><b>3.3</b> O que voc√™ n√£o encontrar√° neste livro</a></li>
<li class="chapter" data-level="3.4" data-path="introdu√ß√£o-1.html"><a href="introdu√ß√£o-1.html#por-que-usar-o-r"><i class="fa fa-check"></i><b>3.4</b> Por que usar o R?</a></li>
<li class="chapter" data-level="3.5" data-path="introdu√ß√£o-1.html"><a href="introdu√ß√£o-1.html#como-usar-este-livro"><i class="fa fa-check"></i><b>3.5</b> Como usar este livro</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><i class="fa fa-check"></i><b>4</b> Voltando ao b√°sico: como dominar a arte de fazer perguntas cientificamente relevantes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#introdu√ß√£o-2"><i class="fa fa-check"></i><b>4.1</b> Introdu√ß√£o</a></li>
<li class="chapter" data-level="4.2" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#perguntas-devem-preceder-as-an√°lises-estat√≠sticas"><i class="fa fa-check"></i><b>4.2</b> Perguntas devem preceder as an√°lises estat√≠sticas</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#um-besti√°rio1-para-o-teste-de-hip√≥teses-voc√™-est√°-fazendo-a-pergunta-certa"><i class="fa fa-check"></i><b>4.2.1</b> Um besti√°rio[^1] para o teste de hip√≥teses (Voc√™ est√° fazendo a pergunta certa?)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#fluxograma-conectando-vari√°veis-para-melhorar-o-desenho-experimental-e-as-an√°lises-estat√≠sticas"><i class="fa fa-check"></i><b>4.3</b> Fluxograma: Conectando Vari√°veis para Melhorar o desenho experimental e as an√°lises estat√≠sticas</a></li>
<li class="chapter" data-level="4.4" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#quest√µes-fundamentais-em-etnobiologia-ecologia-e-conserva√ß√£o"><i class="fa fa-check"></i><b>4.4</b> Quest√µes fundamentais em etnobiologia, ecologia e conserva√ß√£o</a></li>
<li class="chapter" data-level="4.5" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#considera√ß√µes-finais"><i class="fa fa-check"></i><b>4.5</b> Considera√ß√µes Finais</a></li>
<li class="chapter" data-level="4.6" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#refer√™ncias"><i class="fa fa-check"></i><b>4.6</b> Refer√™ncias</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html#tidyverse"><i class="fa fa-check"></i><b>5</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>5.1</b> Contextualiza√ß√£o</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-1"><i class="fa fa-check"></i><b>5.2</b> <em>tidyverse</em></a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse.html"><a href="tidyverse.html#here"><i class="fa fa-check"></i><b>5.3</b> here</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse.html"><a href="tidyverse.html#readr-readxl-e-writexl"><i class="fa fa-check"></i><b>5.4</b> readr, readxl e writexl</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse.html"><a href="tidyverse.html#tibble"><i class="fa fa-check"></i><b>5.5</b> tibble</a></li>
<li class="chapter" data-level="5.6" data-path="tidyverse.html"><a href="tidyverse.html#magrittr-pipe--"><i class="fa fa-check"></i><b>5.6</b> magrittr (pipe - %&gt;%)</a></li>
<li class="chapter" data-level="5.7" data-path="tidyverse.html"><a href="tidyverse.html#tidyr"><i class="fa fa-check"></i><b>5.7</b> tidyr</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="tidyverse.html"><a href="tidyverse.html#palmerpenguins"><i class="fa fa-check"></i><b>5.7.1</b> palmerpenguins</a></li>
<li class="chapter" data-level="5.7.2" data-path="tidyverse.html"><a href="tidyverse.html#glimpse"><i class="fa fa-check"></i><b>5.7.2</b> glimpse()</a></li>
<li class="chapter" data-level="5.7.3" data-path="tidyverse.html"><a href="tidyverse.html#unite"><i class="fa fa-check"></i><b>5.7.3</b> unite()</a></li>
<li class="chapter" data-level="5.7.4" data-path="tidyverse.html"><a href="tidyverse.html#separate"><i class="fa fa-check"></i><b>5.7.4</b> separate()</a></li>
<li class="chapter" data-level="5.7.5" data-path="tidyverse.html"><a href="tidyverse.html#drop_na-e-replace_na"><i class="fa fa-check"></i><b>5.7.5</b> drop_na() e replace_na()</a></li>
<li class="chapter" data-level="5.7.6" data-path="tidyverse.html"><a href="tidyverse.html#pivotagem---pivot_longer-e-pivot_wider"><i class="fa fa-check"></i><b>5.7.6</b> pivotagem - pivot_longer() e pivot_wider()</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i><b>5.8</b> dplyr</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="tidyverse.html"><a href="tidyverse.html#gram√°tica"><i class="fa fa-check"></i><b>5.8.1</b> Gram√°tica</a></li>
<li class="chapter" data-level="5.8.2" data-path="tidyverse.html"><a href="tidyverse.html#sintaxe"><i class="fa fa-check"></i><b>5.8.2</b> Sintaxe</a></li>
<li class="chapter" data-level="5.8.3" data-path="tidyverse.html"><a href="tidyverse.html#palmerpenguins-1"><i class="fa fa-check"></i><b>5.8.3</b> palmerpenguins</a></li>
<li class="chapter" data-level="5.8.4" data-path="tidyverse.html"><a href="tidyverse.html#relocate"><i class="fa fa-check"></i><b>5.8.4</b> relocate()</a></li>
<li class="chapter" data-level="5.8.5" data-path="tidyverse.html"><a href="tidyverse.html#rename"><i class="fa fa-check"></i><b>5.8.5</b> rename()</a></li>
<li class="chapter" data-level="5.8.6" data-path="tidyverse.html"><a href="tidyverse.html#select"><i class="fa fa-check"></i><b>5.8.6</b> select()</a></li>
<li class="chapter" data-level="5.8.7" data-path="tidyverse.html"><a href="tidyverse.html#pull"><i class="fa fa-check"></i><b>5.8.7</b> pull()</a></li>
<li class="chapter" data-level="5.8.8" data-path="tidyverse.html"><a href="tidyverse.html#mutate"><i class="fa fa-check"></i><b>5.8.8</b> mutate()</a></li>
<li class="chapter" data-level="5.8.9" data-path="tidyverse.html"><a href="tidyverse.html#arrange"><i class="fa fa-check"></i><b>5.8.9</b> arrange()</a></li>
<li class="chapter" data-level="5.8.10" data-path="tidyverse.html"><a href="tidyverse.html#filter"><i class="fa fa-check"></i><b>5.8.10</b> filter()</a></li>
<li class="chapter" data-level="5.8.11" data-path="tidyverse.html"><a href="tidyverse.html#slice"><i class="fa fa-check"></i><b>5.8.11</b> slice()</a></li>
<li class="chapter" data-level="5.8.12" data-path="tidyverse.html"><a href="tidyverse.html#distinct"><i class="fa fa-check"></i><b>5.8.12</b> distinct()</a></li>
<li class="chapter" data-level="5.8.13" data-path="tidyverse.html"><a href="tidyverse.html#count"><i class="fa fa-check"></i><b>5.8.13</b> count()</a></li>
<li class="chapter" data-level="5.8.14" data-path="tidyverse.html"><a href="tidyverse.html#group_by"><i class="fa fa-check"></i><b>5.8.14</b> group_by()</a></li>
<li class="chapter" data-level="5.8.15" data-path="tidyverse.html"><a href="tidyverse.html#summarise"><i class="fa fa-check"></i><b>5.8.15</b> summarise()</a></li>
<li class="chapter" data-level="5.8.16" data-path="tidyverse.html"><a href="tidyverse.html#bind_rows-e-bind_cols"><i class="fa fa-check"></i><b>5.8.16</b> bind_rows() e bind_cols()</a></li>
<li class="chapter" data-level="5.8.17" data-path="tidyverse.html"><a href="tidyverse.html#join"><i class="fa fa-check"></i><b>5.8.17</b> *_join()</a></li>
<li class="chapter" data-level="5.8.18" data-path="tidyverse.html"><a href="tidyverse.html#opera√ß√µes-de-conjuntos-e-compara√ß√£o-de-dados"><i class="fa fa-check"></i><b>5.8.18</b> Opera√ß√µes de conjuntos e compara√ß√£o de dados</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="tidyverse.html"><a href="tidyverse.html#stringr"><i class="fa fa-check"></i><b>5.9</b> stringr</a></li>
<li class="chapter" data-level="5.10" data-path="tidyverse.html"><a href="tidyverse.html#forcats"><i class="fa fa-check"></i><b>5.10</b> forcats</a></li>
<li class="chapter" data-level="5.11" data-path="tidyverse.html"><a href="tidyverse.html#lubridate"><i class="fa fa-check"></i><b>5.11</b> lubridate</a></li>
<li class="chapter" data-level="5.12" data-path="tidyverse.html"><a href="tidyverse.html#purrr"><i class="fa fa-check"></i><b>5.12</b> purrr</a></li>
<li class="chapter" data-level="5.13" data-path="tidyverse.html"><a href="tidyverse.html#exerc√≠cios"><i class="fa fa-check"></i><b>5.13</b> Exerc√≠cios</a></li>
<li class="chapter" data-level="5.14" data-path="tidyverse.html"><a href="tidyverse.html#para-se-aprofundar"><i class="fa fa-check"></i><b>5.14</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gr√°ficos.html"><a href="gr√°ficos.html"><i class="fa fa-check"></i><b>6</b> Gr√°ficos</a></li>
<li class="chapter" data-level="7" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html"><i class="fa fa-check"></i><b>7</b> Estat√≠stica b√°sica</a>
<ul>
<li class="chapter" data-level="7.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#teste-t-de-student-para-duas-amostras-independentes"><i class="fa fa-check"></i><b>7.1</b> Teste T (de Student) para duas amostras independentes</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise"><i class="fa fa-check"></i><b>7.1.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.1.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise"><i class="fa fa-check"></i><b>7.1.2</b> An√°lise</a></li>
<li class="chapter" data-level="7.1.3" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-1"><i class="fa fa-check"></i><b>7.1.3</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#teste-t-para-amostras-pareadas"><i class="fa fa-check"></i><b>7.2</b> Teste T para amostras pareadas</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-1"><i class="fa fa-check"></i><b>7.2.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.2.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-2"><i class="fa fa-check"></i><b>7.2.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#correla√ß√£o-de-pearson"><i class="fa fa-check"></i><b>7.3</b> Correla√ß√£o de Pearson</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-2"><i class="fa fa-check"></i><b>7.3.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.3.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-3"><i class="fa fa-check"></i><b>7.3.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#regress√£o-simples"><i class="fa fa-check"></i><b>7.4</b> Regress√£o Simples</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-3"><i class="fa fa-check"></i><b>7.4.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.4.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-4"><i class="fa fa-check"></i><b>7.4.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#regress√£o-m√∫ltipla"><i class="fa fa-check"></i><b>7.5</b> Regress√£o M√∫ltipla</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-4"><i class="fa fa-check"></i><b>7.5.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.5.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-5"><i class="fa fa-check"></i><b>7.5.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lises-de-vari√¢ncia-anova"><i class="fa fa-check"></i><b>7.6</b> An√°lises de Vari√¢ncia (ANOVA)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-5"><i class="fa fa-check"></i><b>7.6.1</b> Backgorund da an√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#anova-de-um-fator"><i class="fa fa-check"></i><b>7.7</b> ANOVA de um fator</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-6"><i class="fa fa-check"></i><b>7.7.1</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#anova-de-dois-fatores-ou-anova-fatorial"><i class="fa fa-check"></i><b>7.8</b> ANOVA de dois fatores ou Anova fatorial</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-7"><i class="fa fa-check"></i><b>7.8.1</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#anova-em-blocos-aleatorizados"><i class="fa fa-check"></i><b>7.9</b> ANOVA em blocos aleatorizados</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-8"><i class="fa fa-check"></i><b>7.9.1</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-de-covari√¢ncia-ancova"><i class="fa fa-check"></i><b>7.10</b> An√°lise de covari√¢ncia (ANCOVA)</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-9"><i class="fa fa-check"></i><b>7.10.1</b> An√°lise</a></li>
<li class="chapter" data-level="7.10.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#para-se-aprofundar-1"><i class="fa fa-check"></i><b>7.10.2</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="an√°lises-univariadas-glm.html"><a href="an√°lises-univariadas-glm.html"><i class="fa fa-check"></i><b>8</b> An√°lises univariadas - GLM</a></li>
<li class="chapter" data-level="9" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><i class="fa fa-check"></i><b>9</b> Introdu√ß√£o √† An√°lises Multidimensionais</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#backgorund-da-an√°lise-6"><i class="fa fa-check"></i><b>9.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="9.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-1"><i class="fa fa-check"></i><b>9.2</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#explica√ß√£o-da-an√°lise"><i class="fa fa-check"></i><b>9.2.1</b> Explica√ß√£o da an√°lise</a></li>
<li class="chapter" data-level="9.2.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#an√°lise-10"><i class="fa fa-check"></i><b>9.2.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-2"><i class="fa fa-check"></i><b>9.3</b> Exemplo 2:</a></li>
<li class="chapter" data-level="9.4" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#backgorund-da-an√°lise-7"><i class="fa fa-check"></i><b>9.4</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="9.5" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-1-1"><i class="fa fa-check"></i><b>9.5</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#explica√ß√£o-da-an√°lise-1"><i class="fa fa-check"></i><b>9.5.1</b> Explica√ß√£o da an√°lise</a></li>
<li class="chapter" data-level="9.5.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#an√°lise-11"><i class="fa fa-check"></i><b>9.5.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#backgorund-da-an√°lise-8"><i class="fa fa-check"></i><b>9.6</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="9.7" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-1-2"><i class="fa fa-check"></i><b>9.7</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#explica√ß√£o-da-an√°lise-2"><i class="fa fa-check"></i><b>9.7.1</b> Explica√ß√£o da an√°lise</a></li>
<li class="chapter" data-level="9.7.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#an√°lise-12"><i class="fa fa-check"></i><b>9.7.2</b> An√°lise</a></li>
<li class="chapter" data-level="9.7.3" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#para-se-aprofundar-2"><i class="fa fa-check"></i><b>9.7.3</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html"><i class="fa fa-check"></i><b>10</b> Rarefa√ß√£o</a>
<ul>
<li class="chapter" data-level="10.1" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#background-da-an√°lise"><i class="fa fa-check"></i><b>10.1</b> Background da an√°lise</a></li>
<li class="chapter" data-level="10.2" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#exemplo-pr√°tico-1---morcegos"><i class="fa fa-check"></i><b>10.2</b> Exemplo pr√°tico 1 - Morcegos</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#explica√ß√£o"><i class="fa fa-check"></i><b>10.2.1</b> Explica√ß√£o</a></li>
<li class="chapter" data-level="10.2.2" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#an√°lise-13"><i class="fa fa-check"></i><b>10.2.2</b> An√°lise</a></li>
<li class="chapter" data-level="10.2.3" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#interpreta√ß√£o-dos-resultados-1"><i class="fa fa-check"></i><b>10.2.3</b> Interpreta√ß√£o dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#exemplo-pr√°tico-2---rarefa√ß√£o"><i class="fa fa-check"></i><b>10.3</b> Exemplo pr√°tico 2 - Rarefa√ß√£o</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#explica√ß√£o-1"><i class="fa fa-check"></i><b>10.3.1</b> Explica√ß√£o</a></li>
<li class="chapter" data-level="10.3.2" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#an√°lise-14"><i class="fa fa-check"></i><b>10.3.2</b> An√°lise</a></li>
<li class="chapter" data-level="10.3.3" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#interpreta√ß√£o-dos-resultados-2"><i class="fa fa-check"></i><b>10.3.3</b> Interpreta√ß√£o dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#para-se-aprofundar-3"><i class="fa fa-check"></i><b>10.4</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html"><i class="fa fa-check"></i><b>11</b> Estimadores de Riqueza</a>
<ul>
<li class="chapter" data-level="11.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#backgorund-da-an√°lise-9"><i class="fa fa-check"></i><b>11.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="11.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-abund√¢ncia-das-esp√©cies"><i class="fa fa-check"></i><b>11.2</b> Estimadores baseados na abund√¢ncia das esp√©cies</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-1---chao-1984-1987"><i class="fa fa-check"></i><b>11.2.1</b> CHAO 1 - (Chao 1984, 1987):</a></li>
<li class="chapter" data-level="11.2.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-15"><i class="fa fa-check"></i><b>11.2.2</b> An√°lise</a></li>
<li class="chapter" data-level="11.2.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#ace---abundance-based-coverage-estimador-chao-lee-1992-chao-et-al.-2000"><i class="fa fa-check"></i><b>11.2.3</b> ACE - <em>Abundance-based Coverage Estimador</em> (Chao &amp; Lee 1992, Chao et al.¬†2000):</a></li>
<li class="chapter" data-level="11.2.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-16"><i class="fa fa-check"></i><b>11.2.4</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-incid√™ncia-das-esp√©cies"><i class="fa fa-check"></i><b>11.3</b> Estimadores baseados na incid√™ncia das esp√©cies</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-2---chao-1987"><i class="fa fa-check"></i><b>11.3.1</b> CHAO 2 - (Chao 1987):</a></li>
<li class="chapter" data-level="11.3.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-17"><i class="fa fa-check"></i><b>11.3.2</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-1-burnham-overton-1978-1979"><i class="fa fa-check"></i><b>11.3.3</b> JACKKNIFE 1 (Burnham &amp; Overton 1978, 1979):</a></li>
<li class="chapter" data-level="11.3.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-18"><i class="fa fa-check"></i><b>11.3.4</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.5" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-2-burnham-overton-1978-1979-palmer-1991"><i class="fa fa-check"></i><b>11.3.5</b> JACKKNIFE 2 (Burnham &amp; Overton 1978, 1979, Palmer 1991):</a></li>
<li class="chapter" data-level="11.3.6" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-19"><i class="fa fa-check"></i><b>11.3.6</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.7" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#bootstrap-smith-van-belle-1984"><i class="fa fa-check"></i><b>11.3.7</b> BOOTSTRAP (Smith &amp; van Belle 1984):</a></li>
<li class="chapter" data-level="11.3.8" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-20"><i class="fa fa-check"></i><b>11.3.8</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.9" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#interpola√ß√£o-e-extrapola√ß√£o-baseadas-em-rarefa√ß√£o-usando-amostragens-de-incid√™ncia-ou-abund√¢ncia-chao-jost-2012-colwell-et-al.-2012"><i class="fa fa-check"></i><b>11.3.9</b> Interpola√ß√£o e Extrapola√ß√£o baseadas em rarefa√ß√£o usando amostragens de incid√™ncia ou abund√¢ncia (Chao &amp; Jost 2012, Colwell et al.¬†2012):</a></li>
<li class="chapter" data-level="11.3.10" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-21"><i class="fa fa-check"></i><b>11.3.10</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#para-se-aprofundar-4"><i class="fa fa-check"></i><b>11.3.11</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html"><i class="fa fa-check"></i><b>12</b> Diversidade Taxon√¥mica</a>
<ul>
<li class="chapter" data-level="12.1" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diversidade-alfa-ùõÇ"><i class="fa fa-check"></i><b>12.1</b> Diversidade alfa (ùõÇ)</a></li>
<li class="chapter" data-level="12.2" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#riqueza-de-esp√©cies-ou-n√∫mero-de-esp√©cies"><i class="fa fa-check"></i><b>12.2</b> Riqueza de esp√©cies ou n√∫mero de esp√©cies</a></li>
<li class="chapter" data-level="12.3" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diversidade-de-esp√©cies"><i class="fa fa-check"></i><b>12.3</b> Diversidade de esp√©cies</a></li>
<li class="chapter" data-level="12.4" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diagramas-de-whittaker-ou-curva-de-domin√¢ncia"><i class="fa fa-check"></i><b>12.4</b> Diagramas de Whittaker ou Curva de Domin√¢ncia</a></li>
<li class="chapter" data-level="12.5" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#n√∫meros-de-hill"><i class="fa fa-check"></i><b>12.5</b> N√∫meros de Hill</a></li>
<li class="chapter" data-level="12.6" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diversidade-beta-ùõÉ"><i class="fa fa-check"></i><b>12.6</b> Diversidade beta (ùõÉ)</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#para-se-aprofundar-5"><i class="fa fa-check"></i><b>12.6.1</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="diversidade-filogen√©tica.html"><a href="diversidade-filogen√©tica.html"><i class="fa fa-check"></i><b>13</b> Diversidade filogen√©tica</a></li>
<li class="chapter" data-level="14" data-path="diversidade-funcional.html"><a href="diversidade-funcional.html"><i class="fa fa-check"></i><b>14</b> Diversidade funcional</a></li>
<li class="chapter" data-level="15" data-path="dados-geograficos.html"><a href="dados-geograficos.html"><i class="fa fa-check"></i><b>15</b> Dados geogr√°ficos no R</a>
<ul>
<li class="chapter" data-level="15.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#introdu√ß√£o-3"><i class="fa fa-check"></i><b>15.1</b> Introdu√ß√£o</a></li>
<li class="chapter" data-level="15.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pr√©-requisitos-2"><i class="fa fa-check"></i><b>15.2</b> Pr√©-requisitos</a></li>
<li class="chapter" data-level="15.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-1"><i class="fa fa-check"></i><b>15.3</b> Vetor</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pontos"><i class="fa fa-check"></i><b>15.3.1</b> Pontos</a></li>
<li class="chapter" data-level="15.3.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#linhas"><i class="fa fa-check"></i><b>15.3.2</b> Linhas</a></li>
<li class="chapter" data-level="15.3.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pol√≠gonos"><i class="fa fa-check"></i><b>15.3.3</b> Pol√≠gonos</a></li>
<li class="chapter" data-level="15.3.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tabela-de-atributos"><i class="fa fa-check"></i><b>15.3.4</b> Tabela de atributos</a></li>
<li class="chapter" data-level="15.3.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sf-principal-pacote-no-r-para-dados-vetoriais"><i class="fa fa-check"></i><b>15.3.5</b> <em>sf</em>: principal pacote no R para dados vetoriais</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster"><i class="fa fa-check"></i><b>15.4</b> Raster</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tipos-de-raster"><i class="fa fa-check"></i><b>15.4.1</b> Tipos de raster</a></li>
<li class="chapter" data-level="15.4.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-principal-pacote-no-r-para-dados-raster"><i class="fa fa-check"></i><b>15.4.2</b> <em>raster</em>: principal pacote no R para dados raster</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-refer√™ncia-de-coordenadas-e-unidades"><i class="fa fa-check"></i><b>15.5</b> Sistema de Refer√™ncia de Coordenadas e Unidades</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-geogr√°ficas"><i class="fa fa-check"></i><b>15.5.1</b> Sistema de Coordenadas Geogr√°ficas</a></li>
<li class="chapter" data-level="15.5.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-projetadas"><i class="fa fa-check"></i><b>15.5.2</b> Sistema de Coordenadas Projetadas</a></li>
<li class="chapter" data-level="15.5.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#datum"><i class="fa fa-check"></i><b>15.5.3</b> Datum</a></li>
<li class="chapter" data-level="15.5.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-refer√™ncia-de-coordenadas-crs-no-r"><i class="fa fa-check"></i><b>15.5.4</b> Sistema de Refer√™ncia de Coordenadas (CRS) no R</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-fontes-de-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.6</b> Principais fontes de dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-2"><i class="fa fa-check"></i><b>15.6.1</b> Vetor</a></li>
<li class="chapter" data-level="15.6.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-1"><i class="fa fa-check"></i><b>15.6.2</b> Raster</a></li>
<li class="chapter" data-level="15.6.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pacotes-do-r"><i class="fa fa-check"></i><b>15.6.3</b> Pacotes do R</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-e-exportar-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.7</b> Importar e exportar dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-formatos-de-arquivos-geogr√°ficos"><i class="fa fa-check"></i><b>15.7.1</b> Principais formatos de arquivos geogr√°ficos</a></li>
<li class="chapter" data-level="15.7.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-dados-1"><i class="fa fa-check"></i><b>15.7.2</b> Importar dados</a></li>
<li class="chapter" data-level="15.7.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exportar-dados-1"><i class="fa fa-check"></i><b>15.7.3</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="dados-geograficos.html"><a href="dados-geograficos.html#descri√ß√£o-de-objetos-espaciais"><i class="fa fa-check"></i><b>15.8</b> Descri√ß√£o de objetos espaciais</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-5"><i class="fa fa-check"></i><b>15.8.1</b> Vetor</a></li>
<li class="chapter" data-level="15.8.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-4"><i class="fa fa-check"></i><b>15.8.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="dados-geograficos.html"><a href="dados-geograficos.html#reproje√ß√£o-de-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.9</b> Reproje√ß√£o de dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.9.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-6"><i class="fa fa-check"></i><b>15.9.1</b> Vetor</a></li>
<li class="chapter" data-level="15.9.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-5"><i class="fa fa-check"></i><b>15.9.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.10" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-opera√ß√µes-com-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.10</b> Principais opera√ß√µes com dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.10.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#opera√ß√µes-de-atributos"><i class="fa fa-check"></i><b>15.10.1</b> Opera√ß√µes de atributos</a></li>
<li class="chapter" data-level="15.10.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#opera√ß√µes-espaciais"><i class="fa fa-check"></i><b>15.10.2</b> Opera√ß√µes espaciais</a></li>
<li class="chapter" data-level="15.10.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#opera√ß√µes-geom√©tricas"><i class="fa fa-check"></i><b>15.10.3</b> Opera√ß√µes geom√©tricas</a></li>
</ul></li>
<li class="chapter" data-level="15.11" data-path="dados-geograficos.html"><a href="dados-geograficos.html#visualiza√ß√£o-de-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.11</b> Visualiza√ß√£o de dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.11.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-elementos-de-um-mapa"><i class="fa fa-check"></i><b>15.11.1</b> Principais elementos de um mapa</a></li>
<li class="chapter" data-level="15.11.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-pacotes-para-a-composi√ß√£o-de-mapas"><i class="fa fa-check"></i><b>15.11.2</b> Principais pacotes para a composi√ß√£o de mapas</a></li>
<li class="chapter" data-level="15.11.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-est√°ticos"><i class="fa fa-check"></i><b>15.11.3</b> Mapas est√°ticos</a></li>
<li class="chapter" data-level="15.11.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-animados"><i class="fa fa-check"></i><b>15.11.4</b> Mapas animados</a></li>
<li class="chapter" data-level="15.11.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-interativos"><i class="fa fa-check"></i><b>15.11.5</b> Mapas interativos</a></li>
</ul></li>
<li class="chapter" data-level="15.12" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exemplos-de-aplica√ß√µes-de-an√°lises-geogr√°ficas-para-dados-ecol√≥gicos"><i class="fa fa-check"></i><b>15.12</b> Exemplos de aplica√ß√µes de an√°lises geogr√°ficas para dados ecol√≥gicos</a>
<ul>
<li class="chapter" data-level="15.12.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#resumir-informa√ß√µes-de-biodiversidade-para-unidades-espaciais"><i class="fa fa-check"></i><b>15.12.1</b> Resumir informa√ß√µes de biodiversidade para unidades espaciais</a></li>
<li class="chapter" data-level="15.12.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#atribui√ß√£o-de-dados-clim√°ticos-para-pontos"><i class="fa fa-check"></i><b>15.12.2</b> Atribui√ß√£o de dados clim√°ticos para pontos</a></li>
<li class="chapter" data-level="15.12.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#predi√ß√µes-espaciais-de-objetos-raster"><i class="fa fa-check"></i><b>15.12.3</b> Predi√ß√µes espaciais de objetos raster</a></li>
</ul></li>
<li class="chapter" data-level="15.13" data-path="dados-geograficos.html"><a href="dados-geograficos.html#para-se-aprofundar-6"><i class="fa fa-check"></i><b>15.13</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><i class="fa fa-check"></i><b>16</b> Reprodutibilidade em pesquisa e gerenciamento de dados</a>
<ul>
<li class="chapter" data-level="16.1" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#gest√£o-de-projetos-acad√™micos-no-rstudio"><i class="fa fa-check"></i><b>16.1</b> Gest√£o de projetos acad√™micos no RStudio</a></li>
<li class="chapter" data-level="16.2" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#documentos-din√¢micos-r-markdown"><i class="fa fa-check"></i><b>16.2</b> Documentos din√¢micos (R Markdown)</a></li>
<li class="chapter" data-level="16.3" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#controle-de-vers√£o-git-e-github"><i class="fa fa-check"></i><b>16.3</b> Controle de vers√£o, Git e GitHub</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1" number="5">
<h1><span class="header-section-number">Cap√≠tulo 5</span> Tidyverse</h1>
<div id="contextualiza√ß√£o" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Contextualiza√ß√£o</h2>
<p>Como todo idioma, a linguagem R vem passando por transforma√ß√µes nos √∫ltimos anos. Grande parte dessas mudan√ßas est√£o dentro do paradigma da <strong>Ci√™ncia de Dados (<em>Data Science</em>)</strong>, uma nova √°rea de conhecimento que vem se moldando acompanhando o desenvolvimento da sociedade em torno da era digital e da grande quantidade de dados gerados e dispon√≠veis pela internet e computa√ß√£o, de onde adv√©m os pilares das inova√ß√µes tecnol√≥gicas: <em>Big Data</em>, <em>Machine Learning</em>, e <em>Internet of Things</em>.</p>
<p>A grande necessidade de computa√ß√£o parapara desenvolver essa nova abordagem, colocaram o <strong>R e o Python</strong> como as <strong>principais linguagens de programa√ß√£o</strong> frente √† esses novos desafios. Apesar de n√£o serem as √∫nicas utilizadas para esses prop√≥sitos, elas rapidamente se tornaram uma das <strong>melhores escolhas</strong>, dado v√°rios fatores como: serem livres, possuir comunidade ativa, grande e contribuidora, serem linguagens de interpreta√ß√£o (orientadas √† objeto), e relativamente f√°ceis de serem aprendidas.</p>
<p>Essas mudan√ßas e adapta√ß√µes da linguagem R para a Ci√™ncia de Dados come√ßaram √† ser implementadas principalmente devido a um pesquisador, <a href="http://hadley.nz/">Hadley Wickham</a>, que iniciou sua contribui√ß√£o √† comunidade R com o desenvolvimento do j√° consagrado pacote <em>ggplot2</em> (Wickham 2009, Wickham 2016) para a composi√ß√£o de gr√°ficos no R (ver mais no cap√≠tulo XX), baseado na gram√°tica de gr√°ficos (Wilkinson 2005).</p>
<p>Depois disso, Wickham dedicou-se ao desenvolvimento do pensamento de uma nova abordagem dentro do manejo de dados, denominada de <strong>Tidy Data</strong> (Dados organizados) (Wickhan 2014), na qual focou na limpeza de dados. A ideia, relativamente simples, diz que dados est√£o <strong>tidy</strong> quando <strong>vari√°veis est√£o nas colunas</strong>, <strong>observa√ß√µes est√£o nas linhas</strong> e <strong>valores est√£o nas c√©lulas</strong>, sendo que para esse √∫ltimo, n√£o deve haver mais de um valor por c√©lula (Figura <a href="tidyverse.html#fig:fig-r-dados-tidy">5.2</a>).</p>
<p>√Ä partir dessas ideias, o <a href="https://www.tidyverse.org/"><em>tidyverse</em></a> foi operacionalizado no R como uma cole√ß√£o de pacotes R que atuam no <strong>workflow comum da ci√™ncia de dados</strong>: importa√ß√£o, manipula√ß√£o, explora√ß√£o, visualiza√ß√£o, an√°lise e comunica√ß√£o de dados e an√°lises (Wickhan et al.¬†2019) (Figura <a href="tidyverse.html#fig:fig-r-tidyverse">5.1</a>). O principal objetivo do <strong>Tidyverse</strong> √© aproximar a linguagem para melhorar a intera√ß√£o entre ser humano e computador sobre dados, de modo que os pacotes compartilham uma filosofia de design de alto n√≠vel e gram√°tica, al√©m da estrutura de dados de baixo n√≠vel (Wickhan et al.¬†2019).</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-tidyverse"></span>
<img src="img/cap04_fig01.png" alt="Modelo das ferramentas necess√°rias em um projeto t√≠pico de ci√™ncia de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto √† essas ferramentas est√° a programa√ß√£o. Adaptado de: Wickhan &amp; Grolemund (2017)." width="90%" />
<p class="caption">
Figura 5.1: Modelo das ferramentas necess√°rias em um projeto t√≠pico de ci√™ncia de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto √† essas ferramentas est√° a programa√ß√£o. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>As principais leituras sobre o tema no R s√£o os artigos Wickham (2014), Wickham et al.¬†(2019), o livro Wickhan &amp; Grolemund (2017), dispon√≠vel on-line neste <a href="https://r4ds.had.co.nz/">link</a>, al√©m do <a href="https://www.tidyverse.org/">site</a> que possui muito mais informa√ß√µes.</p>
</div>
<div id="tidyverse-1" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> <em>tidyverse</em></h2>
<p>Uma vez instalado e carregado, o pacote tidyverse <strong>disponibiliza um conjunto de ferramentas</strong> atrav√©s de v√°rios pacotes. Esses pacotes <strong>compartilham</strong> uma filosofia de design, gram√°tica e estruturas de dados. Podemos entender o <em>tidyverse</em> como um ‚Äúdialeto novo‚Äù para a linguagem R, onde <strong>tidy</strong> quer dizer organizado, arrumado, ordenado, e <strong>verse</strong> √© universo.</p>
<ul>
<li><a href="https://readr.tidyverse.org/"><em>readr</em></a>: importa dados tabulares (.csv e .txt)</li>
<li><a href="https://tibble.tidyverse.org/"><em>tibble</em></a>: implementou o ‚Äútibble,‚Äù com melhorias na classe <code>dataframe</code></li>
<li><a href="https://tidyr.tidyverse.org/"><em>tidyr</em></a>: facilita a transforma√ß√£o de dados para <em>tidy</em></li>
<li><a href="https://dplyr.tidyverse.org/"><em>dplyr</em></a>: facilita a manipula√ß√£o de dados</li>
<li><a href="https://github.com/tidyverse/stringr"><em>stringr</em></a>: facilita a manipula√ß√£o de caracteres</li>
<li><a href="https://github.com/hadley/forcats"><em>forcats</em></a>: facilita a manipula√ß√£o de fatores</li>
<li><a href="https://ggplot2.tidyverse.org/"><em>ggplot2</em></a>: visualiza√ß√£o de dados</li>
<li><a href="https://purrr.tidyverse.org/"><em>purrr</em></a>: programa√ß√£o funcional</li>
</ul>
<p>Al√©m desses principais, fazemos a men√ß√£o de <strong>outros pacotes que est√£o dentro dessa aborgagem</strong>, e que trataremos ainda neste cap√≠tulo, em outro momento do livro, ou que voc√™ leitor(a) deve se familiarizar.</p>
<ul>
<li><a href="https://readxl.tidyverse.org/"><em>readxl</em></a> e <a href="https://cran.r-project.org/package=writexl"><em>writexl</em></a>: importa e exporta dados tabulares (.xlsx)</li>
<li><a href="https://github.com/rstats-db/DBI"><em>DBI</em></a>: interface de banco de dados R</li>
<li><a href="https://github.com/tidyverse/haven"><em>haven</em></a>: importa e exporta dados do SPSS, Stata e SAS</li>
<li><a href="https://github.com/r-lib/httr"><em>httr</em></a>: ferramentas para trabalhar com URLs e HTTP</li>
<li><a href="https://github.com/tidyverse/rvest"><em>rvest</em></a>: coletar facilmente (raspe) p√°ginas da web</li>
<li><a href="https://github.com/r-lib/xml2"><em>xml2</em></a>: trabalhar com arquivos XML</li>
<li><a href="https://github.com/jeroen/jsonlite"><em>jsonlite</em></a>: um analisador e gerador JSON simples e robusto para R</li>
<li><a href="https://github.com/rstats-db/hms"><em>hms</em></a>: hora do dia</li>
<li><a href="https://github.com/tidyverse/lubridate"><em>lubridate</em></a>: facilita o tratamento de datas</li>
<li><a href="https://magrittr.tidyverse.org/"><em>magrittr</em></a>: prov√™ os operadores pipe (<code>%&gt;%</code>, <code>%$%</code>, <code>%&lt;&gt;%</code>)</li>
<li><a href="https://github.com/tidyverse/glue"><em>glue</em></a>: facilita combinar dados e caracteres</li>
<li><a href="https://rmarkdown.rstudio.com/"><em>rmarkdown</em></a>: cria documentos de an√°lise din√¢mica que combinam c√≥digo, sa√≠da renderizada (como figuras) e texto</li>
<li><a href="https://yihui.org/knitr/"><em>knitr</em></a>: projetado para ser um mecanismo transparente para gera√ß√£o de relat√≥rios din√¢micos com R</li>
<li><a href="https://shiny.rstudio.com/"><em>shiny</em></a>: framework de aplicativo Web para R</li>
<li><a href="https://rmarkdown.rstudio.com/flexdashboard/"><em>flexdashboard</em></a>: pain√©is interativos para R</li>
<li><a href="https://here.r-lib.org/"><em>here</em></a>: facilita a defini√ß√£o de diret√≥rios</li>
<li><a href="https://usethis.r-lib.org/"><em>usethis</em></a>: automatiza tarefas durante a configura√ß√£o e desenvolvimento de projetos (Git, ‚ÄòGitHub‚Äô e Projetos RStudio)</li>
<li><a href="https://rdatatable.gitlab.io/data.table/"><em>data.table</em></a>: pacote que fornece uma vers√£o de alto desempenho do <code>data.frame</code> (importar, manipular e expotar)</li>
<li><a href="https://rstudio.github.io/reticulate/"><em>reticulate</em></a>: pacote que fornece ferramentas para integrar Python e R</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: interface R para Apache Spark</li>
<li><a href="https://github.com/tidymodels/broom"><em>broom</em></a>: converte objetos estat√≠sticos em tibbles organizados</li>
<li><a href="https://github.com/tidyverse/modelr"><em>modelr</em></a>: fun√ß√µes de modelagem que funcionam com o pipe</li>
<li><a href="https://www.tidymodels.org/"><em>tidymodels</em></a>: cole√ß√£o de pacotes para modelagem e aprendizado de m√°quina usando os princ√≠pios do tidyverse</li>
</ul>
<p>Para instalar os pacotes do <em>tidyverse</em>, rode o comando abaixo:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="tidyverse.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote tidyverse</span></span>
<span id="cb1-2"><a href="tidyverse.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Quando carregamos o pacote <em>tidyverse</em>, notamos uma mensagem indicando quais pacotes foram carregados, suas repectivas vers√µes e os conflitos com outros pacotes.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="tidyverse.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote tidyverse</span></span>
<span id="cb2-2"><a href="tidyverse.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ‚îÄ‚îÄ Attaching packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 1.3.0 ‚îÄ‚îÄ</code></pre>
<pre><code>## ‚úì ggplot2 3.3.3     ‚úì purrr   0.3.4
## ‚úì tibble  3.1.0     ‚úì dplyr   1.0.5
## ‚úì tidyr   1.1.3     ‚úì stringr 1.4.0
## ‚úì readr   1.4.0     ‚úì forcats 0.5.1</code></pre>
<pre><code>## ‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Podemos ainda <strong>listar todos os pacotes</strong> do <strong>tidyverse</strong> com a fun√ß√£o <code>tidyverse::tidyverse_packages()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="tidyverse.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os pacotes no tidyverse </span></span>
<span id="cb6-2"><a href="tidyverse.html#cb6-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_packages</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;broom&quot;      &quot;cli&quot;        &quot;crayon&quot;     &quot;dbplyr&quot;     &quot;dplyr&quot;     
##  [6] &quot;forcats&quot;    &quot;ggplot2&quot;    &quot;haven&quot;      &quot;hms&quot;        &quot;httr&quot;      
## [11] &quot;jsonlite&quot;   &quot;lubridate&quot;  &quot;magrittr&quot;   &quot;modelr&quot;     &quot;pillar&quot;    
## [16] &quot;purrr&quot;      &quot;readr&quot;      &quot;readxl&quot;     &quot;reprex&quot;     &quot;rlang&quot;     
## [21] &quot;rstudioapi&quot; &quot;rvest&quot;      &quot;stringr&quot;    &quot;tibble&quot;     &quot;tidyr&quot;     
## [26] &quot;xml2&quot;       &quot;tidyverse&quot;</code></pre>
<p>Tamb√©m podemos <strong>verificar os pacotes para serem atualizados</strong> com a fun√ß√£o <code>tidyverse::tidyverse_update()</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="tidyverse.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar e atualizar os pacotes no tidyverse </span></span>
<span id="cb8-2"><a href="tidyverse.html#cb8-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_update</span>()</span></code></pre></div>
<pre><code>## All tidyverse packages up-to-date</code></pre>
<p>Todas as fun√ß√µes dos pacotes tidyverse us√£o <strong>fonte min√∫scula</strong> e <strong>usam <code>_</code> (<em>underscore</em>)</strong> para separar os nomes internos das fun√ß√µes, seguindo a mesma sintaxe do Python (‚ÄúSnake Case‚Äù). Neste sentido de padroniza√ß√£o, √© importante destacar ainda que existe um guia pr√≥prio para que os scripts sigam a recomenda√ß√£o de padroniza√ß√£o, o <a href="https://style.tidyverse.org/">The tidyverse style guide</a>, criado pelo Hadley Wickham. Para os desenvolvedores, existe o <a href="https://design.tidyverse.org/">Tidyverse design guide</a> criado pelo <em>Tidyverse team</em>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="tidyverse.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes no formato snake_case</span></span>
<span id="cb10-2"><a href="tidyverse.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()</span>
<span id="cb10-3"><a href="tidyverse.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_xlsx</span>()</span>
<span id="cb10-4"><a href="tidyverse.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>()</span>
<span id="cb10-5"><a href="tidyverse.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>()</span>
<span id="cb10-6"><a href="tidyverse.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>()</span></code></pre></div>
<p>Por fim, para evitar poss√≠veis <strong>conflitos de fun√ß√µes com o mesmo nome entre pacotes</strong>, recomendamos fortemente o h√°bito de usar as fun√ß√µes seguido do operador <code>::</code>. Assim, garante-se que a <strong>fun√ß√£o utilizada √© referente ao pacote daquela fun√ß√£o</strong>. Segue um exemplo com as fun√ß√µes apresentadas anteriormente.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tidyverse.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes seguidas de seus respectivos pacotes</span></span>
<span id="cb11-2"><a href="tidyverse.html#cb11-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>()</span>
<span id="cb11-3"><a href="tidyverse.html#cb11-3" aria-hidden="true" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_xlsx</span>()</span>
<span id="cb11-4"><a href="tidyverse.html#cb11-4" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb11-5"><a href="tidyverse.html#cb11-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>()</span>
<span id="cb11-6"><a href="tidyverse.html#cb11-6" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>()</span></code></pre></div>
<p>Seguindo essas ideias de organiza√ß√£o de dados, outro conjunto de pacotes foi desenvolvido, chamado de <a href="https://www.tidymodels.org/"><em>tidymodels</em></a> que atuam no <strong>workflow da an√°lise de dados</strong> em ci√™ncia de dados: separa√ß√£o e reamostragem, pre-processamento, ajuste de modelos e m√©tricas de performace de ajustes. Por raz√µes de espa√ßo e especificidade, n√£o entraremos em detalhes dessa abordagem.</p>
<p>Seguindo o workflow da Figura <a href="tidyverse.html#fig:fig-r-tidyverse">5.1</a>, iremos ver nos itens das pr√≥ximas se√ß√µes como esses passos s√£o realizados com fun√ß√µes de cada pacote.</p>
</div>
<div id="here" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> here</h2>
<p>Dentro do <strong>workflow do tidyverse</strong>, devemos sempre trabalhar com <strong>Projetos do RStudio</strong>, um tema que focamos com mais detalhes na se√ß√£o XX. Junto com o projeto, tamb√©m podemos fazer uso do pacote <em>here</em>. Ele permite <strong>construir caminhos</strong> para os arquivos do projeto de forma mais simples e com maior reprodutibilidade.</p>
<p>Esse pacote cobre o ponto que discutimos na se√ß√£o XX, dado que muitas vezes <strong>mudar o diret√≥rio</strong> com a fun√ß√£o <code>setwd()</code> tende a ser <strong>demorado</strong>, principalmente quando se trata de um <strong>script em que v√°rias pessoas est√£o trabalhando</strong> em diferentes computadores e sistemas operacionais. Al√©m disso, ele elimina a quest√£o da <strong>fragilidade</strong> dos scripts, pois geralmente um script est√° com os diret√≥rios conectados exatamente a um lugar e a um momento. Por fim, ele tamb√©m <strong>simplifica o trabalho com subdiret√≥rios</strong>, facilitando importar ou exportar arquivos de ou para subpastas.</p>
<p>Seu uso √© relativamente simples: uma vez criado e aberto o RStudio pelo <strong>Projeto do RStudio</strong>, o diret√≥rio automaticamente √© definido para o diret√≥rio do projeto. Depois disso, podemos usar a fun√ß√£o <code>here::here()</code> para definir os subdiret√≥rios onde est√£o os dados. O exemplo da aplica√ß√£o fica para a se√ß√£o seguinte, quando iremos de fato importar um arquivo para o R. Logo abaixo, mostramos como instalar e carregar o pacote <em>here</em>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="tidyverse.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb12-2"><a href="tidyverse.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb12-3"><a href="tidyverse.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="tidyverse.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb12-5"><a href="tidyverse.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
</div>
<div id="readr-readxl-e-writexl" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> readr, readxl e writexl</h2>
<p>Dado que possu√≠mos um conjuntos de dados e que geralmente esse conjunto de dados estar√° no formato tabular com umas das extens√µes: .csv, .txt ou .xlsx, iremos usar o pacote <em>readr</em> ou <em>readxl</em> para importar esses dados para o R.</p>
<p>Esses pacotes <strong>leem e escrevem grandes arquivos de forma mais r√°pida</strong>, al√©m de fornecem <strong>medidores de progresso</strong> de importa√ß√£o e exporta√ß√£o, e imprimir a <strong>informa√ß√£o dos modos das colunas</strong> quando faz a importa√ß√£o. Outro ponto bastante positivo, √© que tamb√©m <strong>classificam automaticamente</strong> o modo dos dados de cada coluna, i.e., se uma coluna possui dados num√©ricos ou apenas texto, essa informa√ß√£o ser√° considerada para classificar a coluna toda. A <strong>classe do objeto</strong> atribu√≠do quando lido por esses pacotes √© automaticamente um ‚Äútibble,‚Äù que veremos melhor na se√ß√£o seguinte.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://readr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Usamos as fun√ß√µes <code>readr::read_csv()</code> e <code>readr::write_csv()</code> para importar e exportar arquivos .csv do R, respectivamente. Para dados com a extens√£o .txt, podemos utilizar as fun√ß√µes <code>readr::read_tsv()</code> ou ainda <code>readr::read_delim()</code>. Para arquivos tabulares com a extens√£o .xlsx, temos de instalar dois pacotes adicionais: <em>readxl</em> e <em>writexl</em>, dos quais usaremos as fun√ß√µes <code>readxl::read_excel()</code>, <code>readxl::read_xlsx()</code> ou <code>readxl::read_xls()</code> para importar dados, atentado para o data de podermos indicar a aba com os dados com o argumento <strong>sheet</strong>, e <code>writexl::write_xlsx()</code> para exportar.</p>
<p>Se o arquivo .csv foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>, usamos as fun√ß√µes normalmente. Caso tivesse sido criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, usar√≠amos as fun√ß√µes dessa forma: <code>readr::read_csv2()</code>.</p>
<p>Para exemplificar como importar dados no <strong>formato tidyverse</strong>, vamos importar novamente os dados de <strong>comunidades de anf√≠bios da Mata Atl√¢ntica</strong> (Atlantic Amphibians, Vancine et al.¬†2018), que fizemos o download na se√ß√£o XX. Estamos usando a fun√ß√£o <code>readr::read_csv()</code>, indicando os diret√≥rios com a fun√ß√£o <code>here::here()</code>, e a classe do arquivo √© ‚Äútibble.‚Äù</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="tidyverse.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importar lugares</span></span>
<span id="cb13-2"><a href="tidyverse.html#cb13-2" aria-hidden="true" tabindex="-1"></a>aa_locais <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb13-3"><a href="tidyverse.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;dados&quot;</span>, <span class="st">&quot;tabelas&quot;</span>, <span class="st">&quot;ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>)</span>
<span id="cb13-4"><a href="tidyverse.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## 
## ‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## cols(
##   .default = col_character(),
##   reference_number = col_double(),
##   species_number = col_double(),
##   month_start = col_double(),
##   year_start = col_double(),
##   month_finish = col_double(),
##   year_finish = col_double(),
##   effort_months = col_double(),
##   latitude = col_double(),
##   longitude = col_double(),
##   altitude = col_double(),
##   temperature = col_double(),
##   precipitation = col_double()
## )
## ‚Ñπ Use `spec()` for the full column specifications.</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/data-import.html">11 Data import</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tibble" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> tibble</h2>
<p>O <strong>tibble</strong> (<code>tbl_sf</code>) √© uma <strong>vers√£o aprimorada</strong> do data frame (<code>data.frame</code>). Ele √© a <strong>classe aconselhada</strong> para que as fun√ß√µes do tidyverse funcionem melhor sobre conjuntos de dados tabulares importados para o R.</p>
<p>Geralmente, quando utilizamos <strong>fun√ß√µes tidyverse para importar dados para o R</strong>, √© essa classe que esses dados adquirem depois de importados. Al√©m da importa√ß√£o de dados, podemos <strong>criar</strong> um tibble no R usando a fun√ß√£o <code>tibble::tibble()</code>, semelhante ao uso da fun√ß√£o <code>data.frame()</code>. Podemos ainda <strong>converter</strong> um <code>data.frame</code> para um <code>tibble</code> usando a fun√ß√£o <code>tibble::as_tibble()</code>. Entretanto, em alguns momentos precisaremos da classe <code>data.frame</code> para algumas fun√ß√µes espec√≠ficas, e podemos <strong>converter</strong> um <code>tibble</code> para <code>data.frame</code> usa-se a fun√ß√£o <code>tibble::as_data_frame()</code>.</p>
<p>Existem <strong>duas diferen√ßas principais</strong> no uso do <code>tibble</code> e do <code>data.frame</code>: impress√£o e subconjunto. Objetos da classe <code>tibbles</code> possuem um m√©todo de impress√£o que mostra a <strong>contagem do n√∫mero de linhas e colunas</strong>, e apenas as <strong>primeiras 10 linhas</strong> e <strong>todas as colunas</strong> que cabem na tela no console, al√©m dos <strong>modos ou tipos das colunas</strong>. Dessa forma, cada coluna ou vari√°vel, pode ser do modo numbers (<code>int</code> ou <code>dbl</code>), character (<code>chr</code>), logical (<code>lgl</code>), factor (<code>fctr</code>), date + time (<code>dttm</code>) date e (<code>date</code>), al√©m de outras <a href="https://tibble.tidyverse.org/articles/types.html">in√∫meras possibilidades</a>.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://tibble.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="tidyverse.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - impressao</span></span>
<span id="cb15-2"><a href="tidyverse.html#cb15-2" aria-hidden="true" tabindex="-1"></a>aa_locais</span></code></pre></div>
<pre><code>## # A tibble: 1,163 x 25
##    id      reference_number species_number record sampled_habitat active_methods
##    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;         
##  1 amp1001             1001             19 ab     fo,ll           as            
##  2 amp1002             1002             16 co     fo,la,ll        as            
##  3 amp1003             1002             14 co     fo,la,ll        as            
##  4 amp1004             1002             13 co     fo,la,ll        as            
##  5 amp1005             1003             30 co     fo,ll,br        as            
##  6 amp1006             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;          
##  7 amp1007             1005             23 co     sp              as            
##  8 amp1008             1005             19 co     sp,la,sw        as,sb,tr      
##  9 amp1009             1005             13 ab     fo              &lt;NA&gt;          
## 10 amp1010             1006              1 ab     fo              &lt;NA&gt;          
## # ‚Ä¶ with 1,153 more rows, and 19 more variables: passive_methods &lt;chr&gt;,
## #   complementary_methods &lt;chr&gt;, period &lt;chr&gt;, month_start &lt;dbl&gt;,
## #   year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;,
## #   effort_months &lt;dbl&gt;, country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;,
## #   municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;,
## #   precipitation &lt;dbl&gt;</code></pre>
<p>Para o subconjunto, como vimos anteriormente, para <strong>selecionar colunas e linhas</strong> de objetos bidimensionais podemos utilizar o operador <code>[]</code> ou <code>[[]]</code> associado com n√∫meros separados por v√≠rgulas ou o nome da coluna entre aspas, e o operador <code>$</code> para extrair pelo nome da coluna. Comparando um <code>data.frame</code> a um <code>tibbles</code>, esses √∫ltimos s√£o mais r√≠gidos: eles nunca fazem <strong>correspond√™ncia parcial</strong> e ir√£o <strong>gerar um aviso</strong> se a coluna que voc√™ est√° tentando acessar n√£o existir.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="tidyverse.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - subconjunto</span></span>
<span id="cb17-2"><a href="tidyverse.html#cb17-2" aria-hidden="true" tabindex="-1"></a>aa_locais<span class="sc">$</span>ref</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `ref`.</code></pre>
<pre><code>## NULL</code></pre>
<p>Por fim, podemos <strong>‚Äúespiar‚Äù os dados</strong> utilizando a fun√ß√£o <code>tibble::glimpse()</code> para ter uma no√ß√£o geral de n√∫mero de linhas, colunas, e conte√∫do de todas as colunas. Essa √© fun√ß√£o tidyverse da fun√ß√£o R Base <code>str()</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="tidyverse.html#cb20-1" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(aa_locais[, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>## Rows: 1,163
## Columns: 10
## $ id                    &lt;chr&gt; &quot;amp1001&quot;, &quot;amp1002&quot;, &quot;amp1003&quot;, &quot;amp1004&quot;, &quot;amp‚Ä¶
## $ reference_number      &lt;dbl&gt; 1001, 1002, 1002, 1002, 1003, 1004, 1005, 1005, ‚Ä¶
## $ species_number        &lt;dbl&gt; 19, 16, 14, 13, 30, 42, 23, 19, 13, 1, 1, 2, 4, ‚Ä¶
## $ record                &lt;chr&gt; &quot;ab&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, ‚Ä¶
## $ sampled_habitat       &lt;chr&gt; &quot;fo,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo‚Ä¶
## $ active_methods        &lt;chr&gt; &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, NA, &quot;as&quot;, &quot;as,sb,t‚Ä¶
## $ passive_methods       &lt;chr&gt; &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, NA, NA, NA, NA, &quot;pt&quot;, &quot;p‚Ä¶
## $ complementary_methods &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ‚Ä¶
## $ period                &lt;chr&gt; &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo‚Ä¶
## $ month_start           &lt;dbl&gt; 9, 12, 12, 12, 7, NA, 4, 4, 4, 5, 5, 5, 5, 5, 5,‚Ä¶</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/tibbles.html">10 Tibbles</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="magrittr-pipe--" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> magrittr (pipe - %&gt;%)</h2>
<p>O operador pipe <code>%&gt;%</code> permite o <strong>encadeamento de v√°rias fun√ß√µes</strong>, eliminando a necessidade de criar objetos para armazenar resultados intermedi√°rios. Dessa forma, pipes s√£o uma <strong>ferramenta poderosa</strong> para expressar uma <strong>sequ√™ncia de m√∫ltiplas opera√ß√µes</strong>.</p>
<p>O operador pipe <code>%&gt;%</code> vem do pacote <em>magrittr</em>, entretanto, todos os pacotes no tidyverse automaticamente tornam o pipe dispon√≠vel. Essa fun√ß√£o torna os <strong>c√≥digos em R mais simples</strong>, pois realizamos m√∫ltiplas opera√ß√µes em uma √∫nica linha. Ele <strong>captura o resultado de uma declara√ß√£o</strong> e o <strong>torna a entrada da pr√≥xima declara√ß√£o</strong>, ent√£o podemos pensar como ‚ÄúEM SEGUIDA FA√áA‚Äù ao final de cada linha de c√≥digo.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://maggritr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>A principal vantagem do uso dos pipes √© facilitar o <strong>debuging</strong> (achar erros) nos c√≥digos, porque seu uso torna a <strong>linguagem R mais pr√≥xima do que falamos e pensamos</strong>, uma vez que evita o uso de fun√ß√µes dentro de fun√ß√µes (fun√ß√µes compostas).</p>
<p>Digitar <code>%&gt;%</code> √© um pouco chato, dessa forma, existe um atalho para sua inser√ß√£o nos scripts: <code>ctrl + shift + M</code>.</p>
<p>Para deixar esse t√≥pico <strong>menos estranho</strong> √† quem est√° vendo esse opera√ß√£o pela primeira vez, vamos fazer <strong>alguns exemplos</strong>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="tidyverse.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb22-2"><a href="tidyverse.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="tidyverse.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb24-2"><a href="tidyverse.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="tidyverse.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="tidyverse.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>()</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<p>Essas opera√ß√µes ainda est√£o simples, vamos complic√°-las com v√°rias fun√ß√µes compostas. √â nesses casos que a <strong>propriedade orgazacional</strong> do uso do pipe emerge: podemos facilmente ver o <strong>encadeamento de opera√ß√µes</strong>, onde cada fun√ß√£o √© organizada numa linha.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="tidyverse.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb26-2"><a href="tidyverse.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb26-3"><a href="tidyverse.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="tidyverse.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb26-5"><a href="tidyverse.html#cb26-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">sqrt</span>(<span class="fu">sort</span>(<span class="fu">log10</span>(<span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>)))))</span>
<span id="cb26-6"><a href="tidyverse.html#cb26-6" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="tidyverse.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb28-2"><a href="tidyverse.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb28-3"><a href="tidyverse.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="tidyverse.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb28-5"><a href="tidyverse.html#cb28-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="tidyverse.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log10</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="tidyverse.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="tidyverse.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-9"><a href="tidyverse.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span>
<span id="cb28-10"><a href="tidyverse.html#cb28-10" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<p>O uso do pipe vai se <strong>tornar especialmente √∫til</strong> quando seguirmos para os pacotes das pr√≥ximas duas se√ß√µes: <em>tidyr</em> e <em>dplyr</em>. Com esses pacotes iremos fazer opera√ß√µes em linhas e colunas de nossos dados tabulares, ent√£o podemos <strong>encademar uma s√©rie de fun√ß√µes</strong> para manipula√ß√£o, limpeza e an√°lise de dados.</p>
<p>H√° ainda <strong>tr√™s outras varia√ß√µes do pipe</strong> que podem ser √∫teis em alguns momentos, mas que para funcionar precisam que o pacote <em>magrittr</em> seja carregado:</p>
<ul>
<li><code>%T&gt;%</code>: retorna o lado esquerdo em vez do lado direito</li>
<li><code>%$%</code>: ‚Äúexplode‚Äù as vari√°veis em um quadro de dados</li>
<li><code>%&lt;&gt;%</code>: permite atribui√ß√£o usando pipes</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/pipes.html">18 Pipes</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tidyr" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> tidyr</h2>
<p>Os conjuntos de <strong>dados tidy</strong> (organizados) s√£o mais f√°ceis de manipular, modelar e visualizar. Um conjunto de dados est√° arrumado ou n√£o, dependendo de como linhas, colunas e c√©lulas s√£o combinadas com observa√ß√µes, vari√°veis e valores. Nos <strong>dados tidy</strong>, as <strong>vari√°veis est√£o nas colunas</strong>, <strong>observa√ß√µes est√£o nas linhas</strong> e <strong>valores est√£o nas c√©lulas</strong>, sendo que para esse √∫ltimo, n√£o deve haver mais de um valor por c√©lula (Figura <a href="tidyverse.html#fig:fig-r-dados-tidy">5.2</a>).</p>
<ol style="list-style-type: decimal">
<li>Cada vari√°vel em uma coluna</li>
<li>Cada observa√ß√£o em uma linha</li>
<li>Cada valor como uma c√©lula</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:fig-r-dados-tidy"></span>
<img src="img/cap04_fig02.png" alt="As tr√™s regras que tornam um conjunto de dados *tidy*. Adaptado de: Wickhan &amp; Grolemund (2017)." width="100%" />
<p class="caption">
Figura 5.2: As tr√™s regras que tornam um conjunto de dados <em>tidy</em>. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://tidyr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Para realizar <strong>diversas transforma√ß√µes nos dados</strong> a fim de ajust√°-los ao formato <strong>tidy</strong>, existe uma s√©rie de fun√ß√µes, para diversas finalidades: unir e separar, valores faltantes (<code>NA</code>), e pivotar (formato <strong>longo</strong> para <strong>largo</strong>), al√©m de outras <a href="https://tidyr.tidyverse.org/reference/index.html">fun√ß√µes espec√≠ficas</a>.</p>
<ul>
<li><code>unite()</code>: junta dados de m√∫ltiplas colunas em uma coluna</li>
<li><code>separate()</code>: separa caracteres em m√∫lplica colunas</li>
<li><code>separate_rows()</code>: separa caracteres em m√∫lplica colunas e linhas</li>
<li><code>drop_na()</code>: retira linhas com <code>NA</code> do conjunto de dados</li>
<li><code>replace_na()</code>: substitui <code>NA</code> do conjunto de dados</li>
<li><code>pivot_wider()</code>: transformar conjunto de dados <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>)</li>
<li><code>pivot_longer()</code>: transformar conjunto de dados <strong>largo</strong> (<em>wide</em>) para <strong>longo</strong> (<em>long</em>)</li>
</ul>
<div id="palmerpenguins" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> palmerpenguins</h3>
<p>Para exemplicar o funcionamento dessas fun√ß√µes, usaremos os dados de medidas de pinguins chamados <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados est√£o dispon√≠veis no pacote <em>palmerpenguins</em>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="tidyverse.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote</span></span>
<span id="cb30-2"><a href="tidyverse.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span></code></pre></div>
<p>Esses dados foram coletados e disponibilizados pela <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dra. Kristen Gorman</a> e pela <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>, membro da Long Term Ecological Research Network.</p>
<p>O pacote <em>palmerpenguins</em> cont√©m dois conjuntos de dados. Um √© chamado de <strong>penguins</strong> e √© uma vers√£o simplificada dos dados brutos. O segundo conjunto de dados √© <strong>penguins_raw</strong> e cont√©m todas as vari√°veis e nomes originais baixados. Ambos os conjuntos de dados cont√™m dados para 344 pinguins, de tr√™s esp√©cies diferentes, coletados em tr√™s ilhas no arquip√©lago de Palmer, na Ant√°rtica.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="tidyverse.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote palmerpenguins</span></span>
<span id="cb31-2"><a href="tidyverse.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb31-3"><a href="tidyverse.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="tidyverse.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ajuda dos dados</span></span>
<span id="cb31-5"><a href="tidyverse.html#cb31-5" aria-hidden="true" tabindex="-1"></a>?penguins</span>
<span id="cb31-6"><a href="tidyverse.html#cb31-6" aria-hidden="true" tabindex="-1"></a>?penguins_raw</span></code></pre></div>
</div>
<div id="glimpse" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> glimpse()</h3>
<p>Primeiramente, vamos observar os dados e utilizar a fun√ß√£o <code>tidyr::glimpse()</code> para ter uma no√ß√£o geral.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="tidyverse.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizar os dados</span></span>
<span id="cb32-2"><a href="tidyverse.html#cb32-2" aria-hidden="true" tabindex="-1"></a>penguins_raw</span></code></pre></div>
<pre><code>## # A tibble: 344 x 17
##    studyName `Sample Number` Species       Region Island Stage   `Individual ID`
##    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;          
##  1 PAL0708                 1 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N1A1           
##  2 PAL0708                 2 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N1A2           
##  3 PAL0708                 3 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N2A1           
##  4 PAL0708                 4 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N2A2           
##  5 PAL0708                 5 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N3A1           
##  6 PAL0708                 6 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N3A2           
##  7 PAL0708                 7 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N4A1           
##  8 PAL0708                 8 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N4A2           
##  9 PAL0708                 9 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N5A1           
## 10 PAL0708                10 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N5A2           
## # ‚Ä¶ with 334 more rows, and 10 more variables: Clutch Completion &lt;chr&gt;,
## #   Date Egg &lt;date&gt;, Culmen Length (mm) &lt;dbl&gt;, Culmen Depth (mm) &lt;dbl&gt;,
## #   Flipper Length (mm) &lt;dbl&gt;, Body Mass (g) &lt;dbl&gt;, Sex &lt;chr&gt;,
## #   Delta 15 N (o/oo) &lt;dbl&gt;, Delta 13 C (o/oo) &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># espiar os dados</span></span>
<span id="cb34-2"><a href="tidyverse.html#cb34-2" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(penguins_raw)</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 17
## $ studyName             &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL‚Ä¶
## $ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1‚Ä¶
## $ Species               &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie P‚Ä¶
## $ Region                &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;‚Ä¶
## $ Island                &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgerse‚Ä¶
## $ Stage                 &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adu‚Ä¶
## $ `Individual ID`       &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, ‚Ä¶
## $ `Clutch Completion`   &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, ‚Ä¶
## $ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16,‚Ä¶
## $ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34‚Ä¶
## $ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18‚Ä¶
## $ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,‚Ä¶
## $ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34‚Ä¶
## $ Sex                   &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;‚Ä¶
## $ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18‚Ä¶
## $ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.298‚Ä¶
## $ Comments              &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult‚Ä¶</code></pre>
</div>
<div id="unite" class="section level3" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> unite()</h3>
<p>Primeiramente, vamos exemplificar como <strong>juntar e serparar colunas</strong>. Vamos utilizar a fun√ß√£o <code>tidyr::unite()</code> para unir as colunas ‚ÄúRegion‚Äù e ‚ÄúIsland.‚Äù H√° diversos par√¢metros para alterar como a fun√ß√µes funciona, entretanto, √© importante destacar tr≈ù deles: <strong>col</strong> nome da coluna que vai receber as colunas unidas, <strong>sep</strong> indicando o caracter separador das colunas unidas, e <strong>remove</strong> para uma resposta l√≥gica se as colunas unidas s√£o removidas ou n√£o. Vamos unir as colunas ‚ÄúRegion‚Äù e ‚ÄúIsland‚Äù na nova coluna ‚Äúregion_island,‚Äù</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unir colunas</span></span>
<span id="cb36-2"><a href="tidyverse.html#cb36-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_unir <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">unite</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb36-3"><a href="tidyverse.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">col =</span> <span class="st">&quot;region_island&quot;</span>,</span>
<span id="cb36-4"><a href="tidyverse.html#cb36-4" aria-hidden="true" tabindex="-1"></a>                                  Region<span class="sc">:</span>Island, </span>
<span id="cb36-5"><a href="tidyverse.html#cb36-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb36-6"><a href="tidyverse.html#cb36-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="separate" class="section level3" number="5.7.4">
<h3><span class="header-section-number">5.7.4</span> separate()</h3>
<p>De forma contr√°ria podemos utilizar as fun√ß√µes <code>tidyr::separate()</code> e <code>tidyr::separate_rows()</code> para separar elementos de uma coluna em mais colunas. Respectivamente, a primeira fun√ß√£o separa uma colunas em novas colunas conforme a separa√ß√£o e a segunda fun√ß√£o separa uma coluna, distribuindo os elementos tamb√©m nas linhas. Novamente, h√° diversos par√¢metros, mas destacaremos quatro deles: <strong>col</strong> coluna a ser separada, <strong>into</strong> os nomes das novas colunas, <strong>sep</strong> indicando o caracter separador das colunas, e <strong>remove</strong> para uma resposta l√≥gica se as colunas unidas s√£o removidas ou n√£o. Vamos separar a coluna ‚ÄúStage‚Äù nas colunas ‚Äústage‚Äù e ‚Äúegg_stage.‚Äù</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="tidyverse.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb37-2"><a href="tidyverse.html#cb37-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb37-3"><a href="tidyverse.html#cb37-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">col =</span> Stage,</span>
<span id="cb37-4"><a href="tidyverse.html#cb37-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;stage&quot;</span>, <span class="st">&quot;egg_stage&quot;</span>), </span>
<span id="cb37-5"><a href="tidyverse.html#cb37-5" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb37-6"><a href="tidyverse.html#cb37-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-7"><a href="tidyverse.html#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="tidyverse.html#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb37-9"><a href="tidyverse.html#cb37-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar_linhas <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate_rows</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb37-10"><a href="tidyverse.html#cb37-10" aria-hidden="true" tabindex="-1"></a>                                                    Stage,</span>
<span id="cb37-11"><a href="tidyverse.html#cb37-11" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
</div>
<div id="drop_na-e-replace_na" class="section level3" number="5.7.5">
<h3><span class="header-section-number">5.7.5</span> drop_na() e replace_na()</h3>
<p><strong>Valores faltantes</strong> (<code>NA</code>) √© um tipo especial de elemento que discutimos na se√ß√£o XX, e s√£o relativamente comuns em grandes conjuntos de dados. Em Base R vimos algumas formas de lidar com esse tipo de elemento. No formato <strong>tidyverse</strong> existem v√°rias formas de lidar com eles, mas aqui focaremos nas fun√ß√µes <code>tidyr::drop_na()</code> e <code>tidyr::replace_na()</code>, para retirar linhas e substitui-los, respectivamente.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover todas as linhas com nas</span></span>
<span id="cb38-2"><a href="tidyverse.html#cb38-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_todas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw)</span>
<span id="cb38-3"><a href="tidyverse.html#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="tidyverse.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remover linhas de colunas especificas com nas</span></span>
<span id="cb38-5"><a href="tidyverse.html#cb38-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_colunas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb38-6"><a href="tidyverse.html#cb38-6" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">any_of</span>(<span class="st">&quot;Comments&quot;</span>))</span>
<span id="cb38-7"><a href="tidyverse.html#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="tidyverse.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># substituir nas por outro valor</span></span>
<span id="cb38-9"><a href="tidyverse.html#cb38-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_subs_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb38-10"><a href="tidyverse.html#cb38-10" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">list</span>(<span class="at">Comments =</span> <span class="st">&quot;Unknown&quot;</span>))</span></code></pre></div>
</div>
<div id="pivotagem---pivot_longer-e-pivot_wider" class="section level3" number="5.7.6">
<h3><span class="header-section-number">5.7.6</span> pivotagem - pivot_longer() e pivot_wider()</h3>
<p>Por fim, trataremos de <strong>pivotagem ou remodelagem</strong> de dados. Veremos como mudar o formato do nosso conjunto de dados de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>) e vice-versa. Essa √© uma opera√ß√£o semelhante √† ‚ÄúTabela Din√¢mica‚Äù das planilhas eletr√¥nicas. Consiste em usar uma coluna para virar outras colunas, de modo que os valores s√£o preenchidos corretamente, reduzindo assim o n√∫mero de linhas, isso na transforma√ß√£o de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>). Essa opera√ß√£o √© bastante comum em Ecologia de Comunidades, quando queremos transformar uma lista de esp√©cies em uma matriz de comunidades, com v√°rias esp√©cies nas colunas. Para realizar essa opera√ß√£o, usarmos a fun√ß√£o <code>tidyr::pivot_wider()</code>. Dos diversos par√¢metros que podem compor essa fun√ß√£o, dois deles s√£o fundamentais: <strong>names_from</strong> que indica a coluna de onde os nomes ser√£o usados e <strong>values_from</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="tidyverse.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb39-2"><a href="tidyverse.html#cb39-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">13</span>)]</span>
<span id="cb39-3"><a href="tidyverse.html#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="tidyverse.html#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb39-5"><a href="tidyverse.html#cb39-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_wider <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb39-6"><a href="tidyverse.html#cb39-6" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">names_from =</span> Species, </span>
<span id="cb39-7"><a href="tidyverse.html#cb39-7" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">values_from =</span> <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code></pre></div>
<p>De modo oposto, podemos partir de um conjunto de dados <strong>largo</strong> (<em>wide</em>), ou seja, com v√°rias colunas, e queremos que essas colunas preecham uma √∫nica coluna, e que os valores antes espalhados nessas v√°rias colunas sejam adicionados um embaixo do outro. Para essa opera√ß√£o, podemos utilizar a fun√ß√£o <code>tidyr::pivot_longer()</code>. Novamente, dos diversos par√¢metros que podem compor essa fun√ß√£o, tr√äs deles s√£o fundamentais: <strong>cols</strong> indicando as colunas que ser√£o usandas para serem pivotadas, <strong>names_to</strong> que indica a coluna de onde os nomes ser√£o usados e <strong>values_to</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb40-2"><a href="tidyverse.html#cb40-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>)]</span>
<span id="cb40-3"><a href="tidyverse.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="tidyverse.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb40-5"><a href="tidyverse.html#cb40-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_longer <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb40-6"><a href="tidyverse.html#cb40-6" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">cols =</span> <span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>,</span>
<span id="cb40-7"><a href="tidyverse.html#cb40-7" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">names_to =</span> <span class="st">&quot;medidas&quot;</span>, </span>
<span id="cb40-8"><a href="tidyverse.html#cb40-8" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">values_to =</span> <span class="st">&quot;valores&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/tidy-data.html">12 Tidy data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
</div>
<div id="dplyr" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> dplyr</h2>
<p>O <em>dplyr</em> √© um pacote que <strong>facilita a manipula√ß√£o de dados</strong>, com uma <strong>gram√°tica de manipula√ß√£o de dados</strong> simples e flex√≠vel (por exemplo, como filtragem, reordenamento, sele√ß√£o, entre outras). Ele foi constru√≠do com o intuito de <strong>obter uma forma mais r√°pida e expressiva</strong> de tratar os dados. O <code>tibble</code> √© a vers√£o de data frame mais conveniente para se usar com pacote <em>dplyr</em>.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://dplyr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<div id="gram√°tica" class="section level3" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Gram√°tica</h3>
<p>Sua <strong>gram√°tica simples</strong> cont√©m <strong>fun√ß√µes verbais</strong> para manipula√ß√£o de dados, baseada em:</p>
<ul>
<li>Verbos: <code>mutate()</code>, <code>select()</code>, <code>filter()</code>, <code>arrange()</code>, <code>summarise()</code>, <code>slice()</code>, <code>rename()</code>, etc.</li>
<li>Replica√ß√£o: <code>across()</code>, <code>if_any()</code>, <code>if_all()</code>, <code>where()</code>, <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, etc.</li>
<li>Agrupamento: <code>group_by()</code> e <code>ungroup()</code></li>
<li>Jun√ß√µes: <code>inner_join()</code>, <code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, etc.</li>
<li>Combinando: <code>bind_rows()</code> e <code>bind_cols()</code></li>
<li>Fun√ß√µes resumo: <code>n()</code>, <code>n_distinct()</code>, <code>first()</code>, <code>last()</code>, <code>nth()</code>, etc.</li>
</ul>
<p>Para realizar as <strong>manipula√ß√µes nos dados</strong> existe uma s√©rie de fun√ß√µes, para diversas finalidades: manipula√ß√£o de uma tabela, manipula√ß√£o de duas tabela, replica√ß√£o, agrupamento, fun√ß√µes de vetores, al√©m de muitas outras <a href="https://dplyr.tidyverse.org/reference/index.html">fun√ß√µes espec√≠ficas</a>.</p>
<ul>
<li><code>relocate()</code>: muda a ordem das colunas</li>
<li><code>rename()</code>: muda o nome das colunas</li>
<li><code>select()</code>: seleciona colunas pelo nome ou posi√ß√£o</li>
<li><code>pull()</code>: seleciona uma coluna como vetor</li>
<li><code>mutate()</code>: adiciona novas colunas ou resultados em colunas existentes</li>
<li><code>arrange()</code>: reordena as linhas com base nos valores de colunas</li>
<li><code>filter()</code>: seleciona linhas com base em valores de colunas</li>
<li><code>slice()</code>: seleciona linhas de diferente formas</li>
<li><code>distinct()</code>: remove linhas com valores repetidos com base nos valores de colunas</li>
<li><code>count()</code>: conta observa√ß√µes para um grupo</li>
<li><code>group_by()</code>: agrupa linhas pelos valores das colunas</li>
<li><code>summarise()</code>: resume os dados atrav√©s de fun√ß√µes considerando valores das colunas</li>
<li><code>*_join()</code>: fun√ß√µes que juntam dados de duas tabelas atrav√©s de uma coluna chave</li>
</ul>
</div>
<div id="sintaxe" class="section level3" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Sintaxe</h3>
<p>Todas as fun√ß√µes seguem a mesma <strong>sintaxe</strong>, de modo que o <code>tibble</code> √© sempre o <strong>primeiro argumento</strong> dessas fun√ß√µes, seguido de um <strong>pipe</strong> e pelo o <strong>nome da fun√ß√£o</strong>. Isso permite o <strong>encademanto</strong> de v√°rias opera√ß√µes consecutivas.</p>
<ol style="list-style-type: decimal">
<li>tibble</li>
<li>operador pipe</li>
<li>nome da fun√ß√£o verbal com os argumentos entre par√™nteses</li>
<li>outras fun√ß√µes verbais‚Ä¶</li>
</ol>
<p>As fun√ß√µes verbais <strong>n√£o precisam modificar</strong> o tibble original, sendo que as opera√ß√µes de manipula√ß√µes podem e devem ser atribu√≠das √† um <strong>novo objeto</strong>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="tidyverse.html#cb41-1" aria-hidden="true" tabindex="-1"></a>tb_dplyr <span class="ot">&lt;-</span> tb <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="tidyverse.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal1</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="tidyverse.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal2</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="tidyverse.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal3</span>(argumento1, argumento2, ...)</span></code></pre></div>
<p>Al√©m de <code>data.frames</code> e <code>tibbles</code>, a manipula√ß√£o pelo formato <em>dplyr</em> torna o trabalho com outros <strong>formatos de classes</strong> e dados acess√≠vel e eficiente, como <code>data.table</code>, SQL e Apache Spark.</p>
<ul>
<li><a href="https://dtplyr.tidyverse.org/"><em>dtplyr</em></a>: manipular conjuntos de dados <code>data.table</code></li>
<li><a href="https://dbplyr.tidyverse.org/"><em>dbplyr</em></a>: manipular conjuntos de dados SQL</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: manipular conjuntos de dados no Apache Spark</li>
</ul>
</div>
<div id="palmerpenguins-1" class="section level3" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> palmerpenguins</h3>
<p>Para nossos exemplos, vamos utilizar os <strong>dados de pinguins</strong> <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados est√£o dispon√≠veis no pacote <em>palmerpenguins</em>. Vamos utilizar principalmente o conjunto de dados <strong>penguins</strong>, que √© uma vers√£o simplificada dos dados brutos <strong>penguins_raw</strong>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb42-2"><a href="tidyverse.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
</div>
<div id="relocate" class="section level3" number="5.8.4">
<h3><span class="header-section-number">5.8.4</span> relocate()</h3>
<p>Primeiramente, vamos <strong>reordenadar as colunas</strong> com a fun√ß√£o <code>dplyr::relocate()</code>, onde simplesmente listamos as colunas que queremos mudar de posi√ß√£o e para onde elas devem ir. Para esse √∫ltimo passo h√° dois argumentos: <strong>.before</strong> que indica qual a coluna que as colunas realocadas devem se mover antes, e o argumentos <strong>.after</strong> indicando onde devem se mover depois. Ambos podem ser informados com os nomes ou posi√ß√µes dessas colunas com n√∫meros.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - nome</span></span>
<span id="cb43-2"><a href="tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a>penguins_relocate_col <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="tidyverse.html#cb43-3" aria-hidden="true" tabindex="-1"></a> dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> island)</span>
<span id="cb43-4"><a href="tidyverse.html#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="tidyverse.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - posicao</span></span>
<span id="cb43-6"><a href="tidyverse.html#cb43-6" aria-hidden="true" tabindex="-1"></a>penguins_relocate_ncol <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="tidyverse.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="rename" class="section level3" number="5.8.5">
<h3><span class="header-section-number">5.8.5</span> rename()</h3>
<p>Podemos ainda <strong>renomear colunas</strong> facilmente com a fun√ß√£o <code>dplyr::rename()</code>, onde primeiramente informamos o nome que queremos que a coluna tenha, seguido do operador <code>=</code> e a coluna do nosso dado. Tamb√©m podemos utilizar a fun√ß√£o <code>dplyr::rename_with()</code>, que faz a <strong>mudan√ßa do nome em m√∫ltiplas colunas</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="tidyverse.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome das colunas</span></span>
<span id="cb44-2"><a href="tidyverse.html#cb44-2" aria-hidden="true" tabindex="-1"></a>penguins_rename <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="tidyverse.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">bill_length =</span> bill_length_mm,</span>
<span id="cb44-4"><a href="tidyverse.html#cb44-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">bill_depth =</span> bill_depth_mm,</span>
<span id="cb44-5"><a href="tidyverse.html#cb44-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">flipper_length =</span> flipper_length_mm,</span>
<span id="cb44-6"><a href="tidyverse.html#cb44-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">body_mass =</span> body_mass_g)</span>
<span id="cb44-7"><a href="tidyverse.html#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="tidyverse.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome de todas as colunas</span></span>
<span id="cb44-9"><a href="tidyverse.html#cb44-9" aria-hidden="true" tabindex="-1"></a>penguins_rename_with <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb44-10"><a href="tidyverse.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(toupper)</span></code></pre></div>
</div>
<div id="select" class="section level3" number="5.8.6">
<h3><span class="header-section-number">5.8.6</span> select()</h3>
<p>Outra opera√ß√£o bastante usual dentro da manipula√ß√£o de dados tabulares √© a <strong>sele√ß√£o de colunas</strong>. Podemos fazer essa opera√ß√£o com a fun√ß√£o <code>dplyr::select()</code>, que seleciona colunas pelo nome ou pela posi√ß√£o. Aqui h√° uma s√©rie de possibilidades de sele√ß√£o de colunas, desde utilizar operadores como <code>:</code> para selecionar intervalos de colunas, <code>!</code> para tomar o complemento, al√©m de fun√ß√µes como <code>dplyr::starts_with()</code>, <code>dplyr::ends_with()</code>, <code>dplyr::contains()</code> para <strong>procurar colunas com um padr√£o de texto</strong>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por nomes</span></span>
<span id="cb45-2"><a href="tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>penguins_select <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="tidyverse.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(bill_length_mm<span class="sc">:</span>body_mass_g)</span>
<span id="cb45-4"><a href="tidyverse.html#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="tidyverse.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por padrao</span></span>
<span id="cb45-6"><a href="tidyverse.html#cb45-6" aria-hidden="true" tabindex="-1"></a>penguins_select_contains <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb45-7"><a href="tidyverse.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;_mm&quot;</span>))</span></code></pre></div>
</div>
<div id="pull" class="section level3" number="5.8.7">
<h3><span class="header-section-number">5.8.7</span> pull()</h3>
<p>Quando usamos a fun√ß√£o <code>dplyr::select()</code>, mesmo que para uma linha, o retorno √© sempre um <code>tibble</code>. Caso precisemos que essa <strong>coluna se torne um vetor</strong>, dentro do encadeamento dos <code>pipes</code>, usamos a fun√ß√£o <code>dplyr::pull()</code> que <strong>que extrai uma coluna √∫nica coluna como vetor</strong>.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="tidyverse.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coluna como vetor</span></span>
<span id="cb46-2"><a href="tidyverse.html#cb46-2" aria-hidden="true" tabindex="-1"></a>penguins_select_pull <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="tidyverse.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(bill_length_mm)</span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="5.8.8">
<h3><span class="header-section-number">5.8.8</span> mutate()</h3>
<p>Uma das opera√ß√µes mais √∫teis dentre as opera√ß√µes para colunas √© <strong>adicionar ou atualizar os valores</strong> de colunas. Para essa opera√ß√£o, usaremos a fun√ß√£o <code>dplyr::mutate()</code>. Podemos ainda usar os argumentos <strong>.before</strong> e <strong>.after</strong> para indicar onde a nova coluna deve ficar, al√©m do par√¢metro <strong>.keep</strong> com diversas possibilidades de manter colunas depois de usar a fun√ß√£o <code>dplyr::mutate()</code>. Por fim,
√© fundamental destacar o uso das <strong>fun√ß√µes de replica√ß√£o</strong>: <code>dplyr::across()</code>, <code>dplyr::if_any()</code> e <code>dplyr::if_all()</code>, para os quais a fun√ß√£o ir√° <strong>fazer altera√ß√µes em m√∫ltiplas colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="tidyverse.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adicionar colunas</span></span>
<span id="cb47-2"><a href="tidyverse.html#cb47-2" aria-hidden="true" tabindex="-1"></a>penguins_mutate <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="tidyverse.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="fl">1e3</span>, <span class="at">.before =</span> sex)</span>
<span id="cb47-4"><a href="tidyverse.html#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="tidyverse.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># modificar varias colunas</span></span>
<span id="cb47-6"><a href="tidyverse.html#cb47-6" aria-hidden="true" tabindex="-1"></a>penguins_mutate_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="tidyverse.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.character))</span></code></pre></div>
</div>
<div id="arrange" class="section level3" number="5.8.9">
<h3><span class="header-section-number">5.8.9</span> arrange()</h3>
<p>Al√©m de opera√ß√µes em colunas, podemos fazer <strong>opera√ß√µes em linhas</strong>. Vamos come√ßar com a <strong>reordena√ß√£o das linhas</strong> com base nos valores das colunas. Para essa opera√ß√£o, usamos a fun√ß√£o <code>dplyr::arrange()</code>. Podemos reordenadar por uma ou mais colunas de forma crescente ou de forma decrescente usando a fun√ß√£o <code>desc()</code> ou o operador <code>-</code>. Da mesma forma que na fun√ß√£o <code>dplyr::mutate()</code>, podemos usar as <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>ordenar as linhas para v√°rias colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="tidyverse.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - crescente</span></span>
<span id="cb48-2"><a href="tidyverse.html#cb48-2" aria-hidden="true" tabindex="-1"></a>penguins_arrange <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="tidyverse.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(body_mass_g)</span>
<span id="cb48-4"><a href="tidyverse.html#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="tidyverse.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb48-6"><a href="tidyverse.html#cb48-6" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-7"><a href="tidyverse.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g))</span>
<span id="cb48-8"><a href="tidyverse.html#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="tidyverse.html#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb48-10"><a href="tidyverse.html#cb48-10" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc_m <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-11"><a href="tidyverse.html#cb48-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>body_mass_g)</span>
<span id="cb48-12"><a href="tidyverse.html#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="tidyverse.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - multiplas colunas</span></span>
<span id="cb48-14"><a href="tidyverse.html#cb48-14" aria-hidden="true" tabindex="-1"></a>penguins_arrange_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-15"><a href="tidyverse.html#cb48-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span></code></pre></div>
</div>
<div id="filter" class="section level3" number="5.8.10">
<h3><span class="header-section-number">5.8.10</span> filter()</h3>
<p>Uma das principais e mais usuais opera√ß√µes que podemos realizar em linhas √© a sele√ß√£o de linhas atrav√©s do <strong>filtro por valores de uma ou mais colunas</strong>, utilizando a fun√ß√£o <code>dplyr::filter()</code>. Para realizar os filtros iremos utilizar grande parte dos operadores relacionais e l√≥gicos que listamos na Tabela <a href="#tab:tab-operadores"><strong>??</strong></a>, especialmente os l√≥gicos para combina√ß√µes de filtros em mais de uma coluna. Al√©m desses operadores, podemos utilizar a fun√ß√£o <code>is.na()</code> para filtros em elementos faltantes, e as fun√ß√µes <code>dplyr::between()</code> e <code>dplyr::near()</code> para valores filtros entre valores, e para valores pr√≥ximos com certa toler√™ncia, respectivamente. Por fim, podemos usar as <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>filtro das linhas para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="tidyverse.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb49-2"><a href="tidyverse.html#cb49-2" aria-hidden="true" tabindex="-1"></a>penguins_filter <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="tidyverse.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span>
<span id="cb49-4"><a href="tidyverse.html#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="tidyverse.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb49-6"><a href="tidyverse.html#cb49-6" aria-hidden="true" tabindex="-1"></a>penguins_filter_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-7"><a href="tidyverse.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb49-8"><a href="tidyverse.html#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="tidyverse.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb49-10"><a href="tidyverse.html#cb49-10" aria-hidden="true" tabindex="-1"></a>penguins_filter_in <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-11"><a href="tidyverse.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>),</span>
<span id="cb49-12"><a href="tidyverse.html#cb49-12" aria-hidden="true" tabindex="-1"></a>                sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb49-13"><a href="tidyverse.html#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="tidyverse.html#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - na</span></span>
<span id="cb49-15"><a href="tidyverse.html#cb49-15" aria-hidden="true" tabindex="-1"></a>penguins_filter_na <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-16"><a href="tidyverse.html#cb49-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex) <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-17"><a href="tidyverse.html#cb49-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-18"><a href="tidyverse.html#cb49-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - between</span></span>
<span id="cb49-19"><a href="tidyverse.html#cb49-19" aria-hidden="true" tabindex="-1"></a>penguins_filter_between <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-20"><a href="tidyverse.html#cb49-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="dv">3000</span>, <span class="dv">4000</span>))</span>
<span id="cb49-21"><a href="tidyverse.html#cb49-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-22"><a href="tidyverse.html#cb49-22" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas por varias colunas</span></span>
<span id="cb49-23"><a href="tidyverse.html#cb49-23" aria-hidden="true" tabindex="-1"></a>penguins_filter_if <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-24"><a href="tidyverse.html#cb49-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">where</span>(is.integer), <span class="sc">~</span> . <span class="sc">&gt;</span> <span class="dv">200</span>))</span></code></pre></div>
</div>
<div id="slice" class="section level3" number="5.8.11">
<h3><span class="header-section-number">5.8.11</span> slice()</h3>
<p>Al√©m da selec√ß√£o de linhas por filtros, podemos fazer a <strong>sele√ß√£o das linhas por intervalos</strong>, indicando quais <strong>linhas desejamos</strong>, usando a fun√ß√£o <code>dplyr::slice()</code>, e informando o argumento <strong>n</strong> para o n√∫mero da linha ou intervalo das linhas. Essa fun√ß√£o possui varia√ß√µes no sufixo muito interessantes: <code>dplyr::slice_head()</code> e <code>dplyr::slice_tail()</code> seleciona as primeiras e √∫ltimas linhas, <code>dplyr::slice_min()</code> e <code>dplyr::slice_max()</code> seleciona linhas com os maiores e menores valores de uma coluna, e <code>dplyr::slice_sample()</code> seleciona linhas aleatoriamente.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tidyverse.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas</span></span>
<span id="cb50-2"><a href="tidyverse.html#cb50-2" aria-hidden="true" tabindex="-1"></a>penguins_slice <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="tidyverse.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">300</span><span class="sc">:</span><span class="fu">n</span>()))</span>
<span id="cb50-4"><a href="tidyverse.html#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="tidyverse.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - head</span></span>
<span id="cb50-6"><a href="tidyverse.html#cb50-6" aria-hidden="true" tabindex="-1"></a>penguins_slice_head <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-7"><a href="tidyverse.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb50-8"><a href="tidyverse.html#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="tidyverse.html#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - max</span></span>
<span id="cb50-10"><a href="tidyverse.html#cb50-10" aria-hidden="true" tabindex="-1"></a>penguins_slice_max <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-11"><a href="tidyverse.html#cb50-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_max</span>(body_mass_g, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb50-12"><a href="tidyverse.html#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="tidyverse.html#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - sample</span></span>
<span id="cb50-14"><a href="tidyverse.html#cb50-14" aria-hidden="true" tabindex="-1"></a>penguins_slice_sample <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-15"><a href="tidyverse.html#cb50-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span></code></pre></div>
</div>
<div id="distinct" class="section level3" number="5.8.12">
<h3><span class="header-section-number">5.8.12</span> distinct()</h3>
<p>A √∫ltima opera√ß√£o que apresentaremos aqui para linhas ser√° a <strong>retirada de linhas com valores repetidos com base nos valores de colunas</strong> utilizandos a fun√ß√£o <code>dplyr::distinct()</code>. Essa fun√ß√£o por padr√£o retorna apenas a coluna utilizada para retirar as linhas com valores repetidos, sendo necess√°rio acrescentar o argumento <strong>.keep_all</strong> para retornar todas as colunas. Por fim, podemos usar as <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>retirar linhas com valores repetidos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="tidyverse.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos</span></span>
<span id="cb51-2"><a href="tidyverse.html#cb51-2" aria-hidden="true" tabindex="-1"></a>penguins_distinct <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="tidyverse.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g)</span>
<span id="cb51-4"><a href="tidyverse.html#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="tidyverse.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos - manter as outras colunas</span></span>
<span id="cb51-6"><a href="tidyverse.html#cb51-6" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="tidyverse.html#cb51-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-8"><a href="tidyverse.html#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="tidyverse.html#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos para varias colunas</span></span>
<span id="cb51-10"><a href="tidyverse.html#cb51-10" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-11"><a href="tidyverse.html#cb51-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.integer)), <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="count" class="section level3" number="5.8.13">
<h3><span class="header-section-number">5.8.13</span> count()</h3>
<p>Agora entraremos no assunto de resumo das observa√ß√µes. Podemos fazer <strong>contagens resumos dos nossos dados</strong>, utilizando para isso a fun√ß√£o <code>dplyr::count()</code>. Essa fun√ß√£o ir√° contar valores de uma ou mais colunas, semelhante √† fun√ß√£o Base R <code>table()</code>, mas num contexto <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tidyverse.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para um coluna</span></span>
<span id="cb52-2"><a href="tidyverse.html#cb52-2" aria-hidden="true" tabindex="-1"></a>penguins_count <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="tidyverse.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species)</span>
<span id="cb52-4"><a href="tidyverse.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="tidyverse.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para mais de uma coluna</span></span>
<span id="cb52-6"><a href="tidyverse.html#cb52-6" aria-hidden="true" tabindex="-1"></a>penguins_count_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb52-7"><a href="tidyverse.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species, island)</span></code></pre></div>
</div>
<div id="group_by" class="section level3" number="5.8.14">
<h3><span class="header-section-number">5.8.14</span> group_by()</h3>
<p>Uma grande parte das opera√ß√µes feita nos dados s√£o realizadas em <strong>grupos definidos por valores de colunas ou vari√°veis categ√≥ricas</strong>. A fun√ß√£o <code>dplyr::group_by()</code> transforma um <code>tibble</code> e converte em um <code>tibble</code> agrupado, onde as opera√ß√µes s√£o realizadas ‚Äúpor grupo.‚Äù Essa fun√ß√£o √© utilizada geralmente com a fun√ß√£o <code>dplyr::summarise()</code>, que veremos logo em seguida. O agrupamento n√£o altera a apar√™ncia dos dados (al√©m de informar como est√£o agrupados). A fun√ß√£o <code>dplyr::ungroup()</code> remove o agrupamento. Podemos ainda usar <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>fazer os agrupamentos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="tidyverse.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb53-2"><a href="tidyverse.html#cb53-2" aria-hidden="true" tabindex="-1"></a>penguins_group_by <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="tidyverse.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species)</span>
<span id="cb53-4"><a href="tidyverse.html#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="tidyverse.html#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb53-6"><a href="tidyverse.html#cb53-6" aria-hidden="true" tabindex="-1"></a>penguins_group_by_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb53-7"><a href="tidyverse.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor)))</span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="5.8.15">
<h3><span class="header-section-number">5.8.15</span> summarise()</h3>
<p>Como dissemos, muitas vezes queremos <strong>resumir nossos dados</strong>, principalmente para ter uma no√ß√£o geral das vari√°veis (colunas) ou mesmo come√ßar a <strong>an√°lise explorat√≥ria resumindo vari√°veis cont√≠nuas por grupos de vari√°veis categ√≥ricas</strong>. Dessa forma, ao utilizar a fun√ß√£o <code>dplyr::summarise()</code> teremos um novo <code>tibble</code> com os dados resumidos, que √© a <strong>agrega√ß√£o ou resumo dos dados atrav√©s de fun√ß√µes</strong>. Da mesma forma que outras fun√ß√µes, podemos usar <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>resumir valores para mais de uma coluna</strong>, dependendo de resultados booleanos. .</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tidyverse.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb54-2"><a href="tidyverse.html#cb54-2" aria-hidden="true" tabindex="-1"></a>penguins_summarise <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="tidyverse.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb54-4"><a href="tidyverse.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-5"><a href="tidyverse.html#cb54-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">body_mass_g_sd =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb54-6"><a href="tidyverse.html#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="tidyverse.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb54-8"><a href="tidyverse.html#cb54-8" aria-hidden="true" tabindex="-1"></a>penguins_summarise_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb54-9"><a href="tidyverse.html#cb54-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb54-10"><a href="tidyverse.html#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="bind_rows-e-bind_cols" class="section level3" number="5.8.16">
<h3><span class="header-section-number">5.8.16</span> bind_rows() e bind_cols()</h3>
<p>Muitas vezes teremos de <strong>combinar duas ou mais tabelas de dados</strong>. Podemos utilizar as fun√ß√µes Base R <code>rbind</code> e <code>cbind</code>, como vimos. Entrentanto, pode ser interessante avan√ßar para as fun√ß√µes <code>dplyr::bind_rows()</code> e <code>dplyr::bind_cols()</code> do formato <em>tidyverse</em>. A ideia √© muito semelhante: a primeira fun√ß√£o combina dados por linhas e a segunda por colunas. Entretanto, h√° vantagens no uso dessas fun√ß√µes, como a identifica√ß√£o das linhas pelo argumento <strong>.id</strong> para a primera fun√ß√£o, e a confer√™ncia do nome das colunas pelo argumento <strong>.name_repair</strong> para a segunda fun√ß√£o.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="tidyverse.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar as linhas para dois tibbles</span></span>
<span id="cb55-2"><a href="tidyverse.html#cb55-2" aria-hidden="true" tabindex="-1"></a>penguins_01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb55-3"><a href="tidyverse.html#cb55-3" aria-hidden="true" tabindex="-1"></a>penguins_02 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">51</span><span class="sc">:</span><span class="dv">55</span>)</span>
<span id="cb55-4"><a href="tidyverse.html#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="tidyverse.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar linhas</span></span>
<span id="cb55-6"><a href="tidyverse.html#cb55-6" aria-hidden="true" tabindex="-1"></a>penguins_bind_rows <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(penguins_01, penguins_02, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb55-7"><a href="tidyverse.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="tidyverse.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar colunas</span></span>
<span id="cb55-9"><a href="tidyverse.html#cb55-9" aria-hidden="true" tabindex="-1"></a>penguins_bind_cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(penguins_01, penguins_02, <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span>)</span></code></pre></div>
</div>
<div id="join" class="section level3" number="5.8.17">
<h3><span class="header-section-number">5.8.17</span> *_join()</h3>
<p>Finalmente, veremos o √∫ltimo conjunto de fun√ß√µes do pacote <em>dplyr</em>, a <strong>jun√ß√£o de tabelas</strong>. Nessa opera√ß√£o, fazemos a <strong>combina√ß√£o de pares de conjunto de dados tabulares por uma ou mais colunas chaves</strong>. H√° dois tipos de jun√ß√µes: jun√ß√£o de muta√ß√£o e jun√ß√£o de filtragem. A <strong>jun√ß√£o de muta√ß√£o</strong> primeiro combina as observa√ß√µes por suas chaves e, em seguida, <strong>copia as vari√°veis (colunas) de uma tabela para a outra</strong>. √â fundamental destacar a import√¢ncia da <strong>coluna chave</strong>, que √© indicada pelo argumento <strong>by</strong>. Essa coluna deve conter <strong>elementos que sejam comuns √†s duas tabelas</strong> para que haja a combina√ß√£o dos elementos.</p>
<p>Existem quatro tipos de jun√ß√µes, que s√£o realizadas pelas fun√ß√µes <code>dplyr::inner_join()</code>, <code>dplyr::left_join()</code>, <code>dplyr::full_join()</code> e <code>dplyr::right_join()</code>, e que podem ser representadas na Figura <a href="tidyverse.html#fig:fig-r-join">5.3</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-join"></span>
<img src="img/cap04_fig03.png" alt="Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017)." width="80%" />
<p class="caption">
Figura 5.3: Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Considerando a nomenclatura de uma tabela de dados sendo como <code>x</code> e <code>y</code>, temos:</p>
<ul>
<li><code>inner_join(x, y)</code>: mant√©m apenas as observa√ß√µes em <code>x</code> e em <code>y</code></li>
<li><code>left_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>x</code></li>
<li><code>right_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>y</code></li>
<li><code>full_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>x</code> e em <code>y</code></li>
</ul>
<p>Aqui, vamos demostrar apenas a fun√ß√£o <code>dplyr::left_join()</code>, trazendo os dados do conjunto de dados do <strong>penguins_raw</strong> para o conjunto de dados do <strong>penguins</strong>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="tidyverse.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add uma coluna chave de ids</span></span>
<span id="cb56-2"><a href="tidyverse.html#cb56-2" aria-hidden="true" tabindex="-1"></a>penguin_islands <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb56-3"><a href="tidyverse.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">island =</span> <span class="fu">c</span>(<span class="st">&quot;Torgersen&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>, <span class="st">&quot;Dream&quot;</span>, <span class="st">&quot;Alpha&quot;</span>),</span>
<span id="cb56-4"><a href="tidyverse.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.083333</span>, <span class="sc">-</span><span class="fl">63.775636</span>, <span class="sc">-</span><span class="fl">64.233333</span>, <span class="sc">-</span><span class="dv">63</span>),</span>
<span id="cb56-5"><a href="tidyverse.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.766667</span>, <span class="sc">-</span><span class="fl">64.818569</span>, <span class="sc">-</span><span class="fl">64.733333</span>, <span class="sc">-</span><span class="fl">64.316667</span>)</span>
<span id="cb56-6"><a href="tidyverse.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-7"><a href="tidyverse.html#cb56-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-8"><a href="tidyverse.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># juncao - left</span></span>
<span id="cb56-9"><a href="tidyverse.html#cb56-9" aria-hidden="true" tabindex="-1"></a>penguins_left_join <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb56-10"><a href="tidyverse.html#cb56-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(penguin_islands, <span class="at">by =</span> <span class="st">&quot;island&quot;</span>)</span></code></pre></div>
<p>J√° a <strong>jun√ß√£o de filtragem</strong> combinam as observa√ß√µes da mesma maneira que as jun√ß√µes de muta√ß√£o, mas <strong>afetam as observa√ß√µes, n√£o as vari√°veis (colunas)</strong>. Existem dois tipos:</p>
<ul>
<li><code>semi_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>x</code> que t√™m uma correspond√™ncia em <code>y</code></li>
<li><code>anti_join(x, y)</code>: alimina todas as observa√ß√µes em <code>x</code> que t√™m uma correspond√™ncia em <code>y</code></li>
</ul>
<p><em>Semi-joins</em> s√£o √∫teis para <strong>corresponder tabelas de resumo filtradas de volta √†s linhas originais</strong>, removendo as linhas que n√£o estavam antes do join. <em>Anti-joins</em> s√£o √∫teis para <strong>diagnosticar incompatibilidades de jun√ß√£o</strong>, por exemplo, ao verificar os elementos que n√£o combinam entre duas tabelas de dados.</p>
</div>
<div id="opera√ß√µes-de-conjuntos-e-compara√ß√£o-de-dados" class="section level3" number="5.8.18">
<h3><span class="header-section-number">5.8.18</span> Opera√ß√µes de conjuntos e compara√ß√£o de dados</h3>
<p>Temos ainda <strong>opera√ß√µes de conjuntos</strong> e <strong>compara√ß√£o de dados</strong>.</p>
<ul>
<li><code>union(x, y)</code>: retorna todas as linhas que aparecem em <code>x</code>, <code>y</code> ou mais dos conjuntos de dados</li>
<li><code>interesect(x, y)</code>: retorna apenas as linhas que aparecem em <code>x</code> e em <code>y</code></li>
<li><code>setdiff(x, y)</code>: retorna as linhas que aparecem <code>x</code>, mas n√£o em <code>y</code></li>
<li><code>setequal(x, y)</code>: retorna se <code>x</code> e <code>y</code> s√£o iguais e quais suas diferen√ßas</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/relational-data.html">13 Relational data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
</div>
<div id="stringr" class="section level2" number="5.9">
<h2><span class="header-section-number">5.9</span> stringr</h2>
<p>O pacote <em>stringr</em> fornece um conjunto de fun√ß√µes para a <strong>manipula√ß√£o de caracteres ou strings</strong>. O pacote concentra-se nas fun√ß√µes de manipula√ß√£o mais importantes e comumente usadas. Para fun√ß√£o para espec√≠ficas, recomenda-se usar para o pacote <em>stringi</em>, que fornece um conjunto mais abrangente de fun√ß√µes. As fun√ß√µes do <em>stringr</em> podem ser agrupadas em algumas opera√ß√µes para tarefas espec√≠ficas como correspond√™ncia de padr√µes, espa√ßo em branco, mai√∫sculas e min√∫sculas, al√©m de outras fun√ß√µes.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://stringr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Demonstraremos <strong>algumas fun√ß√µes para algumas opera√ß√µes mais comuns</strong>, utilizando um vetor de um elemento, com o string ‚Äúpenguins.‚Äù</p>
<p>Podemos explorar o <strong>comprimento</strong> de strings com a fun√ß√£o <code>stringr::str_length()</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="tidyverse.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprimento</span></span>
<span id="cb57-2"><a href="tidyverse.html#cb57-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_length</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p><strong>Extrair um string</strong> por sua posi√ß√£o usando a fun√ß√£o <code>stringr::str_sub()</code> ou por um padr√£o com <code>stringr::str_extract()</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="tidyverse.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair pela posicao</span></span>
<span id="cb59-2"><a href="tidyverse.html#cb59-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">end =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;pen&quot;</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="tidyverse.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair por padr√£o</span></span>
<span id="cb61-2"><a href="tidyverse.html#cb61-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;p&quot;</code></pre>
<p><strong>Substituir strings</strong> por outros strings com <code>stringr::str_replace()</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="tidyverse.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sustituir</span></span>
<span id="cb63-2"><a href="tidyverse.html#cb63-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;a&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p><strong>Separar</strong> strings por um padr√£o com a fun√ß√£o <code>stringr::str_split()</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="tidyverse.html#cb65-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">string =</span> <span class="st">&quot;p-e-n-g-u-i-n-s&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,] &quot;p&quot;  &quot;e&quot;  &quot;n&quot;  &quot;g&quot;  &quot;u&quot;  &quot;i&quot;  &quot;n&quot;  &quot;s&quot;</code></pre>
<p><strong>Inserir espa√ßos em brancos</strong> pela esquerda ou direira com a fun√ß√£o <code>stringr::str_pad()</code>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="tidyverse.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inserir espacos em branco</span></span>
<span id="cb67-2"><a href="tidyverse.html#cb67-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;  penguins&quot;</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="tidyverse.html#cb69-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins  &quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="tidyverse.html#cb71-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins &quot;</code></pre>
<p>Tamb√©m podemos <strong>remover espa√ßos em branco</strong> do come√ßo, final ou ambo, utilizando <code>stringr::str_trim()</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="tidyverse.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover espacos em branco</span></span>
<span id="cb73-2"><a href="tidyverse.html#cb73-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins &quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="tidyverse.html#cb75-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="tidyverse.html#cb77-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p>Podemos tamb√©m <strong>alterar min√∫sculas e mai√∫sculas</strong> em diferentes, com v√°rias fun√ß√µes.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="tidyverse.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar minusculas e maiusculas</span></span>
<span id="cb79-2"><a href="tidyverse.html#cb79-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(<span class="at">string =</span> <span class="st">&quot;Penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="tidyverse.html#cb81-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;PENGUINS&quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="tidyverse.html#cb83-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_sentence</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="tidyverse.html#cb85-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<p>Podemos ainda <strong>ordenar os elementos</strong> de um vetor por ordem alfab√©tica, usando <code>stringr::str_sort()</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="tidyverse.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar</span></span>
<span id="cb87-2"><a href="tidyverse.html#cb87-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters)</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="tidyverse.html#cb89-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters, <span class="at">dec =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;z&quot; &quot;y&quot; &quot;x&quot; &quot;w&quot; &quot;v&quot; &quot;u&quot; &quot;t&quot; &quot;s&quot; &quot;r&quot; &quot;q&quot; &quot;p&quot; &quot;o&quot; &quot;n&quot; &quot;m&quot; &quot;l&quot; &quot;k&quot; &quot;j&quot; &quot;i&quot; &quot;h&quot;
## [20] &quot;g&quot; &quot;f&quot; &quot;e&quot; &quot;d&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot;</code></pre>
<p>Podemos ainda utilizar essas fun√ß√µes em complemento com o pacote <em>dplyr</em>, para <strong>alterar os strings de colunas</strong> ou <strong>nome das colunas</strong>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="tidyverse.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar valores das colunas</span></span>
<span id="cb91-2"><a href="tidyverse.html#cb91-2" aria-hidden="true" tabindex="-1"></a>penguins_stringr_valores <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a href="tidyverse.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">species =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(species))</span>
<span id="cb91-4"><a href="tidyverse.html#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="tidyverse.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar nome das colunas</span></span>
<span id="cb91-6"><a href="tidyverse.html#cb91-6" aria-hidden="true" tabindex="-1"></a>penguins_stringr_nomes <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb91-7"><a href="tidyverse.html#cb91-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(stringr<span class="sc">::</span>str_to_title)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/strings.html">14 Strings</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="forcats" class="section level2" number="5.10">
<h2><span class="header-section-number">5.10</span> forcats</h2>
<p>O pacote <em>forcats</em> fornece um conjunto de ferramentas √∫teis para <strong>manipular fatores</strong>. Como dito anteriormente, usamos fatores geralmente quando temos <strong>dados categ√≥ricos</strong>, que s√£o vari√°veis que possuem um conjunto de valores fixos e conhecidos. As fun√ß√µes s√£o utilizadas principalmente para: mudar a ordem dos n√≠veis, mudar os valores dos n√≠veis, adicionar e remover n√≠veis, combinar m√∫ltiplos n√≠veis, al√©m de outras opera√ß√µes.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://forcats.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Vamos utilizar ainda os dados <strong>penguins</strong> e <strong>penguins_raw</strong> para exemplificar o uso do pacote <em>forcats</em>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="tidyverse.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb92-2"><a href="tidyverse.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos <strong>converter</strong> dados de <strong>string</strong> para <strong>fator</strong>, utilizando a fun√ß√£o <code>forcats::as_factor()</code>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tidyverse.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string</span></span>
<span id="cb93-2"><a href="tidyverse.html#cb93-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">as_factor</span>(penguins_raw<span class="sc">$</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [3] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [5] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## 3 Levels: Adelie Penguin (Pygoscelis adeliae) ...</code></pre>
<p>Podemos facilmente mudar o <strong>nome dos n√≠veis</strong> utilizando a <code>forcats::fct_recode()</code>.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tidyverse.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># muda o nome dos niveis</span></span>
<span id="cb95-2"><a href="tidyverse.html#cb95-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_recode</span>(penguins<span class="sc">$</span>species, <span class="at">a =</span> <span class="st">&quot;Adelie&quot;</span>, <span class="at">c =</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="at">g =</span> <span class="st">&quot;Gentoo&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] a a a a a a
## Levels: a c g</code></pre>
<p>Para <strong>inverter os n√≠veis</strong>, usamos a fun√ß√£o <code>forcats::fct_rev()</code>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="tidyverse.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inverte os niveis</span></span>
<span id="cb97-2"><a href="tidyverse.html#cb97-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_rev</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Gentoo Chinstrap Adelie</code></pre>
<p>Uma opera√ß√£o muito comum com fatores √© <strong>mudar a ordem dos n√≠veis</strong>. Quando precisamos <strong>especificar a ordem dos n√≠veis</strong>, podemos fazer essa opera√ß√£o manualmente com a fun√ß√£o <code>forcats::fct_relevel()</code>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="tidyverse.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especifica a ordem dos niveis</span></span>
<span id="cb99-2"><a href="tidyverse.html#cb99-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(penguins<span class="sc">$</span>species, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Adelie&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Chinstrap Gentoo Adelie</code></pre>
<p>Como vimos, a <strong>reordena√ß√£o</strong> dos n√≠veis pode ser feita <strong>manualmente</strong>. Mas existe outras formas <strong>autom√°ticas de reordena√ß√£o</strong> seguindo algumas <strong>regras</strong>, para as quais existem fun√ß√µes espec√≠ficas.</p>
<ul>
<li><code>forcats::fct_inorder()</code>: pela ordem em que aparecem pela primeira vez</li>
<li><code>forcats::fct_infreq()</code>: por n√∫mero de observa√ß√µes com cada n√≠vel (o maior primeiro)</li>
<li><code>forcats::fct_inseq()</code>: por valor num√©rico de n√≠vel</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="tidyverse.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># niveis pela ordem em que aparecem</span></span>
<span id="cb101-2"><a href="tidyverse.html#cb101-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="tidyverse.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordem (decrescente) de frequencia</span></span>
<span id="cb103-2"><a href="tidyverse.html#cb103-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<p>Por fim, podemos fazer a <strong>agrega√ß√£o de n√≠veis raros em um n√≠vel</strong> utilizando a fun√ß√£o <code>forcats::fct_lump()</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="tidyverse.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agregacao de niveis raros em um nivel</span></span>
<span id="cb105-2"><a href="tidyverse.html#cb105-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_lump</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Other</code></pre>
<p>Podemos ainda utilizar essas fun√ß√µes em complemento com o pacote <em>dplyr</em>, para fazer <strong>manipula√ß√µes de fatores nas colunas</strong>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="tidyverse.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformar varias colunas em fator</span></span>
<span id="cb107-2"><a href="tidyverse.html#cb107-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_multi_factor <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="tidyverse.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), forcats<span class="sc">::</span>as_factor))</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/factors.html">15 Factors</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="lubridate" class="section level2" number="5.11">
<h2><span class="header-section-number">5.11</span> lubridate</h2>
<p>O pacote <em>lubridate</em> fornece um conjunto de fun√ß√µes para a <strong>manipula√ß√£o de dados data e tempo</strong>. Dessa forma, esse pacote facilita o manejo desse tipo de dado no R, pois geralmente esses dados n√£o s√£o intuitivos e mudam dependendo do tipo de objeto de data e hora. Al√©m disso, os m√©todos que usam datas e hor√°rios devem levar em considera√ß√£o fusos hor√°rios, anos bissextos, hor√°rios de ver√£o e al√©m de outras particularidades. Existem diversas fun√ß√µes nesse pacote, sendo as mesmas focadas em: transforma√ß√µes de data/tempo, componentes, arredondamentos, dura√ß√µes, per√≠odos, intervalos, al√©m de muitas outras fun√ß√µes espec√≠ficas.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://lubridate.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Apesar de estar inserido no escopo do <em>tidyverse</em>, este pacote n√£o √© instalado com os demais, <strong>requisitando sua instala√ß√£o solo</strong>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="tidyverse.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb108-2"><a href="tidyverse.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="tidyverse.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb109-2"><a href="tidyverse.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>Existem tr√äs tipos de dados data/tempo:</p>
<ul>
<li><strong>Data</strong>: tempo em dias, meses e anos <code>&lt;date&gt;</code></li>
<li><strong>Tempo</strong>: tempo dentro de um dia <code>&lt;time&gt;</code></li>
<li><strong>Data-tempo</strong>: tempo em um instante (data mais tempo) <code>&lt;dttm&gt;</code></li>
</ul>
<p>Para trabalhar exclusivamente com hor√°rios, podemos utilizar o pacote <em>hms</em>.</p>
<p>√â fundamental tamb√©m destacar que algumas letras ter√£o um significado temporal, sendo abrevia√ß√µes de diferentes per√≠odos em ingl√™s: <strong>y</strong>ear (ano), <strong>m</strong>onth (m√™s), <strong>w</strong>eak (semana), <strong>d</strong>ay (dia), <strong>h</strong>our (hora), <strong>m</strong>inute (minuto), e <strong>s</strong>econd (segundo).</p>
<p>Para acessar a <strong>informa√ß√£o da data e hor√°rios atuais</strong> podemos utilizar as fun√ß√µes <code>lubridate::today()</code> e <code>lubridate::now()</code>.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="tidyverse.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrai a data nesse instante</span></span>
<span id="cb110-2"><a href="tidyverse.html#cb110-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10&quot;</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="tidyverse.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extraie a data e tempo nesse instante</span></span>
<span id="cb112-2"><a href="tidyverse.html#cb112-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">now</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 11:49:51 -03&quot;</code></pre>
<p>Al√©m dessas informa√ß√µes instant√¢neas, existem <strong>tr√™s maneiras</strong> de criar um dado de data/tempo.</p>
<ul>
<li>De um string</li>
<li>De componentes individuais de data e hora</li>
<li>De um objeto de data/tempo existente</li>
</ul>
<p>Os dados de data/tempo geralmente est√£o no formato de <strong>strings</strong>. Podemos transformar os dados especificando a ordem dos componentes, ou seja, a ordem em que ano, m√™s e dia aparecem no string, usando as letras <code>y</code> (ano), <code>m</code> (m√™s) e <code>d</code> (dia) na mesma ordem, por exemplo, <code>lubridate::dmy()</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="tidyverse.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb114-2"><a href="tidyverse.html#cb114-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-03-2021&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03&quot;</code></pre>
<p>Essas fun√ß√µes tamb√©m aceitam n√∫meros sem aspas, al√©m de serem <strong>muito vers√°teis</strong> e <strong>funcionarem em outros diversos formatos</strong>.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="tidyverse.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb116-2"><a href="tidyverse.html#cb116-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-Mar-2021&quot;</span>)</span>
<span id="cb116-3"><a href="tidyverse.html#cb116-3" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="dv">03032021</span>)</span>
<span id="cb116-4"><a href="tidyverse.html#cb116-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03032021&quot;</span>)</span>
<span id="cb116-5"><a href="tidyverse.html#cb116-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03/03/2021&quot;</span>)</span>
<span id="cb116-6"><a href="tidyverse.html#cb116-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03.03.2021&quot;</span>)</span></code></pre></div>
<p>Al√©m da data, podemos <strong>especificar hor√°rios</strong> atrelados √† essas datas. Para criar uma data e tempo, adicionamos um underscore (<code>_</code>) e os <code>h</code> (hora), <code>m</code> (minuto) e <code>s</code> (segundo) ao nome da fun√ß√£o, al√©m do argumento <strong>tz</strong> para especificar <strong>fuso hor√°rio</strong>.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="tidyverse.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especificar horarios e fuso horario</span></span>
<span id="cb117-2"><a href="tidyverse.html#cb117-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_h</span>(<span class="st">&quot;03-03-2021 13&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="tidyverse.html#cb119-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hm</span>(<span class="st">&quot;03-03-2021 13:32&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="tidyverse.html#cb121-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 UTC&quot;</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="tidyverse.html#cb123-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 -03&quot;</code></pre>
<p>Podemos ainda ter <strong>componentes individuais</strong> de data-hora em <strong>m√∫ltiplas colunas</strong>. Para realizar essa transforma√ß√£o, podemos usar as fun√ß√µes <code>lubridate::make_date()</code> e <code>lubridate::make_datetime()</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="tidyverse.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dados com componentes individuais</span></span>
<span id="cb125-2"><a href="tidyverse.html#cb125-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb125-3"><a href="tidyverse.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ano =</span> <span class="fu">c</span>(<span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2021</span>),</span>
<span id="cb125-4"><a href="tidyverse.html#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb125-5"><a href="tidyverse.html#cb125-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dia =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">31</span>),</span>
<span id="cb125-6"><a href="tidyverse.html#cb125-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hora =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">14</span>, <span class="dv">18</span>), </span>
<span id="cb125-7"><a href="tidyverse.html#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">minuto =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">44</span>, <span class="dv">55</span>)</span>
<span id="cb125-8"><a href="tidyverse.html#cb125-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb125-9"><a href="tidyverse.html#cb125-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-10"><a href="tidyverse.html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="co"># data de componentes individuais</span></span>
<span id="cb125-11"><a href="tidyverse.html#cb125-11" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb125-12"><a href="tidyverse.html#cb125-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">data =</span> lubridate<span class="sc">::</span><span class="fu">make_datetime</span>(ano, mes, dia, hora, minuto))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##     ano   mes   dia  hora minuto data               
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
## 1  2021     1    12     2      2 2021-01-12 02:02:00
## 2  2021     2    20    14     44 2021-02-20 14:44:00
## 3  2021     3    31    18     55 2021-03-31 18:55:00</code></pre>
<p>Por fim, podemo criar datas <strong>modificando entre data-tempo e data</strong>, utilizando as fun√ß√µes <code>lubridate::as_datetime()</code> e <code>lubridate::as_date()</code>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="tidyverse.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data para data-horario</span></span>
<span id="cb127-2"><a href="tidyverse.html#cb127-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 UTC&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="tidyverse.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data-horario para data</span></span>
<span id="cb129-2"><a href="tidyverse.html#cb129-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10&quot;</code></pre>
<p>Uma vez que entendemos como podemos <strong>criar dados de data/tempo</strong>, podemos explorar fun√ß√µes para <strong>acessar e definir componentes individuais</strong>. Podemos explorar <strong>cada componente</strong> dos dados de data/tempo. Para essa tarefa existe uma grande quantidade de fun√ß√µes para <strong>acessar</strong> de partes de datas e hor√°rios.</p>
<ul>
<li><code>year()</code>: acessa o ano</li>
<li><code>month()</code>: acessa o m√™s</li>
<li><code>month()</code>: acessa o dia</li>
<li><code>yday()</code>: acessa o dia do ano</li>
<li><code>mday()</code>: acessa o dia do m√™s</li>
<li><code>wday()</code>: acessa o dia da semana</li>
<li><code>hour()</code>: acessa a hora</li>
<li><code>minute()</code>: acessa os minutos</li>
<li><code>second()</code>: acessa os segundos</li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="tidyverse.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair</span></span>
<span id="cb131-2"><a href="tidyverse.html#cb131-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 2021</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="tidyverse.html#cb133-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="tidyverse.html#cb135-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Mar
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="tidyverse.html#cb137-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">day</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="tidyverse.html#cb139-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="tidyverse.html#cb141-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Wed
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="tidyverse.html#cb143-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">second</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 51.48763</code></pre>
<p>Al√©m de acessar componentes de datas e hor√°rios, podemos usar essas fun√ß√µes para fazer a <strong>inclus√£o</strong> de informa√ß√µes de datas e tempo.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="tidyverse.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb145-2"><a href="tidyverse.html#cb145-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dmy_hms</span>(<span class="st">&quot;04-03-2021 01:04:56&quot;</span>)</span>
<span id="cb145-3"><a href="tidyverse.html#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="tidyverse.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir</span></span>
<span id="cb145-5"><a href="tidyverse.html#cb145-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(data) <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb145-6"><a href="tidyverse.html#cb145-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(data) <span class="ot">&lt;-</span> <span class="dv">01</span></span>
<span id="cb145-7"><a href="tidyverse.html#cb145-7" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hour</span>(data) <span class="ot">&lt;-</span> <span class="dv">13</span></span></code></pre></div>
<p>Mais convenientemente, podemos utilizar a fun√ß√£o <code>update()</code> para alterar <strong>v√°rios valores de uma vez</strong>.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="tidyverse.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir varios valores</span></span>
<span id="cb146-2"><a href="tidyverse.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(data, <span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">1</span>, <span class="at">mday =</span> <span class="dv">1</span>, <span class="at">hour =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-01 01:04:56 UTC&quot;</code></pre>
<p>Muitas vezes precisamos fazer <strong>opera√ß√µes com datas</strong>, como a <strong>aritm√©tica com datas</strong>: subtra√ß√£o, adi√ß√£o e divis√£o. Para tanto, √© preciso entender tr√™s classes importantes que representam intervalos de tempo.</p>
<ul>
<li><strong>dura√ß√µes</strong>: representam um n√∫mero exato de segundos</li>
<li><strong>per√≠odos</strong>: representam unidades humanas como semanas e meses</li>
<li><strong>intervalos</strong>: representam um ponto inicial e final</li>
</ul>
<p>Quando fazemos uma <strong>subtra√ß√£o de datas</strong>, criamos um objeto da classe <code>difftime</code>. Essa classe pode ser um pouco complicada de trabalhar, ent√£o dentro do <em>lubridate</em>, podemos usar fun√ß√µes que convertem essa classe em <strong>dura√ß√£o</strong>, da classe <code>Duration</code>. As dura√ß√µes sempre registram o intervalo de tempo em segundos, com alguma unidade de tempo maior entre par√™nteses. H√° uma s√©rie de fun√ß√µes para tratar dessa classe.</p>
<ul>
<li><code>duration()</code>: cria data em dura√ß√£o</li>
<li><code>as.duration()</code>: converte datas em dura√ß√£o</li>
<li><code>dyears()</code>: dura√ß√£o de anos</li>
<li><code>dmonths()</code>: dura√ß√£o de meses</li>
<li><code>dweeks()</code>: dura√ß√£o de semanas</li>
<li><code>ddays()</code>: dura√ß√£o de dias</li>
<li><code>dhours()</code>: dura√ß√£o de horas</li>
<li><code>dminutes()</code>: dura√ß√£o de minutos</li>
<li><code>dseconds()</code>: dura√ß√£o de segundos</li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="tidyverse.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtracao de datas</span></span>
<span id="cb148-2"><a href="tidyverse.html#cb148-2" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb148-3"><a href="tidyverse.html#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="tidyverse.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao para duracao</span></span>
<span id="cb148-5"><a href="tidyverse.html#cb148-5" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r_dur <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">as.duration</span>(tempo_estudando_r)</span>
<span id="cb148-6"><a href="tidyverse.html#cb148-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-7"><a href="tidyverse.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duracoes</span></span>
<span id="cb148-8"><a href="tidyverse.html#cb148-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">90</span>, <span class="st">&quot;seconds&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="tidyverse.html#cb150-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="fl">1.5</span>, <span class="st">&quot;minutes&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="tidyverse.html#cb152-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">1</span>, <span class="st">&quot;days&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;86400s (~1 days)&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="tidyverse.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao da duracao</span></span>
<span id="cb154-2"><a href="tidyverse.html#cb154-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dseconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100s (~1.67 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="tidyverse.html#cb156-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dminutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;6000s (~1.67 hours)&quot;</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="tidyverse.html#cb158-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dhours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;360000s (~4.17 days)&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="tidyverse.html#cb160-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8640000s (~14.29 weeks)&quot;</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="tidyverse.html#cb162-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dweeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;60480000s (~1.92 years)&quot;</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="tidyverse.html#cb164-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;3155760000s (~100 years)&quot;</code></pre>
<p>Podemos ainda utilizar as dura√ß√µes para fazer <strong>opera√ß√µes aritm√©ticas com datas</strong> como adi√ß√£o, subtra√ß√£o e multiplica√ß√£o.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="tidyverse.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando duracoes a datas</span></span>
<span id="cb166-2"><a href="tidyverse.html#cb166-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-11&quot;</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="tidyverse.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo duracoes de datas</span></span>
<span id="cb168-2"><a href="tidyverse.html#cb168-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-03-09 18:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="tidyverse.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># multiplicando duracoes</span></span>
<span id="cb170-2"><a href="tidyverse.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;126230400s (~4 years)&quot;</code></pre>
<p>Al√©m das dura√ß√µes, podemos usar <strong>per√≠odos</strong>, que s√£o <strong>extens√µes de tempo</strong> n√£o fixados em segundos como as dura√ß√µes, mas flex√≠veis, com o tempo em dias, semanas, meses ou anos, permitindo uma interpreta√ß√£o mais intuitiva das datas. Novamente, h√° uma s√©rie de fun√ß√µes para realizar essas opera√ß√µes.</p>
<ul>
<li><code>period()</code>: cria data em per√≠odo</li>
<li><code>as.period()</code>: converte datas em per√≠odo</li>
<li><code>seconds()</code>: per√≠odo em segundos</li>
<li><code>minutes()</code>: per√≠odo em minutos</li>
<li><code>hours()</code>: per√≠odo em horas</li>
<li><code>days()</code>: per√≠odo em dias</li>
<li><code>weeks()</code>: per√≠odo em semanas</li>
<li><code>months()</code>: per√≠odo em meses</li>
<li><code>years()</code>: per√≠odo em anos</li>
</ul>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="tidyverse.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando periodos</span></span>
<span id="cb172-2"><a href="tidyverse.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;5M 90S&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="tidyverse.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>, <span class="st">&quot;hour&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;week&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;20d 2H 1M 3S&quot;</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="tidyverse.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao de periodos</span></span>
<span id="cb176-2"><a href="tidyverse.html#cb176-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">seconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100S&quot;</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="tidyverse.html#cb178-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">minutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100M 0S&quot;</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="tidyverse.html#cb180-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="tidyverse.html#cb182-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">days</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="tidyverse.html#cb184-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;700d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="tidyverse.html#cb186-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">years</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100y 0m 0d 0H 0M 0S&quot;</code></pre>
<p>Al√©m disso, podemos fazer <strong>opera√ß√µes com os per√≠odos</strong>, somando e subtraindo.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="tidyverse.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando datas</span></span>
<span id="cb188-2"><a href="tidyverse.html#cb188-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-19&quot;</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="tidyverse.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo datas</span></span>
<span id="cb190-2"><a href="tidyverse.html#cb190-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-12-30&quot;</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="tidyverse.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando datas recorrentes</span></span>
<span id="cb192-2"><a href="tidyverse.html#cb192-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2021-03-10&quot; &quot;2021-03-17&quot; &quot;2021-03-24&quot; &quot;2021-03-31&quot; &quot;2021-04-07&quot;
##  [6] &quot;2021-04-14&quot; &quot;2021-04-21&quot; &quot;2021-04-28&quot; &quot;2021-05-05&quot; &quot;2021-05-12&quot;
## [11] &quot;2021-05-19&quot;</code></pre>
<p>Por fim, veremos os <strong>intervalos</strong>. Intervalos s√£o <strong>per√≠odos de tempo limitados por duas datas</strong>, possuindo uma <strong>dura√ß√£o com um ponto de partida</strong>, que o faz preciso para determinar uma dura√ß√£o. Intervalos s√£o objetos da classe <code>Interval</code>. Da mesma forma que para dura√ß√£o e intervalos, h√° uma s√©rie de fun√ß√µes para realizar essas opera√ß√µes.</p>
<ul>
<li><code>interval()</code>: cria data em intervalo</li>
<li><code>%--%</code>: cria data em intervalo</li>
<li><code>as.interval()</code>: converte datas em intervalo</li>
<li><code>int_start()</code>: acessa ou atribui data inicial de um intervalo</li>
<li><code>int_end()</code>: acessa ou atribui data final de um intervalo</li>
<li><code>int_length()</code>: comprimento de um intervalo em segundos</li>
<li><code>int_flip()</code>: inverte a ordem da data de in√≠cio e da data de t√©rmino em um intervalo</li>
<li><code>int_shift()</code>: desloca as datas de in√≠cio e t√©rmino de um intervalo</li>
<li><code>int_aligns()</code>: testa se dois intervalos compartilham um ponto final</li>
<li><code>int_standardize()</code>: garante que todos os intervalos sejam positivos</li>
<li><code>int_diff()</code>: retorna os intervalos que ocorrem entre os elementos de data-hora</li>
<li><code>int_overlaps()</code>: testa se dois intervalos se sobrep√µem</li>
<li><code>%within%</code>: testa se o primeiro intervalo est√° contido no segundo</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="tidyverse.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duas datas - inicio de estudos do r e nascimento do meu filho</span></span>
<span id="cb194-2"><a href="tidyverse.html#cb194-2" aria-hidden="true" tabindex="-1"></a>r_inicio <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb194-3"><a href="tidyverse.html#cb194-3" aria-hidden="true" tabindex="-1"></a>filho_nascimento <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;26-09-2013&quot;</span>)</span>
<span id="cb194-4"><a href="tidyverse.html#cb194-4" aria-hidden="true" tabindex="-1"></a>r_hoje <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb194-5"><a href="tidyverse.html#cb194-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-6"><a href="tidyverse.html#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval</span></span>
<span id="cb194-7"><a href="tidyverse.html#cb194-7" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">interval</span>(r_inicio, r_hoje)</span>
<span id="cb194-8"><a href="tidyverse.html#cb194-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-9"><a href="tidyverse.html#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval %--%</span></span>
<span id="cb194-10"><a href="tidyverse.html#cb194-10" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="ot">&lt;-</span> filho_nascimento <span class="sc">%--%</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb194-11"><a href="tidyverse.html#cb194-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-12"><a href="tidyverse.html#cb194-12" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes com intervalos</span></span>
<span id="cb194-13"><a href="tidyverse.html#cb194-13" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_start</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2011-11-30 UTC&quot;</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="tidyverse.html#cb196-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_end</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 UTC&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="tidyverse.html#cb198-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_length</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 292723200</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="tidyverse.html#cb200-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_flip</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 2021-03-10 UTC--2011-11-30 UTC</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="tidyverse.html#cb202-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_shift</span>(r_intervalo, <span class="fu">duration</span>(<span class="at">days =</span> <span class="dv">30</span>))</span></code></pre></div>
<pre><code>## [1] 2011-12-30 UTC--2021-04-09 UTC</code></pre>
<p>Uma opera√ß√£o de destaque √© <strong>verificar a sobreposi√ß√£o</strong> entre dois intervalos.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="tidyverse.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar sobreposicao - int_overlaps</span></span>
<span id="cb204-2"><a href="tidyverse.html#cb204-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_overlaps</span>(r_intervalo, filho_intervalo)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="tidyverse.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar se intervalor contido</span></span>
<span id="cb206-2"><a href="tidyverse.html#cb206-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%within%</span> filho_intervalo</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="tidyverse.html#cb208-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">%within%</span> r_intervalo</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Podemos ainda <strong>calcular quantos per√≠odos existem dentro de um intervalo</strong>, utilizando as opera√ß√µes de <code>/</code> e <code>%/%</code>.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="tidyverse.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - anos</span></span>
<span id="cb210-2"><a href="tidyverse.html#cb210-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9.273973</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="tidyverse.html#cb212-1" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%/%</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="tidyverse.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - dias e semandas</span></span>
<span id="cb214-2"><a href="tidyverse.html#cb214-2" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">days</span>()</span></code></pre></div>
<pre><code>## [1] 2722</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="tidyverse.html#cb216-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>()</span></code></pre></div>
<pre><code>## [1] 388.8571</code></pre>
<p>Ainda podemos fazer <strong>transforma√ß√µes dos dados para per√≠odos</strong> e ter todas as unidades de data e tempo que o intervalo compreende.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="tidyverse.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tempo total estudando r</span></span>
<span id="cb218-2"><a href="tidyverse.html#cb218-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;9y 3m 10d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="tidyverse.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># idade do meu filho</span></span>
<span id="cb220-2"><a href="tidyverse.html#cb220-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(filho_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;7y 5m 12d 0H 0M 0S&quot;</code></pre>
<p>Por fim, <strong>fusos hor√°rios</strong> tendem a ser um fator complicador quando precisamos analisar informa√ß√µes instant√¢neas de tempo (hor√°rio) de outras partes do planeta, ou mesmo fazer convers√µes dos hor√°rio. No <em>lubridate</em> h√° fun√ß√µes para ajudar nesse assunto. Para isso, podemos utilizar a fun√ß√£o <code>lubridate::with_tz()</code>, e no argumento <strong>tzone</strong> informar o fuso hor√°rio para a transforma√ß√£o do hor√°rio.</p>
<p>Podemos descobrir o <strong>fuso hor√°rio que o R est√° considerando</strong> com a fun√ß√£o <code>Sys.timezone()</code>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="tidyverse.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fuso horario no r</span></span>
<span id="cb222-2"><a href="tidyverse.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code></pre></div>
<pre><code>## [1] &quot;America/Sao_Paulo&quot;</code></pre>
<p>No R h√° uma <strong>listagem dos nomes dos fusos hor√°rios</strong> que podemos utilizar no argumento <strong>tzone</strong> para diferentes fusos hor√°rios.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="tidyverse.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar os fuso horarios</span></span>
<span id="cb224-2"><a href="tidyverse.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] 607</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="tidyverse.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot;
## [4] &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;      &quot;Africa/Asmera&quot;</code></pre>
<p>Podemos nos perguntar que s√£o em outra parte do globo, ou fazer as convers√µes facilmente no <em>lubridate</em>.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="tidyverse.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># que horas sao agoram em...</span></span>
<span id="cb228-2"><a href="tidyverse.html#cb228-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 11:49:51 -03&quot;</code></pre>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="tidyverse.html#cb230-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 14:49:51 GMT&quot;</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="tidyverse.html#cb232-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;Europe/Berlin&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 15:49:51 CET&quot;</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="tidyverse.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># altera o fuso sem mudar a hora</span></span>
<span id="cb234-2"><a href="tidyverse.html#cb234-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">force_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 11:49:51 GMT&quot;</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/dates-and-times.html">16 Dates and times</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="purrr" class="section level2" number="5.12">
<h2><span class="header-section-number">5.12</span> purrr</h2>
<p>Pacote <em>purrr</em> implementa a <strong>Programa√ß√£o Funcional</strong> no R, fornecendo um conjunto completo e consistente de ferramentas para trabalhar com fun√ß√µes e vetores. A programa√ß√£o funcional √© um assunto bastante extenso, sendo mais conhecido no R pela fam√≠lia de fun√ß√µes <code>purrr::map()</code>, que permite substituir muitos <strong>loops for</strong> por um c√≥digo mais sucinto e f√°cil de ler. N√£o iremos aqui focar nas outras fun√ß√µes.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://purrr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Um <strong>loop for</strong> pode ser entendido como uma <strong>itera√ß√£o</strong>: um bloco de c√≥digos √© repetido mudando um contador de uma lista de possibilidades. Vamos exemplificar com uma itera√ß√£o bem simples, onde iremos imprimir no console os valores de 1 a 10, utilizando a fun√ß√£o <code>for()</code>, um contador <code>i</code> em um vetor de dez n√∫meros <code>1:10</code> que ser√° iterado, no bloco de c√≥digos definido entre <code>{}</code>, i.e, usando a fun√ß√£o <code>print()</code> para imprimir os valores.</p>
<p>A ideia √© <strong>bastante simples</strong>: a fun√ß√£o <code>for()</code> vai atribuir o primeiro valor da lista ao contador <code>i</code>, esse contador ser√° utilizado em todo o bloco de c√≥digos. Quando o bloco terminar, o segundo valor √© atribu√≠do ao contador <code>i</code> e entra no bloco de c√≥digos, repetindo esse processo at√© que todos os elementos da lista seja atribu√≠da ao contador.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="tidyverse.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for</span></span>
<span id="cb236-2"><a href="tidyverse.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb236-3"><a href="tidyverse.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb236-4"><a href="tidyverse.html#cb236-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Com essa ideia em mente, a <strong>programa√ß√£o funcional</strong> utilizando a fun√ß√£o <code>purrr::map()</code>, ficaria dessa forma.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="tidyverse.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for com map</span></span>
<span id="cb238-2"><a href="tidyverse.html#cb238-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.f =</span> print)</span></code></pre></div>
<p>Nessa estrutura, temos:</p>
<p><code>map(.x, .f)</code></p>
<ul>
<li><strong>.x</strong>: um vetor, lista ou data frame<br />
</li>
<li><strong>.f</strong>: uma fun√ß√£o</li>
</ul>
<p>Num outro exemplo, iremos aplicar a fun√ß√£o <code>sum()</code> para <strong>somar os valores de v√°rios elementos de uma lista</strong>.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="tidyverse.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># map</span></span>
<span id="cb239-2"><a href="tidyverse.html#cb239-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb239-3"><a href="tidyverse.html#cb239-3" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(x, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 15
## 
## [[2]]
## [1] 16
## 
## [[3]]
## [1] 3
## 
## [[4]]
## [1] 10</code></pre>
<p>H√° <strong>diferente tipos de retornos</strong> da fam√≠lia <code>purrr::map()</code>.</p>
<ul>
<li><code>map()</code>: retorna uma lista</li>
<li><code>map_chr()</code>: retorna um vetor de strings</li>
<li><code>map_dbl()</code>: retorna um vetor num√©rico (double)</li>
<li><code>map_int()</code>: retorna um vetor num√©rico (integer)</li>
<li><code>map_lgl()</code>: retorna um vetor l√≥gico</li>
<li><code>map_dfr()</code>: retorna um data frame (por linhas)</li>
<li><code>map_dfc()</code>: retorna um data frame (por colunas)</li>
</ul>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="tidyverse.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variacoes da funcao map</span></span>
<span id="cb241-2"><a href="tidyverse.html#cb241-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dbl</span>(x, sum)</span></code></pre></div>
<pre><code>## [1] 15 16  3 10</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="tidyverse.html#cb243-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_chr</span>(x, paste, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1 2 3 4 5&quot; &quot;4 5 7&quot;     &quot;1 1 1&quot;     &quot;2 2 2 2 2&quot;</code></pre>
<p>Essas <strong>funcionalidades</strong> j√° eram conhecidas no Base R pelas fun√ß√µes da <strong>fam√≠lia <code>apply</code></strong>: <code>apply()</code>, <code>lapply()</code>, <code>sapply()</code>, <code>vapply()</code>, <code>mapply()</code>, <code>rapply()</code> e <code>tapply()</code>. Essas fun√ß√µes formam a base de combina√ß√µes mais complexas e ajudam a <strong>realizar opera√ß√µes com poucas linhas de c√≥digo</strong>, para diferentes retornos.</p>
<p>Temos ainda <strong>duas variantes</strong> da fun√ß√£o <code>map()</code>: <code>purrr::map2()</code> e <code>purrr::pmap()</code>, para duas ou mais listas, respectivamente. Como vimos para a primeira fun√ß√£o, existem duas varia√ß√µes do sufixo para <strong>modificar o retorno</strong> da fun√ß√£o.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="tidyverse.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listas</span></span>
<span id="cb245-2"><a href="tidyverse.html#cb245-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb245-3"><a href="tidyverse.html#cb245-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb245-4"><a href="tidyverse.html#cb245-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb245-5"><a href="tidyverse.html#cb245-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-6"><a href="tidyverse.html#cb245-6" aria-hidden="true" tabindex="-1"></a><span class="co"># map2</span></span>
<span id="cb245-7"><a href="tidyverse.html#cb245-7" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(x, y, prod)</span></code></pre></div>
<pre><code>## [1]  9 25  0  1</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="tidyverse.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pmap</span></span>
<span id="cb247-2"><a href="tidyverse.html#cb247-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pmap_dbl</span>(<span class="fu">list</span>(x, y, z), prod)</span></code></pre></div>
<pre><code>## [1]  27 125   0   1</code></pre>
<p>Essa fun√ß√µes podem ser usadas em conjunto para <strong>implementar rotinas de manipula√ß√£o e an√°lise de dados</strong> com poucas linhas de c√≥digo, mas que n√£o exploraremos em sua complitude aqui. Listamos dois exemplos simples.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="tidyverse.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo dos dados</span></span>
<span id="cb249-2"><a href="tidyverse.html#cb249-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb249-3"><a href="tidyverse.html#cb249-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb249-4"><a href="tidyverse.html#cb249-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb249-5"><a href="tidyverse.html#cb249-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_dbl</span>(mean)</span></code></pre></div>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="tidyverse.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># analise dos dados</span></span>
<span id="cb250-2"><a href="tidyverse.html#cb250-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb250-3"><a href="tidyverse.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_split</span>(island, species) <span class="sc">%&gt;%</span> </span>
<span id="cb250-4"><a href="tidyverse.html#cb250-4" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(bill_depth_mm <span class="sc">~</span> bill_length_mm, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span> </span>
<span id="cb250-5"><a href="tidyverse.html#cb250-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb250-6"><a href="tidyverse.html#cb250-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="st">&quot;r.squared&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/iteration.html">21 Iteration</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="exerc√≠cios" class="section level2" number="5.13">
<h2><span class="header-section-number">5.13</span> Exerc√≠cios</h2>
<ol style="list-style-type: decimal">
<li>Reescreva as opera√ß√µes abaixo utilizando pipes <code>%&gt;%</code>.</li>
</ol>
<ul>
<li><code>log10(cumsum(1:100))</code></li>
<li><code>sum(sqrt(abs(rnorm(100))))</code></li>
<li><code>sum(sort(sample(1:10, 10000, rep = TRUE)))</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>Use a fun√ß√£o <code>download.file()</code> e <code>unzip()</code> para baixar e extrair o arquivo do data paper de m√©dios e grandes mam√≠feros: <a href="https://doi.org/10.1002/ecy.2785">ATLANTIC MAMMALS</a>. Em seguinda, importe para o R, usando a fun√ß√£o <code>readxl::read_excel()</code>.</p></li>
<li><p>Use a fun√ß√£o <code>tibble::glimpse()</code> para ter uma no√ß√£o geral dos dados importados no item anterior.</p></li>
<li><p>Compare os dados de penguins (<em>palmerpenguins::penguins_raw</em> e <em>palmerpenguins::penguins</em>). Monte uma s√©rie de fun√ß√µes dos pacotes <em>tidyr</em> e <em>dplyr</em> para fazer limpar os dados e fazer com que o primeiro dados seja igual ao segundo.</p></li>
<li><p>Usando os dados de penguins (<em>palmerpenguins::penguins</em>), calcule a correla√ß√£o de Pearson entre comprimento e profundidade do bico para cada esp√©cie e para todas as esp√©cies. Compare os √≠ndices de correla√ß√£o para exemplificar o Paradoxo de Simpsom.</p></li>
<li><p>Oficialmente, a pandemia de COVID-19 come√ßou com o primeiro caso no dia 26 de fevereiro de 2020. Calcule quantos anos, meses, dias, semanas, horas, minutos e segundos se passou desde ent√£o.</p></li>
</ol>
</div>
<div id="para-se-aprofundar" class="section level2" number="5.14">
<h2><span class="header-section-number">5.14</span> Para se aprofundar</h2>
<p>Listamos a seguir livros que recomendamos para seguir com sua aprendizagem em R e tidyverse.</p>
<p><strong>Portugu√™s</strong></p>
<p>Curso-R. 2021. Ci√™ncia de Dados em R. [<a href="https://livro.curso-r.com/" class="uri">https://livro.curso-r.com/</a>]</p>
<p>Faria PD, Parga JPFA. 2020. Introdu√ß√£o √† Linguagem R: seus fundamentos e sua pr√°tica. [<a href="https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica" class="uri">https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica</a>]</p>
<p>Oliveira PF, Guerra S, Mcdonnell, R. 2018. Ci√™ncia de dados com R ‚Äì Introdu√ß√£o. IBPAD. [<a href="https://cdr.ibpad.com.br/" class="uri">https://cdr.ibpad.com.br/</a>]</p>
<p><strong>Ingl√™s</strong></p>
<p>Grolemund G. 2017. The Essentials of Data Science: Knowledge Discovery Using R. Chapman and Hall/CRC.</p>
<p>Irizarry RA. 2019. Introduction to Data Science: Data Analysis and Prediction Algorithms with R. Chapman and Hall/CRC. [<a href="https://rafalab.github.io/dsbook/" class="uri">https://rafalab.github.io/dsbook/</a>]</p>
<p>Ismay C., Kim AY. 2019. Statistical Inference via Data Science: A ModernDive into R and the Tidyverse. Chapman and Hall/CRC. [<a href="https://moderndive.com/" class="uri">https://moderndive.com/</a>]</p>
<p>Peng DP. 2020. R Programming for Data Science. [<a href="https://bookdown.org/rdpeng/rprogdatascience/" class="uri">https://bookdown.org/rdpeng/rprogdatascience/</a>]</p>
<p>Wickham H, Grolemund G. 2017. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. O‚ÄôReilly Media. [<a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>]</p>
<p>Wright C, Ellis S, Hicks S &amp; Peng R D. 2021. Tidyverse Skills for Data Science in R. [<a href="https://jhudatascience.org/tidyversecourse/" class="uri">https://jhudatascience.org/tidyversecourse/</a>]</p>
<p>Zumel N, Mount J. 2014. Practical Data Science with R Paperback. Manning.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gr√°ficos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/paternogbc/livro_r_ecologia/edit/master/04_r_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["livro_r_ecologia.pdf", "livro_r_ecologia.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
