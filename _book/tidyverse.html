<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Tidyverse | Introdução ao R com aplicações em biodiversidade e conservação</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Tidyverse | Introdução ao R com aplicações em biodiversidade e conservação" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Tidyverse | Introdução ao R com aplicações em biodiversidade e conservação" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2021-03-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"/>
<link rel="next" href="gráficos.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução ao R com aplicações em biodiversidade e conservação</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Pré-requisitos</a></li>
<li class="chapter" data-level="2" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html"><i class="fa fa-check"></i><b>2</b> Pré-requisitos</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#introdução"><i class="fa fa-check"></i><b>2.1</b> Introdução</a></li>
<li class="chapter" data-level="2.2" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#r-e-rstudio"><i class="fa fa-check"></i><b>2.2</b> R e RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#funcionamento-da-linguagem-r"><i class="fa fa-check"></i><b>2.3</b> Funcionamento da linguagem R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#console"><i class="fa fa-check"></i><b>2.3.1</b> Console</a></li>
<li class="chapter" data-level="2.3.2" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#scripts"><i class="fa fa-check"></i><b>2.3.2</b> Scripts</a></li>
<li class="chapter" data-level="2.3.3" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#operadores"><i class="fa fa-check"></i><b>2.3.3</b> Operadores</a></li>
<li class="chapter" data-level="2.3.4" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#objetos"><i class="fa fa-check"></i><b>2.3.4</b> Objetos</a></li>
<li class="chapter" data-level="2.3.5" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#funções"><i class="fa fa-check"></i><b>2.3.5</b> Funções</a></li>
<li class="chapter" data-level="2.3.6" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#pacotes"><i class="fa fa-check"></i><b>2.3.6</b> Pacotes</a></li>
<li class="chapter" data-level="2.3.7" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#ajuda-help"><i class="fa fa-check"></i><b>2.3.7</b> Ajuda (<em>Help</em>)</a></li>
<li class="chapter" data-level="2.3.8" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#ambiente-environment"><i class="fa fa-check"></i><b>2.3.8</b> Ambiente (<em>Environment</em>)</a></li>
<li class="chapter" data-level="2.3.9" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#citações"><i class="fa fa-check"></i><b>2.3.9</b> Citações</a></li>
<li class="chapter" data-level="2.3.10" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#principais-erros-de-iniciantes"><i class="fa fa-check"></i><b>2.3.10</b> Principais erros de iniciantes</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#estrutura-e-manipulação-de-objetos"><i class="fa fa-check"></i><b>2.4</b> Estrutura e manipulação de objetos</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#atributo-dos-objetos"><i class="fa fa-check"></i><b>2.4.1</b> Atributo dos objetos</a></li>
<li class="chapter" data-level="2.4.2" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#manipulação-de-objetos-unidimensionais"><i class="fa fa-check"></i><b>2.4.2</b> Manipulação de objetos unidimensionais</a></li>
<li class="chapter" data-level="2.4.3" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#manipulação-de-objetos-multidimensionais"><i class="fa fa-check"></i><b>2.4.3</b> Manipulação de objetos multidimensionais</a></li>
<li class="chapter" data-level="2.4.4" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#valores-faltantes-e-especiais"><i class="fa fa-check"></i><b>2.4.4</b> Valores faltantes e especiais</a></li>
<li class="chapter" data-level="2.4.5" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#diretório-de-trabalho"><i class="fa fa-check"></i><b>2.4.5</b> Diretório de trabalho</a></li>
<li class="chapter" data-level="2.4.6" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#importar-dados"><i class="fa fa-check"></i><b>2.4.6</b> Importar dados</a></li>
<li class="chapter" data-level="2.4.7" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#conferência-de-dados-importados"><i class="fa fa-check"></i><b>2.4.7</b> Conferência de dados importados</a></li>
<li class="chapter" data-level="2.4.8" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#exportar-dados"><i class="fa fa-check"></i><b>2.4.8</b> Exportar dados</a></li>
<li class="chapter" data-level="2.4.9" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#base-r"><i class="fa fa-check"></i><b>2.4.9</b> Base R</a></li>
<li class="chapter" data-level="2.4.10" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#tidyverse"><i class="fa fa-check"></i><b>2.4.10</b> <em>tidyverse</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introdução-1.html"><a href="introdução-1.html"><i class="fa fa-check"></i><b>3</b> Introdução</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introdução-1.html"><a href="introdução-1.html#histórico-deste-livro"><i class="fa fa-check"></i><b>3.1</b> Histórico deste livro</a></li>
<li class="chapter" data-level="3.2" data-path="introdução-1.html"><a href="introdução-1.html#objetivo-deste-livro"><i class="fa fa-check"></i><b>3.2</b> Objetivo deste livro</a></li>
<li class="chapter" data-level="3.3" data-path="introdução-1.html"><a href="introdução-1.html#o-que-você-não-encontrará-neste-livro"><i class="fa fa-check"></i><b>3.3</b> O que você não encontrará neste livro</a></li>
<li class="chapter" data-level="3.4" data-path="introdução-1.html"><a href="introdução-1.html#por-que-usar-o-r"><i class="fa fa-check"></i><b>3.4</b> Por que usar o R?</a></li>
<li class="chapter" data-level="3.5" data-path="introdução-1.html"><a href="introdução-1.html#como-usar-este-livro"><i class="fa fa-check"></i><b>3.5</b> Como usar este livro</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><i class="fa fa-check"></i><b>4</b> Voltando ao básico: como dominar a arte de fazer perguntas cientificamente relevantes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#introdução-2"><i class="fa fa-check"></i><b>4.1</b> Introdução</a></li>
<li class="chapter" data-level="4.2" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#perguntas-devem-preceder-as-análises-estatísticas"><i class="fa fa-check"></i><b>4.2</b> Perguntas devem preceder as análises estatísticas</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#um-bestiário1-para-o-teste-de-hipóteses-você-está-fazendo-a-pergunta-certa"><i class="fa fa-check"></i><b>4.2.1</b> Um bestiário[^1] para o teste de hipóteses (Você está fazendo a pergunta certa?)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#fluxograma-conectando-variáveis-para-melhorar-o-desenho-experimental-e-as-análises-estatísticas"><i class="fa fa-check"></i><b>4.3</b> Fluxograma: Conectando Variáveis para Melhorar o desenho experimental e as análises estatísticas</a></li>
<li class="chapter" data-level="4.4" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#questões-fundamentais-em-etnobiologia-ecologia-e-conservação"><i class="fa fa-check"></i><b>4.4</b> Questões fundamentais em etnobiologia, ecologia e conservação</a></li>
<li class="chapter" data-level="4.5" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#considerações-finais"><i class="fa fa-check"></i><b>4.5</b> Considerações Finais</a></li>
<li class="chapter" data-level="4.6" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#referências"><i class="fa fa-check"></i><b>4.6</b> Referências</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html#tidyverse"><i class="fa fa-check"></i><b>5</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>5.1</b> Contextualização</a></li>
<li class="chapter" data-level="5.2" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-1"><i class="fa fa-check"></i><b>5.2</b> <em>tidyverse</em></a></li>
<li class="chapter" data-level="5.3" data-path="tidyverse.html"><a href="tidyverse.html#here"><i class="fa fa-check"></i><b>5.3</b> here</a></li>
<li class="chapter" data-level="5.4" data-path="tidyverse.html"><a href="tidyverse.html#readr-readxl-e-writexl"><i class="fa fa-check"></i><b>5.4</b> readr, readxl e writexl</a></li>
<li class="chapter" data-level="5.5" data-path="tidyverse.html"><a href="tidyverse.html#tibble"><i class="fa fa-check"></i><b>5.5</b> tibble</a></li>
<li class="chapter" data-level="5.6" data-path="tidyverse.html"><a href="tidyverse.html#magrittr-pipe--"><i class="fa fa-check"></i><b>5.6</b> magrittr (pipe - %&gt;%)</a></li>
<li class="chapter" data-level="5.7" data-path="tidyverse.html"><a href="tidyverse.html#tidyr"><i class="fa fa-check"></i><b>5.7</b> tidyr</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="tidyverse.html"><a href="tidyverse.html#palmerpenguins"><i class="fa fa-check"></i><b>5.7.1</b> palmerpenguins</a></li>
<li class="chapter" data-level="5.7.2" data-path="tidyverse.html"><a href="tidyverse.html#glimpse"><i class="fa fa-check"></i><b>5.7.2</b> glimpse()</a></li>
<li class="chapter" data-level="5.7.3" data-path="tidyverse.html"><a href="tidyverse.html#unite"><i class="fa fa-check"></i><b>5.7.3</b> unite()</a></li>
<li class="chapter" data-level="5.7.4" data-path="tidyverse.html"><a href="tidyverse.html#separate"><i class="fa fa-check"></i><b>5.7.4</b> separate()</a></li>
<li class="chapter" data-level="5.7.5" data-path="tidyverse.html"><a href="tidyverse.html#drop_na-e-replace_na"><i class="fa fa-check"></i><b>5.7.5</b> drop_na() e replace_na()</a></li>
<li class="chapter" data-level="5.7.6" data-path="tidyverse.html"><a href="tidyverse.html#pivotagem---pivot_longer-e-pivot_wider"><i class="fa fa-check"></i><b>5.7.6</b> pivotagem - pivot_longer() e pivot_wider()</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i><b>5.8</b> dplyr</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="tidyverse.html"><a href="tidyverse.html#gramática"><i class="fa fa-check"></i><b>5.8.1</b> Gramática</a></li>
<li class="chapter" data-level="5.8.2" data-path="tidyverse.html"><a href="tidyverse.html#sintaxe"><i class="fa fa-check"></i><b>5.8.2</b> Sintaxe</a></li>
<li class="chapter" data-level="5.8.3" data-path="tidyverse.html"><a href="tidyverse.html#palmerpenguins-1"><i class="fa fa-check"></i><b>5.8.3</b> palmerpenguins</a></li>
<li class="chapter" data-level="5.8.4" data-path="tidyverse.html"><a href="tidyverse.html#relocate"><i class="fa fa-check"></i><b>5.8.4</b> relocate()</a></li>
<li class="chapter" data-level="5.8.5" data-path="tidyverse.html"><a href="tidyverse.html#rename"><i class="fa fa-check"></i><b>5.8.5</b> rename()</a></li>
<li class="chapter" data-level="5.8.6" data-path="tidyverse.html"><a href="tidyverse.html#select"><i class="fa fa-check"></i><b>5.8.6</b> select()</a></li>
<li class="chapter" data-level="5.8.7" data-path="tidyverse.html"><a href="tidyverse.html#pull"><i class="fa fa-check"></i><b>5.8.7</b> pull()</a></li>
<li class="chapter" data-level="5.8.8" data-path="tidyverse.html"><a href="tidyverse.html#mutate"><i class="fa fa-check"></i><b>5.8.8</b> mutate()</a></li>
<li class="chapter" data-level="5.8.9" data-path="tidyverse.html"><a href="tidyverse.html#arrange"><i class="fa fa-check"></i><b>5.8.9</b> arrange()</a></li>
<li class="chapter" data-level="5.8.10" data-path="tidyverse.html"><a href="tidyverse.html#filter"><i class="fa fa-check"></i><b>5.8.10</b> filter()</a></li>
<li class="chapter" data-level="5.8.11" data-path="tidyverse.html"><a href="tidyverse.html#slice"><i class="fa fa-check"></i><b>5.8.11</b> slice()</a></li>
<li class="chapter" data-level="5.8.12" data-path="tidyverse.html"><a href="tidyverse.html#distinct"><i class="fa fa-check"></i><b>5.8.12</b> distinct()</a></li>
<li class="chapter" data-level="5.8.13" data-path="tidyverse.html"><a href="tidyverse.html#count"><i class="fa fa-check"></i><b>5.8.13</b> count()</a></li>
<li class="chapter" data-level="5.8.14" data-path="tidyverse.html"><a href="tidyverse.html#group_by"><i class="fa fa-check"></i><b>5.8.14</b> group_by()</a></li>
<li class="chapter" data-level="5.8.15" data-path="tidyverse.html"><a href="tidyverse.html#summarise"><i class="fa fa-check"></i><b>5.8.15</b> summarise()</a></li>
<li class="chapter" data-level="5.8.16" data-path="tidyverse.html"><a href="tidyverse.html#bind_rows-e-bind_cols"><i class="fa fa-check"></i><b>5.8.16</b> bind_rows() e bind_cols()</a></li>
<li class="chapter" data-level="5.8.17" data-path="tidyverse.html"><a href="tidyverse.html#join"><i class="fa fa-check"></i><b>5.8.17</b> *_join()</a></li>
<li class="chapter" data-level="5.8.18" data-path="tidyverse.html"><a href="tidyverse.html#operações-de-conjuntos-e-comparação-de-dados"><i class="fa fa-check"></i><b>5.8.18</b> Operações de conjuntos e comparação de dados</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="tidyverse.html"><a href="tidyverse.html#stringr"><i class="fa fa-check"></i><b>5.9</b> stringr</a></li>
<li class="chapter" data-level="5.10" data-path="tidyverse.html"><a href="tidyverse.html#forcats"><i class="fa fa-check"></i><b>5.10</b> forcats</a></li>
<li class="chapter" data-level="5.11" data-path="tidyverse.html"><a href="tidyverse.html#lubridate"><i class="fa fa-check"></i><b>5.11</b> lubridate</a></li>
<li class="chapter" data-level="5.12" data-path="tidyverse.html"><a href="tidyverse.html#purrr"><i class="fa fa-check"></i><b>5.12</b> purrr</a></li>
<li class="chapter" data-level="5.13" data-path="tidyverse.html"><a href="tidyverse.html#exercícios"><i class="fa fa-check"></i><b>5.13</b> Exercícios</a></li>
<li class="chapter" data-level="5.14" data-path="tidyverse.html"><a href="tidyverse.html#para-se-aprofundar"><i class="fa fa-check"></i><b>5.14</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gráficos.html"><a href="gráficos.html"><i class="fa fa-check"></i><b>6</b> Gráficos</a></li>
<li class="chapter" data-level="7" data-path="estatística-básica.html"><a href="estatística-básica.html"><i class="fa fa-check"></i><b>7</b> Estatística básica</a>
<ul>
<li class="chapter" data-level="7.1" data-path="estatística-básica.html"><a href="estatística-básica.html#teste-t-de-student-para-duas-amostras-independentes"><i class="fa fa-check"></i><b>7.1</b> Teste T (de Student) para duas amostras independentes</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise"><i class="fa fa-check"></i><b>7.1.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.1.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise"><i class="fa fa-check"></i><b>7.1.2</b> Análise</a></li>
<li class="chapter" data-level="7.1.3" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-1"><i class="fa fa-check"></i><b>7.1.3</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="estatística-básica.html"><a href="estatística-básica.html#teste-t-para-amostras-pareadas"><i class="fa fa-check"></i><b>7.2</b> Teste T para amostras pareadas</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-1"><i class="fa fa-check"></i><b>7.2.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.2.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-2"><i class="fa fa-check"></i><b>7.2.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="estatística-básica.html"><a href="estatística-básica.html#correlação-de-pearson"><i class="fa fa-check"></i><b>7.3</b> Correlação de Pearson</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-2"><i class="fa fa-check"></i><b>7.3.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.3.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-3"><i class="fa fa-check"></i><b>7.3.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="estatística-básica.html"><a href="estatística-básica.html#regressão-simples"><i class="fa fa-check"></i><b>7.4</b> Regressão Simples</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-3"><i class="fa fa-check"></i><b>7.4.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.4.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-4"><i class="fa fa-check"></i><b>7.4.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="estatística-básica.html"><a href="estatística-básica.html#regressão-múltipla"><i class="fa fa-check"></i><b>7.5</b> Regressão Múltipla</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-4"><i class="fa fa-check"></i><b>7.5.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.5.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-5"><i class="fa fa-check"></i><b>7.5.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="estatística-básica.html"><a href="estatística-básica.html#análises-de-variância-anova"><i class="fa fa-check"></i><b>7.6</b> Análises de Variância (ANOVA)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-5"><i class="fa fa-check"></i><b>7.6.1</b> Backgorund da análise</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="estatística-básica.html"><a href="estatística-básica.html#anova-de-um-fator"><i class="fa fa-check"></i><b>7.7</b> ANOVA de um fator</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-6"><i class="fa fa-check"></i><b>7.7.1</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="estatística-básica.html"><a href="estatística-básica.html#anova-de-dois-fatores-ou-anova-fatorial"><i class="fa fa-check"></i><b>7.8</b> ANOVA de dois fatores ou Anova fatorial</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-7"><i class="fa fa-check"></i><b>7.8.1</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="estatística-básica.html"><a href="estatística-básica.html#anova-em-blocos-aleatorizados"><i class="fa fa-check"></i><b>7.9</b> ANOVA em blocos aleatorizados</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-8"><i class="fa fa-check"></i><b>7.9.1</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-de-covariância-ancova"><i class="fa fa-check"></i><b>7.10</b> Análise de covariância (ANCOVA)</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-9"><i class="fa fa-check"></i><b>7.10.1</b> Análise</a></li>
<li class="chapter" data-level="7.10.2" data-path="estatística-básica.html"><a href="estatística-básica.html#para-se-aprofundar-1"><i class="fa fa-check"></i><b>7.10.2</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="análises-univariadas-glm.html"><a href="análises-univariadas-glm.html"><i class="fa fa-check"></i><b>8</b> Análises univariadas - GLM</a></li>
<li class="chapter" data-level="9" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html"><i class="fa fa-check"></i><b>9</b> Introdução à Análises Multidimensionais</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#backgorund-da-análise-6"><i class="fa fa-check"></i><b>9.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="9.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-1"><i class="fa fa-check"></i><b>9.2</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#explicação-da-análise"><i class="fa fa-check"></i><b>9.2.1</b> Explicação da análise</a></li>
<li class="chapter" data-level="9.2.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#análise-10"><i class="fa fa-check"></i><b>9.2.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-2"><i class="fa fa-check"></i><b>9.3</b> Exemplo 2:</a></li>
<li class="chapter" data-level="9.4" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#backgorund-da-análise-7"><i class="fa fa-check"></i><b>9.4</b> Backgorund da análise</a></li>
<li class="chapter" data-level="9.5" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-1-1"><i class="fa fa-check"></i><b>9.5</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#explicação-da-análise-1"><i class="fa fa-check"></i><b>9.5.1</b> Explicação da análise</a></li>
<li class="chapter" data-level="9.5.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#análise-11"><i class="fa fa-check"></i><b>9.5.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#backgorund-da-análise-8"><i class="fa fa-check"></i><b>9.6</b> Backgorund da análise</a></li>
<li class="chapter" data-level="9.7" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-1-2"><i class="fa fa-check"></i><b>9.7</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#explicação-da-análise-2"><i class="fa fa-check"></i><b>9.7.1</b> Explicação da análise</a></li>
<li class="chapter" data-level="9.7.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#análise-12"><i class="fa fa-check"></i><b>9.7.2</b> Análise</a></li>
<li class="chapter" data-level="9.7.3" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#para-se-aprofundar-2"><i class="fa fa-check"></i><b>9.7.3</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="rarefação.html"><a href="rarefação.html"><i class="fa fa-check"></i><b>10</b> Rarefação</a>
<ul>
<li class="chapter" data-level="10.1" data-path="rarefação.html"><a href="rarefação.html#background-da-análise"><i class="fa fa-check"></i><b>10.1</b> Background da análise</a></li>
<li class="chapter" data-level="10.2" data-path="rarefação.html"><a href="rarefação.html#exemplo-prático-1---morcegos"><i class="fa fa-check"></i><b>10.2</b> Exemplo prático 1 - Morcegos</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="rarefação.html"><a href="rarefação.html#explicação"><i class="fa fa-check"></i><b>10.2.1</b> Explicação</a></li>
<li class="chapter" data-level="10.2.2" data-path="rarefação.html"><a href="rarefação.html#análise-13"><i class="fa fa-check"></i><b>10.2.2</b> Análise</a></li>
<li class="chapter" data-level="10.2.3" data-path="rarefação.html"><a href="rarefação.html#interpretação-dos-resultados-1"><i class="fa fa-check"></i><b>10.2.3</b> Interpretação dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="rarefação.html"><a href="rarefação.html#exemplo-prático-2---rarefação"><i class="fa fa-check"></i><b>10.3</b> Exemplo prático 2 - Rarefação</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="rarefação.html"><a href="rarefação.html#explicação-1"><i class="fa fa-check"></i><b>10.3.1</b> Explicação</a></li>
<li class="chapter" data-level="10.3.2" data-path="rarefação.html"><a href="rarefação.html#análise-14"><i class="fa fa-check"></i><b>10.3.2</b> Análise</a></li>
<li class="chapter" data-level="10.3.3" data-path="rarefação.html"><a href="rarefação.html#interpretação-dos-resultados-2"><i class="fa fa-check"></i><b>10.3.3</b> Interpretação dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="rarefação.html"><a href="rarefação.html#para-se-aprofundar-3"><i class="fa fa-check"></i><b>10.4</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html"><i class="fa fa-check"></i><b>11</b> Estimadores de Riqueza</a>
<ul>
<li class="chapter" data-level="11.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#backgorund-da-análise-9"><i class="fa fa-check"></i><b>11.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="11.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-abundância-das-espécies"><i class="fa fa-check"></i><b>11.2</b> Estimadores baseados na abundância das espécies</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-1---chao-1984-1987"><i class="fa fa-check"></i><b>11.2.1</b> CHAO 1 - (Chao 1984, 1987):</a></li>
<li class="chapter" data-level="11.2.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-15"><i class="fa fa-check"></i><b>11.2.2</b> Análise</a></li>
<li class="chapter" data-level="11.2.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#ace---abundance-based-coverage-estimador-chao-lee-1992-chao-et-al.-2000"><i class="fa fa-check"></i><b>11.2.3</b> ACE - <em>Abundance-based Coverage Estimador</em> (Chao &amp; Lee 1992, Chao et al. 2000):</a></li>
<li class="chapter" data-level="11.2.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-16"><i class="fa fa-check"></i><b>11.2.4</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-incidência-das-espécies"><i class="fa fa-check"></i><b>11.3</b> Estimadores baseados na incidência das espécies</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-2---chao-1987"><i class="fa fa-check"></i><b>11.3.1</b> CHAO 2 - (Chao 1987):</a></li>
<li class="chapter" data-level="11.3.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-17"><i class="fa fa-check"></i><b>11.3.2</b> Análise</a></li>
<li class="chapter" data-level="11.3.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-1-burnham-overton-1978-1979"><i class="fa fa-check"></i><b>11.3.3</b> JACKKNIFE 1 (Burnham &amp; Overton 1978, 1979):</a></li>
<li class="chapter" data-level="11.3.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-18"><i class="fa fa-check"></i><b>11.3.4</b> Análise</a></li>
<li class="chapter" data-level="11.3.5" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-2-burnham-overton-1978-1979-palmer-1991"><i class="fa fa-check"></i><b>11.3.5</b> JACKKNIFE 2 (Burnham &amp; Overton 1978, 1979, Palmer 1991):</a></li>
<li class="chapter" data-level="11.3.6" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-19"><i class="fa fa-check"></i><b>11.3.6</b> Análise</a></li>
<li class="chapter" data-level="11.3.7" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#bootstrap-smith-van-belle-1984"><i class="fa fa-check"></i><b>11.3.7</b> BOOTSTRAP (Smith &amp; van Belle 1984):</a></li>
<li class="chapter" data-level="11.3.8" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-20"><i class="fa fa-check"></i><b>11.3.8</b> Análise</a></li>
<li class="chapter" data-level="11.3.9" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#interpolação-e-extrapolação-baseadas-em-rarefação-usando-amostragens-de-incidência-ou-abundância-chao-jost-2012-colwell-et-al.-2012"><i class="fa fa-check"></i><b>11.3.9</b> Interpolação e Extrapolação baseadas em rarefação usando amostragens de incidência ou abundância (Chao &amp; Jost 2012, Colwell et al. 2012):</a></li>
<li class="chapter" data-level="11.3.10" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-21"><i class="fa fa-check"></i><b>11.3.10</b> Análise</a></li>
<li class="chapter" data-level="11.3.11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#para-se-aprofundar-4"><i class="fa fa-check"></i><b>11.3.11</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html"><i class="fa fa-check"></i><b>12</b> Diversidade Taxonômica</a>
<ul>
<li class="chapter" data-level="12.1" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diversidade-alfa-𝛂"><i class="fa fa-check"></i><b>12.1</b> Diversidade alfa (𝛂)</a></li>
<li class="chapter" data-level="12.2" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#riqueza-de-espécies-ou-número-de-espécies"><i class="fa fa-check"></i><b>12.2</b> Riqueza de espécies ou número de espécies</a></li>
<li class="chapter" data-level="12.3" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diversidade-de-espécies"><i class="fa fa-check"></i><b>12.3</b> Diversidade de espécies</a></li>
<li class="chapter" data-level="12.4" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diagramas-de-whittaker-ou-curva-de-dominância"><i class="fa fa-check"></i><b>12.4</b> Diagramas de Whittaker ou Curva de Dominância</a></li>
<li class="chapter" data-level="12.5" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#números-de-hill"><i class="fa fa-check"></i><b>12.5</b> Números de Hill</a></li>
<li class="chapter" data-level="12.6" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diversidade-beta-𝛃"><i class="fa fa-check"></i><b>12.6</b> Diversidade beta (𝛃)</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#para-se-aprofundar-5"><i class="fa fa-check"></i><b>12.6.1</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="diversidade-filogenética.html"><a href="diversidade-filogenética.html"><i class="fa fa-check"></i><b>13</b> Diversidade filogenética</a></li>
<li class="chapter" data-level="14" data-path="diversidade-funcional.html"><a href="diversidade-funcional.html"><i class="fa fa-check"></i><b>14</b> Diversidade funcional</a></li>
<li class="chapter" data-level="15" data-path="dados-geograficos.html"><a href="dados-geograficos.html"><i class="fa fa-check"></i><b>15</b> Dados geográficos no R</a>
<ul>
<li class="chapter" data-level="15.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#introdução-3"><i class="fa fa-check"></i><b>15.1</b> Introdução</a></li>
<li class="chapter" data-level="15.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pré-requisitos-2"><i class="fa fa-check"></i><b>15.2</b> Pré-requisitos</a></li>
<li class="chapter" data-level="15.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-1"><i class="fa fa-check"></i><b>15.3</b> Vetor</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pontos"><i class="fa fa-check"></i><b>15.3.1</b> Pontos</a></li>
<li class="chapter" data-level="15.3.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#linhas"><i class="fa fa-check"></i><b>15.3.2</b> Linhas</a></li>
<li class="chapter" data-level="15.3.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#polígonos"><i class="fa fa-check"></i><b>15.3.3</b> Polígonos</a></li>
<li class="chapter" data-level="15.3.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tabela-de-atributos"><i class="fa fa-check"></i><b>15.3.4</b> Tabela de atributos</a></li>
<li class="chapter" data-level="15.3.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sf-principal-pacote-no-r-para-dados-vetoriais"><i class="fa fa-check"></i><b>15.3.5</b> <em>sf</em>: principal pacote no R para dados vetoriais</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster"><i class="fa fa-check"></i><b>15.4</b> Raster</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tipos-de-raster"><i class="fa fa-check"></i><b>15.4.1</b> Tipos de raster</a></li>
<li class="chapter" data-level="15.4.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-principal-pacote-no-r-para-dados-raster"><i class="fa fa-check"></i><b>15.4.2</b> <em>raster</em>: principal pacote no R para dados raster</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-referência-de-coordenadas-e-unidades"><i class="fa fa-check"></i><b>15.5</b> Sistema de Referência de Coordenadas e Unidades</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-geográficas"><i class="fa fa-check"></i><b>15.5.1</b> Sistema de Coordenadas Geográficas</a></li>
<li class="chapter" data-level="15.5.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-projetadas"><i class="fa fa-check"></i><b>15.5.2</b> Sistema de Coordenadas Projetadas</a></li>
<li class="chapter" data-level="15.5.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#datum"><i class="fa fa-check"></i><b>15.5.3</b> Datum</a></li>
<li class="chapter" data-level="15.5.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-referência-de-coordenadas-crs-no-r"><i class="fa fa-check"></i><b>15.5.4</b> Sistema de Referência de Coordenadas (CRS) no R</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-fontes-de-dados-geográficos"><i class="fa fa-check"></i><b>15.6</b> Principais fontes de dados geográficos</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-2"><i class="fa fa-check"></i><b>15.6.1</b> Vetor</a></li>
<li class="chapter" data-level="15.6.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-1"><i class="fa fa-check"></i><b>15.6.2</b> Raster</a></li>
<li class="chapter" data-level="15.6.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pacotes-do-r"><i class="fa fa-check"></i><b>15.6.3</b> Pacotes do R</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-e-exportar-dados-geográficos"><i class="fa fa-check"></i><b>15.7</b> Importar e exportar dados geográficos</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-formatos-de-arquivos-geográficos"><i class="fa fa-check"></i><b>15.7.1</b> Principais formatos de arquivos geográficos</a></li>
<li class="chapter" data-level="15.7.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-dados-1"><i class="fa fa-check"></i><b>15.7.2</b> Importar dados</a></li>
<li class="chapter" data-level="15.7.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exportar-dados-1"><i class="fa fa-check"></i><b>15.7.3</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="dados-geograficos.html"><a href="dados-geograficos.html#descrição-de-objetos-espaciais"><i class="fa fa-check"></i><b>15.8</b> Descrição de objetos espaciais</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-5"><i class="fa fa-check"></i><b>15.8.1</b> Vetor</a></li>
<li class="chapter" data-level="15.8.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-4"><i class="fa fa-check"></i><b>15.8.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="dados-geograficos.html"><a href="dados-geograficos.html#reprojeção-de-dados-geográficos"><i class="fa fa-check"></i><b>15.9</b> Reprojeção de dados geográficos</a>
<ul>
<li class="chapter" data-level="15.9.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-6"><i class="fa fa-check"></i><b>15.9.1</b> Vetor</a></li>
<li class="chapter" data-level="15.9.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-5"><i class="fa fa-check"></i><b>15.9.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.10" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-operações-com-dados-geográficos"><i class="fa fa-check"></i><b>15.10</b> Principais operações com dados geográficos</a>
<ul>
<li class="chapter" data-level="15.10.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#operações-de-atributos"><i class="fa fa-check"></i><b>15.10.1</b> Operações de atributos</a></li>
<li class="chapter" data-level="15.10.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#operações-espaciais"><i class="fa fa-check"></i><b>15.10.2</b> Operações espaciais</a></li>
<li class="chapter" data-level="15.10.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#operações-geométricas"><i class="fa fa-check"></i><b>15.10.3</b> Operações geométricas</a></li>
</ul></li>
<li class="chapter" data-level="15.11" data-path="dados-geograficos.html"><a href="dados-geograficos.html#visualização-de-dados-geográficos"><i class="fa fa-check"></i><b>15.11</b> Visualização de dados geográficos</a>
<ul>
<li class="chapter" data-level="15.11.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-elementos-de-um-mapa"><i class="fa fa-check"></i><b>15.11.1</b> Principais elementos de um mapa</a></li>
<li class="chapter" data-level="15.11.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-pacotes-para-a-composição-de-mapas"><i class="fa fa-check"></i><b>15.11.2</b> Principais pacotes para a composição de mapas</a></li>
<li class="chapter" data-level="15.11.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-estáticos"><i class="fa fa-check"></i><b>15.11.3</b> Mapas estáticos</a></li>
<li class="chapter" data-level="15.11.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-animados"><i class="fa fa-check"></i><b>15.11.4</b> Mapas animados</a></li>
<li class="chapter" data-level="15.11.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-interativos"><i class="fa fa-check"></i><b>15.11.5</b> Mapas interativos</a></li>
</ul></li>
<li class="chapter" data-level="15.12" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exemplos-de-aplicações-de-análises-geográficas-para-dados-ecológicos"><i class="fa fa-check"></i><b>15.12</b> Exemplos de aplicações de análises geográficas para dados ecológicos</a>
<ul>
<li class="chapter" data-level="15.12.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#resumir-informações-de-biodiversidade-para-unidades-espaciais"><i class="fa fa-check"></i><b>15.12.1</b> Resumir informações de biodiversidade para unidades espaciais</a></li>
<li class="chapter" data-level="15.12.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#atribuição-de-dados-climáticos-para-pontos"><i class="fa fa-check"></i><b>15.12.2</b> Atribuição de dados climáticos para pontos</a></li>
<li class="chapter" data-level="15.12.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#predições-espaciais-de-objetos-raster"><i class="fa fa-check"></i><b>15.12.3</b> Predições espaciais de objetos raster</a></li>
</ul></li>
<li class="chapter" data-level="15.13" data-path="dados-geograficos.html"><a href="dados-geograficos.html#para-se-aprofundar-6"><i class="fa fa-check"></i><b>15.13</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><i class="fa fa-check"></i><b>16</b> Reprodutibilidade em pesquisa e gerenciamento de dados</a>
<ul>
<li class="chapter" data-level="16.1" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#gestão-de-projetos-acadêmicos-no-rstudio"><i class="fa fa-check"></i><b>16.1</b> Gestão de projetos acadêmicos no RStudio</a></li>
<li class="chapter" data-level="16.2" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#documentos-dinâmicos-r-markdown"><i class="fa fa-check"></i><b>16.2</b> Documentos dinâmicos (R Markdown)</a></li>
<li class="chapter" data-level="16.3" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#controle-de-versão-git-e-github"><i class="fa fa-check"></i><b>16.3</b> Controle de versão, Git e GitHub</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução ao R com aplicações em biodiversidade e conservação</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Tidyverse</h1>
<div id="contextualização" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Contextualização</h2>
<p>Como todo idioma, a linguagem R vem passando por transformações nos últimos anos. Grande parte dessas mudanças estão dentro do paradigma da <strong>Ciência de Dados (<em>Data Science</em>)</strong>, uma nova área de conhecimento que vem se moldando acompanhando o desenvolvimento da sociedade em torno da era digital e da grande quantidade de dados gerados e disponíveis pela internet e computação, de onde advém os pilares das inovações tecnológicas: <em>Big Data</em>, <em>Machine Learning</em>, e <em>Internet of Things</em>.</p>
<p>A grande necessidade de computação parapara desenvolver essa nova abordagem, colocaram o <strong>R e o Python</strong> como as <strong>principais linguagens de programação</strong> frente à esses novos desafios. Apesar de não serem as únicas utilizadas para esses propósitos, elas rapidamente se tornaram uma das <strong>melhores escolhas</strong>, dado vários fatores como: serem livres, possuir comunidade ativa, grande e contribuidora, serem linguagens de interpretação (orientadas à objeto), e relativamente fáceis de serem aprendidas.</p>
<p>Essas mudanças e adaptações da linguagem R para a Ciência de Dados começaram à ser implementadas principalmente devido a um pesquisador, <a href="http://hadley.nz/">Hadley Wickham</a>, que iniciou sua contribuição à comunidade R com o desenvolvimento do já consagrado pacote <em>ggplot2</em> (Wickham 2009, Wickham 2016) para a composição de gráficos no R (ver mais no capítulo XX), baseado na gramática de gráficos (Wilkinson 2005).</p>
<p>Depois disso, Wickham dedicou-se ao desenvolvimento do pensamento de uma nova abordagem dentro do manejo de dados, denominada de <strong>Tidy Data</strong> (Dados organizados) (Wickhan 2014), na qual focou na limpeza de dados. A ideia, relativamente simples, diz que dados estão <strong>tidy</strong> quando <strong>variáveis estão nas colunas</strong>, <strong>observações estão nas linhas</strong> e <strong>valores estão nas células</strong>, sendo que para esse último, não deve haver mais de um valor por célula (Figura <a href="tidyverse.html#fig:fig-r-dados-tidy">5.2</a>).</p>
<p>À partir dessas ideias, o <a href="https://www.tidyverse.org/"><em>tidyverse</em></a> foi operacionalizado no R como uma coleção de pacotes R que atuam no <strong>workflow comum da ciência de dados</strong>: importação, manipulação, exploração, visualização, análise e comunicação de dados e análises (Wickhan et al. 2019) (Figura <a href="tidyverse.html#fig:fig-r-tidyverse">5.1</a>). O principal objetivo do <strong>Tidyverse</strong> é aproximar a linguagem para melhorar a interação entre ser humano e computador sobre dados, de modo que os pacotes compartilham uma filosofia de design de alto nível e gramática, além da estrutura de dados de baixo nível (Wickhan et al. 2019).</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-tidyverse"></span>
<img src="img/cap04_fig01.png" alt="Modelo das ferramentas necessárias em um projeto típico de ciência de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto à essas ferramentas está a programação. Adaptado de: Wickhan &amp; Grolemund (2017)." width="90%" />
<p class="caption">
Figura 5.1: Modelo das ferramentas necessárias em um projeto típico de ciência de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto à essas ferramentas está a programação. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>As principais leituras sobre o tema no R são os artigos Wickham (2014), Wickham et al. (2019), o livro Wickhan &amp; Grolemund (2017), disponível on-line neste <a href="https://r4ds.had.co.nz/">link</a>, além do <a href="https://www.tidyverse.org/">site</a> que possui muito mais informações.</p>
</div>
<div id="tidyverse-1" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> <em>tidyverse</em></h2>
<p>Uma vez instalado e carregado, o pacote tidyverse <strong>disponibiliza um conjunto de ferramentas</strong> através de vários pacotes. Esses pacotes <strong>compartilham</strong> uma filosofia de design, gramática e estruturas de dados. Podemos entender o <em>tidyverse</em> como um “dialeto novo” para a linguagem R, onde <strong>tidy</strong> quer dizer organizado, arrumado, ordenado, e <strong>verse</strong> é universo.</p>
<ul>
<li><a href="https://readr.tidyverse.org/"><em>readr</em></a>: importa dados tabulares (.csv e .txt)</li>
<li><a href="https://tibble.tidyverse.org/"><em>tibble</em></a>: implementou o “tibble,” com melhorias na classe <code>dataframe</code></li>
<li><a href="https://tidyr.tidyverse.org/"><em>tidyr</em></a>: facilita a transformação de dados para <em>tidy</em></li>
<li><a href="https://dplyr.tidyverse.org/"><em>dplyr</em></a>: facilita a manipulação de dados</li>
<li><a href="https://github.com/tidyverse/stringr"><em>stringr</em></a>: facilita a manipulação de caracteres</li>
<li><a href="https://github.com/hadley/forcats"><em>forcats</em></a>: facilita a manipulação de fatores</li>
<li><a href="https://ggplot2.tidyverse.org/"><em>ggplot2</em></a>: visualização de dados</li>
<li><a href="https://purrr.tidyverse.org/"><em>purrr</em></a>: programação funcional</li>
</ul>
<p>Além desses principais, fazemos a menção de <strong>outros pacotes que estão dentro dessa aborgagem</strong>, e que trataremos ainda neste capítulo, em outro momento do livro, ou que você leitor(a) deve se familiarizar.</p>
<ul>
<li><a href="https://readxl.tidyverse.org/"><em>readxl</em></a> e <a href="https://cran.r-project.org/package=writexl"><em>writexl</em></a>: importa e exporta dados tabulares (.xlsx)</li>
<li><a href="https://github.com/rstats-db/DBI"><em>DBI</em></a>: interface de banco de dados R</li>
<li><a href="https://github.com/tidyverse/haven"><em>haven</em></a>: importa e exporta dados do SPSS, Stata e SAS</li>
<li><a href="https://github.com/r-lib/httr"><em>httr</em></a>: ferramentas para trabalhar com URLs e HTTP</li>
<li><a href="https://github.com/tidyverse/rvest"><em>rvest</em></a>: coletar facilmente (raspe) páginas da web</li>
<li><a href="https://github.com/r-lib/xml2"><em>xml2</em></a>: trabalhar com arquivos XML</li>
<li><a href="https://github.com/jeroen/jsonlite"><em>jsonlite</em></a>: um analisador e gerador JSON simples e robusto para R</li>
<li><a href="https://github.com/rstats-db/hms"><em>hms</em></a>: hora do dia</li>
<li><a href="https://github.com/tidyverse/lubridate"><em>lubridate</em></a>: facilita o tratamento de datas</li>
<li><a href="https://magrittr.tidyverse.org/"><em>magrittr</em></a>: provê os operadores pipe (<code>%&gt;%</code>, <code>%$%</code>, <code>%&lt;&gt;%</code>)</li>
<li><a href="https://github.com/tidyverse/glue"><em>glue</em></a>: facilita combinar dados e caracteres</li>
<li><a href="https://rmarkdown.rstudio.com/"><em>rmarkdown</em></a>: cria documentos de análise dinâmica que combinam código, saída renderizada (como figuras) e texto</li>
<li><a href="https://yihui.org/knitr/"><em>knitr</em></a>: projetado para ser um mecanismo transparente para geração de relatórios dinâmicos com R</li>
<li><a href="https://shiny.rstudio.com/"><em>shiny</em></a>: framework de aplicativo Web para R</li>
<li><a href="https://rmarkdown.rstudio.com/flexdashboard/"><em>flexdashboard</em></a>: painéis interativos para R</li>
<li><a href="https://here.r-lib.org/"><em>here</em></a>: facilita a definição de diretórios</li>
<li><a href="https://usethis.r-lib.org/"><em>usethis</em></a>: automatiza tarefas durante a configuração e desenvolvimento de projetos (Git, ‘GitHub’ e Projetos RStudio)</li>
<li><a href="https://rdatatable.gitlab.io/data.table/"><em>data.table</em></a>: pacote que fornece uma versão de alto desempenho do <code>data.frame</code> (importar, manipular e expotar)</li>
<li><a href="https://rstudio.github.io/reticulate/"><em>reticulate</em></a>: pacote que fornece ferramentas para integrar Python e R</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: interface R para Apache Spark</li>
<li><a href="https://github.com/tidymodels/broom"><em>broom</em></a>: converte objetos estatísticos em tibbles organizados</li>
<li><a href="https://github.com/tidyverse/modelr"><em>modelr</em></a>: funções de modelagem que funcionam com o pipe</li>
<li><a href="https://www.tidymodels.org/"><em>tidymodels</em></a>: coleção de pacotes para modelagem e aprendizado de máquina usando os princípios do tidyverse</li>
</ul>
<p>Para instalar os pacotes do <em>tidyverse</em>, rode o comando abaixo:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="tidyverse.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote tidyverse</span></span>
<span id="cb1-2"><a href="tidyverse.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Quando carregamos o pacote <em>tidyverse</em>, notamos uma mensagem indicando quais pacotes foram carregados, suas repectivas versões e os conflitos com outros pacotes.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="tidyverse.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote tidyverse</span></span>
<span id="cb2-2"><a href="tidyverse.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.3     ✓ purrr   0.3.4
## ✓ tibble  3.1.0     ✓ dplyr   1.0.5
## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Podemos ainda <strong>listar todos os pacotes</strong> do <strong>tidyverse</strong> com a função <code>tidyverse::tidyverse_packages()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="tidyverse.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os pacotes no tidyverse </span></span>
<span id="cb6-2"><a href="tidyverse.html#cb6-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_packages</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;broom&quot;      &quot;cli&quot;        &quot;crayon&quot;     &quot;dbplyr&quot;     &quot;dplyr&quot;     
##  [6] &quot;forcats&quot;    &quot;ggplot2&quot;    &quot;haven&quot;      &quot;hms&quot;        &quot;httr&quot;      
## [11] &quot;jsonlite&quot;   &quot;lubridate&quot;  &quot;magrittr&quot;   &quot;modelr&quot;     &quot;pillar&quot;    
## [16] &quot;purrr&quot;      &quot;readr&quot;      &quot;readxl&quot;     &quot;reprex&quot;     &quot;rlang&quot;     
## [21] &quot;rstudioapi&quot; &quot;rvest&quot;      &quot;stringr&quot;    &quot;tibble&quot;     &quot;tidyr&quot;     
## [26] &quot;xml2&quot;       &quot;tidyverse&quot;</code></pre>
<p>Também podemos <strong>verificar os pacotes para serem atualizados</strong> com a função <code>tidyverse::tidyverse_update()</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="tidyverse.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar e atualizar os pacotes no tidyverse </span></span>
<span id="cb8-2"><a href="tidyverse.html#cb8-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_update</span>()</span></code></pre></div>
<pre><code>## All tidyverse packages up-to-date</code></pre>
<p>Todas as funções dos pacotes tidyverse usão <strong>fonte minúscula</strong> e <strong>usam <code>_</code> (<em>underscore</em>)</strong> para separar os nomes internos das funções, seguindo a mesma sintaxe do Python (“Snake Case”). Neste sentido de padronização, é importante destacar ainda que existe um guia próprio para que os scripts sigam a recomendação de padronização, o <a href="https://style.tidyverse.org/">The tidyverse style guide</a>, criado pelo Hadley Wickham. Para os desenvolvedores, existe o <a href="https://design.tidyverse.org/">Tidyverse design guide</a> criado pelo <em>Tidyverse team</em>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="tidyverse.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes no formato snake_case</span></span>
<span id="cb10-2"><a href="tidyverse.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()</span>
<span id="cb10-3"><a href="tidyverse.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_xlsx</span>()</span>
<span id="cb10-4"><a href="tidyverse.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>()</span>
<span id="cb10-5"><a href="tidyverse.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>()</span>
<span id="cb10-6"><a href="tidyverse.html#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>()</span></code></pre></div>
<p>Por fim, para evitar possíveis <strong>conflitos de funções com o mesmo nome entre pacotes</strong>, recomendamos fortemente o hábito de usar as funções seguido do operador <code>::</code>. Assim, garante-se que a <strong>função utilizada é referente ao pacote daquela função</strong>. Segue um exemplo com as funções apresentadas anteriormente.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tidyverse.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes seguidas de seus respectivos pacotes</span></span>
<span id="cb11-2"><a href="tidyverse.html#cb11-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>()</span>
<span id="cb11-3"><a href="tidyverse.html#cb11-3" aria-hidden="true" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_xlsx</span>()</span>
<span id="cb11-4"><a href="tidyverse.html#cb11-4" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb11-5"><a href="tidyverse.html#cb11-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>()</span>
<span id="cb11-6"><a href="tidyverse.html#cb11-6" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>()</span></code></pre></div>
<p>Seguindo essas ideias de organização de dados, outro conjunto de pacotes foi desenvolvido, chamado de <a href="https://www.tidymodels.org/"><em>tidymodels</em></a> que atuam no <strong>workflow da análise de dados</strong> em ciência de dados: separação e reamostragem, pre-processamento, ajuste de modelos e métricas de performace de ajustes. Por razões de espaço e especificidade, não entraremos em detalhes dessa abordagem.</p>
<p>Seguindo o workflow da Figura <a href="tidyverse.html#fig:fig-r-tidyverse">5.1</a>, iremos ver nos itens das próximas seções como esses passos são realizados com funções de cada pacote.</p>
</div>
<div id="here" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> here</h2>
<p>Dentro do <strong>workflow do tidyverse</strong>, devemos sempre trabalhar com <strong>Projetos do RStudio</strong>, um tema que focamos com mais detalhes na seção XX. Junto com o projeto, também podemos fazer uso do pacote <em>here</em>. Ele permite <strong>construir caminhos</strong> para os arquivos do projeto de forma mais simples e com maior reprodutibilidade.</p>
<p>Esse pacote cobre o ponto que discutimos na seção XX, dado que muitas vezes <strong>mudar o diretório</strong> com a função <code>setwd()</code> tende a ser <strong>demorado</strong>, principalmente quando se trata de um <strong>script em que várias pessoas estão trabalhando</strong> em diferentes computadores e sistemas operacionais. Além disso, ele elimina a questão da <strong>fragilidade</strong> dos scripts, pois geralmente um script está com os diretórios conectados exatamente a um lugar e a um momento. Por fim, ele também <strong>simplifica o trabalho com subdiretórios</strong>, facilitando importar ou exportar arquivos de ou para subpastas.</p>
<p>Seu uso é relativamente simples: uma vez criado e aberto o RStudio pelo <strong>Projeto do RStudio</strong>, o diretório automaticamente é definido para o diretório do projeto. Depois disso, podemos usar a função <code>here::here()</code> para definir os subdiretórios onde estão os dados. O exemplo da aplicação fica para a seção seguinte, quando iremos de fato importar um arquivo para o R. Logo abaixo, mostramos como instalar e carregar o pacote <em>here</em>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="tidyverse.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb12-2"><a href="tidyverse.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb12-3"><a href="tidyverse.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="tidyverse.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb12-5"><a href="tidyverse.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
</div>
<div id="readr-readxl-e-writexl" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> readr, readxl e writexl</h2>
<p>Dado que possuímos um conjuntos de dados e que geralmente esse conjunto de dados estará no formato tabular com umas das extensões: .csv, .txt ou .xlsx, iremos usar o pacote <em>readr</em> ou <em>readxl</em> para importar esses dados para o R.</p>
<p>Esses pacotes <strong>leem e escrevem grandes arquivos de forma mais rápida</strong>, além de fornecem <strong>medidores de progresso</strong> de importação e exportação, e imprimir a <strong>informação dos modos das colunas</strong> quando faz a importação. Outro ponto bastante positivo, é que também <strong>classificam automaticamente</strong> o modo dos dados de cada coluna, i.e., se uma coluna possui dados numéricos ou apenas texto, essa informação será considerada para classificar a coluna toda. A <strong>classe do objeto</strong> atribuído quando lido por esses pacotes é automaticamente um “tibble,” que veremos melhor na seção seguinte.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://readr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Usamos as funções <code>readr::read_csv()</code> e <code>readr::write_csv()</code> para importar e exportar arquivos .csv do R, respectivamente. Para dados com a extensão .txt, podemos utilizar as funções <code>readr::read_tsv()</code> ou ainda <code>readr::read_delim()</code>. Para arquivos tabulares com a extensão .xlsx, temos de instalar dois pacotes adicionais: <em>readxl</em> e <em>writexl</em>, dos quais usaremos as funções <code>readxl::read_excel()</code>, <code>readxl::read_xlsx()</code> ou <code>readxl::read_xls()</code> para importar dados, atentado para o data de podermos indicar a aba com os dados com o argumento <strong>sheet</strong>, e <code>writexl::write_xlsx()</code> para exportar.</p>
<p>Se o arquivo .csv foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>, usamos as funções normalmente. Caso tivesse sido criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, usaríamos as funções dessa forma: <code>readr::read_csv2()</code>.</p>
<p>Para exemplificar como importar dados no <strong>formato tidyverse</strong>, vamos importar novamente os dados de <strong>comunidades de anfíbios da Mata Atlântica</strong> (Atlantic Amphibians, Vancine et al. 2018), que fizemos o download na seção XX. Estamos usando a função <code>readr::read_csv()</code>, indicando os diretórios com a função <code>here::here()</code>, e a classe do arquivo é “tibble.”</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="tidyverse.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importar lugares</span></span>
<span id="cb13-2"><a href="tidyverse.html#cb13-2" aria-hidden="true" tabindex="-1"></a>aa_locais <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb13-3"><a href="tidyverse.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;dados&quot;</span>, <span class="st">&quot;tabelas&quot;</span>, <span class="st">&quot;ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>)</span>
<span id="cb13-4"><a href="tidyverse.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   .default = col_character(),
##   reference_number = col_double(),
##   species_number = col_double(),
##   month_start = col_double(),
##   year_start = col_double(),
##   month_finish = col_double(),
##   year_finish = col_double(),
##   effort_months = col_double(),
##   latitude = col_double(),
##   longitude = col_double(),
##   altitude = col_double(),
##   temperature = col_double(),
##   precipitation = col_double()
## )
## ℹ Use `spec()` for the full column specifications.</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/data-import.html">11 Data import</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tibble" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> tibble</h2>
<p>O <strong>tibble</strong> (<code>tbl_sf</code>) é uma <strong>versão aprimorada</strong> do data frame (<code>data.frame</code>). Ele é a <strong>classe aconselhada</strong> para que as funções do tidyverse funcionem melhor sobre conjuntos de dados tabulares importados para o R.</p>
<p>Geralmente, quando utilizamos <strong>funções tidyverse para importar dados para o R</strong>, é essa classe que esses dados adquirem depois de importados. Além da importação de dados, podemos <strong>criar</strong> um tibble no R usando a função <code>tibble::tibble()</code>, semelhante ao uso da função <code>data.frame()</code>. Podemos ainda <strong>converter</strong> um <code>data.frame</code> para um <code>tibble</code> usando a função <code>tibble::as_tibble()</code>. Entretanto, em alguns momentos precisaremos da classe <code>data.frame</code> para algumas funções específicas, e podemos <strong>converter</strong> um <code>tibble</code> para <code>data.frame</code> usa-se a função <code>tibble::as_data_frame()</code>.</p>
<p>Existem <strong>duas diferenças principais</strong> no uso do <code>tibble</code> e do <code>data.frame</code>: impressão e subconjunto. Objetos da classe <code>tibbles</code> possuem um método de impressão que mostra a <strong>contagem do número de linhas e colunas</strong>, e apenas as <strong>primeiras 10 linhas</strong> e <strong>todas as colunas</strong> que cabem na tela no console, além dos <strong>modos ou tipos das colunas</strong>. Dessa forma, cada coluna ou variável, pode ser do modo numbers (<code>int</code> ou <code>dbl</code>), character (<code>chr</code>), logical (<code>lgl</code>), factor (<code>fctr</code>), date + time (<code>dttm</code>) date e (<code>date</code>), além de outras <a href="https://tibble.tidyverse.org/articles/types.html">inúmeras possibilidades</a>.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://tibble.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="tidyverse.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - impressao</span></span>
<span id="cb15-2"><a href="tidyverse.html#cb15-2" aria-hidden="true" tabindex="-1"></a>aa_locais</span></code></pre></div>
<pre><code>## # A tibble: 1,163 x 25
##    id      reference_number species_number record sampled_habitat active_methods
##    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;         
##  1 amp1001             1001             19 ab     fo,ll           as            
##  2 amp1002             1002             16 co     fo,la,ll        as            
##  3 amp1003             1002             14 co     fo,la,ll        as            
##  4 amp1004             1002             13 co     fo,la,ll        as            
##  5 amp1005             1003             30 co     fo,ll,br        as            
##  6 amp1006             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;          
##  7 amp1007             1005             23 co     sp              as            
##  8 amp1008             1005             19 co     sp,la,sw        as,sb,tr      
##  9 amp1009             1005             13 ab     fo              &lt;NA&gt;          
## 10 amp1010             1006              1 ab     fo              &lt;NA&gt;          
## # … with 1,153 more rows, and 19 more variables: passive_methods &lt;chr&gt;,
## #   complementary_methods &lt;chr&gt;, period &lt;chr&gt;, month_start &lt;dbl&gt;,
## #   year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;,
## #   effort_months &lt;dbl&gt;, country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;,
## #   municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;,
## #   precipitation &lt;dbl&gt;</code></pre>
<p>Para o subconjunto, como vimos anteriormente, para <strong>selecionar colunas e linhas</strong> de objetos bidimensionais podemos utilizar o operador <code>[]</code> ou <code>[[]]</code> associado com números separados por vírgulas ou o nome da coluna entre aspas, e o operador <code>$</code> para extrair pelo nome da coluna. Comparando um <code>data.frame</code> a um <code>tibbles</code>, esses últimos são mais rígidos: eles nunca fazem <strong>correspondência parcial</strong> e irão <strong>gerar um aviso</strong> se a coluna que você está tentando acessar não existir.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="tidyverse.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - subconjunto</span></span>
<span id="cb17-2"><a href="tidyverse.html#cb17-2" aria-hidden="true" tabindex="-1"></a>aa_locais<span class="sc">$</span>ref</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `ref`.</code></pre>
<pre><code>## NULL</code></pre>
<p>Por fim, podemos <strong>“espiar” os dados</strong> utilizando a função <code>tibble::glimpse()</code> para ter uma noção geral de número de linhas, colunas, e conteúdo de todas as colunas. Essa é função tidyverse da função R Base <code>str()</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="tidyverse.html#cb20-1" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(aa_locais[, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>## Rows: 1,163
## Columns: 10
## $ id                    &lt;chr&gt; &quot;amp1001&quot;, &quot;amp1002&quot;, &quot;amp1003&quot;, &quot;amp1004&quot;, &quot;amp…
## $ reference_number      &lt;dbl&gt; 1001, 1002, 1002, 1002, 1003, 1004, 1005, 1005, …
## $ species_number        &lt;dbl&gt; 19, 16, 14, 13, 30, 42, 23, 19, 13, 1, 1, 2, 4, …
## $ record                &lt;chr&gt; &quot;ab&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, …
## $ sampled_habitat       &lt;chr&gt; &quot;fo,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo…
## $ active_methods        &lt;chr&gt; &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, NA, &quot;as&quot;, &quot;as,sb,t…
## $ passive_methods       &lt;chr&gt; &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, NA, NA, NA, NA, &quot;pt&quot;, &quot;p…
## $ complementary_methods &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ period                &lt;chr&gt; &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo…
## $ month_start           &lt;dbl&gt; 9, 12, 12, 12, 7, NA, 4, 4, 4, 5, 5, 5, 5, 5, 5,…</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/tibbles.html">10 Tibbles</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="magrittr-pipe--" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> magrittr (pipe - %&gt;%)</h2>
<p>O operador pipe <code>%&gt;%</code> permite o <strong>encadeamento de várias funções</strong>, eliminando a necessidade de criar objetos para armazenar resultados intermediários. Dessa forma, pipes são uma <strong>ferramenta poderosa</strong> para expressar uma <strong>sequência de múltiplas operações</strong>.</p>
<p>O operador pipe <code>%&gt;%</code> vem do pacote <em>magrittr</em>, entretanto, todos os pacotes no tidyverse automaticamente tornam o pipe disponível. Essa função torna os <strong>códigos em R mais simples</strong>, pois realizamos múltiplas operações em uma única linha. Ele <strong>captura o resultado de uma declaração</strong> e o <strong>torna a entrada da próxima declaração</strong>, então podemos pensar como “EM SEGUIDA FAÇA” ao final de cada linha de código.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://maggritr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>A principal vantagem do uso dos pipes é facilitar o <strong>debuging</strong> (achar erros) nos códigos, porque seu uso torna a <strong>linguagem R mais próxima do que falamos e pensamos</strong>, uma vez que evita o uso de funções dentro de funções (funções compostas).</p>
<p>Digitar <code>%&gt;%</code> é um pouco chato, dessa forma, existe um atalho para sua inserção nos scripts: <code>ctrl + shift + M</code>.</p>
<p>Para deixar esse tópico <strong>menos estranho</strong> à quem está vendo esse operação pela primeira vez, vamos fazer <strong>alguns exemplos</strong>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="tidyverse.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb22-2"><a href="tidyverse.html#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="tidyverse.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb24-2"><a href="tidyverse.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="tidyverse.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="tidyverse.html#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>()</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<p>Essas operações ainda estão simples, vamos complicá-las com várias funções compostas. É nesses casos que a <strong>propriedade orgazacional</strong> do uso do pipe emerge: podemos facilmente ver o <strong>encadeamento de operações</strong>, onde cada função é organizada numa linha.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="tidyverse.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb26-2"><a href="tidyverse.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb26-3"><a href="tidyverse.html#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="tidyverse.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb26-5"><a href="tidyverse.html#cb26-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">sqrt</span>(<span class="fu">sort</span>(<span class="fu">log10</span>(<span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>)))))</span>
<span id="cb26-6"><a href="tidyverse.html#cb26-6" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="tidyverse.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb28-2"><a href="tidyverse.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb28-3"><a href="tidyverse.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="tidyverse.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb28-5"><a href="tidyverse.html#cb28-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="tidyverse.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log10</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-7"><a href="tidyverse.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-8"><a href="tidyverse.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb28-9"><a href="tidyverse.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span>
<span id="cb28-10"><a href="tidyverse.html#cb28-10" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<p>O uso do pipe vai se <strong>tornar especialmente útil</strong> quando seguirmos para os pacotes das próximas duas seções: <em>tidyr</em> e <em>dplyr</em>. Com esses pacotes iremos fazer operações em linhas e colunas de nossos dados tabulares, então podemos <strong>encademar uma série de funções</strong> para manipulação, limpeza e análise de dados.</p>
<p>Há ainda <strong>três outras variações do pipe</strong> que podem ser úteis em alguns momentos, mas que para funcionar precisam que o pacote <em>magrittr</em> seja carregado:</p>
<ul>
<li><code>%T&gt;%</code>: retorna o lado esquerdo em vez do lado direito</li>
<li><code>%$%</code>: “explode” as variáveis em um quadro de dados</li>
<li><code>%&lt;&gt;%</code>: permite atribuição usando pipes</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/pipes.html">18 Pipes</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tidyr" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> tidyr</h2>
<p>Os conjuntos de <strong>dados tidy</strong> (organizados) são mais fáceis de manipular, modelar e visualizar. Um conjunto de dados está arrumado ou não, dependendo de como linhas, colunas e células são combinadas com observações, variáveis e valores. Nos <strong>dados tidy</strong>, as <strong>variáveis estão nas colunas</strong>, <strong>observações estão nas linhas</strong> e <strong>valores estão nas células</strong>, sendo que para esse último, não deve haver mais de um valor por célula (Figura <a href="tidyverse.html#fig:fig-r-dados-tidy">5.2</a>).</p>
<ol style="list-style-type: decimal">
<li>Cada variável em uma coluna</li>
<li>Cada observação em uma linha</li>
<li>Cada valor como uma célula</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:fig-r-dados-tidy"></span>
<img src="img/cap04_fig02.png" alt="As três regras que tornam um conjunto de dados *tidy*. Adaptado de: Wickhan &amp; Grolemund (2017)." width="100%" />
<p class="caption">
Figura 5.2: As três regras que tornam um conjunto de dados <em>tidy</em>. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Todas as funções deste pacote são listadas na <a href="https://tidyr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Para realizar <strong>diversas transformações nos dados</strong> a fim de ajustá-los ao formato <strong>tidy</strong>, existe uma série de funções, para diversas finalidades: unir e separar, valores faltantes (<code>NA</code>), e pivotar (formato <strong>longo</strong> para <strong>largo</strong>), além de outras <a href="https://tidyr.tidyverse.org/reference/index.html">funções específicas</a>.</p>
<ul>
<li><code>unite()</code>: junta dados de múltiplas colunas em uma coluna</li>
<li><code>separate()</code>: separa caracteres em múlplica colunas</li>
<li><code>separate_rows()</code>: separa caracteres em múlplica colunas e linhas</li>
<li><code>drop_na()</code>: retira linhas com <code>NA</code> do conjunto de dados</li>
<li><code>replace_na()</code>: substitui <code>NA</code> do conjunto de dados</li>
<li><code>pivot_wider()</code>: transformar conjunto de dados <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>)</li>
<li><code>pivot_longer()</code>: transformar conjunto de dados <strong>largo</strong> (<em>wide</em>) para <strong>longo</strong> (<em>long</em>)</li>
</ul>
<div id="palmerpenguins" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> palmerpenguins</h3>
<p>Para exemplicar o funcionamento dessas funções, usaremos os dados de medidas de pinguins chamados <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados estão disponíveis no pacote <em>palmerpenguins</em>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="tidyverse.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote</span></span>
<span id="cb30-2"><a href="tidyverse.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span></code></pre></div>
<p>Esses dados foram coletados e disponibilizados pela <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dra. Kristen Gorman</a> e pela <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>, membro da Long Term Ecological Research Network.</p>
<p>O pacote <em>palmerpenguins</em> contém dois conjuntos de dados. Um é chamado de <strong>penguins</strong> e é uma versão simplificada dos dados brutos. O segundo conjunto de dados é <strong>penguins_raw</strong> e contém todas as variáveis e nomes originais baixados. Ambos os conjuntos de dados contêm dados para 344 pinguins, de três espécies diferentes, coletados em três ilhas no arquipélago de Palmer, na Antártica.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="tidyverse.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote palmerpenguins</span></span>
<span id="cb31-2"><a href="tidyverse.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb31-3"><a href="tidyverse.html#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="tidyverse.html#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ajuda dos dados</span></span>
<span id="cb31-5"><a href="tidyverse.html#cb31-5" aria-hidden="true" tabindex="-1"></a>?penguins</span>
<span id="cb31-6"><a href="tidyverse.html#cb31-6" aria-hidden="true" tabindex="-1"></a>?penguins_raw</span></code></pre></div>
</div>
<div id="glimpse" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> glimpse()</h3>
<p>Primeiramente, vamos observar os dados e utilizar a função <code>tidyr::glimpse()</code> para ter uma noção geral.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="tidyverse.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizar os dados</span></span>
<span id="cb32-2"><a href="tidyverse.html#cb32-2" aria-hidden="true" tabindex="-1"></a>penguins_raw</span></code></pre></div>
<pre><code>## # A tibble: 344 x 17
##    studyName `Sample Number` Species       Region Island Stage   `Individual ID`
##    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;          
##  1 PAL0708                 1 Adelie Pengu… Anvers Torge… Adult,… N1A1           
##  2 PAL0708                 2 Adelie Pengu… Anvers Torge… Adult,… N1A2           
##  3 PAL0708                 3 Adelie Pengu… Anvers Torge… Adult,… N2A1           
##  4 PAL0708                 4 Adelie Pengu… Anvers Torge… Adult,… N2A2           
##  5 PAL0708                 5 Adelie Pengu… Anvers Torge… Adult,… N3A1           
##  6 PAL0708                 6 Adelie Pengu… Anvers Torge… Adult,… N3A2           
##  7 PAL0708                 7 Adelie Pengu… Anvers Torge… Adult,… N4A1           
##  8 PAL0708                 8 Adelie Pengu… Anvers Torge… Adult,… N4A2           
##  9 PAL0708                 9 Adelie Pengu… Anvers Torge… Adult,… N5A1           
## 10 PAL0708                10 Adelie Pengu… Anvers Torge… Adult,… N5A2           
## # … with 334 more rows, and 10 more variables: Clutch Completion &lt;chr&gt;,
## #   Date Egg &lt;date&gt;, Culmen Length (mm) &lt;dbl&gt;, Culmen Depth (mm) &lt;dbl&gt;,
## #   Flipper Length (mm) &lt;dbl&gt;, Body Mass (g) &lt;dbl&gt;, Sex &lt;chr&gt;,
## #   Delta 15 N (o/oo) &lt;dbl&gt;, Delta 13 C (o/oo) &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># espiar os dados</span></span>
<span id="cb34-2"><a href="tidyverse.html#cb34-2" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(penguins_raw)</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 17
## $ studyName             &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL…
## $ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1…
## $ Species               &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie P…
## $ Region                &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;…
## $ Island                &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgerse…
## $ Stage                 &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adu…
## $ `Individual ID`       &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, …
## $ `Clutch Completion`   &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, …
## $ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16,…
## $ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34…
## $ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18…
## $ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,…
## $ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34…
## $ Sex                   &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;…
## $ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18…
## $ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.298…
## $ Comments              &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult…</code></pre>
</div>
<div id="unite" class="section level3" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> unite()</h3>
<p>Primeiramente, vamos exemplificar como <strong>juntar e serparar colunas</strong>. Vamos utilizar a função <code>tidyr::unite()</code> para unir as colunas “Region” e “Island.” Há diversos parâmetros para alterar como a funções funciona, entretanto, é importante destacar trŝ deles: <strong>col</strong> nome da coluna que vai receber as colunas unidas, <strong>sep</strong> indicando o caracter separador das colunas unidas, e <strong>remove</strong> para uma resposta lógica se as colunas unidas são removidas ou não. Vamos unir as colunas “Region” e “Island” na nova coluna “region_island,”</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unir colunas</span></span>
<span id="cb36-2"><a href="tidyverse.html#cb36-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_unir <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">unite</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb36-3"><a href="tidyverse.html#cb36-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">col =</span> <span class="st">&quot;region_island&quot;</span>,</span>
<span id="cb36-4"><a href="tidyverse.html#cb36-4" aria-hidden="true" tabindex="-1"></a>                                  Region<span class="sc">:</span>Island, </span>
<span id="cb36-5"><a href="tidyverse.html#cb36-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb36-6"><a href="tidyverse.html#cb36-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="separate" class="section level3" number="5.7.4">
<h3><span class="header-section-number">5.7.4</span> separate()</h3>
<p>De forma contrária podemos utilizar as funções <code>tidyr::separate()</code> e <code>tidyr::separate_rows()</code> para separar elementos de uma coluna em mais colunas. Respectivamente, a primeira função separa uma colunas em novas colunas conforme a separação e a segunda função separa uma coluna, distribuindo os elementos também nas linhas. Novamente, há diversos parâmetros, mas destacaremos quatro deles: <strong>col</strong> coluna a ser separada, <strong>into</strong> os nomes das novas colunas, <strong>sep</strong> indicando o caracter separador das colunas, e <strong>remove</strong> para uma resposta lógica se as colunas unidas são removidas ou não. Vamos separar a coluna “Stage” nas colunas “stage” e “egg_stage.”</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="tidyverse.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb37-2"><a href="tidyverse.html#cb37-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb37-3"><a href="tidyverse.html#cb37-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">col =</span> Stage,</span>
<span id="cb37-4"><a href="tidyverse.html#cb37-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;stage&quot;</span>, <span class="st">&quot;egg_stage&quot;</span>), </span>
<span id="cb37-5"><a href="tidyverse.html#cb37-5" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb37-6"><a href="tidyverse.html#cb37-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb37-7"><a href="tidyverse.html#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="tidyverse.html#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb37-9"><a href="tidyverse.html#cb37-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar_linhas <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate_rows</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb37-10"><a href="tidyverse.html#cb37-10" aria-hidden="true" tabindex="-1"></a>                                                    Stage,</span>
<span id="cb37-11"><a href="tidyverse.html#cb37-11" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
</div>
<div id="drop_na-e-replace_na" class="section level3" number="5.7.5">
<h3><span class="header-section-number">5.7.5</span> drop_na() e replace_na()</h3>
<p><strong>Valores faltantes</strong> (<code>NA</code>) é um tipo especial de elemento que discutimos na seção XX, e são relativamente comuns em grandes conjuntos de dados. Em Base R vimos algumas formas de lidar com esse tipo de elemento. No formato <strong>tidyverse</strong> existem várias formas de lidar com eles, mas aqui focaremos nas funções <code>tidyr::drop_na()</code> e <code>tidyr::replace_na()</code>, para retirar linhas e substitui-los, respectivamente.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover todas as linhas com nas</span></span>
<span id="cb38-2"><a href="tidyverse.html#cb38-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_todas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw)</span>
<span id="cb38-3"><a href="tidyverse.html#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="tidyverse.html#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remover linhas de colunas especificas com nas</span></span>
<span id="cb38-5"><a href="tidyverse.html#cb38-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_colunas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb38-6"><a href="tidyverse.html#cb38-6" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">any_of</span>(<span class="st">&quot;Comments&quot;</span>))</span>
<span id="cb38-7"><a href="tidyverse.html#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="tidyverse.html#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># substituir nas por outro valor</span></span>
<span id="cb38-9"><a href="tidyverse.html#cb38-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_subs_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb38-10"><a href="tidyverse.html#cb38-10" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">list</span>(<span class="at">Comments =</span> <span class="st">&quot;Unknown&quot;</span>))</span></code></pre></div>
</div>
<div id="pivotagem---pivot_longer-e-pivot_wider" class="section level3" number="5.7.6">
<h3><span class="header-section-number">5.7.6</span> pivotagem - pivot_longer() e pivot_wider()</h3>
<p>Por fim, trataremos de <strong>pivotagem ou remodelagem</strong> de dados. Veremos como mudar o formato do nosso conjunto de dados de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>) e vice-versa. Essa é uma operação semelhante à “Tabela Dinâmica” das planilhas eletrônicas. Consiste em usar uma coluna para virar outras colunas, de modo que os valores são preenchidos corretamente, reduzindo assim o número de linhas, isso na transformação de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>). Essa operação é bastante comum em Ecologia de Comunidades, quando queremos transformar uma lista de espécies em uma matriz de comunidades, com várias espécies nas colunas. Para realizar essa operação, usarmos a função <code>tidyr::pivot_wider()</code>. Dos diversos parâmetros que podem compor essa função, dois deles são fundamentais: <strong>names_from</strong> que indica a coluna de onde os nomes serão usados e <strong>values_from</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="tidyverse.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb39-2"><a href="tidyverse.html#cb39-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">13</span>)]</span>
<span id="cb39-3"><a href="tidyverse.html#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="tidyverse.html#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb39-5"><a href="tidyverse.html#cb39-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_wider <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb39-6"><a href="tidyverse.html#cb39-6" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">names_from =</span> Species, </span>
<span id="cb39-7"><a href="tidyverse.html#cb39-7" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">values_from =</span> <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code></pre></div>
<p>De modo oposto, podemos partir de um conjunto de dados <strong>largo</strong> (<em>wide</em>), ou seja, com várias colunas, e queremos que essas colunas preecham uma única coluna, e que os valores antes espalhados nessas várias colunas sejam adicionados um embaixo do outro. Para essa operação, podemos utilizar a função <code>tidyr::pivot_longer()</code>. Novamente, dos diversos parâmetros que podem compor essa função, trÊs deles são fundamentais: <strong>cols</strong> indicando as colunas que serão usandas para serem pivotadas, <strong>names_to</strong> que indica a coluna de onde os nomes serão usados e <strong>values_to</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb40-2"><a href="tidyverse.html#cb40-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>)]</span>
<span id="cb40-3"><a href="tidyverse.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="tidyverse.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb40-5"><a href="tidyverse.html#cb40-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_longer <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb40-6"><a href="tidyverse.html#cb40-6" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">cols =</span> <span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>,</span>
<span id="cb40-7"><a href="tidyverse.html#cb40-7" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">names_to =</span> <span class="st">&quot;medidas&quot;</span>, </span>
<span id="cb40-8"><a href="tidyverse.html#cb40-8" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">values_to =</span> <span class="st">&quot;valores&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/tidy-data.html">12 Tidy data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
</div>
<div id="dplyr" class="section level2" number="5.8">
<h2><span class="header-section-number">5.8</span> dplyr</h2>
<p>O <em>dplyr</em> é um pacote que <strong>facilita a manipulação de dados</strong>, com uma <strong>gramática de manipulação de dados</strong> simples e flexível (por exemplo, como filtragem, reordenamento, seleção, entre outras). Ele foi construído com o intuito de <strong>obter uma forma mais rápida e expressiva</strong> de tratar os dados. O <code>tibble</code> é a versão de data frame mais conveniente para se usar com pacote <em>dplyr</em>.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://dplyr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<div id="gramática" class="section level3" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Gramática</h3>
<p>Sua <strong>gramática simples</strong> contém <strong>funções verbais</strong> para manipulação de dados, baseada em:</p>
<ul>
<li>Verbos: <code>mutate()</code>, <code>select()</code>, <code>filter()</code>, <code>arrange()</code>, <code>summarise()</code>, <code>slice()</code>, <code>rename()</code>, etc.</li>
<li>Replicação: <code>across()</code>, <code>if_any()</code>, <code>if_all()</code>, <code>where()</code>, <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, etc.</li>
<li>Agrupamento: <code>group_by()</code> e <code>ungroup()</code></li>
<li>Junções: <code>inner_join()</code>, <code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, etc.</li>
<li>Combinando: <code>bind_rows()</code> e <code>bind_cols()</code></li>
<li>Funções resumo: <code>n()</code>, <code>n_distinct()</code>, <code>first()</code>, <code>last()</code>, <code>nth()</code>, etc.</li>
</ul>
<p>Para realizar as <strong>manipulações nos dados</strong> existe uma série de funções, para diversas finalidades: manipulação de uma tabela, manipulação de duas tabela, replicação, agrupamento, funções de vetores, além de muitas outras <a href="https://dplyr.tidyverse.org/reference/index.html">funções específicas</a>.</p>
<ul>
<li><code>relocate()</code>: muda a ordem das colunas</li>
<li><code>rename()</code>: muda o nome das colunas</li>
<li><code>select()</code>: seleciona colunas pelo nome ou posição</li>
<li><code>pull()</code>: seleciona uma coluna como vetor</li>
<li><code>mutate()</code>: adiciona novas colunas ou resultados em colunas existentes</li>
<li><code>arrange()</code>: reordena as linhas com base nos valores de colunas</li>
<li><code>filter()</code>: seleciona linhas com base em valores de colunas</li>
<li><code>slice()</code>: seleciona linhas de diferente formas</li>
<li><code>distinct()</code>: remove linhas com valores repetidos com base nos valores de colunas</li>
<li><code>count()</code>: conta observações para um grupo</li>
<li><code>group_by()</code>: agrupa linhas pelos valores das colunas</li>
<li><code>summarise()</code>: resume os dados através de funções considerando valores das colunas</li>
<li><code>*_join()</code>: funções que juntam dados de duas tabelas através de uma coluna chave</li>
</ul>
</div>
<div id="sintaxe" class="section level3" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Sintaxe</h3>
<p>Todas as funções seguem a mesma <strong>sintaxe</strong>, de modo que o <code>tibble</code> é sempre o <strong>primeiro argumento</strong> dessas funções, seguido de um <strong>pipe</strong> e pelo o <strong>nome da função</strong>. Isso permite o <strong>encademanto</strong> de várias operações consecutivas.</p>
<ol style="list-style-type: decimal">
<li>tibble</li>
<li>operador pipe</li>
<li>nome da função verbal com os argumentos entre parênteses</li>
<li>outras funções verbais…</li>
</ol>
<p>As funções verbais <strong>não precisam modificar</strong> o tibble original, sendo que as operações de manipulações podem e devem ser atribuídas à um <strong>novo objeto</strong>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="tidyverse.html#cb41-1" aria-hidden="true" tabindex="-1"></a>tb_dplyr <span class="ot">&lt;-</span> tb <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="tidyverse.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal1</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="tidyverse.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal2</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="tidyverse.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal3</span>(argumento1, argumento2, ...)</span></code></pre></div>
<p>Além de <code>data.frames</code> e <code>tibbles</code>, a manipulação pelo formato <em>dplyr</em> torna o trabalho com outros <strong>formatos de classes</strong> e dados acessível e eficiente, como <code>data.table</code>, SQL e Apache Spark.</p>
<ul>
<li><a href="https://dtplyr.tidyverse.org/"><em>dtplyr</em></a>: manipular conjuntos de dados <code>data.table</code></li>
<li><a href="https://dbplyr.tidyverse.org/"><em>dbplyr</em></a>: manipular conjuntos de dados SQL</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: manipular conjuntos de dados no Apache Spark</li>
</ul>
</div>
<div id="palmerpenguins-1" class="section level3" number="5.8.3">
<h3><span class="header-section-number">5.8.3</span> palmerpenguins</h3>
<p>Para nossos exemplos, vamos utilizar os <strong>dados de pinguins</strong> <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados estão disponíveis no pacote <em>palmerpenguins</em>. Vamos utilizar principalmente o conjunto de dados <strong>penguins</strong>, que é uma versão simplificada dos dados brutos <strong>penguins_raw</strong>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb42-2"><a href="tidyverse.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
</div>
<div id="relocate" class="section level3" number="5.8.4">
<h3><span class="header-section-number">5.8.4</span> relocate()</h3>
<p>Primeiramente, vamos <strong>reordenadar as colunas</strong> com a função <code>dplyr::relocate()</code>, onde simplesmente listamos as colunas que queremos mudar de posição e para onde elas devem ir. Para esse último passo há dois argumentos: <strong>.before</strong> que indica qual a coluna que as colunas realocadas devem se mover antes, e o argumentos <strong>.after</strong> indicando onde devem se mover depois. Ambos podem ser informados com os nomes ou posições dessas colunas com números.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - nome</span></span>
<span id="cb43-2"><a href="tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a>penguins_relocate_col <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="tidyverse.html#cb43-3" aria-hidden="true" tabindex="-1"></a> dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> island)</span>
<span id="cb43-4"><a href="tidyverse.html#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="tidyverse.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - posicao</span></span>
<span id="cb43-6"><a href="tidyverse.html#cb43-6" aria-hidden="true" tabindex="-1"></a>penguins_relocate_ncol <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="tidyverse.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> <span class="dv">2</span>)</span></code></pre></div>
</div>
<div id="rename" class="section level3" number="5.8.5">
<h3><span class="header-section-number">5.8.5</span> rename()</h3>
<p>Podemos ainda <strong>renomear colunas</strong> facilmente com a função <code>dplyr::rename()</code>, onde primeiramente informamos o nome que queremos que a coluna tenha, seguido do operador <code>=</code> e a coluna do nosso dado. Também podemos utilizar a função <code>dplyr::rename_with()</code>, que faz a <strong>mudança do nome em múltiplas colunas</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="tidyverse.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome das colunas</span></span>
<span id="cb44-2"><a href="tidyverse.html#cb44-2" aria-hidden="true" tabindex="-1"></a>penguins_rename <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="tidyverse.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">bill_length =</span> bill_length_mm,</span>
<span id="cb44-4"><a href="tidyverse.html#cb44-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">bill_depth =</span> bill_depth_mm,</span>
<span id="cb44-5"><a href="tidyverse.html#cb44-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">flipper_length =</span> flipper_length_mm,</span>
<span id="cb44-6"><a href="tidyverse.html#cb44-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">body_mass =</span> body_mass_g)</span>
<span id="cb44-7"><a href="tidyverse.html#cb44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-8"><a href="tidyverse.html#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome de todas as colunas</span></span>
<span id="cb44-9"><a href="tidyverse.html#cb44-9" aria-hidden="true" tabindex="-1"></a>penguins_rename_with <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb44-10"><a href="tidyverse.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(toupper)</span></code></pre></div>
</div>
<div id="select" class="section level3" number="5.8.6">
<h3><span class="header-section-number">5.8.6</span> select()</h3>
<p>Outra operação bastante usual dentro da manipulação de dados tabulares é a <strong>seleção de colunas</strong>. Podemos fazer essa operação com a função <code>dplyr::select()</code>, que seleciona colunas pelo nome ou pela posição. Aqui há uma série de possibilidades de seleção de colunas, desde utilizar operadores como <code>:</code> para selecionar intervalos de colunas, <code>!</code> para tomar o complemento, além de funções como <code>dplyr::starts_with()</code>, <code>dplyr::ends_with()</code>, <code>dplyr::contains()</code> para <strong>procurar colunas com um padrão de texto</strong>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por nomes</span></span>
<span id="cb45-2"><a href="tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>penguins_select <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="tidyverse.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(bill_length_mm<span class="sc">:</span>body_mass_g)</span>
<span id="cb45-4"><a href="tidyverse.html#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="tidyverse.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por padrao</span></span>
<span id="cb45-6"><a href="tidyverse.html#cb45-6" aria-hidden="true" tabindex="-1"></a>penguins_select_contains <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb45-7"><a href="tidyverse.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;_mm&quot;</span>))</span></code></pre></div>
</div>
<div id="pull" class="section level3" number="5.8.7">
<h3><span class="header-section-number">5.8.7</span> pull()</h3>
<p>Quando usamos a função <code>dplyr::select()</code>, mesmo que para uma linha, o retorno é sempre um <code>tibble</code>. Caso precisemos que essa <strong>coluna se torne um vetor</strong>, dentro do encadeamento dos <code>pipes</code>, usamos a função <code>dplyr::pull()</code> que <strong>que extrai uma coluna única coluna como vetor</strong>.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="tidyverse.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coluna como vetor</span></span>
<span id="cb46-2"><a href="tidyverse.html#cb46-2" aria-hidden="true" tabindex="-1"></a>penguins_select_pull <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="tidyverse.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(bill_length_mm)</span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="5.8.8">
<h3><span class="header-section-number">5.8.8</span> mutate()</h3>
<p>Uma das operações mais úteis dentre as operações para colunas é <strong>adicionar ou atualizar os valores</strong> de colunas. Para essa operação, usaremos a função <code>dplyr::mutate()</code>. Podemos ainda usar os argumentos <strong>.before</strong> e <strong>.after</strong> para indicar onde a nova coluna deve ficar, além do parâmetro <strong>.keep</strong> com diversas possibilidades de manter colunas depois de usar a função <code>dplyr::mutate()</code>. Por fim,
é fundamental destacar o uso das <strong>funções de replicação</strong>: <code>dplyr::across()</code>, <code>dplyr::if_any()</code> e <code>dplyr::if_all()</code>, para os quais a função irá <strong>fazer alterações em múltiplas colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="tidyverse.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adicionar colunas</span></span>
<span id="cb47-2"><a href="tidyverse.html#cb47-2" aria-hidden="true" tabindex="-1"></a>penguins_mutate <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="tidyverse.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="fl">1e3</span>, <span class="at">.before =</span> sex)</span>
<span id="cb47-4"><a href="tidyverse.html#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="tidyverse.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co"># modificar varias colunas</span></span>
<span id="cb47-6"><a href="tidyverse.html#cb47-6" aria-hidden="true" tabindex="-1"></a>penguins_mutate_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="tidyverse.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.character))</span></code></pre></div>
</div>
<div id="arrange" class="section level3" number="5.8.9">
<h3><span class="header-section-number">5.8.9</span> arrange()</h3>
<p>Além de operações em colunas, podemos fazer <strong>operações em linhas</strong>. Vamos começar com a <strong>reordenação das linhas</strong> com base nos valores das colunas. Para essa operação, usamos a função <code>dplyr::arrange()</code>. Podemos reordenadar por uma ou mais colunas de forma crescente ou de forma decrescente usando a função <code>desc()</code> ou o operador <code>-</code>. Da mesma forma que na função <code>dplyr::mutate()</code>, podemos usar as <strong>funções de replicação</strong> para <strong>ordenar as linhas para várias colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="tidyverse.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - crescente</span></span>
<span id="cb48-2"><a href="tidyverse.html#cb48-2" aria-hidden="true" tabindex="-1"></a>penguins_arrange <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="tidyverse.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(body_mass_g)</span>
<span id="cb48-4"><a href="tidyverse.html#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="tidyverse.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb48-6"><a href="tidyverse.html#cb48-6" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-7"><a href="tidyverse.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g))</span>
<span id="cb48-8"><a href="tidyverse.html#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="tidyverse.html#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb48-10"><a href="tidyverse.html#cb48-10" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc_m <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-11"><a href="tidyverse.html#cb48-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>body_mass_g)</span>
<span id="cb48-12"><a href="tidyverse.html#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="tidyverse.html#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - multiplas colunas</span></span>
<span id="cb48-14"><a href="tidyverse.html#cb48-14" aria-hidden="true" tabindex="-1"></a>penguins_arrange_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb48-15"><a href="tidyverse.html#cb48-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span></code></pre></div>
</div>
<div id="filter" class="section level3" number="5.8.10">
<h3><span class="header-section-number">5.8.10</span> filter()</h3>
<p>Uma das principais e mais usuais operações que podemos realizar em linhas é a seleção de linhas através do <strong>filtro por valores de uma ou mais colunas</strong>, utilizando a função <code>dplyr::filter()</code>. Para realizar os filtros iremos utilizar grande parte dos operadores relacionais e lógicos que listamos na Tabela <a href="#tab:tab-operadores"><strong>??</strong></a>, especialmente os lógicos para combinações de filtros em mais de uma coluna. Além desses operadores, podemos utilizar a função <code>is.na()</code> para filtros em elementos faltantes, e as funções <code>dplyr::between()</code> e <code>dplyr::near()</code> para valores filtros entre valores, e para valores próximos com certa tolerência, respectivamente. Por fim, podemos usar as <strong>funções de replicação</strong> para <strong>filtro das linhas para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="tidyverse.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb49-2"><a href="tidyverse.html#cb49-2" aria-hidden="true" tabindex="-1"></a>penguins_filter <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="tidyverse.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span>
<span id="cb49-4"><a href="tidyverse.html#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="tidyverse.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb49-6"><a href="tidyverse.html#cb49-6" aria-hidden="true" tabindex="-1"></a>penguins_filter_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-7"><a href="tidyverse.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb49-8"><a href="tidyverse.html#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="tidyverse.html#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb49-10"><a href="tidyverse.html#cb49-10" aria-hidden="true" tabindex="-1"></a>penguins_filter_in <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-11"><a href="tidyverse.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>),</span>
<span id="cb49-12"><a href="tidyverse.html#cb49-12" aria-hidden="true" tabindex="-1"></a>                sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb49-13"><a href="tidyverse.html#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="tidyverse.html#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - na</span></span>
<span id="cb49-15"><a href="tidyverse.html#cb49-15" aria-hidden="true" tabindex="-1"></a>penguins_filter_na <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-16"><a href="tidyverse.html#cb49-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex) <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb49-17"><a href="tidyverse.html#cb49-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-18"><a href="tidyverse.html#cb49-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - between</span></span>
<span id="cb49-19"><a href="tidyverse.html#cb49-19" aria-hidden="true" tabindex="-1"></a>penguins_filter_between <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-20"><a href="tidyverse.html#cb49-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="dv">3000</span>, <span class="dv">4000</span>))</span>
<span id="cb49-21"><a href="tidyverse.html#cb49-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-22"><a href="tidyverse.html#cb49-22" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas por varias colunas</span></span>
<span id="cb49-23"><a href="tidyverse.html#cb49-23" aria-hidden="true" tabindex="-1"></a>penguins_filter_if <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb49-24"><a href="tidyverse.html#cb49-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">where</span>(is.integer), <span class="sc">~</span> . <span class="sc">&gt;</span> <span class="dv">200</span>))</span></code></pre></div>
</div>
<div id="slice" class="section level3" number="5.8.11">
<h3><span class="header-section-number">5.8.11</span> slice()</h3>
<p>Além da selecção de linhas por filtros, podemos fazer a <strong>seleção das linhas por intervalos</strong>, indicando quais <strong>linhas desejamos</strong>, usando a função <code>dplyr::slice()</code>, e informando o argumento <strong>n</strong> para o número da linha ou intervalo das linhas. Essa função possui variações no sufixo muito interessantes: <code>dplyr::slice_head()</code> e <code>dplyr::slice_tail()</code> seleciona as primeiras e últimas linhas, <code>dplyr::slice_min()</code> e <code>dplyr::slice_max()</code> seleciona linhas com os maiores e menores valores de uma coluna, e <code>dplyr::slice_sample()</code> seleciona linhas aleatoriamente.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tidyverse.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas</span></span>
<span id="cb50-2"><a href="tidyverse.html#cb50-2" aria-hidden="true" tabindex="-1"></a>penguins_slice <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="tidyverse.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">300</span><span class="sc">:</span><span class="fu">n</span>()))</span>
<span id="cb50-4"><a href="tidyverse.html#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="tidyverse.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - head</span></span>
<span id="cb50-6"><a href="tidyverse.html#cb50-6" aria-hidden="true" tabindex="-1"></a>penguins_slice_head <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-7"><a href="tidyverse.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb50-8"><a href="tidyverse.html#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="tidyverse.html#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - max</span></span>
<span id="cb50-10"><a href="tidyverse.html#cb50-10" aria-hidden="true" tabindex="-1"></a>penguins_slice_max <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-11"><a href="tidyverse.html#cb50-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_max</span>(body_mass_g, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb50-12"><a href="tidyverse.html#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="tidyverse.html#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - sample</span></span>
<span id="cb50-14"><a href="tidyverse.html#cb50-14" aria-hidden="true" tabindex="-1"></a>penguins_slice_sample <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb50-15"><a href="tidyverse.html#cb50-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span></code></pre></div>
</div>
<div id="distinct" class="section level3" number="5.8.12">
<h3><span class="header-section-number">5.8.12</span> distinct()</h3>
<p>A última operação que apresentaremos aqui para linhas será a <strong>retirada de linhas com valores repetidos com base nos valores de colunas</strong> utilizandos a função <code>dplyr::distinct()</code>. Essa função por padrão retorna apenas a coluna utilizada para retirar as linhas com valores repetidos, sendo necessário acrescentar o argumento <strong>.keep_all</strong> para retornar todas as colunas. Por fim, podemos usar as <strong>funções de replicação</strong> para <strong>retirar linhas com valores repetidos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="tidyverse.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos</span></span>
<span id="cb51-2"><a href="tidyverse.html#cb51-2" aria-hidden="true" tabindex="-1"></a>penguins_distinct <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="tidyverse.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g)</span>
<span id="cb51-4"><a href="tidyverse.html#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="tidyverse.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos - manter as outras colunas</span></span>
<span id="cb51-6"><a href="tidyverse.html#cb51-6" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="tidyverse.html#cb51-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb51-8"><a href="tidyverse.html#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="tidyverse.html#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos para varias colunas</span></span>
<span id="cb51-10"><a href="tidyverse.html#cb51-10" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb51-11"><a href="tidyverse.html#cb51-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.integer)), <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="count" class="section level3" number="5.8.13">
<h3><span class="header-section-number">5.8.13</span> count()</h3>
<p>Agora entraremos no assunto de resumo das observações. Podemos fazer <strong>contagens resumos dos nossos dados</strong>, utilizando para isso a função <code>dplyr::count()</code>. Essa função irá contar valores de uma ou mais colunas, semelhante à função Base R <code>table()</code>, mas num contexto <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tidyverse.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para um coluna</span></span>
<span id="cb52-2"><a href="tidyverse.html#cb52-2" aria-hidden="true" tabindex="-1"></a>penguins_count <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="tidyverse.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species)</span>
<span id="cb52-4"><a href="tidyverse.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="tidyverse.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para mais de uma coluna</span></span>
<span id="cb52-6"><a href="tidyverse.html#cb52-6" aria-hidden="true" tabindex="-1"></a>penguins_count_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb52-7"><a href="tidyverse.html#cb52-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species, island)</span></code></pre></div>
</div>
<div id="group_by" class="section level3" number="5.8.14">
<h3><span class="header-section-number">5.8.14</span> group_by()</h3>
<p>Uma grande parte das operações feita nos dados são realizadas em <strong>grupos definidos por valores de colunas ou variáveis categóricas</strong>. A função <code>dplyr::group_by()</code> transforma um <code>tibble</code> e converte em um <code>tibble</code> agrupado, onde as operações são realizadas “por grupo.” Essa função é utilizada geralmente com a função <code>dplyr::summarise()</code>, que veremos logo em seguida. O agrupamento não altera a aparência dos dados (além de informar como estão agrupados). A função <code>dplyr::ungroup()</code> remove o agrupamento. Podemos ainda usar <strong>funções de replicação</strong> para <strong>fazer os agrupamentos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="tidyverse.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb53-2"><a href="tidyverse.html#cb53-2" aria-hidden="true" tabindex="-1"></a>penguins_group_by <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="tidyverse.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species)</span>
<span id="cb53-4"><a href="tidyverse.html#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="tidyverse.html#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb53-6"><a href="tidyverse.html#cb53-6" aria-hidden="true" tabindex="-1"></a>penguins_group_by_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb53-7"><a href="tidyverse.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor)))</span></code></pre></div>
</div>
<div id="summarise" class="section level3" number="5.8.15">
<h3><span class="header-section-number">5.8.15</span> summarise()</h3>
<p>Como dissemos, muitas vezes queremos <strong>resumir nossos dados</strong>, principalmente para ter uma noção geral das variáveis (colunas) ou mesmo começar a <strong>análise exploratória resumindo variáveis contínuas por grupos de variáveis categóricas</strong>. Dessa forma, ao utilizar a função <code>dplyr::summarise()</code> teremos um novo <code>tibble</code> com os dados resumidos, que é a <strong>agregação ou resumo dos dados através de funções</strong>. Da mesma forma que outras funções, podemos usar <strong>funções de replicação</strong> para <strong>resumir valores para mais de uma coluna</strong>, dependendo de resultados booleanos. .</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tidyverse.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb54-2"><a href="tidyverse.html#cb54-2" aria-hidden="true" tabindex="-1"></a>penguins_summarise <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="tidyverse.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb54-4"><a href="tidyverse.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb54-5"><a href="tidyverse.html#cb54-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">body_mass_g_sd =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb54-6"><a href="tidyverse.html#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="tidyverse.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb54-8"><a href="tidyverse.html#cb54-8" aria-hidden="true" tabindex="-1"></a>penguins_summarise_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb54-9"><a href="tidyverse.html#cb54-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb54-10"><a href="tidyverse.html#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
</div>
<div id="bind_rows-e-bind_cols" class="section level3" number="5.8.16">
<h3><span class="header-section-number">5.8.16</span> bind_rows() e bind_cols()</h3>
<p>Muitas vezes teremos de <strong>combinar duas ou mais tabelas de dados</strong>. Podemos utilizar as funções Base R <code>rbind</code> e <code>cbind</code>, como vimos. Entrentanto, pode ser interessante avançar para as funções <code>dplyr::bind_rows()</code> e <code>dplyr::bind_cols()</code> do formato <em>tidyverse</em>. A ideia é muito semelhante: a primeira função combina dados por linhas e a segunda por colunas. Entretanto, há vantagens no uso dessas funções, como a identificação das linhas pelo argumento <strong>.id</strong> para a primera função, e a conferência do nome das colunas pelo argumento <strong>.name_repair</strong> para a segunda função.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="tidyverse.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar as linhas para dois tibbles</span></span>
<span id="cb55-2"><a href="tidyverse.html#cb55-2" aria-hidden="true" tabindex="-1"></a>penguins_01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb55-3"><a href="tidyverse.html#cb55-3" aria-hidden="true" tabindex="-1"></a>penguins_02 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">51</span><span class="sc">:</span><span class="dv">55</span>)</span>
<span id="cb55-4"><a href="tidyverse.html#cb55-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-5"><a href="tidyverse.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar linhas</span></span>
<span id="cb55-6"><a href="tidyverse.html#cb55-6" aria-hidden="true" tabindex="-1"></a>penguins_bind_rows <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(penguins_01, penguins_02, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb55-7"><a href="tidyverse.html#cb55-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-8"><a href="tidyverse.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar colunas</span></span>
<span id="cb55-9"><a href="tidyverse.html#cb55-9" aria-hidden="true" tabindex="-1"></a>penguins_bind_cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(penguins_01, penguins_02, <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span>)</span></code></pre></div>
</div>
<div id="join" class="section level3" number="5.8.17">
<h3><span class="header-section-number">5.8.17</span> *_join()</h3>
<p>Finalmente, veremos o último conjunto de funções do pacote <em>dplyr</em>, a <strong>junção de tabelas</strong>. Nessa operação, fazemos a <strong>combinação de pares de conjunto de dados tabulares por uma ou mais colunas chaves</strong>. Há dois tipos de junções: junção de mutação e junção de filtragem. A <strong>junção de mutação</strong> primeiro combina as observações por suas chaves e, em seguida, <strong>copia as variáveis (colunas) de uma tabela para a outra</strong>. É fundamental destacar a importância da <strong>coluna chave</strong>, que é indicada pelo argumento <strong>by</strong>. Essa coluna deve conter <strong>elementos que sejam comuns às duas tabelas</strong> para que haja a combinação dos elementos.</p>
<p>Existem quatro tipos de junções, que são realizadas pelas funções <code>dplyr::inner_join()</code>, <code>dplyr::left_join()</code>, <code>dplyr::full_join()</code> e <code>dplyr::right_join()</code>, e que podem ser representadas na Figura <a href="tidyverse.html#fig:fig-r-join">5.3</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-join"></span>
<img src="img/cap04_fig03.png" alt="Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017)." width="80%" />
<p class="caption">
Figura 5.3: Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Considerando a nomenclatura de uma tabela de dados sendo como <code>x</code> e <code>y</code>, temos:</p>
<ul>
<li><code>inner_join(x, y)</code>: mantém apenas as observações em <code>x</code> e em <code>y</code></li>
<li><code>left_join(x, y)</code>: mantém todas as observações em <code>x</code></li>
<li><code>right_join(x, y)</code>: mantém todas as observações em <code>y</code></li>
<li><code>full_join(x, y)</code>: mantém todas as observações em <code>x</code> e em <code>y</code></li>
</ul>
<p>Aqui, vamos demostrar apenas a função <code>dplyr::left_join()</code>, trazendo os dados do conjunto de dados do <strong>penguins_raw</strong> para o conjunto de dados do <strong>penguins</strong>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="tidyverse.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add uma coluna chave de ids</span></span>
<span id="cb56-2"><a href="tidyverse.html#cb56-2" aria-hidden="true" tabindex="-1"></a>penguin_islands <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb56-3"><a href="tidyverse.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">island =</span> <span class="fu">c</span>(<span class="st">&quot;Torgersen&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>, <span class="st">&quot;Dream&quot;</span>, <span class="st">&quot;Alpha&quot;</span>),</span>
<span id="cb56-4"><a href="tidyverse.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.083333</span>, <span class="sc">-</span><span class="fl">63.775636</span>, <span class="sc">-</span><span class="fl">64.233333</span>, <span class="sc">-</span><span class="dv">63</span>),</span>
<span id="cb56-5"><a href="tidyverse.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.766667</span>, <span class="sc">-</span><span class="fl">64.818569</span>, <span class="sc">-</span><span class="fl">64.733333</span>, <span class="sc">-</span><span class="fl">64.316667</span>)</span>
<span id="cb56-6"><a href="tidyverse.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb56-7"><a href="tidyverse.html#cb56-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-8"><a href="tidyverse.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># juncao - left</span></span>
<span id="cb56-9"><a href="tidyverse.html#cb56-9" aria-hidden="true" tabindex="-1"></a>penguins_left_join <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb56-10"><a href="tidyverse.html#cb56-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(penguin_islands, <span class="at">by =</span> <span class="st">&quot;island&quot;</span>)</span></code></pre></div>
<p>Já a <strong>junção de filtragem</strong> combinam as observações da mesma maneira que as junções de mutação, mas <strong>afetam as observações, não as variáveis (colunas)</strong>. Existem dois tipos:</p>
<ul>
<li><code>semi_join(x, y)</code>: mantém todas as observações em <code>x</code> que têm uma correspondência em <code>y</code></li>
<li><code>anti_join(x, y)</code>: alimina todas as observações em <code>x</code> que têm uma correspondência em <code>y</code></li>
</ul>
<p><em>Semi-joins</em> são úteis para <strong>corresponder tabelas de resumo filtradas de volta às linhas originais</strong>, removendo as linhas que não estavam antes do join. <em>Anti-joins</em> são úteis para <strong>diagnosticar incompatibilidades de junção</strong>, por exemplo, ao verificar os elementos que não combinam entre duas tabelas de dados.</p>
</div>
<div id="operações-de-conjuntos-e-comparação-de-dados" class="section level3" number="5.8.18">
<h3><span class="header-section-number">5.8.18</span> Operações de conjuntos e comparação de dados</h3>
<p>Temos ainda <strong>operações de conjuntos</strong> e <strong>comparação de dados</strong>.</p>
<ul>
<li><code>union(x, y)</code>: retorna todas as linhas que aparecem em <code>x</code>, <code>y</code> ou mais dos conjuntos de dados</li>
<li><code>interesect(x, y)</code>: retorna apenas as linhas que aparecem em <code>x</code> e em <code>y</code></li>
<li><code>setdiff(x, y)</code>: retorna as linhas que aparecem <code>x</code>, mas não em <code>y</code></li>
<li><code>setequal(x, y)</code>: retorna se <code>x</code> e <code>y</code> são iguais e quais suas diferenças</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/relational-data.html">13 Relational data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
</div>
<div id="stringr" class="section level2" number="5.9">
<h2><span class="header-section-number">5.9</span> stringr</h2>
<p>O pacote <em>stringr</em> fornece um conjunto de funções para a <strong>manipulação de caracteres ou strings</strong>. O pacote concentra-se nas funções de manipulação mais importantes e comumente usadas. Para função para específicas, recomenda-se usar para o pacote <em>stringi</em>, que fornece um conjunto mais abrangente de funções. As funções do <em>stringr</em> podem ser agrupadas em algumas operações para tarefas específicas como correspondência de padrões, espaço em branco, maiúsculas e minúsculas, além de outras funções.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://stringr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Demonstraremos <strong>algumas funções para algumas operações mais comuns</strong>, utilizando um vetor de um elemento, com o string “penguins.”</p>
<p>Podemos explorar o <strong>comprimento</strong> de strings com a função <code>stringr::str_length()</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="tidyverse.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprimento</span></span>
<span id="cb57-2"><a href="tidyverse.html#cb57-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_length</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p><strong>Extrair um string</strong> por sua posição usando a função <code>stringr::str_sub()</code> ou por um padrão com <code>stringr::str_extract()</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="tidyverse.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair pela posicao</span></span>
<span id="cb59-2"><a href="tidyverse.html#cb59-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">end =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;pen&quot;</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="tidyverse.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair por padrão</span></span>
<span id="cb61-2"><a href="tidyverse.html#cb61-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;p&quot;</code></pre>
<p><strong>Substituir strings</strong> por outros strings com <code>stringr::str_replace()</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="tidyverse.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sustituir</span></span>
<span id="cb63-2"><a href="tidyverse.html#cb63-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;a&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p><strong>Separar</strong> strings por um padrão com a função <code>stringr::str_split()</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="tidyverse.html#cb65-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">string =</span> <span class="st">&quot;p-e-n-g-u-i-n-s&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,] &quot;p&quot;  &quot;e&quot;  &quot;n&quot;  &quot;g&quot;  &quot;u&quot;  &quot;i&quot;  &quot;n&quot;  &quot;s&quot;</code></pre>
<p><strong>Inserir espaços em brancos</strong> pela esquerda ou direira com a função <code>stringr::str_pad()</code>.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="tidyverse.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inserir espacos em branco</span></span>
<span id="cb67-2"><a href="tidyverse.html#cb67-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;  penguins&quot;</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="tidyverse.html#cb69-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins  &quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="tidyverse.html#cb71-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins &quot;</code></pre>
<p>Também podemos <strong>remover espaços em branco</strong> do começo, final ou ambo, utilizando <code>stringr::str_trim()</code>.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="tidyverse.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover espacos em branco</span></span>
<span id="cb73-2"><a href="tidyverse.html#cb73-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins &quot;</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="tidyverse.html#cb75-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins&quot;</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="tidyverse.html#cb77-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p>Podemos também <strong>alterar minúsculas e maiúsculas</strong> em diferentes, com várias funções.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="tidyverse.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar minusculas e maiusculas</span></span>
<span id="cb79-2"><a href="tidyverse.html#cb79-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(<span class="at">string =</span> <span class="st">&quot;Penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="tidyverse.html#cb81-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;PENGUINS&quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="tidyverse.html#cb83-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_sentence</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="tidyverse.html#cb85-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<p>Podemos ainda <strong>ordenar os elementos</strong> de um vetor por ordem alfabética, usando <code>stringr::str_sort()</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="tidyverse.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar</span></span>
<span id="cb87-2"><a href="tidyverse.html#cb87-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters)</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="tidyverse.html#cb89-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters, <span class="at">dec =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;z&quot; &quot;y&quot; &quot;x&quot; &quot;w&quot; &quot;v&quot; &quot;u&quot; &quot;t&quot; &quot;s&quot; &quot;r&quot; &quot;q&quot; &quot;p&quot; &quot;o&quot; &quot;n&quot; &quot;m&quot; &quot;l&quot; &quot;k&quot; &quot;j&quot; &quot;i&quot; &quot;h&quot;
## [20] &quot;g&quot; &quot;f&quot; &quot;e&quot; &quot;d&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot;</code></pre>
<p>Podemos ainda utilizar essas funções em complemento com o pacote <em>dplyr</em>, para <strong>alterar os strings de colunas</strong> ou <strong>nome das colunas</strong>.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="tidyverse.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar valores das colunas</span></span>
<span id="cb91-2"><a href="tidyverse.html#cb91-2" aria-hidden="true" tabindex="-1"></a>penguins_stringr_valores <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a href="tidyverse.html#cb91-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">species =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(species))</span>
<span id="cb91-4"><a href="tidyverse.html#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="tidyverse.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar nome das colunas</span></span>
<span id="cb91-6"><a href="tidyverse.html#cb91-6" aria-hidden="true" tabindex="-1"></a>penguins_stringr_nomes <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb91-7"><a href="tidyverse.html#cb91-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(stringr<span class="sc">::</span>str_to_title)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/strings.html">14 Strings</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="forcats" class="section level2" number="5.10">
<h2><span class="header-section-number">5.10</span> forcats</h2>
<p>O pacote <em>forcats</em> fornece um conjunto de ferramentas úteis para <strong>manipular fatores</strong>. Como dito anteriormente, usamos fatores geralmente quando temos <strong>dados categóricos</strong>, que são variáveis que possuem um conjunto de valores fixos e conhecidos. As funções são utilizadas principalmente para: mudar a ordem dos níveis, mudar os valores dos níveis, adicionar e remover níveis, combinar múltiplos níveis, além de outras operações.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://forcats.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Vamos utilizar ainda os dados <strong>penguins</strong> e <strong>penguins_raw</strong> para exemplificar o uso do pacote <em>forcats</em>.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="tidyverse.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb92-2"><a href="tidyverse.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos <strong>converter</strong> dados de <strong>string</strong> para <strong>fator</strong>, utilizando a função <code>forcats::as_factor()</code>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tidyverse.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string</span></span>
<span id="cb93-2"><a href="tidyverse.html#cb93-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">as_factor</span>(penguins_raw<span class="sc">$</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [3] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [5] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## 3 Levels: Adelie Penguin (Pygoscelis adeliae) ...</code></pre>
<p>Podemos facilmente mudar o <strong>nome dos níveis</strong> utilizando a <code>forcats::fct_recode()</code>.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tidyverse.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># muda o nome dos niveis</span></span>
<span id="cb95-2"><a href="tidyverse.html#cb95-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_recode</span>(penguins<span class="sc">$</span>species, <span class="at">a =</span> <span class="st">&quot;Adelie&quot;</span>, <span class="at">c =</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="at">g =</span> <span class="st">&quot;Gentoo&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] a a a a a a
## Levels: a c g</code></pre>
<p>Para <strong>inverter os níveis</strong>, usamos a função <code>forcats::fct_rev()</code>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="tidyverse.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inverte os niveis</span></span>
<span id="cb97-2"><a href="tidyverse.html#cb97-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_rev</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Gentoo Chinstrap Adelie</code></pre>
<p>Uma operação muito comum com fatores é <strong>mudar a ordem dos níveis</strong>. Quando precisamos <strong>especificar a ordem dos níveis</strong>, podemos fazer essa operação manualmente com a função <code>forcats::fct_relevel()</code>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="tidyverse.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especifica a ordem dos niveis</span></span>
<span id="cb99-2"><a href="tidyverse.html#cb99-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(penguins<span class="sc">$</span>species, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Adelie&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Chinstrap Gentoo Adelie</code></pre>
<p>Como vimos, a <strong>reordenação</strong> dos níveis pode ser feita <strong>manualmente</strong>. Mas existe outras formas <strong>automáticas de reordenação</strong> seguindo algumas <strong>regras</strong>, para as quais existem funções específicas.</p>
<ul>
<li><code>forcats::fct_inorder()</code>: pela ordem em que aparecem pela primeira vez</li>
<li><code>forcats::fct_infreq()</code>: por número de observações com cada nível (o maior primeiro)</li>
<li><code>forcats::fct_inseq()</code>: por valor numérico de nível</li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="tidyverse.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># niveis pela ordem em que aparecem</span></span>
<span id="cb101-2"><a href="tidyverse.html#cb101-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="tidyverse.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordem (decrescente) de frequencia</span></span>
<span id="cb103-2"><a href="tidyverse.html#cb103-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<p>Por fim, podemos fazer a <strong>agregação de níveis raros em um nível</strong> utilizando a função <code>forcats::fct_lump()</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="tidyverse.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agregacao de niveis raros em um nivel</span></span>
<span id="cb105-2"><a href="tidyverse.html#cb105-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_lump</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Other</code></pre>
<p>Podemos ainda utilizar essas funções em complemento com o pacote <em>dplyr</em>, para fazer <strong>manipulações de fatores nas colunas</strong>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="tidyverse.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformar varias colunas em fator</span></span>
<span id="cb107-2"><a href="tidyverse.html#cb107-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_multi_factor <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="tidyverse.html#cb107-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), forcats<span class="sc">::</span>as_factor))</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/factors.html">15 Factors</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="lubridate" class="section level2" number="5.11">
<h2><span class="header-section-number">5.11</span> lubridate</h2>
<p>O pacote <em>lubridate</em> fornece um conjunto de funções para a <strong>manipulação de dados data e tempo</strong>. Dessa forma, esse pacote facilita o manejo desse tipo de dado no R, pois geralmente esses dados não são intuitivos e mudam dependendo do tipo de objeto de data e hora. Além disso, os métodos que usam datas e horários devem levar em consideração fusos horários, anos bissextos, horários de verão e além de outras particularidades. Existem diversas funções nesse pacote, sendo as mesmas focadas em: transformações de data/tempo, componentes, arredondamentos, durações, períodos, intervalos, além de muitas outras funções específicas.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://lubridate.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Apesar de estar inserido no escopo do <em>tidyverse</em>, este pacote não é instalado com os demais, <strong>requisitando sua instalação solo</strong>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="tidyverse.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb108-2"><a href="tidyverse.html#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="tidyverse.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb109-2"><a href="tidyverse.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>Existem trÊs tipos de dados data/tempo:</p>
<ul>
<li><strong>Data</strong>: tempo em dias, meses e anos <code>&lt;date&gt;</code></li>
<li><strong>Tempo</strong>: tempo dentro de um dia <code>&lt;time&gt;</code></li>
<li><strong>Data-tempo</strong>: tempo em um instante (data mais tempo) <code>&lt;dttm&gt;</code></li>
</ul>
<p>Para trabalhar exclusivamente com horários, podemos utilizar o pacote <em>hms</em>.</p>
<p>É fundamental também destacar que algumas letras terão um significado temporal, sendo abreviações de diferentes períodos em inglês: <strong>y</strong>ear (ano), <strong>m</strong>onth (mês), <strong>w</strong>eak (semana), <strong>d</strong>ay (dia), <strong>h</strong>our (hora), <strong>m</strong>inute (minuto), e <strong>s</strong>econd (segundo).</p>
<p>Para acessar a <strong>informação da data e horários atuais</strong> podemos utilizar as funções <code>lubridate::today()</code> e <code>lubridate::now()</code>.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="tidyverse.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrai a data nesse instante</span></span>
<span id="cb110-2"><a href="tidyverse.html#cb110-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10&quot;</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="tidyverse.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extraie a data e tempo nesse instante</span></span>
<span id="cb112-2"><a href="tidyverse.html#cb112-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">now</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 11:49:51 -03&quot;</code></pre>
<p>Além dessas informações instantâneas, existem <strong>três maneiras</strong> de criar um dado de data/tempo.</p>
<ul>
<li>De um string</li>
<li>De componentes individuais de data e hora</li>
<li>De um objeto de data/tempo existente</li>
</ul>
<p>Os dados de data/tempo geralmente estão no formato de <strong>strings</strong>. Podemos transformar os dados especificando a ordem dos componentes, ou seja, a ordem em que ano, mês e dia aparecem no string, usando as letras <code>y</code> (ano), <code>m</code> (mês) e <code>d</code> (dia) na mesma ordem, por exemplo, <code>lubridate::dmy()</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="tidyverse.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb114-2"><a href="tidyverse.html#cb114-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-03-2021&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03&quot;</code></pre>
<p>Essas funções também aceitam números sem aspas, além de serem <strong>muito versáteis</strong> e <strong>funcionarem em outros diversos formatos</strong>.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="tidyverse.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb116-2"><a href="tidyverse.html#cb116-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-Mar-2021&quot;</span>)</span>
<span id="cb116-3"><a href="tidyverse.html#cb116-3" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="dv">03032021</span>)</span>
<span id="cb116-4"><a href="tidyverse.html#cb116-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03032021&quot;</span>)</span>
<span id="cb116-5"><a href="tidyverse.html#cb116-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03/03/2021&quot;</span>)</span>
<span id="cb116-6"><a href="tidyverse.html#cb116-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03.03.2021&quot;</span>)</span></code></pre></div>
<p>Além da data, podemos <strong>especificar horários</strong> atrelados à essas datas. Para criar uma data e tempo, adicionamos um underscore (<code>_</code>) e os <code>h</code> (hora), <code>m</code> (minuto) e <code>s</code> (segundo) ao nome da função, além do argumento <strong>tz</strong> para especificar <strong>fuso horário</strong>.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="tidyverse.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especificar horarios e fuso horario</span></span>
<span id="cb117-2"><a href="tidyverse.html#cb117-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_h</span>(<span class="st">&quot;03-03-2021 13&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="tidyverse.html#cb119-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hm</span>(<span class="st">&quot;03-03-2021 13:32&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="tidyverse.html#cb121-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 UTC&quot;</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="tidyverse.html#cb123-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 -03&quot;</code></pre>
<p>Podemos ainda ter <strong>componentes individuais</strong> de data-hora em <strong>múltiplas colunas</strong>. Para realizar essa transformação, podemos usar as funções <code>lubridate::make_date()</code> e <code>lubridate::make_datetime()</code>.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="tidyverse.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dados com componentes individuais</span></span>
<span id="cb125-2"><a href="tidyverse.html#cb125-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb125-3"><a href="tidyverse.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ano =</span> <span class="fu">c</span>(<span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2021</span>),</span>
<span id="cb125-4"><a href="tidyverse.html#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb125-5"><a href="tidyverse.html#cb125-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dia =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">31</span>),</span>
<span id="cb125-6"><a href="tidyverse.html#cb125-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hora =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">14</span>, <span class="dv">18</span>), </span>
<span id="cb125-7"><a href="tidyverse.html#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">minuto =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">44</span>, <span class="dv">55</span>)</span>
<span id="cb125-8"><a href="tidyverse.html#cb125-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb125-9"><a href="tidyverse.html#cb125-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-10"><a href="tidyverse.html#cb125-10" aria-hidden="true" tabindex="-1"></a><span class="co"># data de componentes individuais</span></span>
<span id="cb125-11"><a href="tidyverse.html#cb125-11" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb125-12"><a href="tidyverse.html#cb125-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">data =</span> lubridate<span class="sc">::</span><span class="fu">make_datetime</span>(ano, mes, dia, hora, minuto))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##     ano   mes   dia  hora minuto data               
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
## 1  2021     1    12     2      2 2021-01-12 02:02:00
## 2  2021     2    20    14     44 2021-02-20 14:44:00
## 3  2021     3    31    18     55 2021-03-31 18:55:00</code></pre>
<p>Por fim, podemo criar datas <strong>modificando entre data-tempo e data</strong>, utilizando as funções <code>lubridate::as_datetime()</code> e <code>lubridate::as_date()</code>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="tidyverse.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data para data-horario</span></span>
<span id="cb127-2"><a href="tidyverse.html#cb127-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 UTC&quot;</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="tidyverse.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data-horario para data</span></span>
<span id="cb129-2"><a href="tidyverse.html#cb129-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10&quot;</code></pre>
<p>Uma vez que entendemos como podemos <strong>criar dados de data/tempo</strong>, podemos explorar funções para <strong>acessar e definir componentes individuais</strong>. Podemos explorar <strong>cada componente</strong> dos dados de data/tempo. Para essa tarefa existe uma grande quantidade de funções para <strong>acessar</strong> de partes de datas e horários.</p>
<ul>
<li><code>year()</code>: acessa o ano</li>
<li><code>month()</code>: acessa o mês</li>
<li><code>month()</code>: acessa o dia</li>
<li><code>yday()</code>: acessa o dia do ano</li>
<li><code>mday()</code>: acessa o dia do mês</li>
<li><code>wday()</code>: acessa o dia da semana</li>
<li><code>hour()</code>: acessa a hora</li>
<li><code>minute()</code>: acessa os minutos</li>
<li><code>second()</code>: acessa os segundos</li>
</ul>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="tidyverse.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair</span></span>
<span id="cb131-2"><a href="tidyverse.html#cb131-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 2021</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="tidyverse.html#cb133-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="tidyverse.html#cb135-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Mar
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="tidyverse.html#cb137-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">day</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="tidyverse.html#cb139-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="tidyverse.html#cb141-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Wed
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="tidyverse.html#cb143-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">second</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 51.48763</code></pre>
<p>Além de acessar componentes de datas e horários, podemos usar essas funções para fazer a <strong>inclusão</strong> de informações de datas e tempo.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="tidyverse.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb145-2"><a href="tidyverse.html#cb145-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dmy_hms</span>(<span class="st">&quot;04-03-2021 01:04:56&quot;</span>)</span>
<span id="cb145-3"><a href="tidyverse.html#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="tidyverse.html#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir</span></span>
<span id="cb145-5"><a href="tidyverse.html#cb145-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(data) <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb145-6"><a href="tidyverse.html#cb145-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(data) <span class="ot">&lt;-</span> <span class="dv">01</span></span>
<span id="cb145-7"><a href="tidyverse.html#cb145-7" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hour</span>(data) <span class="ot">&lt;-</span> <span class="dv">13</span></span></code></pre></div>
<p>Mais convenientemente, podemos utilizar a função <code>update()</code> para alterar <strong>vários valores de uma vez</strong>.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="tidyverse.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir varios valores</span></span>
<span id="cb146-2"><a href="tidyverse.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(data, <span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">1</span>, <span class="at">mday =</span> <span class="dv">1</span>, <span class="at">hour =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-01 01:04:56 UTC&quot;</code></pre>
<p>Muitas vezes precisamos fazer <strong>operações com datas</strong>, como a <strong>aritmética com datas</strong>: subtração, adição e divisão. Para tanto, é preciso entender três classes importantes que representam intervalos de tempo.</p>
<ul>
<li><strong>durações</strong>: representam um número exato de segundos</li>
<li><strong>períodos</strong>: representam unidades humanas como semanas e meses</li>
<li><strong>intervalos</strong>: representam um ponto inicial e final</li>
</ul>
<p>Quando fazemos uma <strong>subtração de datas</strong>, criamos um objeto da classe <code>difftime</code>. Essa classe pode ser um pouco complicada de trabalhar, então dentro do <em>lubridate</em>, podemos usar funções que convertem essa classe em <strong>duração</strong>, da classe <code>Duration</code>. As durações sempre registram o intervalo de tempo em segundos, com alguma unidade de tempo maior entre parênteses. Há uma série de funções para tratar dessa classe.</p>
<ul>
<li><code>duration()</code>: cria data em duração</li>
<li><code>as.duration()</code>: converte datas em duração</li>
<li><code>dyears()</code>: duração de anos</li>
<li><code>dmonths()</code>: duração de meses</li>
<li><code>dweeks()</code>: duração de semanas</li>
<li><code>ddays()</code>: duração de dias</li>
<li><code>dhours()</code>: duração de horas</li>
<li><code>dminutes()</code>: duração de minutos</li>
<li><code>dseconds()</code>: duração de segundos</li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="tidyverse.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtracao de datas</span></span>
<span id="cb148-2"><a href="tidyverse.html#cb148-2" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb148-3"><a href="tidyverse.html#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="tidyverse.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao para duracao</span></span>
<span id="cb148-5"><a href="tidyverse.html#cb148-5" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r_dur <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">as.duration</span>(tempo_estudando_r)</span>
<span id="cb148-6"><a href="tidyverse.html#cb148-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-7"><a href="tidyverse.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duracoes</span></span>
<span id="cb148-8"><a href="tidyverse.html#cb148-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">90</span>, <span class="st">&quot;seconds&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="tidyverse.html#cb150-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="fl">1.5</span>, <span class="st">&quot;minutes&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="tidyverse.html#cb152-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">1</span>, <span class="st">&quot;days&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;86400s (~1 days)&quot;</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="tidyverse.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao da duracao</span></span>
<span id="cb154-2"><a href="tidyverse.html#cb154-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dseconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100s (~1.67 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="tidyverse.html#cb156-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dminutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;6000s (~1.67 hours)&quot;</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="tidyverse.html#cb158-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dhours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;360000s (~4.17 days)&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="tidyverse.html#cb160-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8640000s (~14.29 weeks)&quot;</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="tidyverse.html#cb162-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dweeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;60480000s (~1.92 years)&quot;</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="tidyverse.html#cb164-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;3155760000s (~100 years)&quot;</code></pre>
<p>Podemos ainda utilizar as durações para fazer <strong>operações aritméticas com datas</strong> como adição, subtração e multiplicação.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="tidyverse.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando duracoes a datas</span></span>
<span id="cb166-2"><a href="tidyverse.html#cb166-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-11&quot;</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="tidyverse.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo duracoes de datas</span></span>
<span id="cb168-2"><a href="tidyverse.html#cb168-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-03-09 18:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="tidyverse.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># multiplicando duracoes</span></span>
<span id="cb170-2"><a href="tidyverse.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;126230400s (~4 years)&quot;</code></pre>
<p>Além das durações, podemos usar <strong>períodos</strong>, que são <strong>extensões de tempo</strong> não fixados em segundos como as durações, mas flexíveis, com o tempo em dias, semanas, meses ou anos, permitindo uma interpretação mais intuitiva das datas. Novamente, há uma série de funções para realizar essas operações.</p>
<ul>
<li><code>period()</code>: cria data em período</li>
<li><code>as.period()</code>: converte datas em período</li>
<li><code>seconds()</code>: período em segundos</li>
<li><code>minutes()</code>: período em minutos</li>
<li><code>hours()</code>: período em horas</li>
<li><code>days()</code>: período em dias</li>
<li><code>weeks()</code>: período em semanas</li>
<li><code>months()</code>: período em meses</li>
<li><code>years()</code>: período em anos</li>
</ul>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="tidyverse.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando periodos</span></span>
<span id="cb172-2"><a href="tidyverse.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;5M 90S&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="tidyverse.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>, <span class="st">&quot;hour&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;week&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;20d 2H 1M 3S&quot;</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="tidyverse.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao de periodos</span></span>
<span id="cb176-2"><a href="tidyverse.html#cb176-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">seconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100S&quot;</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="tidyverse.html#cb178-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">minutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100M 0S&quot;</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="tidyverse.html#cb180-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="tidyverse.html#cb182-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">days</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="tidyverse.html#cb184-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;700d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="tidyverse.html#cb186-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">years</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100y 0m 0d 0H 0M 0S&quot;</code></pre>
<p>Além disso, podemos fazer <strong>operações com os períodos</strong>, somando e subtraindo.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="tidyverse.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando datas</span></span>
<span id="cb188-2"><a href="tidyverse.html#cb188-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-19&quot;</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="tidyverse.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo datas</span></span>
<span id="cb190-2"><a href="tidyverse.html#cb190-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-12-30&quot;</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="tidyverse.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando datas recorrentes</span></span>
<span id="cb192-2"><a href="tidyverse.html#cb192-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2021-03-10&quot; &quot;2021-03-17&quot; &quot;2021-03-24&quot; &quot;2021-03-31&quot; &quot;2021-04-07&quot;
##  [6] &quot;2021-04-14&quot; &quot;2021-04-21&quot; &quot;2021-04-28&quot; &quot;2021-05-05&quot; &quot;2021-05-12&quot;
## [11] &quot;2021-05-19&quot;</code></pre>
<p>Por fim, veremos os <strong>intervalos</strong>. Intervalos são <strong>períodos de tempo limitados por duas datas</strong>, possuindo uma <strong>duração com um ponto de partida</strong>, que o faz preciso para determinar uma duração. Intervalos são objetos da classe <code>Interval</code>. Da mesma forma que para duração e intervalos, há uma série de funções para realizar essas operações.</p>
<ul>
<li><code>interval()</code>: cria data em intervalo</li>
<li><code>%--%</code>: cria data em intervalo</li>
<li><code>as.interval()</code>: converte datas em intervalo</li>
<li><code>int_start()</code>: acessa ou atribui data inicial de um intervalo</li>
<li><code>int_end()</code>: acessa ou atribui data final de um intervalo</li>
<li><code>int_length()</code>: comprimento de um intervalo em segundos</li>
<li><code>int_flip()</code>: inverte a ordem da data de início e da data de término em um intervalo</li>
<li><code>int_shift()</code>: desloca as datas de início e término de um intervalo</li>
<li><code>int_aligns()</code>: testa se dois intervalos compartilham um ponto final</li>
<li><code>int_standardize()</code>: garante que todos os intervalos sejam positivos</li>
<li><code>int_diff()</code>: retorna os intervalos que ocorrem entre os elementos de data-hora</li>
<li><code>int_overlaps()</code>: testa se dois intervalos se sobrepõem</li>
<li><code>%within%</code>: testa se o primeiro intervalo está contido no segundo</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="tidyverse.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duas datas - inicio de estudos do r e nascimento do meu filho</span></span>
<span id="cb194-2"><a href="tidyverse.html#cb194-2" aria-hidden="true" tabindex="-1"></a>r_inicio <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb194-3"><a href="tidyverse.html#cb194-3" aria-hidden="true" tabindex="-1"></a>filho_nascimento <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;26-09-2013&quot;</span>)</span>
<span id="cb194-4"><a href="tidyverse.html#cb194-4" aria-hidden="true" tabindex="-1"></a>r_hoje <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb194-5"><a href="tidyverse.html#cb194-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-6"><a href="tidyverse.html#cb194-6" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval</span></span>
<span id="cb194-7"><a href="tidyverse.html#cb194-7" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">interval</span>(r_inicio, r_hoje)</span>
<span id="cb194-8"><a href="tidyverse.html#cb194-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-9"><a href="tidyverse.html#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval %--%</span></span>
<span id="cb194-10"><a href="tidyverse.html#cb194-10" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="ot">&lt;-</span> filho_nascimento <span class="sc">%--%</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb194-11"><a href="tidyverse.html#cb194-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-12"><a href="tidyverse.html#cb194-12" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes com intervalos</span></span>
<span id="cb194-13"><a href="tidyverse.html#cb194-13" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_start</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2011-11-30 UTC&quot;</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="tidyverse.html#cb196-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_end</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 UTC&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="tidyverse.html#cb198-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_length</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 292723200</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="tidyverse.html#cb200-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_flip</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 2021-03-10 UTC--2011-11-30 UTC</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="tidyverse.html#cb202-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_shift</span>(r_intervalo, <span class="fu">duration</span>(<span class="at">days =</span> <span class="dv">30</span>))</span></code></pre></div>
<pre><code>## [1] 2011-12-30 UTC--2021-04-09 UTC</code></pre>
<p>Uma operação de destaque é <strong>verificar a sobreposição</strong> entre dois intervalos.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="tidyverse.html#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar sobreposicao - int_overlaps</span></span>
<span id="cb204-2"><a href="tidyverse.html#cb204-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_overlaps</span>(r_intervalo, filho_intervalo)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="tidyverse.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar se intervalor contido</span></span>
<span id="cb206-2"><a href="tidyverse.html#cb206-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%within%</span> filho_intervalo</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="tidyverse.html#cb208-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">%within%</span> r_intervalo</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Podemos ainda <strong>calcular quantos períodos existem dentro de um intervalo</strong>, utilizando as operações de <code>/</code> e <code>%/%</code>.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="tidyverse.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - anos</span></span>
<span id="cb210-2"><a href="tidyverse.html#cb210-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9.273973</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="tidyverse.html#cb212-1" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%/%</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="tidyverse.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - dias e semandas</span></span>
<span id="cb214-2"><a href="tidyverse.html#cb214-2" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">days</span>()</span></code></pre></div>
<pre><code>## [1] 2722</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="tidyverse.html#cb216-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>()</span></code></pre></div>
<pre><code>## [1] 388.8571</code></pre>
<p>Ainda podemos fazer <strong>transformações dos dados para períodos</strong> e ter todas as unidades de data e tempo que o intervalo compreende.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="tidyverse.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tempo total estudando r</span></span>
<span id="cb218-2"><a href="tidyverse.html#cb218-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;9y 3m 10d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="tidyverse.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># idade do meu filho</span></span>
<span id="cb220-2"><a href="tidyverse.html#cb220-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(filho_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;7y 5m 12d 0H 0M 0S&quot;</code></pre>
<p>Por fim, <strong>fusos horários</strong> tendem a ser um fator complicador quando precisamos analisar informações instantâneas de tempo (horário) de outras partes do planeta, ou mesmo fazer conversões dos horário. No <em>lubridate</em> há funções para ajudar nesse assunto. Para isso, podemos utilizar a função <code>lubridate::with_tz()</code>, e no argumento <strong>tzone</strong> informar o fuso horário para a transformação do horário.</p>
<p>Podemos descobrir o <strong>fuso horário que o R está considerando</strong> com a função <code>Sys.timezone()</code>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="tidyverse.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fuso horario no r</span></span>
<span id="cb222-2"><a href="tidyverse.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code></pre></div>
<pre><code>## [1] &quot;America/Sao_Paulo&quot;</code></pre>
<p>No R há uma <strong>listagem dos nomes dos fusos horários</strong> que podemos utilizar no argumento <strong>tzone</strong> para diferentes fusos horários.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="tidyverse.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar os fuso horarios</span></span>
<span id="cb224-2"><a href="tidyverse.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] 607</code></pre>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="tidyverse.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot;
## [4] &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;      &quot;Africa/Asmera&quot;</code></pre>
<p>Podemos nos perguntar que são em outra parte do globo, ou fazer as conversões facilmente no <em>lubridate</em>.</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="tidyverse.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># que horas sao agoram em...</span></span>
<span id="cb228-2"><a href="tidyverse.html#cb228-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 11:49:51 -03&quot;</code></pre>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="tidyverse.html#cb230-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 14:49:51 GMT&quot;</code></pre>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="tidyverse.html#cb232-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;Europe/Berlin&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 15:49:51 CET&quot;</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="tidyverse.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># altera o fuso sem mudar a hora</span></span>
<span id="cb234-2"><a href="tidyverse.html#cb234-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">force_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10 11:49:51 GMT&quot;</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/dates-and-times.html">16 Dates and times</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="purrr" class="section level2" number="5.12">
<h2><span class="header-section-number">5.12</span> purrr</h2>
<p>Pacote <em>purrr</em> implementa a <strong>Programação Funcional</strong> no R, fornecendo um conjunto completo e consistente de ferramentas para trabalhar com funções e vetores. A programação funcional é um assunto bastante extenso, sendo mais conhecido no R pela família de funções <code>purrr::map()</code>, que permite substituir muitos <strong>loops for</strong> por um código mais sucinto e fácil de ler. Não iremos aqui focar nas outras funções.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://purrr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Um <strong>loop for</strong> pode ser entendido como uma <strong>iteração</strong>: um bloco de códigos é repetido mudando um contador de uma lista de possibilidades. Vamos exemplificar com uma iteração bem simples, onde iremos imprimir no console os valores de 1 a 10, utilizando a função <code>for()</code>, um contador <code>i</code> em um vetor de dez números <code>1:10</code> que será iterado, no bloco de códigos definido entre <code>{}</code>, i.e, usando a função <code>print()</code> para imprimir os valores.</p>
<p>A ideia é <strong>bastante simples</strong>: a função <code>for()</code> vai atribuir o primeiro valor da lista ao contador <code>i</code>, esse contador será utilizado em todo o bloco de códigos. Quando o bloco terminar, o segundo valor é atribuído ao contador <code>i</code> e entra no bloco de códigos, repetindo esse processo até que todos os elementos da lista seja atribuída ao contador.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="tidyverse.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for</span></span>
<span id="cb236-2"><a href="tidyverse.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb236-3"><a href="tidyverse.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb236-4"><a href="tidyverse.html#cb236-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Com essa ideia em mente, a <strong>programação funcional</strong> utilizando a função <code>purrr::map()</code>, ficaria dessa forma.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="tidyverse.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for com map</span></span>
<span id="cb238-2"><a href="tidyverse.html#cb238-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.f =</span> print)</span></code></pre></div>
<p>Nessa estrutura, temos:</p>
<p><code>map(.x, .f)</code></p>
<ul>
<li><strong>.x</strong>: um vetor, lista ou data frame<br />
</li>
<li><strong>.f</strong>: uma função</li>
</ul>
<p>Num outro exemplo, iremos aplicar a função <code>sum()</code> para <strong>somar os valores de vários elementos de uma lista</strong>.</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="tidyverse.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># map</span></span>
<span id="cb239-2"><a href="tidyverse.html#cb239-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb239-3"><a href="tidyverse.html#cb239-3" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(x, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 15
## 
## [[2]]
## [1] 16
## 
## [[3]]
## [1] 3
## 
## [[4]]
## [1] 10</code></pre>
<p>Há <strong>diferente tipos de retornos</strong> da família <code>purrr::map()</code>.</p>
<ul>
<li><code>map()</code>: retorna uma lista</li>
<li><code>map_chr()</code>: retorna um vetor de strings</li>
<li><code>map_dbl()</code>: retorna um vetor numérico (double)</li>
<li><code>map_int()</code>: retorna um vetor numérico (integer)</li>
<li><code>map_lgl()</code>: retorna um vetor lógico</li>
<li><code>map_dfr()</code>: retorna um data frame (por linhas)</li>
<li><code>map_dfc()</code>: retorna um data frame (por colunas)</li>
</ul>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="tidyverse.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variacoes da funcao map</span></span>
<span id="cb241-2"><a href="tidyverse.html#cb241-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dbl</span>(x, sum)</span></code></pre></div>
<pre><code>## [1] 15 16  3 10</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="tidyverse.html#cb243-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_chr</span>(x, paste, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1 2 3 4 5&quot; &quot;4 5 7&quot;     &quot;1 1 1&quot;     &quot;2 2 2 2 2&quot;</code></pre>
<p>Essas <strong>funcionalidades</strong> já eram conhecidas no Base R pelas funções da <strong>família <code>apply</code></strong>: <code>apply()</code>, <code>lapply()</code>, <code>sapply()</code>, <code>vapply()</code>, <code>mapply()</code>, <code>rapply()</code> e <code>tapply()</code>. Essas funções formam a base de combinações mais complexas e ajudam a <strong>realizar operações com poucas linhas de código</strong>, para diferentes retornos.</p>
<p>Temos ainda <strong>duas variantes</strong> da função <code>map()</code>: <code>purrr::map2()</code> e <code>purrr::pmap()</code>, para duas ou mais listas, respectivamente. Como vimos para a primeira função, existem duas variações do sufixo para <strong>modificar o retorno</strong> da função.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="tidyverse.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listas</span></span>
<span id="cb245-2"><a href="tidyverse.html#cb245-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb245-3"><a href="tidyverse.html#cb245-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb245-4"><a href="tidyverse.html#cb245-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb245-5"><a href="tidyverse.html#cb245-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-6"><a href="tidyverse.html#cb245-6" aria-hidden="true" tabindex="-1"></a><span class="co"># map2</span></span>
<span id="cb245-7"><a href="tidyverse.html#cb245-7" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(x, y, prod)</span></code></pre></div>
<pre><code>## [1]  9 25  0  1</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="tidyverse.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pmap</span></span>
<span id="cb247-2"><a href="tidyverse.html#cb247-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pmap_dbl</span>(<span class="fu">list</span>(x, y, z), prod)</span></code></pre></div>
<pre><code>## [1]  27 125   0   1</code></pre>
<p>Essa funções podem ser usadas em conjunto para <strong>implementar rotinas de manipulação e análise de dados</strong> com poucas linhas de código, mas que não exploraremos em sua complitude aqui. Listamos dois exemplos simples.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="tidyverse.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo dos dados</span></span>
<span id="cb249-2"><a href="tidyverse.html#cb249-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb249-3"><a href="tidyverse.html#cb249-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb249-4"><a href="tidyverse.html#cb249-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb249-5"><a href="tidyverse.html#cb249-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_dbl</span>(mean)</span></code></pre></div>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="tidyverse.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># analise dos dados</span></span>
<span id="cb250-2"><a href="tidyverse.html#cb250-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb250-3"><a href="tidyverse.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_split</span>(island, species) <span class="sc">%&gt;%</span> </span>
<span id="cb250-4"><a href="tidyverse.html#cb250-4" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(bill_depth_mm <span class="sc">~</span> bill_length_mm, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span> </span>
<span id="cb250-5"><a href="tidyverse.html#cb250-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb250-6"><a href="tidyverse.html#cb250-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="st">&quot;r.squared&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/iteration.html">21 Iteration</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="exercícios" class="section level2" number="5.13">
<h2><span class="header-section-number">5.13</span> Exercícios</h2>
<ol style="list-style-type: decimal">
<li>Reescreva as operações abaixo utilizando pipes <code>%&gt;%</code>.</li>
</ol>
<ul>
<li><code>log10(cumsum(1:100))</code></li>
<li><code>sum(sqrt(abs(rnorm(100))))</code></li>
<li><code>sum(sort(sample(1:10, 10000, rep = TRUE)))</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>Use a função <code>download.file()</code> e <code>unzip()</code> para baixar e extrair o arquivo do data paper de médios e grandes mamíferos: <a href="https://doi.org/10.1002/ecy.2785">ATLANTIC MAMMALS</a>. Em seguinda, importe para o R, usando a função <code>readxl::read_excel()</code>.</p></li>
<li><p>Use a função <code>tibble::glimpse()</code> para ter uma noção geral dos dados importados no item anterior.</p></li>
<li><p>Compare os dados de penguins (<em>palmerpenguins::penguins_raw</em> e <em>palmerpenguins::penguins</em>). Monte uma série de funções dos pacotes <em>tidyr</em> e <em>dplyr</em> para fazer limpar os dados e fazer com que o primeiro dados seja igual ao segundo.</p></li>
<li><p>Usando os dados de penguins (<em>palmerpenguins::penguins</em>), calcule a correlação de Pearson entre comprimento e profundidade do bico para cada espécie e para todas as espécies. Compare os índices de correlação para exemplificar o Paradoxo de Simpsom.</p></li>
<li><p>Oficialmente, a pandemia de COVID-19 começou com o primeiro caso no dia 26 de fevereiro de 2020. Calcule quantos anos, meses, dias, semanas, horas, minutos e segundos se passou desde então.</p></li>
</ol>
</div>
<div id="para-se-aprofundar" class="section level2" number="5.14">
<h2><span class="header-section-number">5.14</span> Para se aprofundar</h2>
<p>Listamos a seguir livros que recomendamos para seguir com sua aprendizagem em R e tidyverse.</p>
<p><strong>Português</strong></p>
<p>Curso-R. 2021. Ciência de Dados em R. [<a href="https://livro.curso-r.com/" class="uri">https://livro.curso-r.com/</a>]</p>
<p>Faria PD, Parga JPFA. 2020. Introdução à Linguagem R: seus fundamentos e sua prática. [<a href="https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica" class="uri">https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica</a>]</p>
<p>Oliveira PF, Guerra S, Mcdonnell, R. 2018. Ciência de dados com R – Introdução. IBPAD. [<a href="https://cdr.ibpad.com.br/" class="uri">https://cdr.ibpad.com.br/</a>]</p>
<p><strong>Inglês</strong></p>
<p>Grolemund G. 2017. The Essentials of Data Science: Knowledge Discovery Using R. Chapman and Hall/CRC.</p>
<p>Irizarry RA. 2019. Introduction to Data Science: Data Analysis and Prediction Algorithms with R. Chapman and Hall/CRC. [<a href="https://rafalab.github.io/dsbook/" class="uri">https://rafalab.github.io/dsbook/</a>]</p>
<p>Ismay C., Kim AY. 2019. Statistical Inference via Data Science: A ModernDive into R and the Tidyverse. Chapman and Hall/CRC. [<a href="https://moderndive.com/" class="uri">https://moderndive.com/</a>]</p>
<p>Peng DP. 2020. R Programming for Data Science. [<a href="https://bookdown.org/rdpeng/rprogdatascience/" class="uri">https://bookdown.org/rdpeng/rprogdatascience/</a>]</p>
<p>Wickham H, Grolemund G. 2017. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. O’Reilly Media. [<a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>]</p>
<p>Wright C, Ellis S, Hicks S &amp; Peng R D. 2021. Tidyverse Skills for Data Science in R. [<a href="https://jhudatascience.org/tidyversecourse/" class="uri">https://jhudatascience.org/tidyversecourse/</a>]</p>
<p>Zumel N, Mount J. 2014. Practical Data Science with R Paperback. Manning.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gráficos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/paternogbc/livro_r_ecologia/edit/master/04_r_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["livro_r_ecologia.pdf", "livro_r_ecologia.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
