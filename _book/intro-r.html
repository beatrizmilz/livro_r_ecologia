<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Introdução à linguagem R | Introdução ao R com aplicações em biodiversidade e conservação</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Introdução à linguagem R | Introdução ao R com aplicações em biodiversidade e conservação" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Introdução à linguagem R | Introdução ao R com aplicações em biodiversidade e conservação" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2021-03-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"/>
<link rel="next" href="gráficos.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdução ao R com aplicações em biodiversidade e conservação</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Pré-requisitos</a></li>
<li class="chapter" data-level="2" data-path="pré-requisitos-1.html"><a href="pré-requisitos-1.html"><i class="fa fa-check"></i><b>2</b> Pré-requisitos</a></li>
<li class="chapter" data-level="3" data-path="introdução.html"><a href="introdução.html"><i class="fa fa-check"></i><b>3</b> Introdução</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introdução.html"><a href="introdução.html#histórico-deste-livro"><i class="fa fa-check"></i><b>3.1</b> Histórico deste livro</a></li>
<li class="chapter" data-level="3.2" data-path="introdução.html"><a href="introdução.html#objetivo-deste-livro"><i class="fa fa-check"></i><b>3.2</b> Objetivo deste livro</a></li>
<li class="chapter" data-level="3.3" data-path="introdução.html"><a href="introdução.html#o-que-você-não-encontrará-neste-livro"><i class="fa fa-check"></i><b>3.3</b> O que você não encontrará neste livro</a></li>
<li class="chapter" data-level="3.4" data-path="introdução.html"><a href="introdução.html#por-que-usar-o-r"><i class="fa fa-check"></i><b>3.4</b> Por que usar o R?</a></li>
<li class="chapter" data-level="3.5" data-path="introdução.html"><a href="introdução.html#como-usar-este-livro"><i class="fa fa-check"></i><b>3.5</b> Como usar este livro</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><i class="fa fa-check"></i><b>4</b> Voltando ao básico: como dominar a arte de fazer perguntas cientificamente relevantes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#introdução-1"><i class="fa fa-check"></i><b>4.1</b> Introdução</a></li>
<li class="chapter" data-level="4.2" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#perguntas-devem-preceder-as-análises-estatísticas"><i class="fa fa-check"></i><b>4.2</b> Perguntas devem preceder as análises estatísticas</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#um-bestiário1-para-o-teste-de-hipóteses-você-está-fazendo-a-pergunta-certa"><i class="fa fa-check"></i><b>4.2.1</b> Um bestiário[^1] para o teste de hipóteses (Você está fazendo a pergunta certa?)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#fluxograma-conectando-variáveis-para-melhorar-o-desenho-experimental-e-as-análises-estatísticas"><i class="fa fa-check"></i><b>4.3</b> Fluxograma: Conectando Variáveis para Melhorar o desenho experimental e as análises estatísticas</a></li>
<li class="chapter" data-level="4.4" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#questões-fundamentais-em-etnobiologia-ecologia-e-conservação"><i class="fa fa-check"></i><b>4.4</b> Questões fundamentais em etnobiologia, ecologia e conservação</a></li>
<li class="chapter" data-level="4.5" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#considerações-finais"><i class="fa fa-check"></i><b>4.5</b> Considerações Finais</a></li>
<li class="chapter" data-level="4.6" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#referências"><i class="fa fa-check"></i><b>4.6</b> Referências</a></li>
<li class="chapter" data-level="4.7" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#principais-erros-de-iniciantes-e-a-melhor-forma-de-pedir-ajuda"><i class="fa fa-check"></i><b>4.7</b> Principais erros de iniciantes e a melhor forma de pedir ajuda</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#procurando-e-entendendo-erros"><i class="fa fa-check"></i><b>4.7.1</b> Procurando e entendendo erros</a></li>
<li class="chapter" data-level="4.7.2" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#tentando-resolver-seus-próprios-erros"><i class="fa fa-check"></i><b>4.7.2</b> Tentando resolver seus próprios erros</a></li>
<li class="chapter" data-level="4.7.3" data-path="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#idealmente-como-pedir-ajuda"><i class="fa fa-check"></i><b>4.7.3</b> Idealmente, como pedir ajuda?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="intro-r.html"><a href="intro-r.html"><i class="fa fa-check"></i><b>5</b> Introdução à linguagem R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="intro-r.html"><a href="intro-r.html#introdução-2"><i class="fa fa-check"></i><b>5.1</b> Introdução</a></li>
<li class="chapter" data-level="5.2" data-path="intro-r.html"><a href="intro-r.html#r-e-rstudio"><i class="fa fa-check"></i><b>5.2</b> R e RStudio</a></li>
<li class="chapter" data-level="5.3" data-path="intro-r.html"><a href="intro-r.html#funcionamento-da-linguagem-r"><i class="fa fa-check"></i><b>5.3</b> Funcionamento da linguagem R</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="intro-r.html"><a href="intro-r.html#console"><i class="fa fa-check"></i><b>5.3.1</b> Console</a></li>
<li class="chapter" data-level="5.3.2" data-path="intro-r.html"><a href="intro-r.html#scripts"><i class="fa fa-check"></i><b>5.3.2</b> Scripts</a></li>
<li class="chapter" data-level="5.3.3" data-path="intro-r.html"><a href="intro-r.html#operadores"><i class="fa fa-check"></i><b>5.3.3</b> Operadores</a></li>
<li class="chapter" data-level="5.3.4" data-path="intro-r.html"><a href="intro-r.html#objetos"><i class="fa fa-check"></i><b>5.3.4</b> Objetos</a></li>
<li class="chapter" data-level="5.3.5" data-path="intro-r.html"><a href="intro-r.html#funções"><i class="fa fa-check"></i><b>5.3.5</b> Funções</a></li>
<li class="chapter" data-level="5.3.6" data-path="intro-r.html"><a href="intro-r.html#pacotes"><i class="fa fa-check"></i><b>5.3.6</b> Pacotes</a></li>
<li class="chapter" data-level="5.3.7" data-path="intro-r.html"><a href="intro-r.html#ajuda-help"><i class="fa fa-check"></i><b>5.3.7</b> Ajuda (<em>Help</em>)</a></li>
<li class="chapter" data-level="5.3.8" data-path="intro-r.html"><a href="intro-r.html#ambiente-environment"><i class="fa fa-check"></i><b>5.3.8</b> Ambiente (<em>Environment</em>)</a></li>
<li class="chapter" data-level="5.3.9" data-path="intro-r.html"><a href="intro-r.html#citações"><i class="fa fa-check"></i><b>5.3.9</b> Citações</a></li>
<li class="chapter" data-level="5.3.10" data-path="intro-r.html"><a href="intro-r.html#principais-erros-de-iniciantes"><i class="fa fa-check"></i><b>5.3.10</b> Principais erros de iniciantes</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="intro-r.html"><a href="intro-r.html#estrutura-e-manipulação-de-objetos"><i class="fa fa-check"></i><b>5.4</b> Estrutura e manipulação de objetos</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="intro-r.html"><a href="intro-r.html#atributo-dos-objetos"><i class="fa fa-check"></i><b>5.4.1</b> Atributo dos objetos</a></li>
<li class="chapter" data-level="5.4.2" data-path="intro-r.html"><a href="intro-r.html#manipulação-de-objetos-unidimensionais"><i class="fa fa-check"></i><b>5.4.2</b> Manipulação de objetos unidimensionais</a></li>
<li class="chapter" data-level="5.4.3" data-path="intro-r.html"><a href="intro-r.html#manipulação-de-objetos-multidimensionais"><i class="fa fa-check"></i><b>5.4.3</b> Manipulação de objetos multidimensionais</a></li>
<li class="chapter" data-level="5.4.4" data-path="intro-r.html"><a href="intro-r.html#valores-faltantes-e-especiais"><i class="fa fa-check"></i><b>5.4.4</b> Valores faltantes e especiais</a></li>
<li class="chapter" data-level="5.4.5" data-path="intro-r.html"><a href="intro-r.html#diretório-de-trabalho"><i class="fa fa-check"></i><b>5.4.5</b> Diretório de trabalho</a></li>
<li class="chapter" data-level="5.4.6" data-path="intro-r.html"><a href="intro-r.html#importar-dados"><i class="fa fa-check"></i><b>5.4.6</b> Importar dados</a></li>
<li class="chapter" data-level="5.4.7" data-path="intro-r.html"><a href="intro-r.html#conferência-de-dados-importados"><i class="fa fa-check"></i><b>5.4.7</b> Conferência de dados importados</a></li>
<li class="chapter" data-level="5.4.8" data-path="intro-r.html"><a href="intro-r.html#exportar-dados"><i class="fa fa-check"></i><b>5.4.8</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="intro-r.html"><a href="intro-r.html#tidyverse"><i class="fa fa-check"></i><b>5.5</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="intro-r.html"><a href="intro-r.html#contextualização"><i class="fa fa-check"></i><b>5.5.1</b> Contextualização</a></li>
<li class="chapter" data-level="5.5.2" data-path="intro-r.html"><a href="intro-r.html#tidyverse-1"><i class="fa fa-check"></i><b>5.5.2</b> <em>tidyverse</em></a></li>
<li class="chapter" data-level="5.5.3" data-path="intro-r.html"><a href="intro-r.html#here"><i class="fa fa-check"></i><b>5.5.3</b> here</a></li>
<li class="chapter" data-level="5.5.4" data-path="intro-r.html"><a href="intro-r.html#readr-readxl-e-writexl"><i class="fa fa-check"></i><b>5.5.4</b> readr, readxl e writexl</a></li>
<li class="chapter" data-level="5.5.5" data-path="intro-r.html"><a href="intro-r.html#tibble"><i class="fa fa-check"></i><b>5.5.5</b> tibble</a></li>
<li class="chapter" data-level="5.5.6" data-path="intro-r.html"><a href="intro-r.html#magrittr-pipe--"><i class="fa fa-check"></i><b>5.5.6</b> magrittr (pipe - %&gt;%)</a></li>
<li class="chapter" data-level="5.5.7" data-path="intro-r.html"><a href="intro-r.html#tidyr"><i class="fa fa-check"></i><b>5.5.7</b> tidyr</a></li>
<li class="chapter" data-level="5.5.8" data-path="intro-r.html"><a href="intro-r.html#dplyr"><i class="fa fa-check"></i><b>5.5.8</b> dplyr</a></li>
<li class="chapter" data-level="5.5.9" data-path="intro-r.html"><a href="intro-r.html#stringr"><i class="fa fa-check"></i><b>5.5.9</b> stringr</a></li>
<li class="chapter" data-level="5.5.10" data-path="intro-r.html"><a href="intro-r.html#forcats"><i class="fa fa-check"></i><b>5.5.10</b> forcats</a></li>
<li class="chapter" data-level="5.5.11" data-path="intro-r.html"><a href="intro-r.html#lubridate"><i class="fa fa-check"></i><b>5.5.11</b> lubridate</a></li>
<li class="chapter" data-level="5.5.12" data-path="intro-r.html"><a href="intro-r.html#purrr"><i class="fa fa-check"></i><b>5.5.12</b> purrr</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="intro-r.html"><a href="intro-r.html#exercícios"><i class="fa fa-check"></i><b>5.6</b> Exercícios</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="intro-r.html"><a href="intro-r.html#base-r"><i class="fa fa-check"></i><b>5.6.1</b> Base R</a></li>
<li class="chapter" data-level="5.6.2" data-path="intro-r.html"><a href="intro-r.html#tidyverse-2"><i class="fa fa-check"></i><b>5.6.2</b> <em>tidyverse</em></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="intro-r.html"><a href="intro-r.html#para-se-aprofundar"><i class="fa fa-check"></i><b>5.7</b> Para se aprofundar</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="intro-r.html"><a href="intro-r.html#livros"><i class="fa fa-check"></i><b>5.7.1</b> Livros</a></li>
<li class="chapter" data-level="5.7.2" data-path="intro-r.html"><a href="intro-r.html#links"><i class="fa fa-check"></i><b>5.7.2</b> Links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gráficos.html"><a href="gráficos.html"><i class="fa fa-check"></i><b>6</b> Gráficos</a></li>
<li class="chapter" data-level="7" data-path="estatística-básica.html"><a href="estatística-básica.html"><i class="fa fa-check"></i><b>7</b> Estatística básica</a>
<ul>
<li class="chapter" data-level="7.1" data-path="estatística-básica.html"><a href="estatística-básica.html#teste-t-de-student-para-duas-amostras-independentes"><i class="fa fa-check"></i><b>7.1</b> Teste T (de Student) para duas amostras independentes</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise"><i class="fa fa-check"></i><b>7.1.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.1.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise"><i class="fa fa-check"></i><b>7.1.2</b> Análise</a></li>
<li class="chapter" data-level="7.1.3" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-1"><i class="fa fa-check"></i><b>7.1.3</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="estatística-básica.html"><a href="estatística-básica.html#teste-t-para-amostras-pareadas"><i class="fa fa-check"></i><b>7.2</b> Teste T para amostras pareadas</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-1"><i class="fa fa-check"></i><b>7.2.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.2.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-2"><i class="fa fa-check"></i><b>7.2.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="estatística-básica.html"><a href="estatística-básica.html#correlação-de-pearson"><i class="fa fa-check"></i><b>7.3</b> Correlação de Pearson</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-2"><i class="fa fa-check"></i><b>7.3.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.3.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-3"><i class="fa fa-check"></i><b>7.3.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="estatística-básica.html"><a href="estatística-básica.html#regressão-simples"><i class="fa fa-check"></i><b>7.4</b> Regressão Simples</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-3"><i class="fa fa-check"></i><b>7.4.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.4.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-4"><i class="fa fa-check"></i><b>7.4.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="estatística-básica.html"><a href="estatística-básica.html#regressão-múltipla"><i class="fa fa-check"></i><b>7.5</b> Regressão Múltipla</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-4"><i class="fa fa-check"></i><b>7.5.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="7.5.2" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-5"><i class="fa fa-check"></i><b>7.5.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="estatística-básica.html"><a href="estatística-básica.html#análises-de-variância-anova"><i class="fa fa-check"></i><b>7.6</b> Análises de Variância (ANOVA)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="estatística-básica.html"><a href="estatística-básica.html#backgorund-da-análise-5"><i class="fa fa-check"></i><b>7.6.1</b> Backgorund da análise</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="estatística-básica.html"><a href="estatística-básica.html#anova-de-um-fator"><i class="fa fa-check"></i><b>7.7</b> ANOVA de um fator</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-6"><i class="fa fa-check"></i><b>7.7.1</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="estatística-básica.html"><a href="estatística-básica.html#anova-de-dois-fatores-ou-anova-fatorial"><i class="fa fa-check"></i><b>7.8</b> ANOVA de dois fatores ou Anova fatorial</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-7"><i class="fa fa-check"></i><b>7.8.1</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="estatística-básica.html"><a href="estatística-básica.html#anova-em-blocos-aleatorizados"><i class="fa fa-check"></i><b>7.9</b> ANOVA em blocos aleatorizados</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-8"><i class="fa fa-check"></i><b>7.9.1</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-de-covariância-ancova"><i class="fa fa-check"></i><b>7.10</b> Análise de covariância (ANCOVA)</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="estatística-básica.html"><a href="estatística-básica.html#análise-9"><i class="fa fa-check"></i><b>7.10.1</b> Análise</a></li>
<li class="chapter" data-level="7.10.2" data-path="estatística-básica.html"><a href="estatística-básica.html#para-se-aprofundar-1"><i class="fa fa-check"></i><b>7.10.2</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="análises-univariadas-glm.html"><a href="análises-univariadas-glm.html"><i class="fa fa-check"></i><b>8</b> Análises univariadas - GLM</a></li>
<li class="chapter" data-level="9" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html"><i class="fa fa-check"></i><b>9</b> Introdução à Análises Multidimensionais</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#backgorund-da-análise-6"><i class="fa fa-check"></i><b>9.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="9.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-1"><i class="fa fa-check"></i><b>9.2</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#explicação-da-análise"><i class="fa fa-check"></i><b>9.2.1</b> Explicação da análise</a></li>
<li class="chapter" data-level="9.2.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#análise-10"><i class="fa fa-check"></i><b>9.2.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-2"><i class="fa fa-check"></i><b>9.3</b> Exemplo 2:</a></li>
<li class="chapter" data-level="9.4" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#backgorund-da-análise-7"><i class="fa fa-check"></i><b>9.4</b> Backgorund da análise</a></li>
<li class="chapter" data-level="9.5" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-1-1"><i class="fa fa-check"></i><b>9.5</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#explicação-da-análise-1"><i class="fa fa-check"></i><b>9.5.1</b> Explicação da análise</a></li>
<li class="chapter" data-level="9.5.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#análise-11"><i class="fa fa-check"></i><b>9.5.2</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#backgorund-da-análise-8"><i class="fa fa-check"></i><b>9.6</b> Backgorund da análise</a></li>
<li class="chapter" data-level="9.7" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#exemplo-1-2"><i class="fa fa-check"></i><b>9.7</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#explicação-da-análise-2"><i class="fa fa-check"></i><b>9.7.1</b> Explicação da análise</a></li>
<li class="chapter" data-level="9.7.2" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#análise-12"><i class="fa fa-check"></i><b>9.7.2</b> Análise</a></li>
<li class="chapter" data-level="9.7.3" data-path="introdução-à-análises-multidimensionais.html"><a href="introdução-à-análises-multidimensionais.html#para-se-aprofundar-2"><i class="fa fa-check"></i><b>9.7.3</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="rarefação.html"><a href="rarefação.html"><i class="fa fa-check"></i><b>10</b> Rarefação</a>
<ul>
<li class="chapter" data-level="10.1" data-path="rarefação.html"><a href="rarefação.html#background-da-análise"><i class="fa fa-check"></i><b>10.1</b> Background da análise</a></li>
<li class="chapter" data-level="10.2" data-path="rarefação.html"><a href="rarefação.html#exemplo-prático-1---morcegos"><i class="fa fa-check"></i><b>10.2</b> Exemplo prático 1 - Morcegos</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="rarefação.html"><a href="rarefação.html#explicação"><i class="fa fa-check"></i><b>10.2.1</b> Explicação</a></li>
<li class="chapter" data-level="10.2.2" data-path="rarefação.html"><a href="rarefação.html#análise-13"><i class="fa fa-check"></i><b>10.2.2</b> Análise</a></li>
<li class="chapter" data-level="10.2.3" data-path="rarefação.html"><a href="rarefação.html#interpretação-dos-resultados-1"><i class="fa fa-check"></i><b>10.2.3</b> Interpretação dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="rarefação.html"><a href="rarefação.html#exemplo-prático-2---rarefação"><i class="fa fa-check"></i><b>10.3</b> Exemplo prático 2 - Rarefação</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="rarefação.html"><a href="rarefação.html#explicação-1"><i class="fa fa-check"></i><b>10.3.1</b> Explicação</a></li>
<li class="chapter" data-level="10.3.2" data-path="rarefação.html"><a href="rarefação.html#análise-14"><i class="fa fa-check"></i><b>10.3.2</b> Análise</a></li>
<li class="chapter" data-level="10.3.3" data-path="rarefação.html"><a href="rarefação.html#interpretação-dos-resultados-2"><i class="fa fa-check"></i><b>10.3.3</b> Interpretação dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="rarefação.html"><a href="rarefação.html#para-se-aprofundar-3"><i class="fa fa-check"></i><b>10.4</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html"><i class="fa fa-check"></i><b>11</b> Estimadores de Riqueza</a>
<ul>
<li class="chapter" data-level="11.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#backgorund-da-análise-9"><i class="fa fa-check"></i><b>11.1</b> Backgorund da análise</a></li>
<li class="chapter" data-level="11.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-abundância-das-espécies"><i class="fa fa-check"></i><b>11.2</b> Estimadores baseados na abundância das espécies</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-1---chao-1984-1987"><i class="fa fa-check"></i><b>11.2.1</b> CHAO 1 - (Chao 1984, 1987):</a></li>
<li class="chapter" data-level="11.2.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-15"><i class="fa fa-check"></i><b>11.2.2</b> Análise</a></li>
<li class="chapter" data-level="11.2.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#ace---abundance-based-coverage-estimador-chao-lee-1992-chao-et-al.-2000"><i class="fa fa-check"></i><b>11.2.3</b> ACE - <em>Abundance-based Coverage Estimador</em> (Chao &amp; Lee 1992, Chao et al. 2000):</a></li>
<li class="chapter" data-level="11.2.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-16"><i class="fa fa-check"></i><b>11.2.4</b> Análise</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-incidência-das-espécies"><i class="fa fa-check"></i><b>11.3</b> Estimadores baseados na incidência das espécies</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-2---chao-1987"><i class="fa fa-check"></i><b>11.3.1</b> CHAO 2 - (Chao 1987):</a></li>
<li class="chapter" data-level="11.3.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-17"><i class="fa fa-check"></i><b>11.3.2</b> Análise</a></li>
<li class="chapter" data-level="11.3.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-1-burnham-overton-1978-1979"><i class="fa fa-check"></i><b>11.3.3</b> JACKKNIFE 1 (Burnham &amp; Overton 1978, 1979):</a></li>
<li class="chapter" data-level="11.3.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-18"><i class="fa fa-check"></i><b>11.3.4</b> Análise</a></li>
<li class="chapter" data-level="11.3.5" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-2-burnham-overton-1978-1979-palmer-1991"><i class="fa fa-check"></i><b>11.3.5</b> JACKKNIFE 2 (Burnham &amp; Overton 1978, 1979, Palmer 1991):</a></li>
<li class="chapter" data-level="11.3.6" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-19"><i class="fa fa-check"></i><b>11.3.6</b> Análise</a></li>
<li class="chapter" data-level="11.3.7" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#bootstrap-smith-van-belle-1984"><i class="fa fa-check"></i><b>11.3.7</b> BOOTSTRAP (Smith &amp; van Belle 1984):</a></li>
<li class="chapter" data-level="11.3.8" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-20"><i class="fa fa-check"></i><b>11.3.8</b> Análise</a></li>
<li class="chapter" data-level="11.3.9" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#interpolação-e-extrapolação-baseadas-em-rarefação-usando-amostragens-de-incidência-ou-abundância-chao-jost-2012-colwell-et-al.-2012"><i class="fa fa-check"></i><b>11.3.9</b> Interpolação e Extrapolação baseadas em rarefação usando amostragens de incidência ou abundância (Chao &amp; Jost 2012, Colwell et al. 2012):</a></li>
<li class="chapter" data-level="11.3.10" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#análise-21"><i class="fa fa-check"></i><b>11.3.10</b> Análise</a></li>
<li class="chapter" data-level="11.3.11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#para-se-aprofundar-4"><i class="fa fa-check"></i><b>11.3.11</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html"><i class="fa fa-check"></i><b>12</b> Diversidade Taxonômica</a>
<ul>
<li class="chapter" data-level="12.1" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diversidade-alfa-𝛂"><i class="fa fa-check"></i><b>12.1</b> Diversidade alfa (𝛂)</a></li>
<li class="chapter" data-level="12.2" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#riqueza-de-espécies-ou-número-de-espécies"><i class="fa fa-check"></i><b>12.2</b> Riqueza de espécies ou número de espécies</a></li>
<li class="chapter" data-level="12.3" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diversidade-de-espécies"><i class="fa fa-check"></i><b>12.3</b> Diversidade de espécies</a></li>
<li class="chapter" data-level="12.4" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diagramas-de-whittaker-ou-curva-de-dominância"><i class="fa fa-check"></i><b>12.4</b> Diagramas de Whittaker ou Curva de Dominância</a></li>
<li class="chapter" data-level="12.5" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#números-de-hill"><i class="fa fa-check"></i><b>12.5</b> Números de Hill</a></li>
<li class="chapter" data-level="12.6" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#diversidade-beta-𝛃"><i class="fa fa-check"></i><b>12.6</b> Diversidade beta (𝛃)</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="diversidade-taxonômica.html"><a href="diversidade-taxonômica.html#para-se-aprofundar-5"><i class="fa fa-check"></i><b>12.6.1</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="diversidade-filogenética.html"><a href="diversidade-filogenética.html"><i class="fa fa-check"></i><b>13</b> Diversidade filogenética</a></li>
<li class="chapter" data-level="14" data-path="diversidade-funcional.html"><a href="diversidade-funcional.html"><i class="fa fa-check"></i><b>14</b> Diversidade funcional</a></li>
<li class="chapter" data-level="15" data-path="dados-geograficos.html"><a href="dados-geograficos.html"><i class="fa fa-check"></i><b>15</b> Dados geográficos no R</a>
<ul>
<li class="chapter" data-level="15.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#introdução-3"><i class="fa fa-check"></i><b>15.1</b> Introdução</a></li>
<li class="chapter" data-level="15.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pré-requisitos-2"><i class="fa fa-check"></i><b>15.2</b> Pré-requisitos</a></li>
<li class="chapter" data-level="15.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-1"><i class="fa fa-check"></i><b>15.3</b> Vetor</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pontos"><i class="fa fa-check"></i><b>15.3.1</b> Pontos</a></li>
<li class="chapter" data-level="15.3.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#linhas"><i class="fa fa-check"></i><b>15.3.2</b> Linhas</a></li>
<li class="chapter" data-level="15.3.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#polígonos"><i class="fa fa-check"></i><b>15.3.3</b> Polígonos</a></li>
<li class="chapter" data-level="15.3.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tabela-de-atributos"><i class="fa fa-check"></i><b>15.3.4</b> Tabela de atributos</a></li>
<li class="chapter" data-level="15.3.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sf-principal-pacote-no-r-para-dados-vetoriais"><i class="fa fa-check"></i><b>15.3.5</b> <em>sf</em>: principal pacote no R para dados vetoriais</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster"><i class="fa fa-check"></i><b>15.4</b> Raster</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tipos-de-raster"><i class="fa fa-check"></i><b>15.4.1</b> Tipos de raster</a></li>
<li class="chapter" data-level="15.4.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-principal-pacote-no-r-para-dados-raster"><i class="fa fa-check"></i><b>15.4.2</b> <em>raster</em>: principal pacote no R para dados raster</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-referência-de-coordenadas-e-unidades"><i class="fa fa-check"></i><b>15.5</b> Sistema de Referência de Coordenadas e Unidades</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-geográficas"><i class="fa fa-check"></i><b>15.5.1</b> Sistema de Coordenadas Geográficas</a></li>
<li class="chapter" data-level="15.5.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-projetadas"><i class="fa fa-check"></i><b>15.5.2</b> Sistema de Coordenadas Projetadas</a></li>
<li class="chapter" data-level="15.5.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#datum"><i class="fa fa-check"></i><b>15.5.3</b> Datum</a></li>
<li class="chapter" data-level="15.5.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-referência-de-coordenadas-crs-no-r"><i class="fa fa-check"></i><b>15.5.4</b> Sistema de Referência de Coordenadas (CRS) no R</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-fontes-de-dados-geográficos"><i class="fa fa-check"></i><b>15.6</b> Principais fontes de dados geográficos</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-2"><i class="fa fa-check"></i><b>15.6.1</b> Vetor</a></li>
<li class="chapter" data-level="15.6.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-1"><i class="fa fa-check"></i><b>15.6.2</b> Raster</a></li>
<li class="chapter" data-level="15.6.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pacotes-do-r"><i class="fa fa-check"></i><b>15.6.3</b> Pacotes do R</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-e-exportar-dados-geográficos"><i class="fa fa-check"></i><b>15.7</b> Importar e exportar dados geográficos</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-formatos-de-arquivos-geográficos"><i class="fa fa-check"></i><b>15.7.1</b> Principais formatos de arquivos geográficos</a></li>
<li class="chapter" data-level="15.7.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-dados-1"><i class="fa fa-check"></i><b>15.7.2</b> Importar dados</a></li>
<li class="chapter" data-level="15.7.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exportar-dados-1"><i class="fa fa-check"></i><b>15.7.3</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="dados-geograficos.html"><a href="dados-geograficos.html#descrição-de-objetos-espaciais"><i class="fa fa-check"></i><b>15.8</b> Descrição de objetos espaciais</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-5"><i class="fa fa-check"></i><b>15.8.1</b> Vetor</a></li>
<li class="chapter" data-level="15.8.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-4"><i class="fa fa-check"></i><b>15.8.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="dados-geograficos.html"><a href="dados-geograficos.html#reprojeção-de-dados-geográficos"><i class="fa fa-check"></i><b>15.9</b> Reprojeção de dados geográficos</a>
<ul>
<li class="chapter" data-level="15.9.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-6"><i class="fa fa-check"></i><b>15.9.1</b> Vetor</a></li>
<li class="chapter" data-level="15.9.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-5"><i class="fa fa-check"></i><b>15.9.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.10" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-operações-com-dados-geográficos"><i class="fa fa-check"></i><b>15.10</b> Principais operações com dados geográficos</a>
<ul>
<li class="chapter" data-level="15.10.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#operações-de-atributos"><i class="fa fa-check"></i><b>15.10.1</b> Operações de atributos</a></li>
<li class="chapter" data-level="15.10.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#operações-espaciais"><i class="fa fa-check"></i><b>15.10.2</b> Operações espaciais</a></li>
<li class="chapter" data-level="15.10.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#operações-geométricas"><i class="fa fa-check"></i><b>15.10.3</b> Operações geométricas</a></li>
</ul></li>
<li class="chapter" data-level="15.11" data-path="dados-geograficos.html"><a href="dados-geograficos.html#visualização-de-dados-geográficos"><i class="fa fa-check"></i><b>15.11</b> Visualização de dados geográficos</a>
<ul>
<li class="chapter" data-level="15.11.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-elementos-de-um-mapa"><i class="fa fa-check"></i><b>15.11.1</b> Principais elementos de um mapa</a></li>
<li class="chapter" data-level="15.11.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-pacotes-para-a-composição-de-mapas"><i class="fa fa-check"></i><b>15.11.2</b> Principais pacotes para a composição de mapas</a></li>
<li class="chapter" data-level="15.11.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-estáticos"><i class="fa fa-check"></i><b>15.11.3</b> Mapas estáticos</a></li>
<li class="chapter" data-level="15.11.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-animados"><i class="fa fa-check"></i><b>15.11.4</b> Mapas animados</a></li>
<li class="chapter" data-level="15.11.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-interativos"><i class="fa fa-check"></i><b>15.11.5</b> Mapas interativos</a></li>
</ul></li>
<li class="chapter" data-level="15.12" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exemplos-de-aplicações-de-análises-geográficas-para-dados-ecológicos"><i class="fa fa-check"></i><b>15.12</b> Exemplos de aplicações de análises geográficas para dados ecológicos</a>
<ul>
<li class="chapter" data-level="15.12.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#resumir-informações-de-biodiversidade-para-unidades-espaciais"><i class="fa fa-check"></i><b>15.12.1</b> Resumir informações de biodiversidade para unidades espaciais</a></li>
<li class="chapter" data-level="15.12.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#atribuição-de-dados-climáticos-para-pontos"><i class="fa fa-check"></i><b>15.12.2</b> Atribuição de dados climáticos para pontos</a></li>
<li class="chapter" data-level="15.12.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#predições-espaciais-de-objetos-raster"><i class="fa fa-check"></i><b>15.12.3</b> Predições espaciais de objetos raster</a></li>
</ul></li>
<li class="chapter" data-level="15.13" data-path="dados-geograficos.html"><a href="dados-geograficos.html#para-se-aprofundar-6"><i class="fa fa-check"></i><b>15.13</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><i class="fa fa-check"></i><b>16</b> Reprodutibilidade em pesquisa e gerenciamento de dados</a>
<ul>
<li class="chapter" data-level="16.1" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#gestão-de-projetos-acadêmicos-no-rstudio"><i class="fa fa-check"></i><b>16.1</b> Gestão de projetos acadêmicos no RStudio</a></li>
<li class="chapter" data-level="16.2" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#documentos-dinâmicos-r-markdown"><i class="fa fa-check"></i><b>16.2</b> Documentos dinâmicos (R Markdown)</a></li>
<li class="chapter" data-level="16.3" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#controle-de-versão-git-e-github"><i class="fa fa-check"></i><b>16.3</b> Controle de versão, Git e GitHub</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdução ao R com aplicações em biodiversidade e conservação</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro-r" class="section level1" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Introdução à linguagem R</h1>
<div id="introdução-2" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Introdução</h2>
<p>O objetivo desta seção é <strong>apresentar os aspectos básicos da linguagem R</strong> para que qualquer pessoa possa realizar todos os passos para a análise de dados nessa linguagem. Nela, abordaremos as questões mais básicas sobre a linguagem como: 1) R e RStudio, 2) funcionamento da linguagem, 3) estrutura e manipulação de objetos, 4) <em>tidyverse</em> e 5) principais livros e diversos materiais de R para se aprofundar nos estudos.</p>
<p>Todo processo de aprendizagem torna-se mais efetivo quando a <strong>teoria é combinada com a prática</strong>, então recomendamos fortemente que você leitor, acompanhe os códigos e exercícios deste livro, ao mesmo tempo que os executa em seu computador, e não só os leia passivamente. Por motivos de espaço, não abordaremos todas as questões relacionadas ao uso da linguagem R nesta seção. Logo, aconselhamos que o leitor consulte o material sugerido no final dessa seção para se aprofundar.</p>
</div>
<div id="r-e-rstudio" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> R e RStudio</h2>
<p>Com o R é possível <strong>manipular e analisar dados, visualizar gráficos</strong> e escrever desde <strong>pequenas linhas de códigos até programas inteiros</strong>. O R é a versão em código aberto de uma linguagem de programação criada por <strong>John M. Chambers</strong> (Stanford University, CA, EUA), nos anos 1980 no Bell Labs, chamada de S, que contou com três versões: Old S (1976-1987), New S (1988-1997) e S4 (1998), utilizada na IDE S-PLUS (1988-2008). Essa linguagem tornou-se bastante popular e vários produtos comerciais que a usam estão disponíveis, como o S-PLUS, SPSS, STATA e SAS.</p>
<p>No final dos anos 1990, <strong>Robert Gentleman</strong> e <strong>Ross Ihaka</strong> (Auckland University, NZ), iniciaram o desenvolvimento da <strong>versão free da linguagem S</strong>, com o seguinto histórico: Desenvolvimento (1997-2000), Versão 1 (2000-2004), Versão 2 (2004-2013), Versão 3 (2013-2020) e Versão 4 (2020). Para mais detalhes do histório de desenvolvimento do S e R, consultar Wickham (2013), sendo que atualmente a linguagem R é mantida por uma rede de colaboradores denominada <strong>R Core Team</strong>. A <strong>origem do nome R</strong> é desconhecida, mas reza que ao lançarem o nome da linguagem os autores se valeram da letra que vinha antes do S, uma vez que a linguagem R foi baseada nela, e utilizaram a letra “R.”</p>
<p>Um aspecto digno de nota é que a linguagem R, ao contrário de outras linguagem como Fortran e C que são compiladas, é uma <strong>linguagem interpretada</strong>, o que a faz ser mais fácil de programar, pois processa linhas de comando e as transforma em linguagem de máquina (código binário que o computador efetivamente lê), apesar desse fato diminuir a velocidade de processamento.</p>
<p>Para começarmos a trabalhar com o R é necessário baixá-lo na página do R Project. Então, acesse esse <a href="http://www.r-project.org">site</a>, e em seguida, clique no link <strong>download R</strong>, que o levará à pagina do CRAN Mirros (<em>Comprehensive R Archive Network</em>). Escolha a <strong>página espelho do Brasil</strong> mais próxima de você para baixar o programa. Escolha agora o <strong>sistema operacional</strong> do seu computador (passos adicionais existem para diferentes distribuições Linux), para Windows, clique em <strong>base</strong> para finalmente chegar à <strong>página de download</strong> com a versão mais recente do R.</p>
<p>Reserve algum tempo posteriormente para <strong>explorar esta página do R-Project</strong>. Existem
vários <a href="http://www.r-project.org/doc/bib/R-books.html">livros</a> dedicados a diversos assuntos baseados no R. Além disso, estão disponíveis <a href="http://cran.r-project.org/manuals.html">manuais</a> em <a href="http://cran.r-project.org/other-docs.html">diversas línguas</a> para serem baixados gratuitamente.</p>
<p>Como o R é um software livre, não existe a possibilidade de o usuário entrar em <strong>contato com um serviço de suporte de usuários</strong>, muito comuns em softwares pagos. Ao invés disso, existem várias listas de emails que fornecem suporte à <a href="http://www.r-project.org/mail.html">comunidade de usuários</a>. Nós, particularmente, recomendamos o ingresso nas seguintes listas: R-help, R-sig-ecology, e <a href="http://www.leg.ufpr.br/doku.php/software:rbr">R-br</a>. Este último representa um grupo de usuários brasileiro do programa R.</p>
<p>Apesar de podemos utilizar o R com a IDE (Ambiente de Desenvolvimento Integrado - <em>Integrated Development Environment</em>) RGui que vem com a instalação da linguagem, para usuários Windows (Figura <a href="intro-r.html#fig:fig-rgui">5.1</a>) ou no próprio terminal para usuários Linux e MacOS, existem alguns IDEs específicos para facilitar nosso uso dessa linguagem.</p>
<div class="figure" style="text-align: center"><span id="fig:fig-rgui"></span>
<img src="img/cap04_rgui.png" alt="Interface do RGui. Os números indicam: (1) R Script, (2) R Console, e (3) R Graphics." width="100%" />
<p class="caption">
Figura 5.1: Interface do RGui. Os números indicam: (1) R Script, (2) R Console, e (3) R Graphics.
</p>
</div>
<p>Entretanto, desde 2011, um IDE se tornou mais popular na comunidade: o <a href="https://rstudio.com/">RStudio</a> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a>). O RStudio possui algumas características que o tornam tão popular: várias janelas de visualização, marcação e preenchimento automático do script, integração com controle de versão, dentre outras opções. Para fazer o download do RStudio, acessamos o <a href="https://rstudio.com/products/rstudio/download/#download">site</a>, e escolhemos o instalador com base em nosso sistema operacional.</p>
<p>Um último ponto técnico importante: para evitar possíveis erros, é interessante instalar primeiro a linguagem R, seguida do IDE RStudio.</p>
</div>
<div id="funcionamento-da-linguagem-r" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Funcionamento da linguagem R</h2>
<p>Nesta seção veremos o <strong>principais conceitos</strong> para entender como a <strong>linguagem funciona</strong> ou como geralmente utilizamos o IDE RStudio no dia-a-dia, para executar nossas rotinas utilizando a linguagem R. Veremos então: 1) console, 2) script (editor/roteiro), 3) objetos (variáveis), 4) operadores, 5 ) funções, 6) pacotes, 7) ambiente (environment/workspace), 8) ajuda (help) e 9) citações.</p>
<p>Antes de iniciarmos propriamente dito, é fundamental entendermos alguns pontos sobre as janelas e o funcionamento delas no RStudio (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:fig-rstudio"></span>
<img src="img/cap04_rstudio.png" alt="Interface do RStudio. Os números indicam: (1) janelas com abas de Script e R Markdown; (2) janela com abas de Console, Terminal e Jobs; (3) janela com abas de Environment, History, Conections e Tutorial; e (4) janela com abas de Files, Plots, Packages, Help e Viewer." width="100%" />
<p class="caption">
Figura 5.2: Interface do RStudio. Os números indicam: (1) janelas com abas de Script e R Markdown; (2) janela com abas de Console, Terminal e Jobs; (3) janela com abas de Environment, History, Conections e Tutorial; e (4) janela com abas de Files, Plots, Packages, Help e Viewer.
</p>
</div>
<p>Detalhando algumas dessas janelas, temos:</p>
<ul>
<li><strong>Console</strong>: é onde os códigos são rodados e vemos as saídas</li>
<li><strong>Editor/Script</strong>: é onde escrevemos nossos códigos em R ou R Markdown</li>
<li><strong>Environment</strong>: painel com todos os objetos criados na sessão</li>
<li><strong>History</strong>: painel com o histórico dos comandos rodados</li>
<li><strong>Files</strong>: painel que mostra os arquivos no diretório de trabalho</li>
<li><strong>Plots</strong>: painel onde os gráficos são apresentados</li>
<li><strong>Packages</strong>: painel que lista os pacotes</li>
<li><strong>Help</strong>: painel onde a documentação das funções é exibida</li>
</ul>
<p>No RStudio, alguns atalhos são fundamentais para aumentar nossa produtividade:</p>
<ul>
<li><strong>f1</strong>: abre o painel de <em>Help</em></li>
<li><strong>ctrl + Enter</strong>: roda a linha selecionada no script</li>
<li><strong>ctrl + Shift + N</strong>: abre um novo script</li>
<li><strong>ctrl + S</strong>: salva um script</li>
<li><strong>ctrl + Z</strong>: desfaz uma operação</li>
<li><strong>ctrl + shift + Z</strong>: refaz uma operação</li>
<li><strong>alt + -</strong>: insere um sinal de atribuição (&lt;-)</li>
<li><strong>ctrl + Shift + M</strong>: insere um operador pipe (%&gt;%)</li>
<li><strong>ctrl + Shift + C</strong>: comenta uma linha no script - insere um (#)</li>
<li><strong>ctrl + Shift + R</strong>: insere uma sessão (# ———————-)</li>
<li><strong>ctrl + Shift + H</strong>: abre uma janela para selecionar o diretório de trabalho</li>
<li><strong>ctrl + Shift + f10</strong>: reinicia o console</li>
<li><strong>ctrl + L</strong>: limpa os comandos do console</li>
<li><strong>alt + Shift + K</strong>: abre uma janela com todos os atalhos disponíveis</li>
</ul>
<div id="console" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Console</h3>
<p>O console é onde a versão da linguagem R instalada é carregada para executar os códigos da linguagem (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (2)). Na janela do console irá aparecer o símbolo <code>&gt;</code> seguida de uma barra vertical <code>|</code> que fica piscando, onde iremos digitar ou enviar nossos códigos do script. Podemos fazer um pequeno exercício: vamos digitar <code>2 + 2</code>, seguido da tecla <code>Enter</code> para que essa operação seja executada.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="intro-r.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>O resultado retorna o valor <code>12</code>, precedido de um valor entre colchetes. Esses colchetes demonstram a posição do elemento numa sequência de valores. Se fizermos essa outra operação <code>1:42</code>, o R vai criar uma sequência unitária de valores de 1 a 42. A depender da largura da janela do console, vai aparecer um número diferente entre colchete indicando sua posição na sequência: antes do 1 vai aparecer o <code>[1]</code>, depois quando a sequência for quebrada, vai aparecer o número correspondente da posição do elemento, no nosso caso <code>[26]</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="intro-r.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">42</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42</code></pre>
<p>Podemos ver o hitórico dos código executados no Console na aba <strong>History</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (3)).</p>
</div>
<div id="scripts" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Scripts</h3>
<p>Scripts são <strong>rascunhos dos códigos</strong>, e onde de fato os códigos são escritos e depois enviados ao console (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (1)). Scripts são arquivos de texto simples, criados com a extensão (terminação) <code>.R</code>. Para criar um script basta ir em <code>File &gt; New File &gt; R Script</code>, ou clicando no ícone logo abaixo de File, ou ainda usando o atalho <code>ctrl + shift + N</code>.</p>
<p>Uma vez escrito os códigos no script, podemos rodar esses códigos de duas formas: 1)
todo o script de uma vez, clicando em <strong>Source</strong> ou usando o atalho <code>ctrl + shift + enter</code>; 2) a linha onde o cursos estiver posicionado, independente de sua posição naquela linha, clicando em <strong>Run</strong> ou usando o atalho <code>ctrl + enter</code>.</p>
<p>Devemos sempre <strong>salvar nossos scripts</strong>, tomando por via de regra: primeiro criar o arquivo e depois ir salvando versão desse mesmo arquivo. Há diversos motivos para criar um script: continuar o desenvolvimento do mesmo em outro momento ou em outro computador, preservar trabalhos passados, ou ainda compartilhar seus códigos com outra pessoa. Para criar ou salvar um script basta ir em <code>File &gt; Save</code>, escolher um diretório e nome para o script, e salvar. Podemos ainda utilizar o atalho <code>ctrl + S</code>.</p>
<p>Em relação aos scripts, ainda há os <strong>comentários</strong>, representados pelos símbolos <code>#</code> (hash) ou <code>#'</code> (hash-linha). Comentários não são lidos pelo console do R e são utilizados geralmente para descrever informações sobre dados ou funções, ou ainda para suprimir linhas de código. É interessante ter no início de cada script um cabeçalho identificando o objetivo ou análise, autor e data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="intro-r.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; ---</span></span>
<span id="cb5-2"><a href="intro-r.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; title: capitulo 04 - introducao ao r</span></span>
<span id="cb5-3"><a href="intro-r.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; author: mauricio vancine</span></span>
<span id="cb5-4"><a href="intro-r.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; date: 2021-02-26</span></span>
<span id="cb5-5"><a href="intro-r.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; ---</span></span></code></pre></div>
<p>Além disso, podemos usar comentários para adicionar informações sobre os códigos.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="intro-r.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comentarios</span></span>
<span id="cb6-2"><a href="intro-r.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># o r nao le o codigo depois do # (hash)</span></span>
<span id="cb6-3"><a href="intro-r.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dv">42</span> <span class="co"># essas palavras nao sao executadas, apenas o 42</span></span></code></pre></div>
<pre><code>## [1] 42</code></pre>
<p>Um ponto muito importante é escrever os comentários sempre em inglês para tornar seu código mais reprodutível possível. Por fim, outro ponto fundamental é ter <strong>boas práticas de estilo de código</strong>. Quanto mais organizado e padronizado estiver os scripts, mais fácil de entendê-los e de procurar possíveis erros. Existem dois guias de boas práticas para adequadar seus scripts: <a href="http://adv-r.had.co.nz/Style.html">Hadley Wickham</a> e <a href="https://google.github.io/styleguide/Rguide.xml">Google</a>.</p>
</div>
<div id="operadores" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Operadores</h3>
<p>No R, temos <strong>cinco tipos de operadores</strong>: aritméticos, relacionais, lógicos, atribuição e diversos. Todos são descritos na Tabela <a href="intro-r.html#tab:tab-operadores">5.1</a>.</p>
<table>
<caption><span id="tab:tab-operadores">Tabela 5.1: </span>Operadores no R.</caption>
<thead>
<tr class="header">
<th align="center">Operador</th>
<th align="center">Tipo</th>
<th align="center">Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+</td>
<td align="center">Aritmético</td>
<td align="center">Adição</td>
</tr>
<tr class="even">
<td align="center">-</td>
<td align="center">Aritmético</td>
<td align="center">Subtração</td>
</tr>
<tr class="odd">
<td align="center">*</td>
<td align="center">Aritmético</td>
<td align="center">Multiplicação</td>
</tr>
<tr class="even">
<td align="center">/</td>
<td align="center">Aritmético</td>
<td align="center">Divisão</td>
</tr>
<tr class="odd">
<td align="center">%%</td>
<td align="center">Aritmético</td>
<td align="center">Resto da divisão</td>
</tr>
<tr class="even">
<td align="center">%/%</td>
<td align="center">Aritmético</td>
<td align="center">Divisão inteira</td>
</tr>
<tr class="odd">
<td align="center">^ ou **</td>
<td align="center">Aritmético</td>
<td align="center">Expoente</td>
</tr>
<tr class="even">
<td align="center">&gt;</td>
<td align="center">Relacional</td>
<td align="center">Maior</td>
</tr>
<tr class="odd">
<td align="center">&lt;</td>
<td align="center">Relacional</td>
<td align="center">Menor</td>
</tr>
<tr class="even">
<td align="center">&gt;=</td>
<td align="center">Relacional</td>
<td align="center">Maior ou igual</td>
</tr>
<tr class="odd">
<td align="center">&lt;=</td>
<td align="center">Relacional</td>
<td align="center">Menor ou igual</td>
</tr>
<tr class="even">
<td align="center">==</td>
<td align="center">Relacional</td>
<td align="center">Igualdade</td>
</tr>
<tr class="odd">
<td align="center">!=</td>
<td align="center">Relacional</td>
<td align="center">Diferença</td>
</tr>
<tr class="even">
<td align="center">!</td>
<td align="center">Lógico</td>
<td align="center">Lógico NÃO</td>
</tr>
<tr class="odd">
<td align="center">&amp;</td>
<td align="center">Lógico</td>
<td align="center">Lógico elementar E</td>
</tr>
<tr class="even">
<td align="center">|</td>
<td align="center">Lógico</td>
<td align="center">Lógico elementar OU</td>
</tr>
<tr class="odd">
<td align="center">&amp;&amp;</td>
<td align="center">Lógico</td>
<td align="center">Lógico E</td>
</tr>
<tr class="even">
<td align="center">||</td>
<td align="center">Lógico</td>
<td align="center">Lógico OU</td>
</tr>
<tr class="odd">
<td align="center">&lt;- ou =</td>
<td align="center">Atribuição</td>
<td align="center">Atribuição à esquerda</td>
</tr>
<tr class="even">
<td align="center">&lt;&lt;-</td>
<td align="center">Atribuição</td>
<td align="center">Super atribuição à esquerda</td>
</tr>
<tr class="odd">
<td align="center">-&gt;</td>
<td align="center">Atribuição</td>
<td align="center">Atribuição à direita</td>
</tr>
<tr class="even">
<td align="center">-&gt;&gt;</td>
<td align="center">Atribuição</td>
<td align="center">Super atribuição à direita</td>
</tr>
<tr class="odd">
<td align="center">:</td>
<td align="center">Diversos</td>
<td align="center">Sequência unitária</td>
</tr>
<tr class="even">
<td align="center">%in%</td>
<td align="center">Diversos</td>
<td align="center">Elementos que pertencem a um vetor</td>
</tr>
<tr class="odd">
<td align="center">%*%</td>
<td align="center">Diversos</td>
<td align="center">Multiplar matriz com sua transposta</td>
</tr>
<tr class="even">
<td align="center">%&gt;%</td>
<td align="center">Diversos</td>
<td align="center">pipe</td>
</tr>
<tr class="odd">
<td align="center">%–%</td>
<td align="center">Diversos</td>
<td align="center">Intervalo de datas</td>
</tr>
</tbody>
</table>
<p>Como exemplo, podemos fazer operações simples usando os operadores aritméticos.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="intro-r.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes aritmeticas</span></span>
<span id="cb8-2"><a href="intro-r.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">2</span> <span class="co"># adicao</span></span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="intro-r.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> <span class="dv">2</span> <span class="co"># multiplicacao</span></span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Precisamos ficar atentos à <strong>dominância</strong> dos operadores aritméticos: <code>^ &gt;&gt; * ou / &gt;&gt; + ou -</code>. Veja no exemplo abaixo como o uso dos parênteses mudam os resultados.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="intro-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sem especificar - segue a ordem dos operadores</span></span>
<span id="cb12-2"><a href="intro-r.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">/</span> <span class="dv">2</span> <span class="sc">^</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="intro-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especificando - segue a ordem dos parenteses</span></span>
<span id="cb14-2"><a href="intro-r.html#cb14-2" aria-hidden="true" tabindex="-1"></a>((<span class="dv">1</span> <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">+</span> (<span class="dv">2</span> <span class="sc">/</span> <span class="dv">2</span>)) <span class="sc">^</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
</div>
<div id="objetos" class="section level3" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Objetos</h3>
<p><strong>Objetos</strong> são <strong>palavras</strong> às quais são <strong>atribuídos dados</strong>. Essa atribuição possibilita a manipulação de dados ou resultados de análises. Iremos utilizar os símbolos <code>&lt;</code> (menor), seguido de <code>-</code> (menos), sem espaço, dessa forma <code>&lt;-</code>. Também podemos utilizar o símbolo de igual (<code>=</code>), mas não recomendamos, por não fazer parte das boas práticas de escrita de códigos em R. Podemos inserir essa combinação de símbolos com o atalho <code>alt + -</code>. Para demonstrar, vamos atribuir o valor <code>10</code> à palavra <code>obj_10</code>, e chamar esse objeto novamente para verificar seu conteúdo.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="intro-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atribuicao - simbolo (&lt;-)</span></span>
<span id="cb16-2"><a href="intro-r.html#cb16-2" aria-hidden="true" tabindex="-1"></a>obj_10 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb16-3"><a href="intro-r.html#cb16-3" aria-hidden="true" tabindex="-1"></a>obj_10</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Todos os objetos criados numa sessão do R ficam listados na aba <strong>Environment</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (3)). Além disso, o RStudio possui a função <em>auto complete</em>, ou seja, podemos digitar as primeiras letras de um objeto (ou função) e em seguida apertar <code>Tab</code> para que o RStudio liste tudo que começar com essas letras.</p>
<p>Dois pontos importantes sobre atribuições: primeiro, o R sobrescreve os valores dos objetos com o mesmo nome, deixando o objeto com o valor da segunda atribuição.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="intro-r.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sobrescreve o valor dos objetos</span></span>
<span id="cb18-2"><a href="intro-r.html#cb18-2" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb18-3"><a href="intro-r.html#cb18-3" aria-hidden="true" tabindex="-1"></a>obj</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="intro-r.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># obj agora vale 2</span></span>
<span id="cb20-2"><a href="intro-r.html#cb20-2" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb20-3"><a href="intro-r.html#cb20-3" aria-hidden="true" tabindex="-1"></a>obj</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Segundo, o R tem limitações ao nomear objetos:</p>
<ul>
<li>nome de objetos só podem <strong>começar por letras</strong> (<code>a-z</code> ou <code>A-Z</code>) ou <strong>pontos</strong> (<code>.</code>)</li>
<li>nome de objetos só podem <strong>conter letras</strong> (<code>a-z</code> ou <code>A-Z</code>), <strong>número</strong>s (<code>0-9</code>), <strong>underscores</strong> (<code>_</code>) ou <strong>pontos</strong> (<code>.</code>)</li>
<li>R é <em>case-sensitive</em>, i.e., ele difere <strong>letras maiúsculas de minúsculas</strong>. Assim, um objeto chamado “resposta” é diferente do objeto “RESPOSTA”</li>
<li>devemos <strong>evitar acentos ou cedilha</strong> (<code>ç</code>) para facilitar a memorização dos objetos</li>
<li>nome de objetos não podem ser iguais a <strong>nomes especies</strong> (<code>break</code>, <code>else</code>, <code>FALSE</code>, <code>for</code>, <code>function</code>, <code>if</code>, <code>Inf</code>, <code>NA</code>, <code>NaN</code>, <code>next</code>, <code>repeat</code>, <code>return</code>, <code>TRUE</code>, <code>while</code>)</li>
</ul>
<p>Podemos ainda utilizar objetos para <strong>fazer operações e criar novos objetos</strong>. Isso pode parecer um pouco confuso para os iniciantes na linguagem, mas é fundamental aprender essa lógica para passar para os próximos passos.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="intro-r.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir dois objetos</span></span>
<span id="cb22-2"><a href="intro-r.html#cb22-2" aria-hidden="true" tabindex="-1"></a>va1 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb22-3"><a href="intro-r.html#cb22-3" aria-hidden="true" tabindex="-1"></a>va2 <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb22-4"><a href="intro-r.html#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="intro-r.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes com objetos e atribuicao</span></span>
<span id="cb22-6"><a href="intro-r.html#cb22-6" aria-hidden="true" tabindex="-1"></a>adi <span class="ot">&lt;-</span> va1 <span class="sc">+</span> va2</span>
<span id="cb22-7"><a href="intro-r.html#cb22-7" aria-hidden="true" tabindex="-1"></a>adi</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
</div>
<div id="funções" class="section level3" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Funções</h3>
<p>Funções são <strong>códigos preparados para realizar uma tarefa</strong> de modo simples. Outra forma de entender uma função é: comandos que realizam operações em argumentos. A estrutura de uma função é muito similar à sintaxe usada em planilhas eletrônicas, sendo composta por:</p>
<blockquote>
<p>nome_da_funcao(argumento1, argumento2)</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><strong>Nome da função</strong>: remete ao que ela faz</li>
<li><strong>Parênteses</strong>: limitam a função</li>
<li><strong>Argumentos</strong>: onde a função irá atuar</li>
<li><strong>Vírgulas</strong>: separam os argumentos</li>
</ol>
<p>Os argumentos de uma função podem ser de dois tipos:</p>
<ol style="list-style-type: decimal">
<li><strong>Valores ou objetos</strong>: a função irá alterar os valores em si ou os valores atribuídos aos objetos</li>
<li><strong>Parâmetros</strong>: valores fixos que informam um método ou a realização de uma operação. Informa-se o nome desse argumento, seguido de “=” e um número, texto ou TRUE ou FALSE</li>
</ol>
<p>Alguns exemplos de argumentos como valores ou objetos.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="intro-r.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes - argumentos como valores</span></span>
<span id="cb24-2"><a href="intro-r.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># soma</span></span>
<span id="cb24-3"><a href="intro-r.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">10</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="intro-r.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes - argumentos como objetos</span></span>
<span id="cb26-2"><a href="intro-r.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># soma</span></span>
<span id="cb26-3"><a href="intro-r.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(va1, va2)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>Alguns exemplos de argumentos como parâmetros. Note que apesar do valor do argumento ser o mesmo (10), seu efeito no resultado muda drasticamente. Aqui também é importante destacar um ponto: 1 podemos informar os argumentos sequencialmente, sem explicitar seus nomes, ou 2) independente da ordem, mas explicitando seus nomes. Entretanto, como no exemplo abaixo, devemos informar o nome do argumento (i.e., parâmetro), para que seu efeito seja o que desejamos.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="intro-r.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes - argumentos como parametros</span></span>
<span id="cb28-2"><a href="intro-r.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao - repita todos os elementos</span></span>
<span id="cb28-3"><a href="intro-r.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">times =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3
## [39] 4 5 1 2 3 4 5 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="intro-r.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao - repita cada um dos elementos</span></span>
<span id="cb30-2"><a href="intro-r.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">each =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4
## [39] 4 4 5 5 5 5 5 5 5 5 5 5</code></pre>
<p>Um ponto fundamental, e que deve ser entendido nesse ponto, é o <strong>fluxo de atribuições do resultado da operação de funções a novos objetos</strong>. No desenvolvimento de qualquer script, grande parte da estrutura do mesmo será dessa forma: atribuição de dados &gt; operações com funções &gt; atribuição dos resultados a novos objetos &gt; operações com funções desses novos objetos &gt; atribuição dos resultados a novaos objetos….Ao entender esse funcionamento, começamos a entender como devemos pensar na organização do nosso script para montar as análises de que precisamos.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="intro-r.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atribuicao dos resultados</span></span>
<span id="cb32-2"><a href="intro-r.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao</span></span>
<span id="cb32-3"><a href="intro-r.html#cb32-3" aria-hidden="true" tabindex="-1"></a>rep_times <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">times =</span> <span class="dv">10</span>)</span>
<span id="cb32-4"><a href="intro-r.html#cb32-4" aria-hidden="true" tabindex="-1"></a>rep_times</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3
## [39] 4 5 1 2 3 4 5 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="intro-r.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somar e atribuir</span></span>
<span id="cb34-2"><a href="intro-r.html#cb34-2" aria-hidden="true" tabindex="-1"></a>rep_times_soma <span class="ot">&lt;-</span> <span class="fu">sum</span>(rep_times)</span>
<span id="cb34-3"><a href="intro-r.html#cb34-3" aria-hidden="true" tabindex="-1"></a>rep_times_soma</span></code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="intro-r.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># raiz e atribuir</span></span>
<span id="cb36-2"><a href="intro-r.html#cb36-2" aria-hidden="true" tabindex="-1"></a>rep_times_soma_raiz <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(rep_times_soma)</span>
<span id="cb36-3"><a href="intro-r.html#cb36-3" aria-hidden="true" tabindex="-1"></a>rep_times_soma_raiz</span></code></pre></div>
<pre><code>## [1] 12.24745</code></pre>
<p>Por fim, é fundamental também entender a <strong>origem das funções</strong> que usamos no R. Todas as funções são advindas de <strong>pacotes</strong>. Esses pacotes possuem duas origens.</p>
<ol style="list-style-type: decimal">
<li>pacotes já instalados por padrão e que são carregados quando abrimos o R (<em>R Base</em>)</li>
<li>pacotes que instalamos e carregamos com funções</li>
</ol>
</div>
<div id="pacotes" class="section level3" number="5.3.6">
<h3><span class="header-section-number">5.3.6</span> Pacotes</h3>
<p>Pacotes são <strong>conjunto extras de funções para executar tarefas específicas</strong>, além do <em>R Base</em>. Existe literalmente milhares de pacotes para as mais diversas tarefas: estatística, ecologia, geografia, sensoriamento remoto, econometria, ciências sociais, gráficos, <em>machine learning</em> etc. Podemos verificar este vasto conjunto de pacotes pelo <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">link</a> que lista por nome os <strong>pacotes oficiais</strong>, ou seja, que passaram pelo crivo do <strong>CRAN</strong>. Existem ainda muito mais <strong>pacotes em desenvolvimento</strong>, geralmente disponibilizados em repositórios do <strong>GitHub ou GitLab</strong>.</p>
<p>Primeiramente, com uma sessão do R sem carregar nenhum pacote extra, podemos verificar pacotes carregados pelo <em>R Base</em> utilizando a função <code>search()</code>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="intro-r.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar pacotes carregados</span></span>
<span id="cb38-2"><a href="intro-r.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<p>Podemos ainda verificar todos pacotes instalados em seu computador com a função <code>library()</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="intro-r.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar pacotes instalados</span></span>
<span id="cb39-2"><a href="intro-r.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>()</span></code></pre></div>
<p>No R, quando tratamos de pacotes, devemos destacar dois conceitos: instalar um pacote e carregar um pacote. A <strong>instalação</strong> de pacotes possui algumas características:</p>
<ul>
<li>Instala-se apenas uma vez</li>
<li>Precisa estar conectado à internet</li>
<li>O nome do pacote precisa estar entre aspas</li>
<li>Função (CRAN): <code>install.packages()</code></li>
</ul>
<p>Vamos instalar o pacote <em>vegan</em> diretamente do CRAN, que possui funções para realizar uma série de análise em ecologia. Para isso, podemos ir em <code>Tools &gt; Install Packages...</code>, ou ir na aba <strong>Packages</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)), procurar um pacote ou simplesmente clicar em “Install.” Podemos ainda utilizar a função <code>install.packages()</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="intro-r.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacotes</span></span>
<span id="cb40-2"><a href="intro-r.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<p>Podemos conferir em que diretório um pacote é instalado com a função <code>.libPaths()</code>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="intro-r.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># diretorio de intalacao dos pacotes</span></span>
<span id="cb41-2"><a href="intro-r.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span></code></pre></div>
<pre><code>## [1] &quot;/home/mude/R/x86_64-pc-linux-gnu-library/4.0&quot;
## [2] &quot;/usr/local/lib/R/site-library&quot;               
## [3] &quot;/usr/lib/R/site-library&quot;                     
## [4] &quot;/usr/lib/R/library&quot;</code></pre>
<p>Uma vez instalado um pacote, não há necessidade de instalá-lo novamente. Entretanto, todas as vezes que iniciarmos uma sessão no R, precisamos <strong>carregar</strong> os pacotes com as funções que precisamos utilizar. O <strong>carregamento</strong> de pacotes possui algumas características:</p>
<ul>
<li>Carrega-se toda vez que se abre uma nova sessão do R</li>
<li>Não precisa estar conectado à internet</li>
<li>O nome do pacote não precisa estar entre aspas</li>
<li>Funções: <code>library()</code> ou <code>require()</code></li>
</ul>
<p>Vamos carregar o pacote <em>vegan</em> que instalamos anteriormente. Podemos ir na aba <strong>Packages</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)) e ticar o pacote que queremos carregar ou utilizar a função <code>library()</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="intro-r.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar pacotes</span></span>
<span id="cb43-2"><a href="intro-r.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span></code></pre></div>
<pre><code>## Loading required package: permute</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## This is vegan 2.5-7</code></pre>
<p>Como dissemos anteriormente, alguns pacotes em desenvlvimento encontram-se disponíveis em repositórios do GitHub ou GitLab. Para instalar pacotes do GitHub, por exemplo, precisamos instalar e carregar o pacote <em>devtools</em>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="intro-r.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacote devtools</span></span>
<span id="cb47-2"><a href="intro-r.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb47-3"><a href="intro-r.html#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="intro-r.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar pacote devtools</span></span>
<span id="cb47-5"><a href="intro-r.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code></pre></div>
<p>Uma vez instalado e carregado este pacote, podemos instalar o pacote do GitHub, utilizando a função <code>devtools::install_github()</code>. Precisamos atentar para usar essa forma “nome_usuario/nome_repositorio,” retirados do link do repositório de interesse. Como exemplo, podemos instalar mesmo pacote <em>vegan</em> do repositório do GitHub <a href="https://github.com/vegandevs/vegan">vegandevs/vegan</a>, e depois utilizar a função <code>library()</code> para carregá-lo normalmente.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="intro-r.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacote do github</span></span>
<span id="cb48-2"><a href="intro-r.html#cb48-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;vegandevs/vegan&quot;</span>)</span>
<span id="cb48-3"><a href="intro-r.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="intro-r.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar pacote do github</span></span>
<span id="cb48-5"><a href="intro-r.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<p>A maioria dos pacotes vem com bancos de dados que podem ser acessados pela função <code>data()</code>. Esses bancos de dados podem ser usados para testar as funções do pacote. Se estiver com dúvida na maneira como você deve preparar a planilha para realizar uma análise específica, entre no help da função e veja os conjuntos de dados que estão no exemplo desta função. Como exemplo, vamos carregar os dados <code>dune</code> do pacote <em>vegan</em>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="intro-r.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar dados de um pacote</span></span>
<span id="cb49-2"><a href="intro-r.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb49-3"><a href="intro-r.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dune)</span>
<span id="cb49-4"><a href="intro-r.html#cb49-4" aria-hidden="true" tabindex="-1"></a>dune[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##   Achimill Agrostol Airaprae Alopgeni Anthodor Bellpere
## 1        1        0        0        0        0        0
## 2        3        0        0        2        0        3
## 3        0        4        0        7        0        2
## 4        0        8        0        2        0        2
## 5        2        0        0        0        4        2
## 6        2        0        0        0        3        0</code></pre>
<p>Se por algum motivo precisarmos <strong>desinstalar</strong> um pacote, podemos utilizar a função <code>remove.packages()</code>. Já para <strong>descarregar</strong> um pacote, podemos usar a função <code>detach()</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="intro-r.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># descarregar um pacote</span></span>
<span id="cb51-2"><a href="intro-r.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">&quot;package:vegan&quot;</span>, <span class="at">unload =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>E um último ponto fundamental de pacotes, diz respeito à <strong>atualização</strong> dos mesmos. Os pacotes são atualizados com frequência, e infelizmente ou felizmente (pois as atualizações podem oferecer algumas quebras entre pacotes), não se atualizam sozinhos. Muitas vezes, a instalação de um pacote pode depender da versão dos pacotes dependentes, e geralmente uma janela se abre que todos os pacotes dependentes sejam atualizados. Podemos ir na aba <strong>Packages</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)) e clicar em “Update” ou usar a função <code>update.packages(ask = FALSE)</code> para atualizá-los, entretanto, essa é uma função que costuma demorar para terminar de rodar.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="intro-r.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atualizacao dos pacotes</span></span>
<span id="cb52-2"><a href="intro-r.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>(<span class="at">ask =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="ajuda-help" class="section level3" number="5.3.7">
<h3><span class="header-section-number">5.3.7</span> Ajuda (<em>Help</em>)</h3>
<p>Um importante passo para melhorar a usuabilidade e ter mais familiaridade com a linguagem R é aprender a usar a <strong>ajuda de cada função</strong>. Para tanto, podemos utilizar a função <code>help()</code> ou o operador <code>?</code>, depois de ter carregado o pacote, para abri uma nova aba (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)) que possui diversas informações sobre a função de interesse. O arquivo de ajuda do R possui geralmente nove ou dez tópicos, que nos auxiliam muito no entendimento dos dados de entrada, argumento e que operações estão sendo realizadas:</p>
<ul>
<li><strong>Description</strong>: resumo da função</li>
<li><strong>Usage</strong>: como utilizar a função e quais os seus argumentos</li>
<li><strong>Arguments</strong>: detalha os argumentos e como os mesmos devem ser especifidados</li>
<li><strong>Details</strong>: detalhes importantes para se usar a função</li>
<li><strong>Value</strong>: mostra como interpretar a saída (<em>output</em>) da função (os resultados)</li>
<li><strong>Note</strong>: notas gerais sobre a função</li>
<li><strong>Authors</strong>: autores da função</li>
<li><strong>References</strong>: referências bibliográficas para os métodos usados pra construir a função</li>
<li><strong>See also</strong>: funções relacionadas</li>
<li><strong>Examples</strong>: exemplos do uso da função. Às vezes pode ser útil copiar esse trecho e colar no R para ver como funciona e como usar a função.</li>
</ul>
<p>Vamos realizar um exemplo, buscando o <em>help</em> da função <code>aov()</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="intro-r.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># help</span></span>
<span id="cb53-2"><a href="intro-r.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(aov)</span>
<span id="cb53-3"><a href="intro-r.html#cb53-3" aria-hidden="true" tabindex="-1"></a>?aov</span></code></pre></div>
<p>Além das funções, podemos buscas detalhes de um pacote em específico, para uma página simples do <em>help</em> utilizando a função <code>help()</code> ou o operador <code>?</code>. Entretanto, para uma opção que ofereça uma descrição detalhada e um índice de todas as funções do pacote, podemos utilizar a função <code>library()</code>, mas agora utilizando o argumento “help,” indicamos o pacote de interesse entre aspas.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="intro-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># help do pacote</span></span>
<span id="cb54-2"><a href="intro-r.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(vegan)</span>
<span id="cb54-3"><a href="intro-r.html#cb54-3" aria-hidden="true" tabindex="-1"></a>?vegan</span>
<span id="cb54-4"><a href="intro-r.html#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="intro-r.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co"># help detalhado</span></span>
<span id="cb54-6"><a href="intro-r.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> <span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<p>Outra ferramenta de busca é a página <a href="http://www.rseek.org">rseek</a>, na qual é possível buscar por um termo não só nos pacotes do R, mas também em listas de emails, manuais, páginas na internet e livros sobre o programa.</p>
</div>
<div id="ambiente-environment" class="section level3" number="5.3.8">
<h3><span class="header-section-number">5.3.8</span> Ambiente (<em>Environment</em>)</h3>
<p>O ambiente <em>Environment</em> como vimos é onde os objetos criados são armazenados. É fundamental entender que um objeto é uma <strong>alocação de um pequeno espaço na memória RAM</strong> do seu computador, onde o R armazenará um valor ou o resultado de uma função, utilizando o nome que definimos. Sendo assim, se fizermos uma atribuição de um <strong>objeto maior que o tamanho da memória RAM</strong>, esse objeto <strong>não será alocado</strong>, e a atribuição não funcionará. Existem opções para contornar esse tipo de limitação, mas não abordaremos aqui. Entretanto, podemos utilizar a função <code>object.size()</code> para saber quanto espaço nosso objeto criado está alocando de memória RAM. O conceito de função é tratado na seção seguinte.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="intro-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tamanho de um objeto</span></span>
<span id="cb55-2"><a href="intro-r.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(adi)</span></code></pre></div>
<pre><code>## 56 bytes</code></pre>
<p>Podemos listar todos os objetos criados com a função <code>ls()</code> ou <code>objects()</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="intro-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os objetos</span></span>
<span id="cb57-2"><a href="intro-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;adi&quot;                 &quot;dune&quot;                &quot;obj&quot;                
## [4] &quot;obj_10&quot;              &quot;rep_times&quot;           &quot;rep_times_soma&quot;     
## [7] &quot;rep_times_soma_raiz&quot; &quot;va1&quot;                 &quot;va2&quot;</code></pre>
<p>Podemos ainda remover objetos criados com a função <code>rm()</code> ou <code>remove()</code>. Ou ainda fazer uma função composta para remove todos os objetos do <em>Environment</em>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="intro-r.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover um objeto</span></span>
<span id="cb59-2"><a href="intro-r.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(adi)</span>
<span id="cb59-3"><a href="intro-r.html#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="intro-r.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remover todos os objetos criados</span></span>
<span id="cb59-5"><a href="intro-r.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p>Quando usamos a função <code>ls()</code>, nenhum objeto é lista.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="intro-r.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os objetos</span></span>
<span id="cb60-2"><a href="intro-r.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>Toda a vez que <strong>fechamos o R</strong>, os objetos criados são <strong>apagados</strong> do <strong>enrironmental</strong>. Dessa forma, em algumas ocasiões, por exemplo, análises estatísticas que demoram um grande tempo para serem realizadas, pode ser interessante <strong>exportar alguns ou todos os objetos criados</strong>. Para salvar todo os objetos, ou seja, todo o <em>workspace</em>, podemos ir em <code>Session -&gt; Save Workspace As...</code> e escolher o nome do arquivo do <em>workspace</em>, por exemplo, “meu_workspace.RData.” Podemos ainda utilizar funções para essas tarefas. A função <code>save.image()</code> salva todo <em>workspace</em> com a extensão <code>.RData</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="intro-r.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar todo o workspace</span></span>
<span id="cb62-2"><a href="intro-r.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">&quot;meu_workspace.RData&quot;</span>)</span></code></pre></div>
<p>Depois disso, podemos fechar o RStudio tranquilamente, e quando formos trabalhar novamente, carregar os objetos criados indo em <code>Session -&gt; Load Workspace...</code>, ou utilizando a função <code>load()</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="intro-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar todo o workspace</span></span>
<span id="cb63-2"><a href="intro-r.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;meu_workspace.RData&quot;</span>)</span></code></pre></div>
<p>Entretanto, em algumas ocasiões, não precisamos salvar todos os objetos. Dessa forma, podemos salvar apenas alguns objetos específicos usando a função <code>save()</code>, também com a extensão <code>.RData</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="intro-r.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar apenas um objeto</span></span>
<span id="cb64-2"><a href="intro-r.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(obj1, <span class="at">file =</span> <span class="st">&quot;meu_obj.RData&quot;</span>)</span>
<span id="cb64-3"><a href="intro-r.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="intro-r.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar apenas um objeto</span></span>
<span id="cb64-5"><a href="intro-r.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(obj1, obj2, <span class="at">file =</span> <span class="st">&quot;meus_objs.RData&quot;</span>)</span>
<span id="cb64-6"><a href="intro-r.html#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="intro-r.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar os objetos</span></span>
<span id="cb64-8"><a href="intro-r.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;meus_objs.RData&quot;</span>)</span></code></pre></div>
<p>Ou ainda podemos saber apenas um objeto com a extensão <code>.rds</code>. Para isso, usamos as funções <code>saveRDS()</code> e <code>readRDS()</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="intro-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar um objeto para um arquivo</span></span>
<span id="cb65-2"><a href="intro-r.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(obj, <span class="at">file =</span> <span class="st">&quot;meu_obj.rds&quot;</span>)</span>
<span id="cb65-3"><a href="intro-r.html#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="intro-r.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar esse objeto</span></span>
<span id="cb65-5"><a href="intro-r.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">&quot;meu_obj.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="citações" class="section level3" number="5.3.9">
<h3><span class="header-section-number">5.3.9</span> Citações</h3>
<p>Ao utilizar o R para realizar alguma análise em seus estudos ecológicos, é fundamental a citação do mesmo. Para saber como citar exatamente o R em artigos, existe uma função denominada <code>citation()</code>, que provê um formato genérico de citação e um BibTeX para arquivos LaTeX e R Markdown.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="intro-r.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># citacao do r</span></span>
<span id="cb66-2"><a href="intro-r.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>()</span></code></pre></div>
<pre><code>## 
## To cite R in publications use:
## 
##   R Core Team (2021). R: A language and environment for statistical
##   computing. R Foundation for Statistical Computing, Vienna, Austria.
##   URL https://www.R-project.org/.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {R: A Language and Environment for Statistical Computing},
##     author = {{R Core Team}},
##     organization = {R Foundation for Statistical Computing},
##     address = {Vienna, Austria},
##     year = {2021},
##     url = {https://www.R-project.org/},
##   }
## 
## We have invested a lot of time and effort in creating R, please cite it
## when using it for data analysis. See also &#39;citation(&quot;pkgname&quot;)&#39; for
## citing R packages.</code></pre>
<p>No resultado dessa função, há uma mensagem muito interessante: “See also ‘citation(“pkgname”)’ for citing R packages.” Dessa forma, aconselhamos os usuários de R a citar também os pacotes que utilizaram em suas análises para dar os devidos créditos aos desenvolvedores das funções implementadas nos pacotes. Como exemplo, vamos ver como fica a citação do pacote <em>vegan</em>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="intro-r.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># citacao do pacote vegan</span></span>
<span id="cb68-2"><a href="intro-r.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<pre><code>## 
## To cite package &#39;vegan&#39; in publications use:
## 
##   Jari Oksanen, F. Guillaume Blanchet, Michael Friendly, Roeland Kindt,
##   Pierre Legendre, Dan McGlinn, Peter R. Minchin, R. B. O&#39;Hara, Gavin
##   L. Simpson, Peter Solymos, M. Henry H. Stevens, Eduard Szoecs and
##   Helene Wagner (2020). vegan: Community Ecology Package. R package
##   version 2.5-7. https://CRAN.R-project.org/package=vegan
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {vegan: Community Ecology Package},
##     author = {Jari Oksanen and F. Guillaume Blanchet and Michael Friendly and Roeland Kindt and Pierre Legendre and Dan McGlinn and Peter R. Minchin and R. B. O&#39;Hara and Gavin L. Simpson and Peter Solymos and M. Henry H. Stevens and Eduard Szoecs and Helene Wagner},
##     year = {2020},
##     note = {R package version 2.5-7},
##     url = {https://CRAN.R-project.org/package=vegan},
##   }
## 
## ATTENTION: This citation information has been auto-generated from the
## package DESCRIPTION file and may need manual editing, see
## &#39;help(&quot;citation&quot;)&#39;.</code></pre>
</div>
<div id="principais-erros-de-iniciantes" class="section level3" number="5.3.10">
<h3><span class="header-section-number">5.3.10</span> Principais erros de iniciantes</h3>
<p><strong>Errar</strong> quando se está iniciando com R é <strong>muito comum e faz parte do aprendizado</strong>. Entretanto, os erros nunca devem ser encarados como uma forma de desestímulo para continuar tentando. Todos nós, autores desse livro, e provavelmente usuários muito experientes já passaram por um momento em que se quer desistir de tudo. Jovem aprendiz de R, a <strong>única diferença entre você</strong> que está iniciando agora e nós que usamos há mais tempo, <strong>são as horas de uso (e raiva)</strong>. O que temos a mais é experiência para olhar o erro, lê-lo e conseguir interpretar.</p>
<p>Dessa forma, o ponto mais importante de quem está iniciando é ter <strong>paciência, calma, bom humor, ler e entender a mensagem de erro</strong>. Iremos listar aqui o que consideramos os <strong>princiais erros dos iniciantes no R</strong>.</p>
<p><strong>1. Esquecer de completar uma função ou bloco de comandos</strong></p>
<p>Esquecer de completar uma função ou bloco de comandos é algo bem comum. Geralmente esquecemos de fechar aspas <code>""</code> ou parênteses <code>()</code>, mas felizmente geralmente o R nos informa isso, indicando um símbolo de <code>+</code>. `</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="intro-r.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span></span>
<span id="cb70-2"><a href="intro-r.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:3:0: unexpected end of input
## 1: sum(1, 2
## 2:   +
##   ^</code></pre>
<p><strong>2. Esquecer da vírgula</strong></p>
<p>Outro erro bastante comum é esquecer de acrescentar a vírgula <code>,</code> para separar argumentos dentro de uma função, principalmente se estamos compondo várias função acopladas, i.e., uma função dentro da outra.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="intro-r.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:7: unexpected numeric constant
## 1: sum(1 2
##           ^</code></pre>
<p><strong>3. Chamar um objeto errado</strong></p>
<p>Pode parecer simples, mas esse é de longo o erro que as pessoas mais me interrompiam no laboratório. Quando estamos mais avançados e temos um longo script, fomos atribundo diversos objetos e em algum momento atribuímos um nome do qual não lembramos. E aí, quando chamamos o objeto ele não existe e devolve um erro, que pode ser facilmente identificado, como o exemplo abaixo.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="intro-r.html#cb74-1" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb74-2"><a href="intro-r.html#cb74-2" aria-hidden="true" tabindex="-1"></a>OBJ</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;OBJ&#39; not found</code></pre>
<p><strong>4. Esquecer de carregar um pacote</strong></p>
<p>Esse também um erro recorrentes, mesmo para usuários mais experientes. Em scripts de análises complexas, que requerem vários pacotes, geralmente esquecemos de um ou outro… A melhor forma de evitar esse tipo de erro é listar o pacotes que vamos precisar usar logo no início do script.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="intro-r.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar dados</span></span>
<span id="cb76-2"><a href="intro-r.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dune)</span>
<span id="cb76-3"><a href="intro-r.html#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="intro-r.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># funcao do pacote vegan</span></span>
<span id="cb76-5"><a href="intro-r.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">decostand</span>(dune, <span class="st">&quot;hell&quot;</span>)</span></code></pre></div>
<pre><code>## Error in decostand(dune, &quot;hell&quot;): could not find function &quot;decostand&quot;</code></pre>
<p>Geralmente a mensagem de erro será de que a <strong>função não foi encontrada</strong> ou algo nesse sentido. Carregando o pacote, esse erro é contornado.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="intro-r.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote</span></span>
<span id="cb78-2"><a href="intro-r.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb78-3"><a href="intro-r.html#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="intro-r.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar dados</span></span>
<span id="cb78-5"><a href="intro-r.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dune)</span>
<span id="cb78-6"><a href="intro-r.html#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="intro-r.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co"># funcao do pacote vegan</span></span>
<span id="cb78-8"><a href="intro-r.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="fu">decostand</span>(dune[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="st">&quot;hell&quot;</span>)</span></code></pre></div>
<pre><code>##    Achimill  Agrostol Airaprae  Alopgeni  Anthodor  Bellpere
## 1 1.0000000 0.0000000        0 0.0000000 0.0000000 0.0000000
## 2 0.6123724 0.0000000        0 0.5000000 0.0000000 0.6123724
## 3 0.0000000 0.5547002        0 0.7337994 0.0000000 0.3922323
## 4 0.0000000 0.8164966        0 0.4082483 0.0000000 0.4082483
## 5 0.5000000 0.0000000        0 0.0000000 0.7071068 0.5000000
## 6 0.6324555 0.0000000        0 0.0000000 0.7745967 0.0000000</code></pre>
<p><strong>5. Usar o nome da função de forma errônea</strong></p>
<p>Esse erro não é tão comum, mas pode ser incômodo às vezes. Algumas funções possuem nomes no padrão “Camel Case,” i.e., com letras maiúsculas para no meio do nome da função. Isso às vezes pode confundir, ou ainda, as funções podem ou não ser separadas com <code>.</code>, como <code>row.names()</code> e <code>colnames()</code>. Na seção de <em>tidyverse</em>, veremos que houve uma padronização nos nomes das funções para “Snake Case,” i.e, todas as funções possuem letras minúsculas, com palavras separadas por <em>underscore</em> <code>_</code>.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="intro-r.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colsums</span>(dune)</span></code></pre></div>
<pre><code>## Error in colsums(dune): could not find function &quot;colsums&quot;</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="intro-r.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(dune)</span></code></pre></div>
<pre><code>## Achimill Agrostol Airaprae Alopgeni Anthodor Bellpere Bromhord Chenalbu 
##       16       48        5       36       21       13       15        1 
## Cirsarve Comapalu Eleopalu Elymrepe Empenigr Hyporadi Juncarti Juncbufo 
##        2        4       25       26        2        9       18       13 
## Lolipere Planlanc  Poaprat  Poatriv Ranuflam Rumeacet Sagiproc Salirepe 
##       58       26       48       63       14       18       20       11 
## Scorautu Trifprat Trifrepe Vicilath Bracruta Callcusp 
##       54        9       47        4       49       10</code></pre>
</div>
</div>
<div id="estrutura-e-manipulação-de-objetos" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Estrutura e manipulação de objetos</h2>
<p>O conhecimento sobre a <strong>estrutura e manipulação de objetos</strong> é fundamental para ter domínio e entendimento do funcionamento da linguagem R. Nesta seção, trataremos da estrutura e manipulação de dados no R, no que ficou conhecido como modo <em>R Base</em>, em contrapartida ao <em>tidyverse</em>, tópico da próxima seção. Abordaremos temas chaves: 1) atributos de objetos, 2) manipulação de objetos unidimensionais e
multidimensionais, 3) valores faltantes e especiais, 4) diretório de trabalho, 5) importar, conferir e exportar dados.</p>
<div id="atributo-dos-objetos" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Atributo dos objetos</h3>
<p>Quando fazemos <strong>atribuições de dados</strong> no R (<code>&lt;-</code>), os objetos gerados possuem três características.</p>
<ol style="list-style-type: decimal">
<li><strong>Nome</strong>: palavra que o R reconhece os dados atribuídos</li>
<li><strong>Conteúdo</strong>: dados em si</li>
<li><strong>Atributos</strong>: modos (<em>natureza</em>) e estruturas (<em>organização</em>)</li>
</ol>
<p>Vamos explorar mais a fundo os <strong>modos</strong> e <strong>estruturas</strong>. Vale ressaltar que isso é uma simplificação, pois há muitas classes de objetos como funções e saídas de funções que possuem outros atributos.</p>
<p>Podemos verificar os atributos dos objetos com a função <code>attributes()</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="intro-r.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atributos</span></span>
<span id="cb84-2"><a href="intro-r.html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dune)</span></code></pre></div>
<pre><code>## $names
##  [1] &quot;Achimill&quot; &quot;Agrostol&quot; &quot;Airaprae&quot; &quot;Alopgeni&quot; &quot;Anthodor&quot; &quot;Bellpere&quot;
##  [7] &quot;Bromhord&quot; &quot;Chenalbu&quot; &quot;Cirsarve&quot; &quot;Comapalu&quot; &quot;Eleopalu&quot; &quot;Elymrepe&quot;
## [13] &quot;Empenigr&quot; &quot;Hyporadi&quot; &quot;Juncarti&quot; &quot;Juncbufo&quot; &quot;Lolipere&quot; &quot;Planlanc&quot;
## [19] &quot;Poaprat&quot;  &quot;Poatriv&quot;  &quot;Ranuflam&quot; &quot;Rumeacet&quot; &quot;Sagiproc&quot; &quot;Salirepe&quot;
## [25] &quot;Scorautu&quot; &quot;Trifprat&quot; &quot;Trifrepe&quot; &quot;Vicilath&quot; &quot;Bracruta&quot; &quot;Callcusp&quot;
## 
## $row.names
##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;
## [16] &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot;
## 
## $class
## [1] &quot;data.frame&quot;</code></pre>
<div id="modo-dos-objetos" class="section level4" number="5.4.1.1">
<h4><span class="header-section-number">5.4.1.1</span> Modo dos objetos</h4>
<p>A depender da <strong>natureza dos elementos</strong> que compõem os dados que foram atribuídos aos objetos, esses objetos podem ser, de forma simples um dos cinco: numérico do tipo inteiro (<em>interger</em>), numérico do tipo flutuante (<em>double</em>), texto (<em>character</em>), lógico (<em>logical</em>), e complexos (<em>complex</em>).</p>
<p>A atribuição de números no R podem gerar dois tipos de modos: <strong>interger</strong> para números inteiros e <strong>double</strong> para números flutuantes ou com decimais.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="intro-r.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numerico double</span></span>
<span id="cb86-2"><a href="intro-r.html#cb86-2" aria-hidden="true" tabindex="-1"></a>obj_numerico_double <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb86-3"><a href="intro-r.html#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="intro-r.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb86-5"><a href="intro-r.html#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_numerico_double)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="intro-r.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tipo</span></span>
<span id="cb88-2"><a href="intro-r.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(obj_numerico_double)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>A título de praticidade, ambos são incorporados como o modo <strong>numeric</strong>, com o tipo <strong>double</strong>, a menos que especifiquemos que seja inteiro com o a letra <code>L</code> depois do número.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="intro-r.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numerico interger</span></span>
<span id="cb90-2"><a href="intro-r.html#cb90-2" aria-hidden="true" tabindex="-1"></a>obj_numerico_inteiro <span class="ot">&lt;-</span> 1L</span>
<span id="cb90-3"><a href="intro-r.html#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="intro-r.html#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb90-5"><a href="intro-r.html#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_numerico_inteiro)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="intro-r.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tipo</span></span>
<span id="cb92-2"><a href="intro-r.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(obj_numerico_inteiro)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>Além de números, podemos atribuir textos, utilizando para isso aspas <code>""</code>.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="intro-r.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># caracter</span></span>
<span id="cb94-2"><a href="intro-r.html#cb94-2" aria-hidden="true" tabindex="-1"></a>obj_caracter <span class="ot">&lt;-</span> <span class="st">&quot;a&quot;</span> <span class="co"># atencao para as aspas</span></span>
<span id="cb94-3"><a href="intro-r.html#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="intro-r.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb94-5"><a href="intro-r.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_caracter)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Em algumas situações, precisamos indicar a ocorrência ou não de um evento. Para isso, utilizamos as palavras reservadas (<code>TRUE</code> e <code>FALSE</code>), chamadas de variáveis booleanas. Devemos nos ater para que essas palavras são com letras maiúsculas e sem aspas.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="intro-r.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logico</span></span>
<span id="cb96-2"><a href="intro-r.html#cb96-2" aria-hidden="true" tabindex="-1"></a>obj_logico <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># maiusculas e sem aspas</span></span>
<span id="cb96-3"><a href="intro-r.html#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="intro-r.html#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb96-5"><a href="intro-r.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_logico)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<p>Por fim, existe um modo pouco utilizado que cria números complexos (raiz de números negativos).</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="intro-r.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># complexo</span></span>
<span id="cb98-2"><a href="intro-r.html#cb98-2" aria-hidden="true" tabindex="-1"></a>obj_complexo <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">+</span>1i</span>
<span id="cb98-3"><a href="intro-r.html#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="intro-r.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb98-5"><a href="intro-r.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_complexo)</span></code></pre></div>
<pre><code>## [1] &quot;complex&quot;</code></pre>
<p>Podemos fazer conversão entre esses modos com diversas funções.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="intro-r.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># conversoes entre modos</span></span>
<span id="cb100-2"><a href="intro-r.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>()</span>
<span id="cb100-3"><a href="intro-r.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>()</span>
<span id="cb100-4"><a href="intro-r.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>()</span>
<span id="cb100-5"><a href="intro-r.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="fu">as.logical</span>()</span>
<span id="cb100-6"><a href="intro-r.html#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="fu">as.complex</span>()</span></code></pre></div>
</div>
<div id="estrutura-dos-objetos" class="section level4" number="5.4.1.2">
<h4><span class="header-section-number">5.4.1.2</span> Estrutura dos objetos</h4>
<p>Uma vez entendido a <strong>natureza dos modos dos elementos</strong> do objetos no R, podemos passar para o passo seguinte, e entender como esses <strong>elementos são estruturados</strong> dentro dos objetos.</p>
<p>Essa estruturação irá nos contar sobre a <strong>organização dos elementos</strong>, com relação aos <strong>modos e dimensionalidade</strong> da disposição dos elementos (Figura <a href="intro-r.html#fig:fig-r-estruturas">5.3</a>). De modo bem simples, os elementos podem ser estruturados em cinco tipos:</p>
<ol style="list-style-type: decimal">
<li><strong>Vetores e fatores</strong>: homogênio (<em>um modo</em>) e unidimensional (<em>uma dimensão</em>) Um tipo especial de vetor são os fatores, usados para designar variáveis categóricas</li>
<li><strong>Matrizes</strong>: homogênio (<em>um modo</em>) e bidimensional (<em>duas dimensões</em>)</li>
<li><strong>Arrays</strong>: homogênio (<em>um modo</em>) e multidimensional (<em>mais de duas dimensões</em>)</li>
<li><strong>Data frames</strong>: heterogêneo (<em>mais de um modo</em>) e bidimensional (<em>duas dimensões</em>)</li>
<li><strong>Listas</strong>: heterogêneo (<em>mais de um modo</em>) e unidimensional (<em>uma dimensão</em>)</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:fig-r-estruturas"></span>
<img src="img/cap04_estrutura_dados.png" alt="Estruturas de dados mais comuns de R: vetores, matrizes, arrays, listas e data frames. Adaptado de: Grolemund (2014)." width="70%" />
<p class="caption">
Figura 5.3: Estruturas de dados mais comuns de R: vetores, matrizes, arrays, listas e data frames. Adaptado de: Grolemund (2014).
</p>
</div>
<div id="vetor" class="section level5" number="5.4.1.2.1">
<h5><span class="header-section-number">5.4.1.2.1</span> Vetor</h5>
<p><strong>Vetores</strong> representam o <strong>encadeamento de elementos</strong> numa sequência unidimensionais. No Capítulo YY, vimos o conceito de variáveis aleatórias. No R, essas variáveis podem ser entendidas como vetores. Dessa forma essa estrutura de dados pode ser traduzida como medidas de uma <strong>variável quantitativa</strong> (discretas ou contínuas), <strong>variável binária</strong> (booleana - TRUE e FALSE) ou <strong>descrição</strong> (informações em texto).</p>
<p>Há diversas formas de se <strong>criar um vetor</strong> no R:</p>
<ol style="list-style-type: decimal">
<li>Concatenando elementos com a função <code>c</code></li>
<li>Criando sequências unitárias <code>:</code> ou com a função <code>seq()</code></li>
<li>Criando repetições com a função <code>rep()</code></li>
<li>“Colar” palavras com uma sequência numérica com a função <code>paste()</code> ou <code>paste0()</code></li>
<li>Amostrando aleatoriamente elementos com a função <code>sample()</code></li>
</ol>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="intro-r.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenar elementos numericos</span></span>
<span id="cb101-2"><a href="intro-r.html#cb101-2" aria-hidden="true" tabindex="-1"></a>concatenar <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">18</span>)</span>
<span id="cb101-3"><a href="intro-r.html#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="intro-r.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co"># sequencia unitaria (x1:x2)</span></span>
<span id="cb101-5"><a href="intro-r.html#cb101-5" aria-hidden="true" tabindex="-1"></a>sequencia <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb101-6"><a href="intro-r.html#cb101-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-7"><a href="intro-r.html#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="co"># sequencia com diferentes espacamentos </span></span>
<span id="cb101-8"><a href="intro-r.html#cb101-8" aria-hidden="true" tabindex="-1"></a>sequencia_esp <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>) </span>
<span id="cb101-9"><a href="intro-r.html#cb101-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-10"><a href="intro-r.html#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao</span></span>
<span id="cb101-11"><a href="intro-r.html#cb101-11" aria-hidden="true" tabindex="-1"></a>repeticao <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">times =</span> <span class="dv">5</span>)</span>
<span id="cb101-12"><a href="intro-r.html#cb101-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-13"><a href="intro-r.html#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="co"># cola palavra e sequencia numerica - sem separacao definida (&quot; &quot;)</span></span>
<span id="cb101-14"><a href="intro-r.html#cb101-14" aria-hidden="true" tabindex="-1"></a>colar <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;amostra&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb101-15"><a href="intro-r.html#cb101-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-16"><a href="intro-r.html#cb101-16" aria-hidden="true" tabindex="-1"></a><span class="co"># amostragem aleatória - sem reposição</span></span>
<span id="cb101-17"><a href="intro-r.html#cb101-17" aria-hidden="true" tabindex="-1"></a>amostragem <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">10</span>)</span></code></pre></div>
<p>Como os vetores são homogênios, i.e., só comportam um modo, quando combinamos mais de modo no mesmo objeto existe uma dominância de modos. Existe dessa forma uma <strong>coerção</strong> dos elementos combinados para todos fiquem iguais. Essa dominância segue essa ordem:</p>
<blockquote>
<p><strong><code>DOMINANTE</code></strong> character &gt;&gt;&gt; double &gt;&gt;&gt; interger &gt;&gt;&gt; logical <strong><code>RECESSIVO</code></strong></p>
</blockquote>
<p>Além disso, podemos utilizar as conversões listadas anteiormente para alterar os modos. Vamos exemplificar combinando os vetores criados anteriormente, e convertendo-os.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="intro-r.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coercao</span></span>
<span id="cb102-2"><a href="intro-r.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(colar, amostragem)</span></code></pre></div>
<pre><code>##  [1] &quot;amostra 1&quot; &quot;amostra 2&quot; &quot;amostra 3&quot; &quot;amostra 4&quot; &quot;amostra 5&quot; &quot;100&quot;      
##  [7] &quot;69&quot;        &quot;44&quot;        &quot;35&quot;        &quot;71&quot;        &quot;97&quot;        &quot;60&quot;       
## [13] &quot;5&quot;         &quot;59&quot;        &quot;31&quot;</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="intro-r.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao</span></span>
<span id="cb104-2"><a href="intro-r.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(repeticao)</span></code></pre></div>
<pre><code>##  [1] 1 0 1 0 1 0 1 0 1 0</code></pre>
</div>
<div id="fator" class="section level5" number="5.4.1.2.2">
<h5><span class="header-section-number">5.4.1.2.2</span> Fator</h5>
<p>O <strong>fator</strong> representa medidas de uma <strong>variável qualitativa</strong>, podendo ser <strong>nominal ou ordinal</strong>. É fundamental destacar que fatores no R devem ser entendidos como um vetor de <strong>interger</strong>, i.e., ele é composto por números inteiros representando os níveis da variável categórica.</p>
<p>Para criar um fator no R, usamos uma função específica <code>factor()</code>, na qual podemos especificar os <strong>níveis</strong> com o argumento <strong>leval</strong>, ou fazemos uma conversão usando a função <code>as.factor()</code>. Trabalhar com fatores no <em>R Base</em> não é das tarefas mais agradáveis, mas mais adiante na seção XX usaremos a versão <em>tidyverse</em> usando o pacote <em>forcats</em>.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="intro-r.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fatores nominal</span></span>
<span id="cb106-2"><a href="intro-r.html#cb106-2" aria-hidden="true" tabindex="-1"></a>fator_nominal <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;pastagem&quot;</span>, <span class="st">&quot;cerrado&quot;</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb106-3"><a href="intro-r.html#cb106-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;pastagem&quot;</span>, <span class="st">&quot;cerrado&quot;</span>))</span>
<span id="cb106-4"><a href="intro-r.html#cb106-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-5"><a href="intro-r.html#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="co"># fatores ordinal</span></span>
<span id="cb106-6"><a href="intro-r.html#cb106-6" aria-hidden="true" tabindex="-1"></a>fator_ordinal <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;baixa&quot;</span>, <span class="st">&quot;media&quot;</span>, <span class="st">&quot;alta&quot;</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb106-7"><a href="intro-r.html#cb106-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;baixa&quot;</span>, <span class="st">&quot;media&quot;</span>, <span class="st">&quot;alta&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-8"><a href="intro-r.html#cb106-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-9"><a href="intro-r.html#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao</span></span>
<span id="cb106-10"><a href="intro-r.html#cb106-10" aria-hidden="true" tabindex="-1"></a>fator <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="at">x =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;pastagem&quot;</span>, <span class="st">&quot;cerrado&quot;</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<div id="matriz" class="section level5" number="5.4.1.2.3">
<h5><span class="header-section-number">5.4.1.2.3</span> Matriz</h5>
<p>A <strong>matrix</strong> representa os dados no <strong>formato de tabela</strong>, com linhas e colunas. As linhas representam <strong>unidades amostrais</strong> (locais, transectos, parcelas) e as coluncas representam <strong>variáveis quantitativas</strong> (discretas ou contínuas) ou <strong>descrições</strong> (informações em texto).</p>
<p>Podemos <strong>criar matrizes</strong> no R de <strong>duas formas</strong> principais. A primeira delas <strong>dispondo elementos de um vetor</strong> em um certo número de linhas e colunas com a função <code>matrix()</code>, podendo preencher essa matriz com os elementos do vetor por linhas ou por colunas alterando o argumento <strong>byrow</strong>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="intro-r.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vetor</span></span>
<span id="cb107-2"><a href="intro-r.html#cb107-2" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span></span>
<span id="cb107-3"><a href="intro-r.html#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="intro-r.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix - preenchimento por linhas - horizontal</span></span>
<span id="cb107-5"><a href="intro-r.html#cb107-5" aria-hidden="true" tabindex="-1"></a>ma_row <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> ve, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-6"><a href="intro-r.html#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="intro-r.html#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix - preenchimento por colunas - vertical</span></span>
<span id="cb107-8"><a href="intro-r.html#cb107-8" aria-hidden="true" tabindex="-1"></a>ma_col <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> ve, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>A segundo forma <strong>combinando vetores</strong>, utilizando a função <code>rbind</code> para combinar veores por linha, i.e., vetor embaixo do outro, e <code>cbind</code> para combinar vetores por coluna, i.e., vetor ao lado do outro.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="intro-r.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar dois vetores</span></span>
<span id="cb108-2"><a href="intro-r.html#cb108-2" aria-hidden="true" tabindex="-1"></a>vec_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb108-3"><a href="intro-r.html#cb108-3" aria-hidden="true" tabindex="-1"></a>vec_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb108-4"><a href="intro-r.html#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="intro-r.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar por linhas - vertical - um embaixo do outro</span></span>
<span id="cb108-6"><a href="intro-r.html#cb108-6" aria-hidden="true" tabindex="-1"></a>ma_rbind <span class="ot">&lt;-</span> <span class="fu">rbind</span>(vec_1, vec_2)</span>
<span id="cb108-7"><a href="intro-r.html#cb108-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-8"><a href="intro-r.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar por colunas - horizontal - um ao lado do outro</span></span>
<span id="cb108-9"><a href="intro-r.html#cb108-9" aria-hidden="true" tabindex="-1"></a>ma_cbind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(vec_1, vec_2)</span></code></pre></div>
</div>
<div id="array" class="section level5" number="5.4.1.2.4">
<h5><span class="header-section-number">5.4.1.2.4</span> Array</h5>
<p>O <strong>array</strong> representa <strong>combinação de tabelas</strong>, com linhas, colunas e dimensões. Essa combinação pode ser feita em múltiplas dimensões, mas apesar disso, geralmente é mais comum o uso em Ecologia para três dimensões, por exemplo: <strong>linhas </strong>(unidades amostrais), <strong>colunas</strong> (espécies) e <strong>dimensão</strong> (tempo). Isso gera um “cubo mágico,” onde podemos comparar, nesse caso, comunidades ao longo do tempo.</p>
<p>Podemos criar arrays no R <strong>dispondo elementos de um vetor</strong> em um certo <strong>número de linhas, colunas e dimensões</strong> com a função <code>array()</code>. Em nosso exemplo, vamos compor 10 comunidades de 20 espécies ao longo de cinco períodos.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="intro-r.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># array</span></span>
<span id="cb109-2"><a href="intro-r.html#cb109-2" aria-hidden="true" tabindex="-1"></a>ar <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">data =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="fl">1e3</span>, <span class="at">rep =</span> <span class="cn">TRUE</span>), </span>
<span id="cb109-3"><a href="intro-r.html#cb109-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">5</span>))</span></code></pre></div>
</div>
<div id="data-frame" class="section level5" number="5.4.1.2.5">
<h5><span class="header-section-number">5.4.1.2.5</span> Data frame</h5>
<p>O <strong>data frame</strong> representa dados no <strong>formato de tabela</strong>, com linhas e colunas, muito semelhante à matriz. Mas diferentemente das matrizes, os data frames comportam <strong>mais de um modo</strong> em suas colunas. Dessa forma, as linhas do data frame ainda representam <strong>unidades amostrais</strong> (locais, transectos, parcelas), mas as colunas agora podem representar <strong>descrições</strong> (informações em texto), <strong>variáveis quantitativas</strong> (discretas ou contínuas) e/ou <strong>variáveis qualitativas</strong> (nominais ou ordinais).</p>
<p>A forma mais simples de criar data frames no R é através da <strong>combinação de vetores</strong>. Essa combinação é feita com a função <code>data.frame()</code>, e ocorre de <strong>forma horizontal</strong>, semelhante à função <code>cbind()</code>. Sendo assim, todos os vetores precisam ter o mesmo <strong>número de elementos</strong>, ou seja, <strong>mesmo comprimento</strong>. Podemos ainda nomear as colunas para cada vetor.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="intro-r.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar tres vetores</span></span>
<span id="cb110-2"><a href="intro-r.html#cb110-2" aria-hidden="true" tabindex="-1"></a>vec_ch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;sp1&quot;</span>, <span class="st">&quot;sp2&quot;</span>, <span class="st">&quot;sp3&quot;</span>)</span>
<span id="cb110-3"><a href="intro-r.html#cb110-3" aria-hidden="true" tabindex="-1"></a>vec_nu <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb110-4"><a href="intro-r.html#cb110-4" aria-hidden="true" tabindex="-1"></a>vec_fa <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;campo&quot;</span>, <span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;floresta&quot;</span>))</span>
<span id="cb110-5"><a href="intro-r.html#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="intro-r.html#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame - combinar por colunas - horizontal - um ao lado do outro</span></span>
<span id="cb110-7"><a href="intro-r.html#cb110-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(vec_ch, vec_nu, vec_fa)</span>
<span id="cb110-8"><a href="intro-r.html#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="intro-r.html#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame - nomear as colunas</span></span>
<span id="cb110-10"><a href="intro-r.html#cb110-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">especies =</span> vec_ch, </span>
<span id="cb110-11"><a href="intro-r.html#cb110-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">abundancia =</span> vec_nu, </span>
<span id="cb110-12"><a href="intro-r.html#cb110-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">vegetacao =</span> vec_fa)</span></code></pre></div>
</div>
<div id="lista" class="section level5" number="5.4.1.2.6">
<h5><span class="header-section-number">5.4.1.2.6</span> Lista</h5>
<p>A <strong>lista é tipo especial de vetor</strong>, que aceita objetos como elementos. Ela é a estrutura de dados utilizada para <strong>agrupar objetos</strong>, e é geralmente a <strong>saída de muitas funções</strong> que fazem análises estatísticas.</p>
<p>Podemos criar listas através da função <code>list()</code>. Essa função funciona de forma semelhante à função <code>c()</code> para a criação de vetores, mas agora estamos concatenando elementos. Podemos ainda nomear os elementos que estamos combinando.</p>
<p>Um ponto interessante para entender <strong>data frames</strong>, é que eles são listas, em que todos os elementos (colunas) possuem o mesmo <strong>número de elementos</strong>, ou seja, <strong>mesmo comprimento</strong>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="intro-r.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lista</span></span>
<span id="cb111-2"><a href="intro-r.html#cb111-2" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="co"># vector</span></span>
<span id="cb111-3"><a href="intro-r.html#cb111-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">factor</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="co"># factor</span></span>
<span id="cb111-4"><a href="intro-r.html#cb111-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))) <span class="co"># matrix</span></span>
<span id="cb111-5"><a href="intro-r.html#cb111-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-6"><a href="intro-r.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co"># lista - nomear os elementos</span></span>
<span id="cb111-7"><a href="intro-r.html#cb111-7" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">vector =</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="co"># vector</span></span>
<span id="cb111-8"><a href="intro-r.html#cb111-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">factor =</span> <span class="fu">factor</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="co"># factor</span></span>
<span id="cb111-9"><a href="intro-r.html#cb111-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">matrix =</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))) <span class="co"># matrix</span></span></code></pre></div>
</div>
<div id="funções-1" class="section level5" number="5.4.1.2.7">
<h5><span class="header-section-number">5.4.1.2.7</span> Funções</h5>
<p>Uma última estrutura de objetos criados no R são as <strong>funções</strong>. Elas são objetos <strong>criados pelo usuário</strong> e <strong>reutilizados</strong> para fazer operações específicas. A criação de funções geralmente é um tópico tratado num segundo momento, quando o usuário de R adquire certo conhecimento da linguagem. Aqui abordarem apenas seu funcionamento básico, diferenciando sua estrutura para entendimento e sua diferenciação das demais estruturas. Vamos criar uma função simples que retorna a multiplicação de dois termos.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="intro-r.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar uma funcao</span></span>
<span id="cb112-2"><a href="intro-r.html#cb112-2" aria-hidden="true" tabindex="-1"></a>multi <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y){</span>
<span id="cb112-3"><a href="intro-r.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb112-4"><a href="intro-r.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  mu <span class="ot">&lt;-</span> (x <span class="sc">*</span> y)</span>
<span id="cb112-5"><a href="intro-r.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mu)</span>
<span id="cb112-6"><a href="intro-r.html#cb112-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb112-7"><a href="intro-r.html#cb112-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb112-8"><a href="intro-r.html#cb112-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-9"><a href="intro-r.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co"># uso</span></span>
<span id="cb112-10"><a href="intro-r.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="fu">multi</span>(<span class="dv">42</span>, <span class="dv">42</span>)</span></code></pre></div>
<pre><code>## [1] 1764</code></pre>
</div>
</div>
</div>
<div id="manipulação-de-objetos-unidimensionais" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Manipulação de objetos unidimensionais</h3>
<p>Vamos agora explorar formas de <strong>manipular elementos de objetos unidimensionais</strong>, ou seja vetores, fatores e listas.</p>
<p>A primeira forma de manipulação é através da <strong>indexação</strong>, utilizando os operadores <code>[]</code>. Com a indexação podemos <strong>acessar elementos</strong> de vetores e fatores por <strong>sua posição</strong>. Iremos utilizar números, sequência de números ou operação booleanas para retornar partes dos vetores ou factores. Podemos ainda retirar elementos dos vetores com o operação aritmético <code>-</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="intro-r.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar a amostragem</span></span>
<span id="cb114-2"><a href="intro-r.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb114-3"><a href="intro-r.html#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="intro-r.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># amostrar 10 elementos de uma sequencia</span></span>
<span id="cb114-5"><a href="intro-r.html#cb114-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2</span>, .<span class="dv">05</span>), <span class="dv">10</span>)</span>
<span id="cb114-6"><a href="intro-r.html#cb114-6" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>##  [1] 1.80 0.00 1.20 0.45 1.75 0.85 1.15 0.30 1.90 0.20</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="intro-r.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona o quinto elemento</span></span>
<span id="cb116-2"><a href="intro-r.html#cb116-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 1.75</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="intro-r.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona os elementos de 1 a 5</span></span>
<span id="cb118-2"><a href="intro-r.html#cb118-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 1.80 0.00 1.20 0.45 1.75</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="intro-r.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retira o decimo elemento</span></span>
<span id="cb120-2"><a href="intro-r.html#cb120-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="sc">-</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>## [1] 1.80 0.00 1.20 0.45 1.75 0.85 1.15 0.30 1.90</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="intro-r.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retira os elementos 2 a 9</span></span>
<span id="cb122-2"><a href="intro-r.html#cb122-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>)]</span></code></pre></div>
<pre><code>## [1] 1.8 0.2</code></pre>
<p>Podemos ainda fazer uma <strong>seleção condicional</strong> do vetor. Ao utilizarmos operadores relacionais, teremos como resposta um vetor lógico. Esse vetor lógico pode ser utilizado dentro da indexação para seleção de elementos.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="intro-r.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># quais valores sao maiores que 1?</span></span>
<span id="cb124-2"><a href="intro-r.html#cb124-2" aria-hidden="true" tabindex="-1"></a>ve <span class="sc">&gt;</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="intro-r.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># valores acima de 1</span></span>
<span id="cb126-2"><a href="intro-r.html#cb126-2" aria-hidden="true" tabindex="-1"></a>ve[ve <span class="sc">&gt;</span> <span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 1.80 1.20 1.75 1.15 1.90</code></pre>
<p>Além da indexação, temos algumas <strong>função que nos auxiliam em algumas operações com objetos unidimensionais</strong> listadas na Tabela <a href="intro-r.html#tab:tab-tab-funcoes-conf-uni">5.2</a>.</p>
<table>
<caption><span id="tab:tab-tab-funcoes-conf-uni">Tabela 5.2: </span>Funções para verificação e resumo de dados unidimensionais.</caption>
<thead>
<tr class="header">
<th align="center">Função</th>
<th align="center">Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>max()</code></td>
<td align="center">Valor máximo</td>
</tr>
<tr class="even">
<td align="center"><code>min()</code></td>
<td align="center">Valor mínimo</td>
</tr>
<tr class="odd">
<td align="center"><code>range()</code></td>
<td align="center">Amplitude</td>
</tr>
<tr class="even">
<td align="center"><code>length()</code></td>
<td align="center">Comprimento</td>
</tr>
<tr class="odd">
<td align="center"><code>sum()</code></td>
<td align="center">Soma</td>
</tr>
<tr class="even">
<td align="center"><code>cumsum()</code></td>
<td align="center">Soma cumulativa</td>
</tr>
<tr class="odd">
<td align="center"><code>prod()</code></td>
<td align="center">Produto</td>
</tr>
<tr class="even">
<td align="center"><code>sqrt()</code></td>
<td align="center">Raiz quadrada</td>
</tr>
<tr class="odd">
<td align="center"><code>abs()</code></td>
<td align="center">Valor absoluto</td>
</tr>
<tr class="even">
<td align="center"><code>exp()</code></td>
<td align="center">Expoente</td>
</tr>
<tr class="odd">
<td align="center"><code>log()</code></td>
<td align="center">Logaritmo natural</td>
</tr>
<tr class="even">
<td align="center"><code>log1p()</code></td>
<td align="center">Logaritmo natural mais 1 <em>log(x + 1)</em></td>
</tr>
<tr class="odd">
<td align="center"><code>log2()</code></td>
<td align="center">Logaritmo base 2</td>
</tr>
<tr class="even">
<td align="center"><code>log10()</code></td>
<td align="center">Logaritmo base 10</td>
</tr>
<tr class="odd">
<td align="center"><code>mean()</code></td>
<td align="center">Média</td>
</tr>
<tr class="even">
<td align="center"><code>mean.weighted()</code></td>
<td align="center">Média ponderada</td>
</tr>
<tr class="odd">
<td align="center"><code>var()</code></td>
<td align="center">Variância</td>
</tr>
<tr class="even">
<td align="center"><code>sd()</code></td>
<td align="center">Desvio Padrão</td>
</tr>
<tr class="odd">
<td align="center"><code>mediam()</code></td>
<td align="center">Mediana</td>
</tr>
<tr class="even">
<td align="center"><code>quantile()</code></td>
<td align="center">Quantil</td>
</tr>
<tr class="odd">
<td align="center"><code>quarters()</code></td>
<td align="center">Quartil</td>
</tr>
<tr class="even">
<td align="center"><code>round()</code></td>
<td align="center">Arredondamento</td>
</tr>
<tr class="odd">
<td align="center"><code>sort()</code></td>
<td align="center">Ordenação</td>
</tr>
<tr class="even">
<td align="center"><code>order()</code></td>
<td align="center">Posição ordenada</td>
</tr>
<tr class="odd">
<td align="center"><code>rev()</code></td>
<td align="center">Reverso</td>
</tr>
<tr class="even">
<td align="center"><code>unique()</code></td>
<td align="center">Únicos</td>
</tr>
<tr class="odd">
<td align="center"><code>summary()</code></td>
<td align="center">Resumo estatístico</td>
</tr>
<tr class="even">
<td align="center"><code>cut()</code></td>
<td align="center">Divide variável contínua em fator</td>
</tr>
<tr class="odd">
<td align="center"><code>pretty()</code></td>
<td align="center">Divide variável contínua em intervalos</td>
</tr>
<tr class="even">
<td align="center"><code>scale()</code></td>
<td align="center">Padronização e centralização</td>
</tr>
<tr class="odd">
<td align="center"><code>sub()</code></td>
<td align="center">Substitui caracteres</td>
</tr>
<tr class="even">
<td align="center"><code>grep()</code></td>
<td align="center">Posição de caracteres</td>
</tr>
<tr class="odd">
<td align="center"><code>any()</code></td>
<td align="center">Algum valor?</td>
</tr>
<tr class="even">
<td align="center"><code>all()</code></td>
<td align="center">Todos os valores?</td>
</tr>
<tr class="odd">
<td align="center"><code>which()</code></td>
<td align="center">Quais valores?</td>
</tr>
<tr class="even">
<td align="center"><code>subset()</code></td>
<td align="center">Subconjunto</td>
</tr>
<tr class="odd">
<td align="center"><code>ifelse()</code></td>
<td align="center">Operação condicional</td>
</tr>
</tbody>
</table>
<p>Para <strong>listas</strong>, também podemos usar a indexação <code>[]</code> para <strong>acessar ou retirar elementos</strong>.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="intro-r.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lista</span></span>
<span id="cb128-2"><a href="intro-r.html#cb128-2" aria-hidden="true" tabindex="-1"></a>li <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">elem1 =</span> <span class="dv">1</span>, <span class="at">elem2 =</span> <span class="dv">2</span>, <span class="at">elem3 =</span> <span class="dv">3</span>)</span>
<span id="cb128-3"><a href="intro-r.html#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="intro-r.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o primeiro elemento</span></span>
<span id="cb128-5"><a href="intro-r.html#cb128-5" aria-hidden="true" tabindex="-1"></a>li[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $elem1
## [1] 1</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="intro-r.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar o primeiro elemento</span></span>
<span id="cb130-2"><a href="intro-r.html#cb130-2" aria-hidden="true" tabindex="-1"></a>li[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $elem2
## [1] 2
## 
## $elem3
## [1] 3</code></pre>
<p>Podemos ainda usar a indexação dupla <code>[[]]</code> para <strong>acessar os valores dos elementos</strong>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="intro-r.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o valor do primeiro elemento</span></span>
<span id="cb132-2"><a href="intro-r.html#cb132-2" aria-hidden="true" tabindex="-1"></a>li[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="intro-r.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o valor do segundo elemento</span></span>
<span id="cb134-2"><a href="intro-r.html#cb134-2" aria-hidden="true" tabindex="-1"></a>li[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Para <strong>listas nomeadas</strong>, podemos ainda utilizar o operador <code>$</code> para acessar elementos pelo nome.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="intro-r.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o primeiro elemento</span></span>
<span id="cb136-2"><a href="intro-r.html#cb136-2" aria-hidden="true" tabindex="-1"></a>li<span class="sc">$</span>elem1</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>E ainda podemos utilizar funções para medir o comprimento dessa lista, listar os nomes dos elementos ou ainda renomear os elementos: <code>length()</code> e <code>names()</code>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="intro-r.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprimento</span></span>
<span id="cb138-2"><a href="intro-r.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(li)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="intro-r.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nomes</span></span>
<span id="cb140-2"><a href="intro-r.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(li)</span></code></pre></div>
<pre><code>## [1] &quot;elem1&quot; &quot;elem2&quot; &quot;elem3&quot;</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="intro-r.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renomear</span></span>
<span id="cb142-2"><a href="intro-r.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(li) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;elemento0&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb142-3"><a href="intro-r.html#cb142-3" aria-hidden="true" tabindex="-1"></a>li</span></code></pre></div>
<pre><code>## $elemento01
## [1] 1
## 
## $elemento02
## [1] 2
## 
## $elemento03
## [1] 3</code></pre>
</div>
<div id="manipulação-de-objetos-multidimensionais" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Manipulação de objetos multidimensionais</h3>
<p>Da mesma forma que para objetos unidimensionais, <strong>manipular elementos de objetos multidimensionais</strong>, ou seja matrizes, data frames e arrays.</p>
<p>Novamente, a primeira forma de manipulação é através da <strong>indexação</strong>, utilizando os operadores <code>[]</code>. Com a indexação podemos <strong>acessar elementos</strong> de matrizes, data frames e arrays por <strong>sua posição</strong>. Podemos ainda retirar elementos dos vetores com o operação aritmético <code>-</code>.</p>
<p>Entretanto, agora temos <strong>mais de uma dimensão</strong> na estruturação dos elementos dentro dos objetos. Assim, utilizamos números, sequência de números ou operação booleanas para retornar partes desses objetos, mas as dimensões têm de ser explicitadas, e separadas por <strong>vírgulas</strong>, i.e., para acessar linhas e colunas, listamos respectivamente números antes e depois da vírgula. Essa indexação funciona para matrizes e data frames. Para arrays, especificamos as dimensões também separadas por vírgulas para acessar outras dimensões.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="intro-r.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># matriz</span></span>
<span id="cb144-2"><a href="intro-r.html#cb144-2" aria-hidden="true" tabindex="-1"></a>ma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb144-3"><a href="intro-r.html#cb144-3" aria-hidden="true" tabindex="-1"></a>ma</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="intro-r.html#cb146-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">3</span>, ] <span class="co"># linha 3</span></span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="intro-r.html#cb148-1" aria-hidden="true" tabindex="-1"></a>ma[, <span class="dv">2</span>] <span class="co"># coluna 2</span></span></code></pre></div>
<pre><code>## [1] 5 6 7 8</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="intro-r.html#cb150-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># elemento da linha 1 e coluna 2</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="intro-r.html#cb152-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># elementos da linha 1 e coluna 1 e 2</span></span></code></pre></div>
<pre><code>## [1] 1 5</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="intro-r.html#cb154-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">1</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)] <span class="co"># elementos da linha 1 e coluna 1 e 3</span></span></code></pre></div>
<pre><code>## [1] 1 9</code></pre>
<p>Para data frames, além de utilizar <strong>números e/ou sequências de numeros</strong> dentro do operador <code>[]</code> simples, assim como podemos utilizar o operador <code>[[]]</code> duplo para retornar apenas o valores de uma colunas. Se as colunas <strong>estiverem nomeadas</strong>, podemos utilizar o nome da coluna de interesse entre aspas dentro dos operadores <code>[]</code> (retorna coluna) e <code>[[]]</code> (retorna apenas os valores), assim como ainda podemos utilizar o operador <code>$</code>. Essas últimas operações <strong>retornam um vetor</strong>, para o qual podemos fazer operações de vetores ou ainda <strong>atualizar</strong> o valor dessa coluna selecionada ou <strong>adicionar</strong> outra coluna.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="intro-r.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar tres vetores</span></span>
<span id="cb156-2"><a href="intro-r.html#cb156-2" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;sp&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb156-3"><a href="intro-r.html#cb156-3" aria-hidden="true" tabindex="-1"></a>abu <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb156-4"><a href="intro-r.html#cb156-4" aria-hidden="true" tabindex="-1"></a>flo <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;campo&quot;</span>, <span class="st">&quot;floresta&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>))</span>
<span id="cb156-5"><a href="intro-r.html#cb156-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-6"><a href="intro-r.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame</span></span>
<span id="cb156-7"><a href="intro-r.html#cb156-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(sp, abu, flo)</span>
<span id="cb156-8"><a href="intro-r.html#cb156-8" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##      sp abu      flo
## 1   sp1   1    campo
## 2   sp2   2    campo
## 3   sp3   3    campo
## 4   sp4   4    campo
## 5   sp5   5    campo
## 6   sp6   6 floresta
## 7   sp7   7 floresta
## 8   sp8   8 floresta
## 9   sp9   9 floresta
## 10 sp10  10 floresta</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="intro-r.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [] - numeros</span></span>
<span id="cb158-2"><a href="intro-r.html#cb158-2" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;sp1&quot;  &quot;sp2&quot;  &quot;sp3&quot;  &quot;sp4&quot;  &quot;sp5&quot;  &quot;sp6&quot;  &quot;sp7&quot;  &quot;sp8&quot;  &quot;sp9&quot;  &quot;sp10&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="intro-r.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [] - nome das colunas - retorna coluna</span></span>
<span id="cb160-2"><a href="intro-r.html#cb160-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;flo&quot;</span>]</span></code></pre></div>
<pre><code>##         flo
## 1     campo
## 2     campo
## 3     campo
## 4     campo
## 5     campo
## 6  floresta
## 7  floresta
## 8  floresta
## 9  floresta
## 10 floresta</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="intro-r.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [[]] - nome das colunas - retorna apenas os valores</span></span>
<span id="cb162-2"><a href="intro-r.html#cb162-2" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&quot;flo&quot;</span>]]</span></code></pre></div>
<pre><code>##  [1] campo    campo    campo    campo    campo    floresta floresta floresta
##  [9] floresta floresta
## Levels: campo floresta</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="intro-r.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># $ funciona apenas para data frame </span></span>
<span id="cb164-2"><a href="intro-r.html#cb164-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>sp</span></code></pre></div>
<pre><code>##  [1] &quot;sp1&quot;  &quot;sp2&quot;  &quot;sp3&quot;  &quot;sp4&quot;  &quot;sp5&quot;  &quot;sp6&quot;  &quot;sp7&quot;  &quot;sp8&quot;  &quot;sp9&quot;  &quot;sp10&quot;</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="intro-r.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># operacao de vetors</span></span>
<span id="cb166-2"><a href="intro-r.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df<span class="sc">$</span>abu)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="intro-r.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># converter colunas</span></span>
<span id="cb168-2"><a href="intro-r.html#cb168-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>abu <span class="ot">&lt;-</span> <span class="fu">as.character</span>(df<span class="sc">$</span>abu)</span>
<span id="cb168-3"><a href="intro-r.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(df<span class="sc">$</span>abu)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="intro-r.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adicionar colunas</span></span>
<span id="cb170-2"><a href="intro-r.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb170-3"><a href="intro-r.html#cb170-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>abu2 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">nrow</span>(df), <span class="at">rep =</span> <span class="cn">TRUE</span>)</span>
<span id="cb170-4"><a href="intro-r.html#cb170-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-5"><a href="intro-r.html#cb170-5" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##      sp abu      flo abu2
## 1   sp1   1    campo    0
## 2   sp2   2    campo    0
## 3   sp3   3    campo    0
## 4   sp4   4    campo    0
## 5   sp5   5    campo    1
## 6   sp6   6 floresta    1
## 7   sp7   7 floresta    1
## 8   sp8   8 floresta    1
## 9   sp9   9 floresta    0
## 10 sp10  10 floresta    1</code></pre>
<p>Podemos ainda fazer <strong>seleções condicionais</strong> para <strong>retornar linhas</strong> com valores que temos interesse, semelhante ao uso de filtro de uma planilha eletrônica.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="intro-r.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar linhas de uma matriz ou data frame </span></span>
<span id="cb172-2"><a href="intro-r.html#cb172-2" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>abu <span class="sc">&gt;</span> <span class="dv">4</span>, ]</span></code></pre></div>
<pre><code>##    sp abu      flo abu2
## 5 sp5   5    campo    1
## 6 sp6   6 floresta    1
## 7 sp7   7 floresta    1
## 8 sp8   8 floresta    1
## 9 sp9   9 floresta    0</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="intro-r.html#cb174-1" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>flo <span class="sc">==</span> <span class="st">&quot;floresta&quot;</span>, ]</span></code></pre></div>
<pre><code>##      sp abu      flo abu2
## 6   sp6   6 floresta    1
## 7   sp7   7 floresta    1
## 8   sp8   8 floresta    1
## 9   sp9   9 floresta    0
## 10 sp10  10 floresta    1</code></pre>
<p>Além disso, há uma série de funções para conferência e manipulação de dados que listamos na Tabela <a href="intro-r.html#tab:tab-funcoes-conf-multi">5.3</a>.</p>
<table>
<caption><span id="tab:tab-funcoes-conf-multi">Tabela 5.3: </span>Funções para verificação e resumo de dados multidimensionais.</caption>
<thead>
<tr class="header">
<th align="center">Função</th>
<th align="center">Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>head()</code></td>
<td align="center">Mostra as primeiras 6 linhas</td>
</tr>
<tr class="even">
<td align="center"><code>tail()</code></td>
<td align="center">Mostra as últimas 6 linhas</td>
</tr>
<tr class="odd">
<td align="center"><code>nrow()</code></td>
<td align="center">Mostra o número de linhas</td>
</tr>
<tr class="even">
<td align="center"><code>ncol()</code></td>
<td align="center">Mostra o número de colunas</td>
</tr>
<tr class="odd">
<td align="center"><code>dim()</code></td>
<td align="center">Mostra o número de linhas e de colunas</td>
</tr>
<tr class="even">
<td align="center"><code>rownames()</code></td>
<td align="center">Mostra os nomes das linhas (locais)</td>
</tr>
<tr class="odd">
<td align="center"><code>colnames()</code></td>
<td align="center">Mostra os nomes das colunas (variáveis)</td>
</tr>
<tr class="even">
<td align="center"><code>str()</code></td>
<td align="center">Mostra as classes de cada coluna (estrutura)</td>
</tr>
<tr class="odd">
<td align="center"><code>summary()</code></td>
<td align="center">Mostra um resumo dos valores de cada coluna</td>
</tr>
<tr class="even">
<td align="center"><code>rowSums()</code></td>
<td align="center">Calcula a soma das linhas (horizontal)</td>
</tr>
<tr class="odd">
<td align="center"><code>colSums()</code></td>
<td align="center">Calcula a soma das colunas (vertical)</td>
</tr>
<tr class="even">
<td align="center"><code>rowMeans()</code></td>
<td align="center">Calcula a média das linhas (horizontal)</td>
</tr>
<tr class="odd">
<td align="center"><code>colMeans()</code></td>
<td align="center">Calcula a média das colunas (vertical)</td>
</tr>
<tr class="even">
<td align="center"><code>str()</code></td>
<td align="center">Mostra a estrutura dos dados</td>
</tr>
<tr class="odd">
<td align="center"><code>table()</code></td>
<td align="center">Tabulação cruzada</td>
</tr>
<tr class="even">
<td align="center"><code>t()</code></td>
<td align="center">Matriz ou data frame transposto</td>
</tr>
</tbody>
</table>
</div>
<div id="valores-faltantes-e-especiais" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Valores faltantes e especiais</h3>
<p><strong>Valores faltantes e especiais</strong> são <strong>valores reservados</strong> que representam dados faltantes, indefinições matemáticas, infinitos e objetos nulos.</p>
<ol style="list-style-type: decimal">
<li><strong>NA (<em>Not Available</em>)</strong>: significa dado faltante/indisponível</li>
<li><strong>NaN (<em>Not a Number</em>)</strong>: representa indefinições matemáticas</li>
<li><strong>Inf (<em>Infinito</em>)</strong>: é um número muito grande ou um limite matemático</li>
<li><strong>NULL <em>(Nulo</em>)</strong>: representa um objeto nulo, sendo útil para preenchimento de laços e outras aplicações de programação</li>
</ol>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="intro-r.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame com elemento NA</span></span>
<span id="cb176-2"><a href="intro-r.html#cb176-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">var1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="cn">NA</span>), <span class="at">var2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">2</span>))</span>
<span id="cb176-3"><a href="intro-r.html#cb176-3" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   var1 var2
## 1    1    1
## 2    4    4
## 3    2    5
## 4   NA    2</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="intro-r.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resposta booleana para elementos na</span></span>
<span id="cb178-2"><a href="intro-r.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(df)</span></code></pre></div>
<pre><code>##       var1  var2
## [1,] FALSE FALSE
## [2,] FALSE FALSE
## [3,] FALSE FALSE
## [4,]  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="intro-r.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># algum elemento é na?</span></span>
<span id="cb180-2"><a href="intro-r.html#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(df))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="intro-r.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover as linhas com nas</span></span>
<span id="cb182-2"><a href="intro-r.html#cb182-2" aria-hidden="true" tabindex="-1"></a>df_sem_na <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(df)</span>
<span id="cb182-3"><a href="intro-r.html#cb182-3" aria-hidden="true" tabindex="-1"></a>df_sem_na</span></code></pre></div>
<pre><code>##   var1 var2
## 1    1    1
## 2    4    4
## 3    2    5</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="intro-r.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># substituir nas por 0</span></span>
<span id="cb184-2"><a href="intro-r.html#cb184-2" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">is.na</span>(df)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb184-3"><a href="intro-r.html#cb184-3" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   var1 var2
## 1    1    1
## 2    4    4
## 3    2    5
## 4    0    2</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="intro-r.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nan - not a number</span></span>
<span id="cb186-2"><a href="intro-r.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="intro-r.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="intro-r.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># limite matematico</span></span>
<span id="cb190-2"><a href="intro-r.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="intro-r.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numero grande</span></span>
<span id="cb192-2"><a href="intro-r.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="sc">^</span><span class="dv">310</span></span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="intro-r.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># objeto nulo</span></span>
<span id="cb194-2"><a href="intro-r.html#cb194-2" aria-hidden="true" tabindex="-1"></a>nulo <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb194-3"><a href="intro-r.html#cb194-3" aria-hidden="true" tabindex="-1"></a>nulo</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="diretório-de-trabalho" class="section level3" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Diretório de trabalho</h3>
<p>O diretório de trabalho é o <strong>endereço da pasta (ou diretório)</strong> de onde o R irá <strong>importar ou exportar</strong> os nossos dados.</p>
<p>Podemos utilizar o próprio RStudio para tal tarefa, indo em Session &gt; Set Work Directory &gt; Choose Directory…, ou simplesmente utilizar o atalho <code>ctrl + shift + H</code>.</p>
<p>Podemos ainda utilizar as funções do R para definir o diretório. Para tanto, podemos navegar com o aplicativo de gerenciador de arquivos (e.g. Windows Explorer) até nosso diretório de interesse, e copiar o endereço na barra superior. Voltamos para o R e colamos esse endereço entre aspas como um argumento da função <code>setwd()</code>. É fundamental destacar que em Sistemas Operacionais Windows é necessário inverter as barras (<code>\</code> por <code>/</code>).</p>
<p>Aconselhamos ainda utilizar as funções <code>getwd()</code> para retornar o diretório definido na sessão do R, assim como as funções <code>dir()</code> ou <code>list.files()</code> para listagem dos arquivos no diretório, ambas medidas de conferência do diretório correto.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="intro-r.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir o diretorio de trabalho</span></span>
<span id="cb196-2"><a href="intro-r.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/mude/data/github/livro_r_ecologia/dados&quot;</span>)</span>
<span id="cb196-3"><a href="intro-r.html#cb196-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-4"><a href="intro-r.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar o diretorio</span></span>
<span id="cb196-5"><a href="intro-r.html#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb196-6"><a href="intro-r.html#cb196-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-7"><a href="intro-r.html#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co"># listar os arquivos no diretorio</span></span>
<span id="cb196-8"><a href="intro-r.html#cb196-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>()</span>
<span id="cb196-9"><a href="intro-r.html#cb196-9" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>()</span></code></pre></div>
</div>
<div id="importar-dados" class="section level3" number="5.4.6">
<h3><span class="header-section-number">5.4.6</span> Importar dados</h3>
<p>Uma das operações mais corriqueiras do R, antes de realizar alguma análise, é a de <strong>importar dados</strong> que foram <strong>tabulados numa planilha eletrônica</strong> e salvos no formato .csv, .txt ou .xlsx. Ao importar esse tipo de dado para o R, o formato que o mesmo assume, se nenhum parâmetro for especificado, é o da classes <code>dataframe</code>, prevendo que a planilha de dados possua colunas com diferentes modos.</p>
<p>Existe diversas formas de importar dados para o R. Podemos importar utilizando o RStudio, indo na janela <strong>Environment</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (3)) e clicar em “Importar Dataset.”</p>
<p>Entretanto, aconselhamos o <strong>uso de funções</strong> que fiquem salvas em um script para aumentar a reprodutibilidade do script. Dessa forma, as <strong>três principais funções</strong> para importar os arquivos nos <strong>três principais extensões</strong> (.csv, .txt ou .xlsx) são, respectivamente: <code>read.csv()</code>, <code>read.table()</code> e `openxlsx::read.xlsx()``, sendo o último do pacote <em>openxlsx</em>.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="intro-r.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacote openxlsx</span></span>
<span id="cb197-2"><a href="intro-r.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>)</span>
<span id="cb197-3"><a href="intro-r.html#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span></code></pre></div>
<p>Para exemplificar como importar dados, vamos usar os dados de <strong>comunidades de anfíbios da Mata Atlântica</strong> (Atlantic Amphibians, Vancine et al. 2018). Iremos fazer o download diretamente do site da fonte dos dados.</p>
<p>Antes vamos antes escolher um diretório de trabalho com a função <code>setwd()</code>, e em seguida criar um diretório com a função <code>dir.create()</code> chamado “dados.” Em seguida, vamos mudar nosso diretóri para essa pasta, e criar mais um diretório chamado “tabelas,” e definir esse diretório para fazer o download.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="intro-r.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># escolher um diretorio</span></span>
<span id="cb198-2"><a href="intro-r.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/mude/data/github/livro_r_ecologia&quot;</span>)</span>
<span id="cb198-3"><a href="intro-r.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="intro-r.html#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="co"># criar um diretorio &#39;dados&#39;</span></span>
<span id="cb198-5"><a href="intro-r.html#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;dados&quot;</span>)</span>
<span id="cb198-6"><a href="intro-r.html#cb198-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-7"><a href="intro-r.html#cb198-7" aria-hidden="true" tabindex="-1"></a><span class="co"># escolher diretorio &#39;dados&#39;</span></span>
<span id="cb198-8"><a href="intro-r.html#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;dados&quot;</span>)</span>
<span id="cb198-9"><a href="intro-r.html#cb198-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-10"><a href="intro-r.html#cb198-10" aria-hidden="true" tabindex="-1"></a><span class="co"># criar um diretorio &#39;tabelas&#39;</span></span>
<span id="cb198-11"><a href="intro-r.html#cb198-11" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;tabelas&quot;</span>)</span>
<span id="cb198-12"><a href="intro-r.html#cb198-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-13"><a href="intro-r.html#cb198-13" aria-hidden="true" tabindex="-1"></a><span class="co"># escolher diretorio &#39;tabelas&#39;</span></span>
<span id="cb198-14"><a href="intro-r.html#cb198-14" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;tabelas&quot;</span>)</span></code></pre></div>
<p>Agora podemos fazer o download de um arquivo <code>.zip</code> e extrair as tabelas usando a função <code>unzip()</code> nesse mesmo diretório.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="intro-r.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download</span></span>
<span id="cb199-2"><a href="intro-r.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">&quot;https://esajournals.onlinelibrary.wiley.com/action/downloadSupplement?doi=10.1002%2Fecy.2392&amp;file=ecy2392-sup-0001-DataS1.zip&quot;</span>,</span>
<span id="cb199-3"><a href="intro-r.html#cb199-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">destfile =</span> <span class="st">&quot;atlantic_amphibians.zip&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span>)</span>
<span id="cb199-4"><a href="intro-r.html#cb199-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-5"><a href="intro-r.html#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="co"># unzip</span></span>
<span id="cb199-6"><a href="intro-r.html#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span>(<span class="at">zipfile =</span> <span class="st">&quot;atlantic_amphibians.zip&quot;</span>)</span></code></pre></div>
<p>Agora podemos importar a tabela de dados com a função <code>read.csv()</code>, atribuindo ao objeto <code>aa_locais</code>.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="intro-r.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importar tabela de locais</span></span>
<span id="cb200-2"><a href="intro-r.html#cb200-2" aria-hidden="true" tabindex="-1"></a>aa_locais <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;dados/tabelas/ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>)</span></code></pre></div>
<p>Esse arquivo foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>. Caso tivesse sido criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, usaríamos a função <code>read.csv2()</code>.</p>
</div>
<div id="conferência-de-dados-importados" class="section level3" number="5.4.7">
<h3><span class="header-section-number">5.4.7</span> Conferência de dados importados</h3>
<p>Uma vez importados os dados para o R, geralmente antes de inicarmos qualquer manejo, visualização ou análise de dados, fazemos a <strong>conferência desses dados</strong>. Para isso, podemos utilizar as funções listadas na Tabela <a href="intro-r.html#tab:tab-funcoes-conf-multi">5.3</a>.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="intro-r.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># primeiras linhas</span></span>
<span id="cb201-2"><a href="intro-r.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(aa_locais)</span></code></pre></div>
<pre><code>##        id reference_number species_number record sampled_habitat active_methods
## 1 amp1001             1001             19     ab           fo,ll             as
## 2 amp1002             1002             16     co        fo,la,ll             as
## 3 amp1003             1002             14     co        fo,la,ll             as
## 4 amp1004             1002             13     co        fo,la,ll             as
## 5 amp1005             1003             30     co        fo,ll,br             as
## 6 amp1006             1004             42     co  tp,pp,la,ll,is           &lt;NA&gt;
##   passive_methods complementary_methods      period month_start year_start
## 1              pt                  &lt;NA&gt; mo,da,tw,ni           9       2000
## 2              pt                  &lt;NA&gt; mo,da,tw,ni          12       2007
## 3              pt                  &lt;NA&gt; mo,da,tw,ni          12       2007
## 4              pt                  &lt;NA&gt; mo,da,tw,ni          12       2007
## 5            &lt;NA&gt;                  &lt;NA&gt;    mo,da,ni           7       1988
## 6            &lt;NA&gt;                  &lt;NA&gt;        &lt;NA&gt;          NA         NA
##   month_finish year_finish effort_months country    state state_abbreviation
## 1            1        2002            16  Brazil Piau\xed              BR-PI
## 2            5        2009            17  Brazil Cear\xe1              BR-CE
## 3            5        2009            17  Brazil Cear\xe1              BR-CE
## 4            5        2009            17  Brazil Cear\xe1              BR-CE
## 5            8        2001           157  Brazil Cear\xe1              BR-CE
## 6           NA          NA            NA  Brazil Cear\xe1              BR-CE
##                    municipality                                        site
## 1               Canto do Buriti      Parque Nacional Serra das Confus\xf5es
## 2 S\xe3o Gon\xe7alo do Amarante                                       Dunas
## 3 S\xe3o Gon\xe7alo do Amarante Jardim Bot\xe2nico\xa0Municipal de\xa0Bauru
## 4 S\xe3o Gon\xe7alo do Amarante                                    Ta\xedba
## 5                   Baturit\xe9                        Serra de Baturit\xe9
## 6                   Quebrangulo       Reserva Biol\xf3gica de Pedra Talhada
##    latitude longitude coordinate_precision altitude temperature precipitation
## 1 -8.680000 -43.42194                   gm      543       24.98           853
## 2 -3.545527 -38.85783                   dd       15       26.53          1318
## 3 -3.574194 -38.88869                   dd       29       26.45          1248
## 4 -3.515250 -38.91880                   dd       25       26.55          1376
## 5 -4.280556 -38.91083                   gm      750       21.35          1689
## 6 -9.229167 -36.42806                 &lt;NA&gt;      745       20.45          1249</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intro-r.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ultimas linhas</span></span>
<span id="cb203-2"><a href="intro-r.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(aa_locais)</span></code></pre></div>
<pre><code>##           id reference_number species_number record sampled_habitat
## 1158 amp2158             1389              3     co            &lt;NA&gt;
## 1159 amp2159             1389              9     co            &lt;NA&gt;
## 1160 amp2160             1389              6     co            &lt;NA&gt;
## 1161 amp2161             1389              1     co            &lt;NA&gt;
## 1162 amp2162             1389              2     co            &lt;NA&gt;
## 1163 amp2163             1389              2     co            &lt;NA&gt;
##      active_methods passive_methods complementary_methods period month_start
## 1158           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1159           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1160           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1161           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1162           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1163           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
##      year_start month_finish year_finish effort_months   country    state
## 1158         NA           NA          NA            NA Argentina Misiones
## 1159         NA           NA          NA            NA Argentina Misiones
## 1160         NA           NA          NA            NA Argentina Misiones
## 1161         NA           NA          NA            NA Argentina Misiones
## 1162         NA           NA          NA            NA Argentina Misiones
## 1163         NA           NA          NA            NA Argentina Misiones
##      state_abbreviation    municipality                                   site
## 1158               AR-N Manuel Belgrano                   Comandante Andresito
## 1159               AR-N         Posadas                                Posadas
## 1160               AR-N      Montecarlo                             Montecarlo
## 1161               AR-N       San Pedro                      Refugio Mocon\xe1
## 1162               AR-N     Caingu\xe1s Balneario Municipal Cu\xf1\xe1 Pir\xfa
## 1163               AR-N        Ober\xe1                Chacra San Juan de Dios
##       latitude longitude coordinate_precision altitude temperature
## 1158 -25.66944 -54.04556                  gms      251       19.94
## 1159 -27.45333 -55.89250                  gms      105       21.30
## 1160 -26.56889 -53.60889                  gms      597       18.35
## 1161 -27.14083 -53.92611                  gms      202       19.92
## 1162 -27.08722 -54.95278                  gms      213       21.04
## 1163 -27.47333 -55.17194                  gms      254       20.67
##      precipitation
## 1158          1780
## 1159          1768
## 1160          1954
## 1161          1850
## 1162          1553
## 1163          1683</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="intro-r.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numero de linhas e colunas</span></span>
<span id="cb205-2"><a href="intro-r.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(aa_locais)</span></code></pre></div>
<pre><code>## [1] 1163</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="intro-r.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(aa_locais)</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="intro-r.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(aa_locais)</span></code></pre></div>
<pre><code>## [1] 1163   25</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="intro-r.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nome das linhas e colunas</span></span>
<span id="cb211-2"><a href="intro-r.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(aa_locais)</span>
<span id="cb211-3"><a href="intro-r.html#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(aa_locais)</span>
<span id="cb211-4"><a href="intro-r.html#cb211-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-5"><a href="intro-r.html#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="co"># estrutura dos dados</span></span>
<span id="cb211-6"><a href="intro-r.html#cb211-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(aa_locais)</span>
<span id="cb211-7"><a href="intro-r.html#cb211-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-8"><a href="intro-r.html#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo dos dados</span></span>
<span id="cb211-9"><a href="intro-r.html#cb211-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(aa_locais)</span>
<span id="cb211-10"><a href="intro-r.html#cb211-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-11"><a href="intro-r.html#cb211-11" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar nas</span></span>
<span id="cb211-12"><a href="intro-r.html#cb211-12" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(aa_locais))</span>
<span id="cb211-13"><a href="intro-r.html#cb211-13" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">is.na</span>(aa_locais))</span>
<span id="cb211-14"><a href="intro-r.html#cb211-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-15"><a href="intro-r.html#cb211-15" aria-hidden="true" tabindex="-1"></a><span class="co"># remover as linhas com nas</span></span>
<span id="cb211-16"><a href="intro-r.html#cb211-16" aria-hidden="true" tabindex="-1"></a>aa_locais_na <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(aa_locais)</span></code></pre></div>
</div>
<div id="exportar-dados" class="section level3" number="5.4.8">
<h3><span class="header-section-number">5.4.8</span> Exportar dados</h3>
<p>Uma vez realizado as operações de manipulações ou tendo dados que foram analisados e guardados num objeto no formato de data frame ou matriz, podemos <strong>exportar esses dados</strong> do R para o diretório que definimos anteriormente.</p>
<p>Para tanto, podemos utilizar funções de <strong>escrita de dados</strong>, como <code>write.csv()</code>, <code>write.table()</code> e <code>openxlsx::write.xlsx()</code>. Dois pontos são fundamentais: 1. o nome do arquivo tem de estar entre aspas e no final dele deve constar a extensão que pretende que o arquivo tenha; 2. é interessante utilizar os argumentos <strong>row.names = FALSE</strong> e <strong>quote</strong>, para que o arquivo escrito não tenha o nome das linhas ou aspas em todas as células.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="intro-r.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar dados na extensao .csv</span></span>
<span id="cb212-2"><a href="intro-r.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(aa_locais_na, <span class="st">&quot;ATLANTIC_AMPHIBIAN_sites_na.csv&quot;</span>, </span>
<span id="cb212-3"><a href="intro-r.html#cb212-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span>
<span id="cb212-4"><a href="intro-r.html#cb212-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-5"><a href="intro-r.html#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar dados na extensao .txt</span></span>
<span id="cb212-6"><a href="intro-r.html#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(aa_locais_na, <span class="st">&quot;ATLANTIC_AMPHIBIAN_sites_na.txt&quot;</span>, </span>
<span id="cb212-7"><a href="intro-r.html#cb212-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span>
<span id="cb212-8"><a href="intro-r.html#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="intro-r.html#cb212-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-10"><a href="intro-r.html#cb212-10" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar dados na extensao .xlsx</span></span>
<span id="cb212-11"><a href="intro-r.html#cb212-11" aria-hidden="true" tabindex="-1"></a>openxlsx<span class="sc">::</span><span class="fu">write.xlsx</span>(aa_locais_na, <span class="st">&quot;ATLANTIC_AMPHIBIAN_sites_na.xlsx&quot;</span>, </span>
<span id="cb212-12"><a href="intro-r.html#cb212-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
<div id="tidyverse" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Tidyverse</h2>
<div id="contextualização" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Contextualização</h3>
<p>Como todo idioma, a linguagem R vem passando por transformações nos últimos anos. Grande parte dessas mudanças estão dentro do paradigma da <strong>Ciência de Dados (<em>Data Science</em>)</strong>, uma nova área de conhecimento que vem se moldando acompanhando o desenvolvimento da sociedade em torno da era digital e da grande quantidade de dados gerados e disponíveis pela internet e computação, de onde advém os pilares das inovações tecnológicas: <em>Big Data</em>, <em>Machine Learning</em>, e <em>Internet of Things</em>.</p>
<p>A grande necessidade de computação parapara desenvolver essa nova abordagem, colocaram o <strong>R e o Python</strong> como as <strong>principais linguagens de programação</strong> frente à esses novos desafios. Apesar de não serem as únicas utilizadas para esses propósitos, elas rapidamente se tornaram uma das <strong>melhores escolhas</strong>, dado vários fatores como: serem livres, possuir comunidade ativa, grande e contribuidora, serem linguagens de interpretação (orientadas à objeto), e relativamente fáceis de serem aprendidas.</p>
<p>Essas mudanças e adaptações da linguagem R para a Ciência de Dados começaram à ser implementadas principalmente devido a um pesquisador, <a href="http://hadley.nz/">Hadley Wickham</a>, que iniciou sua contribuição à comunidade R com o desenvolvimento do já consagrado pacote <em>ggplot2</em> (Wickham 2009, Wickham 2016) para a composição de gráficos no R (ver mais no capítulo XX), baseado na gramática de gráficos (Wilkinson 2005).</p>
<p>Depois disso, Wickham dedicou-se ao desenvolvimento do pensamento de uma nova abordagem dentro do manejo de dados, denominada de <strong>Tidy Data</strong> (Dados organizados) (Wickhan 2014), na qual focou na limpeza de dados. A ideia, relativamente simples, diz que dados estão <strong>tidy</strong> quando <strong>variáveis estão nas colunas</strong>, <strong>observações estão nas linhas</strong> e <strong>valores estão nas células</strong>, sendo que para esse último, não deve haver mais de um valor por célula (Figura <a href="intro-r.html#fig:fig-r-dados-tidy">5.5</a>).</p>
<p>À partir dessas ideias, o <a href="https://www.tidyverse.org/"><em>tidyverse</em></a> foi operacionalizado no R como uma coleção de pacotes R que atuam no <strong>workflow comum da ciência de dados</strong>: importação, manipulação, exploração, visualização, análise e comunicação de dados e análises (Wickhan et al. 2019) (Figura <a href="intro-r.html#fig:fig-r-tidyverse">5.4</a>). O principal objetivo do <strong>Tidyverse</strong> é aproximar a linguagem para melhorar a interação entre ser humano e computador sobre dados, de modo que os pacotes compartilham uma filosofia de design de alto nível e gramática, além da estrutura de dados de baixo nível (Wickhan et al. 2019).</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-tidyverse"></span>
<img src="img/cap04_tidyverse.png" alt="Modelo das ferramentas necessárias em um projeto típico de ciência de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto à essas ferramentas está a programação. Adaptado de: Wickhan &amp; Grolemund (2017)." width="90%" />
<p class="caption">
Figura 5.4: Modelo das ferramentas necessárias em um projeto típico de ciência de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto à essas ferramentas está a programação. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>As principais leituras sobre o tema no R são os artigos Wickham (2014), Wickham et al. (2019), o livro Wickhan &amp; Grolemund (2017), disponível on-line neste <a href="https://r4ds.had.co.nz/">link</a>, além do <a href="https://www.tidyverse.org/">site</a> que possui muito mais informações.</p>
</div>
<div id="tidyverse-1" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> <em>tidyverse</em></h3>
<p>Uma vez instalado e carregado, o pacote tidyverse <strong>disponibiliza um conjunto de ferramentas</strong> através de vários pacotes. Esses pacotes <strong>compartilham</strong> uma filosofia de design, gramática e estruturas de dados. Podemos entender o <em>tidyverse</em> como um “dialeto novo” para a linguagem R, onde <strong>tidy</strong> quer dizer organizado, arrumado, ordenado, e <strong>verse</strong> é universo.</p>
<ul>
<li><a href="https://readr.tidyverse.org/"><em>readr</em></a>: importa dados tabulares (.csv e .txt)</li>
<li><a href="https://tibble.tidyverse.org/"><em>tibble</em></a>: implementou o “tibble,” com melhorias na classe <code>dataframe</code></li>
<li><a href="https://tidyr.tidyverse.org/"><em>tidyr</em></a>: facilita a transformação de dados para <em>tidy</em></li>
<li><a href="https://dplyr.tidyverse.org/"><em>dplyr</em></a>: facilita a manipulação de dados</li>
<li><a href="https://github.com/tidyverse/stringr"><em>stringr</em></a>: facilita a manipulação de caracteres</li>
<li><a href="https://github.com/hadley/forcats"><em>forcats</em></a>: facilita a manipulação de fatores</li>
<li><a href="https://ggplot2.tidyverse.org/"><em>ggplot2</em></a>: visualização de dados</li>
<li><a href="https://purrr.tidyverse.org/"><em>purrr</em></a>: programação funcional</li>
</ul>
<p>Além desses principais, fazemos a menção de <strong>outros pacotes que estão dentro dessa aborgagem</strong>, e que trataremos ainda neste capítulo, em outro momento do livro, ou que você leitor deve se familiarizar.</p>
<ul>
<li><a href="https://readxl.tidyverse.org/"><em>readxl</em></a> e <a href="https://cran.r-project.org/package=writexl"><em>writexl</em></a>: importa e exporta dados tabulares (.xlsx)</li>
<li><a href="https://github.com/rstats-db/DBI"><em>DBI</em></a>: interface de banco de dados R</li>
<li><a href="https://github.com/tidyverse/haven"><em>haven</em></a>: importa e exporta dados do SPSS, Stata e SAS</li>
<li><a href="https://github.com/r-lib/httr"><em>httr</em></a>: ferramentas para trabalhar com URLs e HTTP</li>
<li><a href="https://github.com/tidyverse/rvest"><em>rvest</em></a>: coletar facilmente (raspe) páginas da web</li>
<li><a href="https://github.com/r-lib/xml2"><em>xml2</em></a>: trabalhar com arquivos XML</li>
<li><a href="https://github.com/jeroen/jsonlite"><em>jsonlite</em></a>: um analisador e gerador JSON simples e robusto para R</li>
<li><a href="https://github.com/rstats-db/hms"><em>hms</em></a>: hora do dia</li>
<li><a href="https://github.com/tidyverse/lubridate"><em>lubridate</em></a>: facilita o tratamento de datas</li>
<li><a href="https://magrittr.tidyverse.org/"><em>magrittr</em></a>: provê os operadores pipe (<code>%&gt;%</code>, <code>%$%</code>, <code>%&lt;&gt;%</code>)</li>
<li><a href="https://github.com/tidyverse/glue"><em>glue</em></a>: facilita combinar dados e caracteres</li>
<li><a href="https://rmarkdown.rstudio.com/"><em>rmarkdown</em></a>: cria documentos de análise dinâmica que combinam código, saída renderizada (como figuras) e texto</li>
<li><a href="https://yihui.org/knitr/"><em>knitr</em></a>: projetado para ser um mecanismo transparente para geração de relatórios dinâmicos com R</li>
<li><a href="https://shiny.rstudio.com/"><em>shiny</em></a>: framework de aplicativo Web para R</li>
<li><a href="https://rmarkdown.rstudio.com/flexdashboard/"><em>flexdashboard</em></a>: painéis interativos para R</li>
<li><a href="https://here.r-lib.org/"><em>here</em></a>: facilita a definição de diretórios</li>
<li><a href="https://usethis.r-lib.org/"><em>usethis</em></a>: automatiza tarefas durante a configuração e desenvolvimento de projetos (Git, ‘GitHub’ e Projetos RStudio)</li>
<li><a href="https://rdatatable.gitlab.io/data.table/"><em>data.table</em></a>: pacote que fornece uma versão de alto desempenho do <code>data.frame</code> (importar, manipular e expotar)</li>
<li><a href="https://rstudio.github.io/reticulate/"><em>reticulate</em></a>: pacote que fornece ferramentas para integrar Python e R</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: interface R para Apache Spark</li>
<li><a href="https://github.com/tidymodels/broom"><em>broom</em></a>: converte objetos estatísticos em tibbles organizados</li>
<li><a href="https://github.com/tidyverse/modelr"><em>modelr</em></a>: funções de modelagem que funcionam com o pipe</li>
<li><a href="https://www.tidymodels.org/"><em>tidymodels</em></a>: coleção de pacotes para modelagem e aprendizado de máquina usando os princípios do tidyverse</li>
</ul>
<p>Para instalar os pacotes do <em>tidyverse</em>, rode o comando abaixo:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="intro-r.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote tidyverse</span></span>
<span id="cb213-2"><a href="intro-r.html#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Quando carregamos o pacote <em>tidyverse</em>, notamos uma mensagem indicando quais pacotes foram carregados, suas repectivas versões e os conflitos com outros pacotes.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="intro-r.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote tidyverse</span></span>
<span id="cb214-2"><a href="intro-r.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.3     ✓ purrr   0.3.4
## ✓ tibble  3.1.0     ✓ dplyr   1.0.5
## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
## ✓ readr   1.4.0     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Podemos ainda <strong>listar todos os pacotes</strong> do <strong>tidyverse</strong> com a função <code>tidyverse::tidyverse_packages()</code>.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="intro-r.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os pacotes no tidyverse </span></span>
<span id="cb218-2"><a href="intro-r.html#cb218-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_packages</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;broom&quot;      &quot;cli&quot;        &quot;crayon&quot;     &quot;dbplyr&quot;     &quot;dplyr&quot;     
##  [6] &quot;forcats&quot;    &quot;ggplot2&quot;    &quot;haven&quot;      &quot;hms&quot;        &quot;httr&quot;      
## [11] &quot;jsonlite&quot;   &quot;lubridate&quot;  &quot;magrittr&quot;   &quot;modelr&quot;     &quot;pillar&quot;    
## [16] &quot;purrr&quot;      &quot;readr&quot;      &quot;readxl&quot;     &quot;reprex&quot;     &quot;rlang&quot;     
## [21] &quot;rstudioapi&quot; &quot;rvest&quot;      &quot;stringr&quot;    &quot;tibble&quot;     &quot;tidyr&quot;     
## [26] &quot;xml2&quot;       &quot;tidyverse&quot;</code></pre>
<p>Também podemos <strong>verificar os pacotes para serem atualizados</strong> com a função <code>tidyverse::tidyverse_update()</code>.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="intro-r.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar e atualizar os pacotes no tidyverse </span></span>
<span id="cb220-2"><a href="intro-r.html#cb220-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_update</span>()</span></code></pre></div>
<pre><code>## All tidyverse packages up-to-date</code></pre>
<p>Todas as funções dos pacotes tidyverse usão <strong>fonte minúscula</strong> e <strong>usam <code>_</code> (<em>underscore</em>)</strong> para separar os nomes internos das funções, seguindo a mesma sintaxe do Python (“Snake Case”). Neste sentido de padronização, é importante destacar ainda que existe um guia próprio para que os scripts sigam a recomendação de padronização, o <a href="https://style.tidyverse.org/">The tidyverse style guide</a>, criado pelo Hadley Wickham. Para os desenvolvedores, existe o <a href="https://design.tidyverse.org/">Tidyverse design guide</a> criado pelo <em>Tidyverse team</em>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="intro-r.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes no formato snake_case</span></span>
<span id="cb222-2"><a href="intro-r.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()</span>
<span id="cb222-3"><a href="intro-r.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_xlsx</span>()</span>
<span id="cb222-4"><a href="intro-r.html#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>()</span>
<span id="cb222-5"><a href="intro-r.html#cb222-5" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>()</span>
<span id="cb222-6"><a href="intro-r.html#cb222-6" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>()</span></code></pre></div>
<p>Por fim, para evitar possíveis <strong>conflitos de funções com o mesmo nome entre pacotes</strong>, recomendamos fortemente o hábito de usar as funções seguido do operador <code>::</code>. Assim, garante-se que a <strong>função utilizada é referente ao pacote daquela função</strong>. Segue um exemplo com as funções apresentadas anteriormente.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="intro-r.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes seguidas de seus respectivos pacotes</span></span>
<span id="cb223-2"><a href="intro-r.html#cb223-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>()</span>
<span id="cb223-3"><a href="intro-r.html#cb223-3" aria-hidden="true" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_xlsx</span>()</span>
<span id="cb223-4"><a href="intro-r.html#cb223-4" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb223-5"><a href="intro-r.html#cb223-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>()</span>
<span id="cb223-6"><a href="intro-r.html#cb223-6" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>()</span></code></pre></div>
<p>Seguindo essas ideias de organização de dados, outro conjunto de pacotes foi desenvolvido, chamado de <a href="https://www.tidymodels.org/"><em>tidymodels</em></a> que atuam no <strong>workflow da análise de dados</strong> em ciência de dados: separação e reamostragem, pre-processamento, ajuste de modelos e métricas de performace de ajustes. Por razões de espaço e especificidade, não entraremos em detalhes dessa abordagem.</p>
<p>Seguindo o workflow da Figura <a href="intro-r.html#fig:fig-r-tidyverse">5.4</a>, iremos ver nos itens das próximas seções como esses passos são realizados com funções de cada pacote.</p>
</div>
<div id="here" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> here</h3>
<p>Dentro do <strong>workflow do tidyverse</strong>, devemos sempre trabalhar com <strong>Projetos do RStudio</strong>, um tema que focamos com mais detalhes na seção XX. Junto com o projeto, também podemos fazer uso do pacote <em>here</em>. Ele permite <strong>construir caminhos</strong> para os arquivos do projeto de forma mais simples e com maior reprodutibilidade.</p>
<p>Esse pacote cobre o ponto que discutimos na seção XX, dado que muitas vezes <strong>mudar o diretório</strong> com a função <code>setwd()</code> tende a ser <strong>demorado</strong>, principalmente quando se trata de um <strong>script em que várias pessoas estão trabalhando</strong> em diferentes computadores e sistemas operacionais. Além disso, ele elimina a questão da <strong>fragilidade</strong> dos scripts, pois geralmente um script está com os diretórios conectados exatamente a um lugar e a um momento. Por fim, ele também <strong>simplifica o trabalho com subdiretórios</strong>, facilitando importar ou exportar arquivos de ou para subpastas.</p>
<p>Seu uso é relativamente simples: uma vez criado e aberto o RStudio pelo <strong>Projeto do RStudio</strong>, o diretório automaticamente é definido para o diretório do projeto. Depois disso, podemos usar a função <code>here::here()</code> para definir os subdiretórios onde estão os dados. O exemplo da aplicação fica para a seção seguinte, quando iremos de fato importar um arquivo para o R. Logo abaixo, mostramos como instalar e carregar o pacote <em>here</em>.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="intro-r.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb224-2"><a href="intro-r.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb224-3"><a href="intro-r.html#cb224-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-4"><a href="intro-r.html#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb224-5"><a href="intro-r.html#cb224-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
</div>
<div id="readr-readxl-e-writexl" class="section level3" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> readr, readxl e writexl</h3>
<p>Dado que possuímos um conjuntos de dados e que geralmente esse conjunto de dados estará no formato tabular com umas das extensões: .csv, .txt ou .xlsx, iremos usar o pacote <em>readr</em> ou <em>readxl</em> para importar esses dados para o R.</p>
<p>Esses pacotes <strong>leem e escrevem grandes arquivos de forma mais rápida</strong>, além de fornecem <strong>medidores de progresso</strong> de importação e exportação, e imprimir a <strong>informação dos modos das colunas</strong> quando faz a importação. Outro ponto bastante positivo, é que também <strong>classificam automaticamente</strong> o modo dos dados de cada coluna, i.e., se uma coluna possui dados numéricos ou apenas texto, essa informação será considerada para classificar a coluna toda. A <strong>classe do objeto</strong> atribuído quando lido por esses pacotes é automaticamente um “tibble,” que veremos melhor na seção seguinte.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://readr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Usamos as funções <code>readr::read_csv()</code> e <code>readr::write_csv()</code> para importar e exportar arquivos .csv do R, respectivamente. Para dados com a extensão .txt, podemos utilizar as funções <code>readr::read_tsv()</code> ou ainda <code>readr::read_delim()</code>. Para arquivos tabulares com a extensão .xlsx, temos de instalar dois pacotes adicionais: <em>readxl</em> e <em>writexl</em>, dos quais usaremos as funções <code>readxl::read_excel()</code>, <code>readxl::read_xlsx()</code> ou <code>readxl::read_xls()</code> para importar dados, atentado para o data de podermos indicar a aba com os dados com o argumento <strong>sheet</strong>, e <code>writexl::write_xlsx()</code> para exportar.</p>
<p>Se o arquivo .csv foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>, usamos as funções normalmente. Caso tivesse sido criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, usaríamos as funções dessa forma: <code>readr::read_csv2()</code>.</p>
<p>Para exemplificar como importar dados no <strong>formato tidyverse</strong>, vamos importar novamente os dados de <strong>comunidades de anfíbios da Mata Atlântica</strong> (Atlantic Amphibians, Vancine et al. 2018), que fizemos o download na seção XX. Estamos usando a função <code>readr::read_csv()</code>, indicando os diretórios com a função <code>here::here()</code>, e a classe do arquivo é “tibble.”</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="intro-r.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importar lugares</span></span>
<span id="cb225-2"><a href="intro-r.html#cb225-2" aria-hidden="true" tabindex="-1"></a>aa_locais <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb225-3"><a href="intro-r.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;dados&quot;</span>, <span class="st">&quot;tabelas&quot;</span>, <span class="st">&quot;ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>)</span>
<span id="cb225-4"><a href="intro-r.html#cb225-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   .default = col_character(),
##   reference_number = col_double(),
##   species_number = col_double(),
##   month_start = col_double(),
##   year_start = col_double(),
##   month_finish = col_double(),
##   year_finish = col_double(),
##   effort_months = col_double(),
##   latitude = col_double(),
##   longitude = col_double(),
##   altitude = col_double(),
##   temperature = col_double(),
##   precipitation = col_double()
## )
## ℹ Use `spec()` for the full column specifications.</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/data-import.html">11 Data import</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tibble" class="section level3" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> tibble</h3>
<p>O <strong>tibble</strong> (<code>tbl_sf</code>) é uma <strong>versão aprimorada</strong> do data frame (<code>data.frame</code>). Ele é a <strong>classe aconselhada</strong> para que as funções do tidyverse funcionem melhor sobre conjuntos de dados tabulares importados para o R.</p>
<p>Geralmente, quando utilizamos <strong>funções tidyverse para importar dados para o R</strong>, é essa classe que esses dados adquirem depois de importados. Além da importação de dados, podemos <strong>criar</strong> um tibble no R usando a função <code>tibble::tibble()</code>, semelhante ao uso da função <code>data.frame()</code>. Podemos ainda <strong>converter</strong> um <code>data.frame</code> para um <code>tibble</code> usando a função <code>tibble::as_tibble()</code>. Entretanto, em alguns momentos precisaremos da classe <code>data.frame</code> para algumas funções específicas, e podemos <strong>converter</strong> um <code>tibble</code> para <code>data.frame</code> usa-se a função <code>tibble::as_data_frame()</code>.</p>
<p>Existem <strong>duas diferenças principais</strong> no uso do <code>tibble</code> e do <code>data.frame</code>: impressão e subconjunto. Objetos da classe <code>tibbles</code> possuem um método de impressão que mostra a <strong>contagem do número de linhas e colunas</strong>, e apenas as <strong>primeiras 10 linhas</strong> e <strong>todas as colunas</strong> que cabem na tela no console, além dos <strong>modos ou tipos das colunas</strong>. Dessa forma, cada coluna ou variável, pode ser do modo numbers (<code>int</code> ou <code>dbl</code>), character (<code>chr</code>), logical (<code>lgl</code>), factor (<code>fctr</code>), date + time (<code>dttm</code>) date e (<code>date</code>), além de outras <a href="https://tibble.tidyverse.org/articles/types.html">inúmeras possibilidades</a>.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://tibble.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="intro-r.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - impressao</span></span>
<span id="cb227-2"><a href="intro-r.html#cb227-2" aria-hidden="true" tabindex="-1"></a>aa_locais</span></code></pre></div>
<pre><code>## # A tibble: 1,163 x 25
##    id      reference_number species_number record sampled_habitat active_methods
##    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;         
##  1 amp1001             1001             19 ab     fo,ll           as            
##  2 amp1002             1002             16 co     fo,la,ll        as            
##  3 amp1003             1002             14 co     fo,la,ll        as            
##  4 amp1004             1002             13 co     fo,la,ll        as            
##  5 amp1005             1003             30 co     fo,ll,br        as            
##  6 amp1006             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;          
##  7 amp1007             1005             23 co     sp              as            
##  8 amp1008             1005             19 co     sp,la,sw        as,sb,tr      
##  9 amp1009             1005             13 ab     fo              &lt;NA&gt;          
## 10 amp1010             1006              1 ab     fo              &lt;NA&gt;          
## # … with 1,153 more rows, and 19 more variables: passive_methods &lt;chr&gt;,
## #   complementary_methods &lt;chr&gt;, period &lt;chr&gt;, month_start &lt;dbl&gt;,
## #   year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;,
## #   effort_months &lt;dbl&gt;, country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;,
## #   municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;,
## #   precipitation &lt;dbl&gt;</code></pre>
<p>Para o subconjunto, como vimos anteriormente, para <strong>selecionar colunas e linhas</strong> de objetos bidimensionais podemos utilizar o operador <code>[]</code> ou <code>[[]]</code> associado com números separados por vírgulas ou o nome da coluna entre aspas, e o operador <code>$</code> para extrair pelo nome da coluna. Comparando um <code>data.frame</code> a um <code>tibbles</code>, esses últimos são mais rígidos: eles nunca fazem <strong>correspondência parcial</strong> e irão <strong>gerar um aviso</strong> se a coluna que você está tentando acessar não existir.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="intro-r.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - subconjunto</span></span>
<span id="cb229-2"><a href="intro-r.html#cb229-2" aria-hidden="true" tabindex="-1"></a>aa_locais<span class="sc">$</span>ref</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `ref`.</code></pre>
<pre><code>## NULL</code></pre>
<p>Por fim, podemos <strong>“espiar” os dados</strong> utilizando a função <code>tibble::glimpse()</code> para ter uma noção geral de número de linhas, colunas, e conteúdo de todas as colunas. Essa é função tidyverse da função R Base <code>str()</code>.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="intro-r.html#cb232-1" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(aa_locais[, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>## Rows: 1,163
## Columns: 10
## $ id                    &lt;chr&gt; &quot;amp1001&quot;, &quot;amp1002&quot;, &quot;amp1003&quot;, &quot;amp1004&quot;, &quot;amp…
## $ reference_number      &lt;dbl&gt; 1001, 1002, 1002, 1002, 1003, 1004, 1005, 1005, …
## $ species_number        &lt;dbl&gt; 19, 16, 14, 13, 30, 42, 23, 19, 13, 1, 1, 2, 4, …
## $ record                &lt;chr&gt; &quot;ab&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, …
## $ sampled_habitat       &lt;chr&gt; &quot;fo,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo…
## $ active_methods        &lt;chr&gt; &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, NA, &quot;as&quot;, &quot;as,sb,t…
## $ passive_methods       &lt;chr&gt; &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, NA, NA, NA, NA, &quot;pt&quot;, &quot;p…
## $ complementary_methods &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ period                &lt;chr&gt; &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo…
## $ month_start           &lt;dbl&gt; 9, 12, 12, 12, 7, NA, 4, 4, 4, 5, 5, 5, 5, 5, 5,…</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/tibbles.html">10 Tibbles</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="magrittr-pipe--" class="section level3" number="5.5.6">
<h3><span class="header-section-number">5.5.6</span> magrittr (pipe - %&gt;%)</h3>
<p>O operador pipe <code>%&gt;%</code> permite o <strong>encadeamento de várias funções</strong>, eliminando a necessidade de criar objetos para armazenar resultados intermediários. Dessa forma, pipes são uma <strong>ferramenta poderosa</strong> para expressar uma <strong>sequência de múltiplas operações</strong>.</p>
<p>O operador pipe <code>%&gt;%</code> vem do pacote <em>magrittr</em>, entretanto, todos os pacotes no tidyverse automaticamente tornam o pipe disponível. Essa função torna os <strong>códigos em R mais simples</strong>, pois realizamos múltiplas operações em uma única linha. Ele <strong>captura o resultado de uma declaração</strong> e o <strong>torna a entrada da próxima declaração</strong>, então podemos pensar como “EM SEGUIDA FAÇA” ao final de cada linha de código.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://maggritr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>A principal vantagem do uso dos pipes é facilitar o <strong>debuging</strong> (achar erros) nos códigos, porque seu uso torna a <strong>linguagem R mais próxima do que falamos e pensamos</strong>, uma vez que evita o uso de funções dentro de funções (funções compostas).</p>
<p>Digitar <code>%&gt;%</code> é um pouco chato, dessa forma, existe um atalho para sua inserção nos scripts: <code>ctrl + shift + M</code>.</p>
<p>Para deixar esse tópico <strong>menos estranho</strong> à quem está vendo esse operação pela primeira vez, vamos fazer <strong>alguns exemplos</strong>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="intro-r.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb234-2"><a href="intro-r.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="intro-r.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb236-2"><a href="intro-r.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%&gt;%</span> </span>
<span id="cb236-3"><a href="intro-r.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb236-4"><a href="intro-r.html#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>()</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<p>Essas operações ainda estão simples, vamos complicá-las com várias funções compostas. É nesses casos que a <strong>propriedade orgazacional</strong> do uso do pipe emerge: podemos facilmente ver o <strong>encadeamento de operações</strong>, onde cada função é organizada numa linha.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="intro-r.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb238-2"><a href="intro-r.html#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb238-3"><a href="intro-r.html#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="intro-r.html#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb238-5"><a href="intro-r.html#cb238-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">sqrt</span>(<span class="fu">sort</span>(<span class="fu">log10</span>(<span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>)))))</span>
<span id="cb238-6"><a href="intro-r.html#cb238-6" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="intro-r.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb240-2"><a href="intro-r.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb240-3"><a href="intro-r.html#cb240-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-4"><a href="intro-r.html#cb240-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb240-5"><a href="intro-r.html#cb240-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb240-6"><a href="intro-r.html#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log10</span>() <span class="sc">%&gt;%</span></span>
<span id="cb240-7"><a href="intro-r.html#cb240-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb240-8"><a href="intro-r.html#cb240-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb240-9"><a href="intro-r.html#cb240-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span>
<span id="cb240-10"><a href="intro-r.html#cb240-10" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<p>O uso do pipe vai se <strong>tornar especialmente útil</strong> quando seguirmos para os pacotes das próximas duas seções: <em>tidyr</em> e <em>dplyr</em>. Com esses pacotes iremos fazer operações em linhas e colunas de nossos dados tabulares, então podemos <strong>encademar uma série de funções</strong> para manipulação, limpeza e análise de dados.</p>
<p>Há ainda <strong>três outras variações do pipe</strong> que podem ser úteis em alguns momentos, mas que para funcionar precisam que o pacote <em>magrittr</em> seja carregado:</p>
<ul>
<li><code>%T&gt;%</code>: retorna o lado esquerdo em vez do lado direito</li>
<li><code>%$%</code>: “explode” as variáveis em um quadro de dados</li>
<li><code>%&lt;&gt;%</code>: permite atribuição usando pipes</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/pipes.html">18 Pipes</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tidyr" class="section level3" number="5.5.7">
<h3><span class="header-section-number">5.5.7</span> tidyr</h3>
<p>Os conjuntos de <strong>dados tidy</strong> (organizados) são mais fáceis de manipular, modelar e visualizar. Um conjunto de dados está arrumado ou não, dependendo de como linhas, colunas e células são combinadas com observações, variáveis e valores. Nos <strong>dados tidy</strong>, as <strong>variáveis estão nas colunas</strong>, <strong>observações estão nas linhas</strong> e <strong>valores estão nas células</strong>, sendo que para esse último, não deve haver mais de um valor por célula (Figura <a href="intro-r.html#fig:fig-r-dados-tidy">5.5</a>).</p>
<ol style="list-style-type: decimal">
<li>Cada variável em uma coluna</li>
<li>Cada observação em uma linha</li>
<li>Cada valor como uma célula</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:fig-r-dados-tidy"></span>
<img src="img/cap04_tidy.png" alt="As três regras que tornam um conjunto de dados *tidy*. Adaptado de: Wickhan &amp; Grolemund (2017)." width="100%" />
<p class="caption">
Figura 5.5: As três regras que tornam um conjunto de dados <em>tidy</em>. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Todas as funções deste pacote são listadas na <a href="https://tidyr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Para realizar <strong>diversas transformações nos dados</strong> a fim de ajustá-los ao formato <strong>tidy</strong>, existe uma série de funções, para diversas finalidades: unir e separar, valores faltantes (<code>NA</code>), e pivotar (formato <strong>longo</strong> para <strong>largo</strong>), além de outras <a href="https://tidyr.tidyverse.org/reference/index.html">funções específicas</a>.</p>
<ul>
<li><code>unite()</code>: junta dados de múltiplas colunas em uma coluna</li>
<li><code>separate()</code>: separa caracteres em múlplica colunas</li>
<li><code>separate_rows()</code>: separa caracteres em múlplica colunas e linhas</li>
<li><code>drop_na()</code>: retira linhas com <code>NA</code> do conjunto de dados</li>
<li><code>replace_na()</code>: substitui <code>NA</code> do conjunto de dados</li>
<li><code>pivot_wider()</code>: transformar conjunto de dados <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>)</li>
<li><code>pivot_longer()</code>: transformar conjunto de dados <strong>largo</strong> (<em>wide</em>) para <strong>longo</strong> (<em>long</em>)</li>
</ul>
<p>Para exemplicar o funcionamento dessas funções, usaremos os dados de medidas de pinguins chamados <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados estão disponíveis no pacote <em>palmerpenguins</em>.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="intro-r.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote</span></span>
<span id="cb242-2"><a href="intro-r.html#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span></code></pre></div>
<p>Esses dados foram coletados e disponibilizados pela <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dra. Kristen Gorman</a> e pela <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>, membro da Long Term Ecological Research Network.</p>
<p>O pacote <em>palmerpenguins</em> contém dois conjuntos de dados. Um é chamado de <strong>penguins</strong> e é uma versão simplificada dos dados brutos. O segundo conjunto de dados é <strong>penguins_raw</strong> e contém todas as variáveis e nomes originais baixados. Ambos os conjuntos de dados contêm dados para 344 pinguins, de três espécies diferentes, coletados em três ilhas no arquipélago de Palmer, na Antártica.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="intro-r.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote palmerpenguins</span></span>
<span id="cb243-2"><a href="intro-r.html#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb243-3"><a href="intro-r.html#cb243-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-4"><a href="intro-r.html#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ajuda dos dados</span></span>
<span id="cb243-5"><a href="intro-r.html#cb243-5" aria-hidden="true" tabindex="-1"></a>?penguins</span>
<span id="cb243-6"><a href="intro-r.html#cb243-6" aria-hidden="true" tabindex="-1"></a>?penguins_raw</span></code></pre></div>
<p>Primeiramente, vamos observar os dados e utilizar a função <code>tidyr::glimpse()</code> para ter uma noção geral.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="intro-r.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizar os dados</span></span>
<span id="cb244-2"><a href="intro-r.html#cb244-2" aria-hidden="true" tabindex="-1"></a>penguins_raw</span></code></pre></div>
<pre><code>## # A tibble: 344 x 17
##    studyName `Sample Number` Species       Region Island Stage   `Individual ID`
##    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;          
##  1 PAL0708                 1 Adelie Pengu… Anvers Torge… Adult,… N1A1           
##  2 PAL0708                 2 Adelie Pengu… Anvers Torge… Adult,… N1A2           
##  3 PAL0708                 3 Adelie Pengu… Anvers Torge… Adult,… N2A1           
##  4 PAL0708                 4 Adelie Pengu… Anvers Torge… Adult,… N2A2           
##  5 PAL0708                 5 Adelie Pengu… Anvers Torge… Adult,… N3A1           
##  6 PAL0708                 6 Adelie Pengu… Anvers Torge… Adult,… N3A2           
##  7 PAL0708                 7 Adelie Pengu… Anvers Torge… Adult,… N4A1           
##  8 PAL0708                 8 Adelie Pengu… Anvers Torge… Adult,… N4A2           
##  9 PAL0708                 9 Adelie Pengu… Anvers Torge… Adult,… N5A1           
## 10 PAL0708                10 Adelie Pengu… Anvers Torge… Adult,… N5A2           
## # … with 334 more rows, and 10 more variables: Clutch Completion &lt;chr&gt;,
## #   Date Egg &lt;date&gt;, Culmen Length (mm) &lt;dbl&gt;, Culmen Depth (mm) &lt;dbl&gt;,
## #   Flipper Length (mm) &lt;dbl&gt;, Body Mass (g) &lt;dbl&gt;, Sex &lt;chr&gt;,
## #   Delta 15 N (o/oo) &lt;dbl&gt;, Delta 13 C (o/oo) &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="intro-r.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># espiar os dados</span></span>
<span id="cb246-2"><a href="intro-r.html#cb246-2" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(penguins_raw)</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 17
## $ studyName             &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL…
## $ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1…
## $ Species               &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie P…
## $ Region                &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;…
## $ Island                &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgerse…
## $ Stage                 &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adu…
## $ `Individual ID`       &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, …
## $ `Clutch Completion`   &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, …
## $ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16,…
## $ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34…
## $ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18…
## $ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,…
## $ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34…
## $ Sex                   &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;…
## $ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18…
## $ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.298…
## $ Comments              &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult…</code></pre>
<p>Primeiramente, vamos exemplificar como <strong>juntar e serparar colunas</strong>. Vamos utilizar a função <code>tidyr::unite()</code> para unir as colunas “Region” e “Island.” Há diversos parâmetros para alterar como a funções funciona, entretanto, é importante destacar trŝ deles: <strong>col</strong> nome da coluna que vai receber as colunas unidas, <strong>sep</strong> indicando o caracter separador das colunas unidas, e <strong>remove</strong> para uma resposta lógica se as colunas unidas são removidas ou não. Vamos unir as colunas “Region” e “Island” na nova coluna “region_island,”</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="intro-r.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unir colunas</span></span>
<span id="cb248-2"><a href="intro-r.html#cb248-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_unir <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">unite</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb248-3"><a href="intro-r.html#cb248-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">col =</span> <span class="st">&quot;region_island&quot;</span>,</span>
<span id="cb248-4"><a href="intro-r.html#cb248-4" aria-hidden="true" tabindex="-1"></a>                                  Region<span class="sc">:</span>Island, </span>
<span id="cb248-5"><a href="intro-r.html#cb248-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb248-6"><a href="intro-r.html#cb248-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>De forma contrária podemos utilizar as funções <code>tidyr::separate()</code> e <code>tidyr::separate_rows()</code> para separar elementos de uma coluna em mais colunas. Respectivamente, a primeira função separa uma colunas em novas colunas conforme a separação e a segunda função separa uma coluna, distribuindo os elementos também nas linhas. Novamente, há diversos parâmetros, mas destacaremos quatro deles: <strong>col</strong> coluna a ser separada, <strong>into</strong> os nomes das novas colunas, <strong>sep</strong> indicando o caracter separador das colunas, e <strong>remove</strong> para uma resposta lógica se as colunas unidas são removidas ou não. Vamos separar a coluna “Stage” nas colunas “stage” e “egg_stage.”</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="intro-r.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb249-2"><a href="intro-r.html#cb249-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb249-3"><a href="intro-r.html#cb249-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">col =</span> Stage,</span>
<span id="cb249-4"><a href="intro-r.html#cb249-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;stage&quot;</span>, <span class="st">&quot;egg_stage&quot;</span>), </span>
<span id="cb249-5"><a href="intro-r.html#cb249-5" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb249-6"><a href="intro-r.html#cb249-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb249-7"><a href="intro-r.html#cb249-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-8"><a href="intro-r.html#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb249-9"><a href="intro-r.html#cb249-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar_linhas <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate_rows</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb249-10"><a href="intro-r.html#cb249-10" aria-hidden="true" tabindex="-1"></a>                                                    Stage,</span>
<span id="cb249-11"><a href="intro-r.html#cb249-11" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<p><strong>Valores faltantes</strong> (<code>NA</code>) é um tipo especial de elemento que discutimos na seção XX, e são relativamente comuns em grandes conjuntos de dados. Em Base R vimos algumas formas de lidar com esse tipo de elemento. No formato <strong>tidyverse</strong> existem várias formas de lidar com eles, mas aqui focaremos nas funções <code>tidyr::drop_na()</code> e <code>tidyr::replace_na()</code>, para retirar linhas e substitui-los, respectivamente.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="intro-r.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover todas as linhas com nas</span></span>
<span id="cb250-2"><a href="intro-r.html#cb250-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_todas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw)</span>
<span id="cb250-3"><a href="intro-r.html#cb250-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-4"><a href="intro-r.html#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remover linhas de colunas especificas com nas</span></span>
<span id="cb250-5"><a href="intro-r.html#cb250-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_colunas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb250-6"><a href="intro-r.html#cb250-6" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">any_of</span>(<span class="st">&quot;Comments&quot;</span>))</span>
<span id="cb250-7"><a href="intro-r.html#cb250-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-8"><a href="intro-r.html#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="co"># substituir nas por outro valor</span></span>
<span id="cb250-9"><a href="intro-r.html#cb250-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_subs_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb250-10"><a href="intro-r.html#cb250-10" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">list</span>(<span class="at">Comments =</span> <span class="st">&quot;Unknown&quot;</span>))</span></code></pre></div>
<p>Por fim, trataremos de <strong>pivotagem ou remodelagem</strong> de dados. Veremos como mudar o formato do nosso conjunto de dados de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>) e vice-versa. Essa é uma operação semelhante à “Tabela Dinâmica” das planilhas eletrônicas. Consiste em usar uma coluna para virar outras colunas, de modo que os valores são preenchidos corretamente, reduzindo assim o número de linhas, isso na transformação de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>). Essa operação é bastante comum em Ecologia de Comunidades, quando queremos transformar uma lista de espécies em uma matriz de comunidades, com várias espécies nas colunas. Para realizar essa operação, usarmos a função <code>tidyr::pivot_wider()</code>. Dos diversos parâmetros que podem compor essa função, dois deles são fundamentais: <strong>names_from</strong> que indica a coluna de onde os nomes serão usados e <strong>values_from</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="intro-r.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb251-2"><a href="intro-r.html#cb251-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">13</span>)]</span>
<span id="cb251-3"><a href="intro-r.html#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="intro-r.html#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb251-5"><a href="intro-r.html#cb251-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_wider <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb251-6"><a href="intro-r.html#cb251-6" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">names_from =</span> Species, </span>
<span id="cb251-7"><a href="intro-r.html#cb251-7" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">values_from =</span> <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code></pre></div>
<p>De modo oposto, podemos partir de um conjunto de dados <strong>largo</strong> (<em>wide</em>), ou seja, com várias colunas, e queremos que essas colunas preecham uma única coluna, e que os valores antes espalhados nessas várias colunas sejam adicionados um embaixo do outro. Para essa operação, podemos utilizar a função <code>tidyr::pivot_longer()</code>. Novamente, dos diversos parâmetros que podem compor essa função, trÊs deles são fundamentais: <strong>cols</strong> indicando as colunas que serão usandas para serem pivotadas, <strong>names_to</strong> que indica a coluna de onde os nomes serão usados e <strong>values_to</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="intro-r.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb252-2"><a href="intro-r.html#cb252-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>)]</span>
<span id="cb252-3"><a href="intro-r.html#cb252-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-4"><a href="intro-r.html#cb252-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb252-5"><a href="intro-r.html#cb252-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_longer <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb252-6"><a href="intro-r.html#cb252-6" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">cols =</span> <span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>,</span>
<span id="cb252-7"><a href="intro-r.html#cb252-7" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">names_to =</span> <span class="st">&quot;medidas&quot;</span>, </span>
<span id="cb252-8"><a href="intro-r.html#cb252-8" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">values_to =</span> <span class="st">&quot;valores&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/tidy-data.html">12 Tidy data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="dplyr" class="section level3" number="5.5.8">
<h3><span class="header-section-number">5.5.8</span> dplyr</h3>
<p>O <em>dplyr</em> é um pacote que <strong>facilita a manipulação de dados</strong>, com uma <strong>gramática de manipulação de dados</strong> simples e flexível (por exemplo, como filtragem, reordenamento, seleção, entre outras). Ele foi construído com o intuito de <strong>obter uma forma mais rápida e expressiva</strong> de tratar os dados. O <code>tibble</code> é a versão de data frame mais conveniente para se usar com pacote <em>dplyr</em>.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://dplyr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Sua <strong>gramática simples</strong> contém <strong>funções verbais</strong> para manipulação de dados, baseada em:</p>
<ul>
<li>Verbos: <code>mutate()</code>, <code>select()</code>, <code>filter()</code>, <code>arrange()</code>, <code>summarise()</code>, <code>slice()</code>, <code>rename()</code>, etc.</li>
<li>Replicação: <code>across()</code>, <code>if_any()</code>, <code>if_all()</code>, <code>where()</code>, <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, etc.</li>
<li>Agrupamento: <code>group_by()</code> e <code>ungroup()</code></li>
<li>Junções: <code>inner_join()</code>, <code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, etc.</li>
<li>Combinando: <code>bind_rows()</code> e <code>bind_cols()</code></li>
<li>Funções resumo: <code>n()</code>, <code>n_distinct()</code>, <code>first()</code>, <code>last()</code>, <code>nth()</code>, etc.</li>
</ul>
<p>Para realizar as <strong>manipulações nos dados</strong> existe uma série de funções, para diversas finalidades: manipulação de uma tabela, manipulação de duas tabela, replicação, agrupamento, funções de vetores, além de muitas outras <a href="https://dplyr.tidyverse.org/reference/index.html">funções específicas</a>.</p>
<ul>
<li><code>relocate()</code>: muda a ordem das colunas</li>
<li><code>rename()</code>: muda o nome das colunas</li>
<li><code>select()</code>: seleciona colunas pelo nome ou posição</li>
<li><code>pull()</code>: seleciona uma coluna como vetor</li>
<li><code>mutate()</code>: adiciona novas colunas ou resultados em colunas existentes</li>
<li><code>arrange()</code>: reordena as linhas com base nos valores de colunas</li>
<li><code>filter()</code>: seleciona linhas com base em valores de colunas</li>
<li><code>slice()</code>: seleciona linhas de diferente formas</li>
<li><code>distinct()</code>: remove linhas com valores repetidos com base nos valores de colunas</li>
<li><code>count()</code>: conta observações para um grupo</li>
<li><code>group_by()</code>: agrupa linhas pelos valores das colunas</li>
<li><code>summarise()</code>: resume os dados através de funções considerando valores das colunas</li>
<li><code>*_join()</code>: funções que juntam dados de duas tabelas através de uma coluna chave</li>
</ul>
<p>Todas as funções seguem a mesma <strong>sintaxe</strong>, de modo que o <code>tibble</code> é sempre o <strong>primeiro argumento</strong> dessas funções, seguido de um <strong>pipe</strong> e pelo o <strong>nome da função</strong>. Isso permite o <strong>encademanto</strong> de várias operações consecutivas.</p>
<ol style="list-style-type: decimal">
<li>tibble</li>
<li>operador pipe</li>
<li>nome da função verbal com os argumentos entre parênteses</li>
<li>outras funções verbais…</li>
</ol>
<p>As funções verbais <strong>não precisam modificar</strong> o tibble original, sendo que as operações de manipulações podem e devem ser atribuídas à um <strong>novo objeto</strong>.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="intro-r.html#cb253-1" aria-hidden="true" tabindex="-1"></a>tb_dplyr <span class="ot">&lt;-</span> tb <span class="sc">%&gt;%</span> </span>
<span id="cb253-2"><a href="intro-r.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal1</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb253-3"><a href="intro-r.html#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal2</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb253-4"><a href="intro-r.html#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal3</span>(argumento1, argumento2, ...)</span></code></pre></div>
<p>Além de <code>data.frames</code> e <code>tibbles</code>, a manipulação pelo formato <em>dplyr</em> torna o trabalho com outros <strong>formatos de classes</strong> e dados acessível e eficiente, como <code>data.table</code>, SQL e Apache Spark.</p>
<ul>
<li><a href="https://dtplyr.tidyverse.org/"><em>dtplyr</em></a>: manipular conjuntos de dados <code>data.table</code></li>
<li><a href="https://dbplyr.tidyverse.org/"><em>dbplyr</em></a>: manipular conjuntos de dados SQL</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: manipular conjuntos de dados no Apache Spark</li>
</ul>
<p>Para nossos exemplos, vamos utilizar os <strong>dados de pinguins</strong> <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados estão disponíveis no pacote <em>palmerpenguins</em>. Vamos utilizar principalmente o conjunto de dados <strong>penguins</strong>, que é uma versão simplificada dos dados brutos <strong>penguins_raw</strong>.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="intro-r.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb254-2"><a href="intro-r.html#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos <strong>reordenadar as colunas</strong> com a função <code>dplyr::relocate()</code>, onde simplesmente listamos as colunas que queremos mudar de posição e para onde elas devem ir. Para esse último passo há dois argumentos: <strong>.before</strong> que indica qual a coluna que as colunas realocadas devem se mover antes, e o argumentos <strong>.after</strong> indicando onde devem se mover depois. Ambos podem ser informados com os nomes ou posições dessas colunas com números.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="intro-r.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - nome</span></span>
<span id="cb255-2"><a href="intro-r.html#cb255-2" aria-hidden="true" tabindex="-1"></a>penguins_relocate_col <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb255-3"><a href="intro-r.html#cb255-3" aria-hidden="true" tabindex="-1"></a> dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> island)</span>
<span id="cb255-4"><a href="intro-r.html#cb255-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-5"><a href="intro-r.html#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - posicao</span></span>
<span id="cb255-6"><a href="intro-r.html#cb255-6" aria-hidden="true" tabindex="-1"></a>penguins_relocate_ncol <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb255-7"><a href="intro-r.html#cb255-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Podemos ainda <strong>renomear colunas</strong> facilmente com a função <code>dplyr::rename()</code>, onde primeiramente informamos o nome que queremos que a coluna tenha, seguido do operador <code>=</code> e a coluna do nosso dado. Também podemos utilizar a função <code>dplyr::rename_with()</code>, que faz a <strong>mudança do nome em múltiplas colunas</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="intro-r.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome das colunas</span></span>
<span id="cb256-2"><a href="intro-r.html#cb256-2" aria-hidden="true" tabindex="-1"></a>penguins_rename <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb256-3"><a href="intro-r.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">bill_length =</span> bill_length_mm,</span>
<span id="cb256-4"><a href="intro-r.html#cb256-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">bill_depth =</span> bill_depth_mm,</span>
<span id="cb256-5"><a href="intro-r.html#cb256-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">flipper_length =</span> flipper_length_mm,</span>
<span id="cb256-6"><a href="intro-r.html#cb256-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">body_mass =</span> body_mass_g)</span>
<span id="cb256-7"><a href="intro-r.html#cb256-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-8"><a href="intro-r.html#cb256-8" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome de todas as colunas</span></span>
<span id="cb256-9"><a href="intro-r.html#cb256-9" aria-hidden="true" tabindex="-1"></a>penguins_rename_with <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb256-10"><a href="intro-r.html#cb256-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(toupper)</span></code></pre></div>
<p>Outra operação bastante usual dentro da manipulação de dados tabulares é a <strong>seleção de colunas</strong>. Podemos fazer essa operação com a função <code>dplyr::select()</code>, que seleciona colunas pelo nome ou pela posição. Aqui há uma série de possibilidades de seleção de colunas, desde utilizar operadores como <code>:</code> para selecionar intervalos de colunas, <code>!</code> para tomar o complemento, além de funções como <code>dplyr::starts_with()</code>, <code>dplyr::ends_with()</code>, <code>dplyr::contains()</code> para <strong>procurar colunas com um padrão de texto</strong>.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="intro-r.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por nomes</span></span>
<span id="cb257-2"><a href="intro-r.html#cb257-2" aria-hidden="true" tabindex="-1"></a>penguins_select <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb257-3"><a href="intro-r.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(bill_length_mm<span class="sc">:</span>body_mass_g)</span>
<span id="cb257-4"><a href="intro-r.html#cb257-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-5"><a href="intro-r.html#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por padrao</span></span>
<span id="cb257-6"><a href="intro-r.html#cb257-6" aria-hidden="true" tabindex="-1"></a>penguins_select_contains <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb257-7"><a href="intro-r.html#cb257-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;_mm&quot;</span>))</span></code></pre></div>
<p>Quando usamos a função <code>dplyr::select()</code>, mesmo que para uma linha, o retorno é sempre um <code>tibble</code>. Caso precisemos que essa <strong>coluna se torne um vetor</strong>, dentro do encadeamento dos <code>pipes</code>, usamos a função <code>dplyr::pull()</code> que <strong>que extrai uma coluna única coluna como vetor</strong>.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="intro-r.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coluna como vetor</span></span>
<span id="cb258-2"><a href="intro-r.html#cb258-2" aria-hidden="true" tabindex="-1"></a>penguins_select_pull <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb258-3"><a href="intro-r.html#cb258-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(bill_length_mm)</span></code></pre></div>
<p>Uma das operações mais úteis dentre as operações para colunas é <strong>adicionar ou atualizar os valores</strong> de colunas. Para essa operação, usaremos a função <code>dplyr::mutate()</code>. Podemos ainda usar os argumentos <strong>.before</strong> e <strong>.after</strong> para indicar onde a nova coluna deve ficar, além do parâmetro <strong>.keep</strong> com diversas possibilidades de manter colunas depois de usar a função <code>dplyr::mutate()</code>. Por fim,
é fundamental destacar o uso das <strong>funções de replicação</strong>: <code>dplyr::across()</code>, <code>dplyr::if_any()</code> e <code>dplyr::if_all()</code>, para os quais a função irá <strong>fazer alterações em múltiplas colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="intro-r.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adicionar colunas</span></span>
<span id="cb259-2"><a href="intro-r.html#cb259-2" aria-hidden="true" tabindex="-1"></a>penguins_mutate <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb259-3"><a href="intro-r.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="fl">1e3</span>, <span class="at">.before =</span> sex)</span>
<span id="cb259-4"><a href="intro-r.html#cb259-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-5"><a href="intro-r.html#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="co"># modificar varias colunas</span></span>
<span id="cb259-6"><a href="intro-r.html#cb259-6" aria-hidden="true" tabindex="-1"></a>penguins_mutate_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb259-7"><a href="intro-r.html#cb259-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.character))</span></code></pre></div>
<p>Além de operações em colunas, podemos fazer <strong>operações em linhas</strong>. Vamos começar com a <strong>reordenação das linhas</strong> com base nos valores das colunas. Para essa operação, usamos a função <code>dplyr::arrange()</code>. Podemos reordenadar por uma ou mais colunas de forma crescente ou de forma decrescente usando a função <code>desc()</code> ou o operador <code>-</code>. Da mesma forma que na função <code>dplyr::mutate()</code>, podemos usar as <strong>funções de replicação</strong> para <strong>ordenar as linhas para várias colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="intro-r.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - crescente</span></span>
<span id="cb260-2"><a href="intro-r.html#cb260-2" aria-hidden="true" tabindex="-1"></a>penguins_arrange <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-3"><a href="intro-r.html#cb260-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(body_mass_g)</span>
<span id="cb260-4"><a href="intro-r.html#cb260-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-5"><a href="intro-r.html#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb260-6"><a href="intro-r.html#cb260-6" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-7"><a href="intro-r.html#cb260-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g))</span>
<span id="cb260-8"><a href="intro-r.html#cb260-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-9"><a href="intro-r.html#cb260-9" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb260-10"><a href="intro-r.html#cb260-10" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc_m <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-11"><a href="intro-r.html#cb260-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>body_mass_g)</span>
<span id="cb260-12"><a href="intro-r.html#cb260-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-13"><a href="intro-r.html#cb260-13" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - multiplas colunas</span></span>
<span id="cb260-14"><a href="intro-r.html#cb260-14" aria-hidden="true" tabindex="-1"></a>penguins_arrange_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-15"><a href="intro-r.html#cb260-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span></code></pre></div>
<p>Uma das principais e mais usuais operações que podemos realizar em linhas é a seleção de linhas através do <strong>filtro por valores de uma ou mais colunas</strong>, utilizando a função <code>dplyr::filter()</code>. Para realizar os filtros iremos utilizar grande parte dos operadores relacionais e lógicos que listamos na Tabela <a href="intro-r.html#tab:tab-operadores">5.1</a>, especialmente os lógicos para combinações de filtros em mais de uma coluna. Além desses operadores, podemos utilizar a função <code>is.na()</code> para filtros em elementos faltantes, e as funções <code>dplyr::between()</code> e <code>dplyr::near()</code> para valores filtros entre valores, e para valores próximos com certa tolerência, respectivamente. Por fim, podemos usar as <strong>funções de replicação</strong> para <strong>filtro das linhas para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="intro-r.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb261-2"><a href="intro-r.html#cb261-2" aria-hidden="true" tabindex="-1"></a>penguins_filter <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-3"><a href="intro-r.html#cb261-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span>
<span id="cb261-4"><a href="intro-r.html#cb261-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-5"><a href="intro-r.html#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb261-6"><a href="intro-r.html#cb261-6" aria-hidden="true" tabindex="-1"></a>penguins_filter_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-7"><a href="intro-r.html#cb261-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb261-8"><a href="intro-r.html#cb261-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-9"><a href="intro-r.html#cb261-9" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb261-10"><a href="intro-r.html#cb261-10" aria-hidden="true" tabindex="-1"></a>penguins_filter_in <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-11"><a href="intro-r.html#cb261-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>),</span>
<span id="cb261-12"><a href="intro-r.html#cb261-12" aria-hidden="true" tabindex="-1"></a>                sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb261-13"><a href="intro-r.html#cb261-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-14"><a href="intro-r.html#cb261-14" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - na</span></span>
<span id="cb261-15"><a href="intro-r.html#cb261-15" aria-hidden="true" tabindex="-1"></a>penguins_filter_na <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-16"><a href="intro-r.html#cb261-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex) <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-17"><a href="intro-r.html#cb261-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-18"><a href="intro-r.html#cb261-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - between</span></span>
<span id="cb261-19"><a href="intro-r.html#cb261-19" aria-hidden="true" tabindex="-1"></a>penguins_filter_between <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-20"><a href="intro-r.html#cb261-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="dv">3000</span>, <span class="dv">4000</span>))</span>
<span id="cb261-21"><a href="intro-r.html#cb261-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-22"><a href="intro-r.html#cb261-22" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas por varias colunas</span></span>
<span id="cb261-23"><a href="intro-r.html#cb261-23" aria-hidden="true" tabindex="-1"></a>penguins_filter_if <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-24"><a href="intro-r.html#cb261-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">where</span>(is.integer), <span class="sc">~</span> . <span class="sc">&gt;</span> <span class="dv">200</span>))</span></code></pre></div>
<p>Além da selecção de linhas por filtros, podemos fazer a <strong>seleção das linhas por intervalos</strong>, indicando quais <strong>linhas desejamos</strong>, usando a função <code>dplyr::slice()</code>, e informando o argumento <strong>n</strong> para o número da linha ou intervalo das linhas. Essa função possui variações no sufixo muito interessantes: <code>dplyr::slice_head()</code> e <code>dplyr::slice_tail()</code> seleciona as primeiras e últimas linhas, <code>dplyr::slice_min()</code> e <code>dplyr::slice_max()</code> seleciona linhas com os maiores e menores valores de uma coluna, e <code>dplyr::slice_sample()</code> seleciona linhas aleatoriamente.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="intro-r.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas</span></span>
<span id="cb262-2"><a href="intro-r.html#cb262-2" aria-hidden="true" tabindex="-1"></a>penguins_slice <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-3"><a href="intro-r.html#cb262-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">300</span><span class="sc">:</span><span class="fu">n</span>()))</span>
<span id="cb262-4"><a href="intro-r.html#cb262-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-5"><a href="intro-r.html#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - head</span></span>
<span id="cb262-6"><a href="intro-r.html#cb262-6" aria-hidden="true" tabindex="-1"></a>penguins_slice_head <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-7"><a href="intro-r.html#cb262-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb262-8"><a href="intro-r.html#cb262-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-9"><a href="intro-r.html#cb262-9" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - max</span></span>
<span id="cb262-10"><a href="intro-r.html#cb262-10" aria-hidden="true" tabindex="-1"></a>penguins_slice_max <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-11"><a href="intro-r.html#cb262-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_max</span>(body_mass_g, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb262-12"><a href="intro-r.html#cb262-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-13"><a href="intro-r.html#cb262-13" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - sample</span></span>
<span id="cb262-14"><a href="intro-r.html#cb262-14" aria-hidden="true" tabindex="-1"></a>penguins_slice_sample <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-15"><a href="intro-r.html#cb262-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span></code></pre></div>
<p>A última operação que apresentaremos aqui para linhas será a <strong>retirada de linhas com valores repetidos com base nos valores de colunas</strong> utilizandos a função <code>dplyr::distinct()</code>. Essa função por padrão retorna apenas a coluna utilizada para retirar as linhas com valores repetidos, sendo necessário acrescentar o argumento <strong>.keep_all</strong> para retornar todas as colunas. Por fim, podemos usar as <strong>funções de replicação</strong> para <strong>retirar linhas com valores repetidos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="intro-r.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos</span></span>
<span id="cb263-2"><a href="intro-r.html#cb263-2" aria-hidden="true" tabindex="-1"></a>penguins_distinct <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb263-3"><a href="intro-r.html#cb263-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g)</span>
<span id="cb263-4"><a href="intro-r.html#cb263-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-5"><a href="intro-r.html#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos - manter as outras colunas</span></span>
<span id="cb263-6"><a href="intro-r.html#cb263-6" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb263-7"><a href="intro-r.html#cb263-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb263-8"><a href="intro-r.html#cb263-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-9"><a href="intro-r.html#cb263-9" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos para varias colunas</span></span>
<span id="cb263-10"><a href="intro-r.html#cb263-10" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb263-11"><a href="intro-r.html#cb263-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.integer)), <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Agora entraremos no assunto de resumo das observações. Podemos fazer <strong>contagens resumos dos nossos dados</strong>, utilizando para isso a função <code>dplyr::count()</code>. Essa função irá contar valores de uma ou mais colunas, semelhante à função Base R <code>table()</code>, mas num contexto <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="intro-r.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para um coluna</span></span>
<span id="cb264-2"><a href="intro-r.html#cb264-2" aria-hidden="true" tabindex="-1"></a>penguins_count <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb264-3"><a href="intro-r.html#cb264-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species)</span>
<span id="cb264-4"><a href="intro-r.html#cb264-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-5"><a href="intro-r.html#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para mais de uma coluna</span></span>
<span id="cb264-6"><a href="intro-r.html#cb264-6" aria-hidden="true" tabindex="-1"></a>penguins_count_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb264-7"><a href="intro-r.html#cb264-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species, island)</span></code></pre></div>
<p>Uma grande parte das operações feita nos dados são realizadas em <strong>grupos definidos por valores de colunas ou variáveis categóricas</strong>. A função <code>dplyr::group_by()</code> transforma um <code>tibble</code> e converte em um <code>tibble</code> agrupado, onde as operações são realizadas “por grupo.” Essa função é utilizada geralmente com a função <code>dplyr::summarise()</code>, que veremos logo em seguida. O agrupamento não altera a aparência dos dados (além de informar como estão agrupados). A função <code>dplyr::ungroup()</code> remove o agrupamento. Podemos ainda usar <strong>funções de replicação</strong> para <strong>fazer os agrupamentos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="intro-r.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb265-2"><a href="intro-r.html#cb265-2" aria-hidden="true" tabindex="-1"></a>penguins_group_by <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb265-3"><a href="intro-r.html#cb265-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species)</span>
<span id="cb265-4"><a href="intro-r.html#cb265-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-5"><a href="intro-r.html#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb265-6"><a href="intro-r.html#cb265-6" aria-hidden="true" tabindex="-1"></a>penguins_group_by_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb265-7"><a href="intro-r.html#cb265-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor)))</span></code></pre></div>
<p>Como dissemos, muitas vezes queremos <strong>resumir nossos dados</strong>, principalmente para ter uma noção geral das variáveis (colunas) ou mesmo começar a <strong>análise exploratória resumindo variáveis contínuas por grupos de variáveis categóricas</strong>. Dessa forma, ao utilizar a função <code>dplyr::summarise()</code> teremos um novo <code>tibble</code> com os dados resumidos, que é a <strong>agregação ou resumo dos dados através de funções</strong>. Da mesma forma que outras funções, podemos usar <strong>funções de replicação</strong> para <strong>resumir valores para mais de uma coluna</strong>, dependendo de resultados booleanos. .</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="intro-r.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb266-2"><a href="intro-r.html#cb266-2" aria-hidden="true" tabindex="-1"></a>penguins_summarise <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb266-3"><a href="intro-r.html#cb266-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb266-4"><a href="intro-r.html#cb266-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb266-5"><a href="intro-r.html#cb266-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">body_mass_g_sd =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb266-6"><a href="intro-r.html#cb266-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-7"><a href="intro-r.html#cb266-7" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb266-8"><a href="intro-r.html#cb266-8" aria-hidden="true" tabindex="-1"></a>penguins_summarise_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb266-9"><a href="intro-r.html#cb266-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb266-10"><a href="intro-r.html#cb266-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Muitas vezes teremos de <strong>combinar duas ou mais tabelas de dados</strong>. Podemos utilizar as funções Base R <code>rbind</code> e <code>cbind</code>, como vimos. Entrentanto, pode ser interessante avançar para as funções <code>dplyr::bind_rows()</code> e <code>dplyr::bind_cols()</code> do formato <em>tidyverse</em>. A ideia é muito semelhante: a primeira função combina dados por linhas e a segunda por colunas. Entretanto, há vantagens no uso dessas funções, como a identificação das linhas pelo argumento <strong>.id</strong> para a primera função, e a conferência do nome das colunas pelo argumento <strong>.name_repair</strong> para a segunda função.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="intro-r.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar as linhas para dois tibbles</span></span>
<span id="cb267-2"><a href="intro-r.html#cb267-2" aria-hidden="true" tabindex="-1"></a>penguins_01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb267-3"><a href="intro-r.html#cb267-3" aria-hidden="true" tabindex="-1"></a>penguins_02 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">51</span><span class="sc">:</span><span class="dv">55</span>)</span>
<span id="cb267-4"><a href="intro-r.html#cb267-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-5"><a href="intro-r.html#cb267-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar linhas</span></span>
<span id="cb267-6"><a href="intro-r.html#cb267-6" aria-hidden="true" tabindex="-1"></a>penguins_bind_rows <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(penguins_01, penguins_02, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb267-7"><a href="intro-r.html#cb267-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-8"><a href="intro-r.html#cb267-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar colunas</span></span>
<span id="cb267-9"><a href="intro-r.html#cb267-9" aria-hidden="true" tabindex="-1"></a>penguins_bind_cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(penguins_01, penguins_02, <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span>)</span></code></pre></div>
<p>Finalmente, veremos o último conjunto de funções do pacote <em>dplyr</em>, a <strong>junção de tabelas</strong>. Nessa operação, fazemos a <strong>combinação de pares de conjunto de dados tabulares por uma ou mais colunas chaves</strong>. Há dois tipos de junções: junção de mutação e junção de filtragem. A <strong>junção de mutação</strong> primeiro combina as observações por suas chaves e, em seguida, <strong>copia as variáveis (colunas) de uma tabela para a outra</strong>. É fundamental destacar a importância da <strong>coluna chave</strong>, que é indicada pelo argumento <strong>by</strong>. Essa coluna deve conter <strong>elementos que sejam comuns às duas tabelas</strong> para que haja a combinação dos elementos.</p>
<p>Existem quatro tipos de junções, que são realizadas pelas funções <code>dplyr::inner_join()</code>, <code>dplyr::left_join()</code>, <code>dplyr::full_join()</code> e <code>dplyr::right_join()</code>, e que podem ser representadas na Figura <a href="intro-r.html#fig:fig-r-join">5.6</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-join"></span>
<img src="img/cap04_join.png" alt="Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017)." width="80%" />
<p class="caption">
Figura 5.6: Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Considerando a nomenclatura de uma tabela de dados sendo como <code>x</code> e <code>y</code>, temos:</p>
<ul>
<li><code>inner_join(x, y)</code>: mantém apenas as observações em <code>x</code> e em <code>y</code></li>
<li><code>left_join(x, y)</code>: mantém todas as observações em <code>x</code></li>
<li><code>right_join(x, y)</code>: mantém todas as observações em <code>y</code></li>
<li><code>full_join(x, y)</code>: mantém todas as observações em <code>x</code> e em <code>y</code></li>
</ul>
<p>Aqui, vamos demostrar apenas a função <code>dplyr::left_join()</code>, trazendo os dados do conjunto de dados do <strong>penguins_raw</strong> para o conjunto de dados do <strong>penguins</strong>.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="intro-r.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add uma coluna chave de ids</span></span>
<span id="cb268-2"><a href="intro-r.html#cb268-2" aria-hidden="true" tabindex="-1"></a>penguin_islands <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb268-3"><a href="intro-r.html#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">island =</span> <span class="fu">c</span>(<span class="st">&quot;Torgersen&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>, <span class="st">&quot;Dream&quot;</span>, <span class="st">&quot;Alpha&quot;</span>),</span>
<span id="cb268-4"><a href="intro-r.html#cb268-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.083333</span>, <span class="sc">-</span><span class="fl">63.775636</span>, <span class="sc">-</span><span class="fl">64.233333</span>, <span class="sc">-</span><span class="dv">63</span>),</span>
<span id="cb268-5"><a href="intro-r.html#cb268-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.766667</span>, <span class="sc">-</span><span class="fl">64.818569</span>, <span class="sc">-</span><span class="fl">64.733333</span>, <span class="sc">-</span><span class="fl">64.316667</span>)</span>
<span id="cb268-6"><a href="intro-r.html#cb268-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb268-7"><a href="intro-r.html#cb268-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb268-8"><a href="intro-r.html#cb268-8" aria-hidden="true" tabindex="-1"></a><span class="co"># juncao - left</span></span>
<span id="cb268-9"><a href="intro-r.html#cb268-9" aria-hidden="true" tabindex="-1"></a>penguins_left_join <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb268-10"><a href="intro-r.html#cb268-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(penguin_islands, <span class="at">by =</span> <span class="st">&quot;island&quot;</span>)</span></code></pre></div>
<p>Já a <strong>junção de filtragem</strong> combinam as observações da mesma maneira que as junções de mutação, mas <strong>afetam as observações, não as variáveis (colunas)</strong>. Existem dois tipos:</p>
<ul>
<li><code>semi_join(x, y)</code>: mantém todas as observações em <code>x</code> que têm uma correspondência em <code>y</code></li>
<li><code>anti_join(x, y)</code>: alimina todas as observações em <code>x</code> que têm uma correspondência em <code>y</code></li>
</ul>
<p><em>Semi-joins</em> são úteis para <strong>corresponder tabelas de resumo filtradas de volta às linhas originais</strong>, removendo as linhas que não estavam antes do join. <em>Anti-joins</em> são úteis para <strong>diagnosticar incompatibilidades de junção</strong>, por exemplo, ao verificar os elementos que não combinam entre duas tabelas de dados.</p>
<p>Temos ainda <strong>operações de conjuntos</strong> e <strong>comparação de dados</strong>.</p>
<ul>
<li><code>union(x, y)</code>: retorna todas as linhas que aparecem em <code>x</code>, <code>y</code> ou mais dos conjuntos de dados</li>
<li><code>interesect(x, y)</code>: retorna apenas as linhas que aparecem em <code>x</code> e em <code>y</code></li>
<li><code>setdiff(x, y)</code>: retorna as linhas que aparecem <code>x</code>, mas não em <code>y</code></li>
<li><code>setequal(x, y)</code>: retorna se <code>x</code> e <code>y</code> são iguais e quais suas diferenças</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/relational-data.html">13 Relational data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="stringr" class="section level3" number="5.5.9">
<h3><span class="header-section-number">5.5.9</span> stringr</h3>
<p>O pacote <em>stringr</em> fornece um conjunto de funções para a <strong>manipulação de caracteres ou strings</strong>. O pacote concentra-se nas funções de manipulação mais importantes e comumente usadas. Para função para específicas, recomenda-se usar para o pacote <em>stringi</em>, que fornece um conjunto mais abrangente de funções. As funções do <em>stringr</em> podem ser agrupadas em algumas operações para tarefas específicas como correspondência de padrões, espaço em branco, maiúsculas e minúsculas, além de outras funções.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://stringr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Demonstraremos <strong>algumas funções para algumas operações mais comuns</strong>, utilizando um vetor de um elemento, com o string “penguins.”</p>
<p>Podemos explorar o <strong>comprimento</strong> de strings com a função <code>stringr::str_length()</code>.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="intro-r.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprimento</span></span>
<span id="cb269-2"><a href="intro-r.html#cb269-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_length</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p><strong>Extrair um string</strong> por sua posição usando a função <code>stringr::str_sub()</code> ou por um padrão com <code>stringr::str_extract()</code>.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="intro-r.html#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair pela posicao</span></span>
<span id="cb271-2"><a href="intro-r.html#cb271-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">end =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;pen&quot;</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="intro-r.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair por padrão</span></span>
<span id="cb273-2"><a href="intro-r.html#cb273-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;p&quot;</code></pre>
<p><strong>Substituir strings</strong> por outros strings com <code>stringr::str_replace()</code>.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="intro-r.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sustituir</span></span>
<span id="cb275-2"><a href="intro-r.html#cb275-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;a&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p><strong>Separar</strong> strings por um padrão com a função <code>stringr::str_split()</code>.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="intro-r.html#cb277-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">string =</span> <span class="st">&quot;p-e-n-g-u-i-n-s&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,] &quot;p&quot;  &quot;e&quot;  &quot;n&quot;  &quot;g&quot;  &quot;u&quot;  &quot;i&quot;  &quot;n&quot;  &quot;s&quot;</code></pre>
<p><strong>Inserir espaços em brancos</strong> pela esquerda ou direira com a função <code>stringr::str_pad()</code>.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="intro-r.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inserir espacos em branco</span></span>
<span id="cb279-2"><a href="intro-r.html#cb279-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;  penguins&quot;</code></pre>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="intro-r.html#cb281-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins  &quot;</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="intro-r.html#cb283-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins &quot;</code></pre>
<p>Também podemos <strong>remover espaços em branco</strong> do começo, final ou ambo, utilizando <code>stringr::str_trim()</code>.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="intro-r.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover espacos em branco</span></span>
<span id="cb285-2"><a href="intro-r.html#cb285-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins &quot;</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="intro-r.html#cb287-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins&quot;</code></pre>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="intro-r.html#cb289-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p>Podemos também <strong>alterar minúsculas e maiúsculas</strong> em diferentes, com várias funções.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="intro-r.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar minusculas e maiusculas</span></span>
<span id="cb291-2"><a href="intro-r.html#cb291-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(<span class="at">string =</span> <span class="st">&quot;Penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="intro-r.html#cb293-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;PENGUINS&quot;</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="intro-r.html#cb295-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_sentence</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="intro-r.html#cb297-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<p>Podemos ainda <strong>ordenar os elementos</strong> de um vetor por ordem alfabética, usando <code>stringr::str_sort()</code>.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="intro-r.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar</span></span>
<span id="cb299-2"><a href="intro-r.html#cb299-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters)</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="intro-r.html#cb301-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters, <span class="at">dec =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;z&quot; &quot;y&quot; &quot;x&quot; &quot;w&quot; &quot;v&quot; &quot;u&quot; &quot;t&quot; &quot;s&quot; &quot;r&quot; &quot;q&quot; &quot;p&quot; &quot;o&quot; &quot;n&quot; &quot;m&quot; &quot;l&quot; &quot;k&quot; &quot;j&quot; &quot;i&quot; &quot;h&quot;
## [20] &quot;g&quot; &quot;f&quot; &quot;e&quot; &quot;d&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot;</code></pre>
<p>Podemos ainda utilizar essas funções em complemento com o pacote <em>dplyr</em>, para <strong>alterar os strings de colunas</strong> ou <strong>nome das colunas</strong>.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="intro-r.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar valores das colunas</span></span>
<span id="cb303-2"><a href="intro-r.html#cb303-2" aria-hidden="true" tabindex="-1"></a>penguins_stringr_valores <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb303-3"><a href="intro-r.html#cb303-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">species =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(species))</span>
<span id="cb303-4"><a href="intro-r.html#cb303-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-5"><a href="intro-r.html#cb303-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar nome das colunas</span></span>
<span id="cb303-6"><a href="intro-r.html#cb303-6" aria-hidden="true" tabindex="-1"></a>penguins_stringr_nomes <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb303-7"><a href="intro-r.html#cb303-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(stringr<span class="sc">::</span>str_to_title)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/strings.html">14 Strings</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="forcats" class="section level3" number="5.5.10">
<h3><span class="header-section-number">5.5.10</span> forcats</h3>
<p>O pacote <em>forcats</em> fornece um conjunto de ferramentas úteis para <strong>manipular fatores</strong>. Como dito anteriormente, usamos fatores geralmente quando temos <strong>dados categóricos</strong>, que são variáveis que possuem um conjunto de valores fixos e conhecidos. As funções são utilizadas principalmente para: mudar a ordem dos níveis, mudar os valores dos níveis, adicionar e remover níveis, combinar múltiplos níveis, além de outras operações.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://forcats.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Vamos utilizar ainda os dados <strong>penguins</strong> e <strong>penguins_raw</strong> para exemplificar o uso do pacote <em>forcats</em>.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="intro-r.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb304-2"><a href="intro-r.html#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos <strong>converter</strong> dados de <strong>string</strong> para <strong>fator</strong>, utilizando a função <code>forcats::as_factor()</code>.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="intro-r.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string</span></span>
<span id="cb305-2"><a href="intro-r.html#cb305-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">as_factor</span>(penguins_raw<span class="sc">$</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [3] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [5] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## 3 Levels: Adelie Penguin (Pygoscelis adeliae) ...</code></pre>
<p>Podemos facilmente mudar o <strong>nome dos níveis</strong> utilizando a <code>forcats::fct_recode()</code>.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="intro-r.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="co"># muda o nome dos niveis</span></span>
<span id="cb307-2"><a href="intro-r.html#cb307-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_recode</span>(penguins<span class="sc">$</span>species, <span class="at">a =</span> <span class="st">&quot;Adelie&quot;</span>, <span class="at">c =</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="at">g =</span> <span class="st">&quot;Gentoo&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] a a a a a a
## Levels: a c g</code></pre>
<p>Para <strong>inverter os níveis</strong>, usamos a função <code>forcats::fct_rev()</code>.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="intro-r.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inverte os niveis</span></span>
<span id="cb309-2"><a href="intro-r.html#cb309-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_rev</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Gentoo Chinstrap Adelie</code></pre>
<p>Uma operação muito comum com fatores é <strong>mudar a ordem dos níveis</strong>. Quando precisamos <strong>especificar a ordem dos níveis</strong>, podemos fazer essa operação manualmente com a função <code>forcats::fct_relevel()</code>.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="intro-r.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especifica a ordem dos niveis</span></span>
<span id="cb311-2"><a href="intro-r.html#cb311-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(penguins<span class="sc">$</span>species, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Adelie&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Chinstrap Gentoo Adelie</code></pre>
<p>Como vimos, a <strong>reordenação</strong> dos níveis pode ser feita <strong>manualmente</strong>. Mas existe outras formas <strong>automáticas de reordenação</strong> seguindo algumas <strong>regras</strong>, para as quais existem funções específicas.</p>
<ul>
<li><code>forcats::fct_inorder()</code>: pela ordem em que aparecem pela primeira vez</li>
<li><code>forcats::fct_infreq()</code>: por número de observações com cada nível (o maior primeiro)</li>
<li><code>forcats::fct_inseq()</code>: por valor numérico de nível</li>
</ul>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="intro-r.html#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># niveis pela ordem em que aparecem</span></span>
<span id="cb313-2"><a href="intro-r.html#cb313-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="intro-r.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordem (decrescente) de frequencia</span></span>
<span id="cb315-2"><a href="intro-r.html#cb315-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<p>Por fim, podemos fazer a <strong>agregação de níveis raros em um nível</strong> utilizando a função <code>forcats::fct_lump()</code>.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="intro-r.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agregacao de niveis raros em um nivel</span></span>
<span id="cb317-2"><a href="intro-r.html#cb317-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_lump</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Other</code></pre>
<p>Podemos ainda utilizar essas funções em complemento com o pacote <em>dplyr</em>, para fazer <strong>manipulações de fatores nas colunas</strong>.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="intro-r.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformar varias colunas em fator</span></span>
<span id="cb319-2"><a href="intro-r.html#cb319-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_multi_factor <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span> </span>
<span id="cb319-3"><a href="intro-r.html#cb319-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), forcats<span class="sc">::</span>as_factor))</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/factors.html">15 Factors</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="lubridate" class="section level3" number="5.5.11">
<h3><span class="header-section-number">5.5.11</span> lubridate</h3>
<p>O pacote <em>lubridate</em> fornece um conjunto de funções para a <strong>manipulação de dados data e tempo</strong>. Dessa forma, esse pacote facilita o manejo desse tipo de dado no R, pois geralmente esses dados não são intuitivos e mudam dependendo do tipo de objeto de data e hora. Além disso, os métodos que usam datas e horários devem levar em consideração fusos horários, anos bissextos, horários de verão e além de outras particularidades. Existem diversas funções nesse pacote, sendo as mesmas focadas em: transformações de data/tempo, componentes, arredondamentos, durações, períodos, intervalos, além de muitas outras funções específicas.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://lubridate.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Apesar de estar inserido no escopo do <em>tidyverse</em>, este pacote não é instalado com os demais, <strong>requisitando sua instalação solo</strong>.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="intro-r.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb320-2"><a href="intro-r.html#cb320-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="intro-r.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb321-2"><a href="intro-r.html#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>Existem trÊs tipos de dados data/tempo:</p>
<ul>
<li><strong>Data</strong>: tempo em dias, meses e anos <code>&lt;date&gt;</code></li>
<li><strong>Tempo</strong>: tempo dentro de um dia <code>&lt;time&gt;</code></li>
<li><strong>Data-tempo</strong>: tempo em um instante (data mais tempo) <code>&lt;dttm&gt;</code></li>
</ul>
<p>Para trabalhar exclusivamente com horários, podemos utilizar o pacote <em>hms</em>.</p>
<p>É fundamental também destacar que algumas letras terão um significado temporal, sendo abreviações de diferentes períodos em inglês: <strong>y</strong>ear (ano), <strong>m</strong>onth (mês), <strong>w</strong>eak (semana), <strong>d</strong>ay (dia), <strong>h</strong>our (hora), <strong>m</strong>inute (minuto), e <strong>s</strong>econd (segundo).</p>
<p>Para acessar a <strong>informação da data e horários atuais</strong> podemos utilizar as funções <code>lubridate::today()</code> e <code>lubridate::now()</code>.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="intro-r.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrai a data nesse instante</span></span>
<span id="cb322-2"><a href="intro-r.html#cb322-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09&quot;</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="intro-r.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extraie a data e tempo nesse instante</span></span>
<span id="cb324-2"><a href="intro-r.html#cb324-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">now</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 10:40:59 -03&quot;</code></pre>
<p>Além dessas informações instantâneas, existem <strong>três maneiras</strong> de criar um dado de data/tempo.</p>
<ul>
<li>De um string</li>
<li>De componentes individuais de data e hora</li>
<li>De um objeto de data/tempo existente</li>
</ul>
<p>Os dados de data/tempo geralmente estão no formato de <strong>strings</strong>. Podemos transformar os dados especificando a ordem dos componentes, ou seja, a ordem em que ano, mês e dia aparecem no string, usando as letras <code>y</code> (ano), <code>m</code> (mês) e <code>d</code> (dia) na mesma ordem, por exemplo, <code>lubridate::dmy()</code>.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="intro-r.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb326-2"><a href="intro-r.html#cb326-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-03-2021&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03&quot;</code></pre>
<p>Essas funções também aceitam números sem aspas, além de serem <strong>muito versáteis</strong> e <strong>funcionarem em outros diversos formatos</strong>.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="intro-r.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb328-2"><a href="intro-r.html#cb328-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-Mar-2021&quot;</span>)</span>
<span id="cb328-3"><a href="intro-r.html#cb328-3" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="dv">03032021</span>)</span>
<span id="cb328-4"><a href="intro-r.html#cb328-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03032021&quot;</span>)</span>
<span id="cb328-5"><a href="intro-r.html#cb328-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03/03/2021&quot;</span>)</span>
<span id="cb328-6"><a href="intro-r.html#cb328-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03.03.2021&quot;</span>)</span></code></pre></div>
<p>Além da data, podemos <strong>especificar horários</strong> atrelados à essas datas. Para criar uma data e tempo, adicionamos um underscore (<code>_</code>) e os <code>h</code> (hora), <code>m</code> (minuto) e <code>s</code> (segundo) ao nome da função, além do argumento <strong>tz</strong> para especificar <strong>fuso horário</strong>.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="intro-r.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especificar horarios e fuso horario</span></span>
<span id="cb329-2"><a href="intro-r.html#cb329-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_h</span>(<span class="st">&quot;03-03-2021 13&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="intro-r.html#cb331-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hm</span>(<span class="st">&quot;03-03-2021 13:32&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="intro-r.html#cb333-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 UTC&quot;</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="intro-r.html#cb335-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 -03&quot;</code></pre>
<p>Podemos ainda ter <strong>componentes individuais</strong> de data-hora em <strong>múltiplas colunas</strong>. Para realizar essa transformação, podemos usar as funções <code>lubridate::make_date()</code> e <code>lubridate::make_datetime()</code>.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="intro-r.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dados com componentes individuais</span></span>
<span id="cb337-2"><a href="intro-r.html#cb337-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb337-3"><a href="intro-r.html#cb337-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ano =</span> <span class="fu">c</span>(<span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2021</span>),</span>
<span id="cb337-4"><a href="intro-r.html#cb337-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb337-5"><a href="intro-r.html#cb337-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dia =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">31</span>),</span>
<span id="cb337-6"><a href="intro-r.html#cb337-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hora =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">14</span>, <span class="dv">18</span>), </span>
<span id="cb337-7"><a href="intro-r.html#cb337-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">minuto =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">44</span>, <span class="dv">55</span>)</span>
<span id="cb337-8"><a href="intro-r.html#cb337-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb337-9"><a href="intro-r.html#cb337-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-10"><a href="intro-r.html#cb337-10" aria-hidden="true" tabindex="-1"></a><span class="co"># data de componentes individuais</span></span>
<span id="cb337-11"><a href="intro-r.html#cb337-11" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb337-12"><a href="intro-r.html#cb337-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">data =</span> lubridate<span class="sc">::</span><span class="fu">make_datetime</span>(ano, mes, dia, hora, minuto))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##     ano   mes   dia  hora minuto data               
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
## 1  2021     1    12     2      2 2021-01-12 02:02:00
## 2  2021     2    20    14     44 2021-02-20 14:44:00
## 3  2021     3    31    18     55 2021-03-31 18:55:00</code></pre>
<p>Por fim, podemo criar datas <strong>modificando entre data-tempo e data</strong>, utilizando as funções <code>lubridate::as_datetime()</code> e <code>lubridate::as_date()</code>.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="intro-r.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data para data-horario</span></span>
<span id="cb339-2"><a href="intro-r.html#cb339-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 UTC&quot;</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="intro-r.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data-horario para data</span></span>
<span id="cb341-2"><a href="intro-r.html#cb341-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09&quot;</code></pre>
<p>Uma vez que entendemos como podemos <strong>criar dados de data/tempo</strong>, podemos explorar funções para <strong>acessar e definir componentes individuais</strong>. Podemos explorar <strong>cada componente</strong> dos dados de data/tempo. Para essa tarefa existe uma grande quantidade de funções para <strong>acessar</strong> de partes de datas e horários.</p>
<ul>
<li><code>year()</code>: acessa o ano</li>
<li><code>month()</code>: acessa o mês</li>
<li><code>month()</code>: acessa o dia</li>
<li><code>yday()</code>: acessa o dia do ano</li>
<li><code>mday()</code>: acessa o dia do mês</li>
<li><code>wday()</code>: acessa o dia da semana</li>
<li><code>hour()</code>: acessa a hora</li>
<li><code>minute()</code>: acessa os minutos</li>
<li><code>second()</code>: acessa os segundos</li>
</ul>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="intro-r.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair</span></span>
<span id="cb343-2"><a href="intro-r.html#cb343-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 2021</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="intro-r.html#cb345-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="intro-r.html#cb347-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Mar
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="intro-r.html#cb349-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">day</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="intro-r.html#cb351-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="intro-r.html#cb353-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Tue
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="intro-r.html#cb355-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">second</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 0.06090832</code></pre>
<p>Além de acessar componentes de datas e horários, podemos usar essas funções para fazer a <strong>inclusão</strong> de informações de datas e tempo.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="intro-r.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb357-2"><a href="intro-r.html#cb357-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dmy_hms</span>(<span class="st">&quot;04-03-2021 01:04:56&quot;</span>)</span>
<span id="cb357-3"><a href="intro-r.html#cb357-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-4"><a href="intro-r.html#cb357-4" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir</span></span>
<span id="cb357-5"><a href="intro-r.html#cb357-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(data) <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb357-6"><a href="intro-r.html#cb357-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(data) <span class="ot">&lt;-</span> <span class="dv">01</span></span>
<span id="cb357-7"><a href="intro-r.html#cb357-7" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hour</span>(data) <span class="ot">&lt;-</span> <span class="dv">13</span></span></code></pre></div>
<p>Mais convenientemente, podemos utilizar a função <code>update()</code> para alterar <strong>vários valores de uma vez</strong>.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="intro-r.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir varios valores</span></span>
<span id="cb358-2"><a href="intro-r.html#cb358-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(data, <span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">1</span>, <span class="at">mday =</span> <span class="dv">1</span>, <span class="at">hour =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-01 01:04:56 UTC&quot;</code></pre>
<p>Muitas vezes precisamos fazer <strong>operações com datas</strong>, como a <strong>aritmética com datas</strong>: subtração, adição e divisão. Para tanto, é preciso entender três classes importantes que representam intervalos de tempo.</p>
<ul>
<li><strong>durações</strong>: representam um número exato de segundos</li>
<li><strong>períodos</strong>: representam unidades humanas como semanas e meses</li>
<li><strong>intervalos</strong>: representam um ponto inicial e final</li>
</ul>
<p>Quando fazemos uma <strong>subtração de datas</strong>, criamos um objeto da classe <code>difftime</code>. Essa classe pode ser um pouco complicada de trabalhar, então dentro do <em>lubridate</em>, podemos usar funções que convertem essa classe em <strong>duração</strong>, da classe <code>Duration</code>. As durações sempre registram o intervalo de tempo em segundos, com alguma unidade de tempo maior entre parênteses. Há uma série de funções para tratar dessa classe.</p>
<ul>
<li><code>duration()</code>: cria data em duração</li>
<li><code>as.duration()</code>: converte datas em duração</li>
<li><code>dyears()</code>: duração de anos</li>
<li><code>dmonths()</code>: duração de meses</li>
<li><code>dweeks()</code>: duração de semanas</li>
<li><code>ddays()</code>: duração de dias</li>
<li><code>dhours()</code>: duração de horas</li>
<li><code>dminutes()</code>: duração de minutos</li>
<li><code>dseconds()</code>: duração de segundos</li>
</ul>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="intro-r.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtracao de datas</span></span>
<span id="cb360-2"><a href="intro-r.html#cb360-2" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb360-3"><a href="intro-r.html#cb360-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb360-4"><a href="intro-r.html#cb360-4" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao para duracao</span></span>
<span id="cb360-5"><a href="intro-r.html#cb360-5" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r_dur <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">as.duration</span>(tempo_estudando_r)</span>
<span id="cb360-6"><a href="intro-r.html#cb360-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb360-7"><a href="intro-r.html#cb360-7" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duracoes</span></span>
<span id="cb360-8"><a href="intro-r.html#cb360-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">90</span>, <span class="st">&quot;seconds&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="intro-r.html#cb362-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="fl">1.5</span>, <span class="st">&quot;minutes&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="intro-r.html#cb364-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">1</span>, <span class="st">&quot;days&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;86400s (~1 days)&quot;</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="intro-r.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao da duracao</span></span>
<span id="cb366-2"><a href="intro-r.html#cb366-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dseconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100s (~1.67 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="intro-r.html#cb368-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dminutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;6000s (~1.67 hours)&quot;</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="intro-r.html#cb370-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dhours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;360000s (~4.17 days)&quot;</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="intro-r.html#cb372-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8640000s (~14.29 weeks)&quot;</code></pre>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="intro-r.html#cb374-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dweeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;60480000s (~1.92 years)&quot;</code></pre>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="intro-r.html#cb376-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;3155760000s (~100 years)&quot;</code></pre>
<p>Podemos ainda utilizar as durações para fazer <strong>operações aritméticas com datas</strong> como adição, subtração e multiplicação.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="intro-r.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando duracoes a datas</span></span>
<span id="cb378-2"><a href="intro-r.html#cb378-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10&quot;</code></pre>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="intro-r.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo duracoes de datas</span></span>
<span id="cb380-2"><a href="intro-r.html#cb380-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-03-08 18:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="intro-r.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># multiplicando duracoes</span></span>
<span id="cb382-2"><a href="intro-r.html#cb382-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;126230400s (~4 years)&quot;</code></pre>
<p>Além das durações, podemos usar <strong>períodos</strong>, que são <strong>extensões de tempo</strong> não fixados em segundos como as durações, mas flexíveis, com o tempo em dias, semanas, meses ou anos, permitindo uma interpretação mais intuitiva das datas. Novamente, há uma série de funções para realizar essas operações.</p>
<ul>
<li><code>period()</code>: cria data em período</li>
<li><code>as.period()</code>: converte datas em período</li>
<li><code>seconds()</code>: período em segundos</li>
<li><code>minutes()</code>: período em minutos</li>
<li><code>hours()</code>: período em horas</li>
<li><code>days()</code>: período em dias</li>
<li><code>weeks()</code>: período em semanas</li>
<li><code>months()</code>: período em meses</li>
<li><code>years()</code>: período em anos</li>
</ul>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="intro-r.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando periodos</span></span>
<span id="cb384-2"><a href="intro-r.html#cb384-2" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;5M 90S&quot;</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="intro-r.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>, <span class="st">&quot;hour&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;week&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;20d 2H 1M 3S&quot;</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="intro-r.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao de periodos</span></span>
<span id="cb388-2"><a href="intro-r.html#cb388-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">seconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100S&quot;</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="intro-r.html#cb390-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">minutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100M 0S&quot;</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="intro-r.html#cb392-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="intro-r.html#cb394-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">days</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="intro-r.html#cb396-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;700d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="intro-r.html#cb398-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">years</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100y 0m 0d 0H 0M 0S&quot;</code></pre>
<p>Além disso, podemos fazer <strong>operações com os períodos</strong>, somando e subtraindo.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="intro-r.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando datas</span></span>
<span id="cb400-2"><a href="intro-r.html#cb400-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-18&quot;</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="intro-r.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo datas</span></span>
<span id="cb402-2"><a href="intro-r.html#cb402-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-12-29&quot;</code></pre>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="intro-r.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando datas recorrentes</span></span>
<span id="cb404-2"><a href="intro-r.html#cb404-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2021-03-09&quot; &quot;2021-03-16&quot; &quot;2021-03-23&quot; &quot;2021-03-30&quot; &quot;2021-04-06&quot;
##  [6] &quot;2021-04-13&quot; &quot;2021-04-20&quot; &quot;2021-04-27&quot; &quot;2021-05-04&quot; &quot;2021-05-11&quot;
## [11] &quot;2021-05-18&quot;</code></pre>
<p>Por fim, veremos os <strong>intervalos</strong>. Intervalos são <strong>períodos de tempo limitados por duas datas</strong>, possuindo uma <strong>duração com um ponto de partida</strong>, que o faz preciso para determinar uma duração. Intervalos são objetos da classe <code>Interval</code>. Da mesma forma que para duração e intervalos, há uma série de funções para realizar essas operações.</p>
<ul>
<li><code>interval()</code>: cria data em intervalo</li>
<li><code>%--%</code>: cria data em intervalo</li>
<li><code>as.interval()</code>: converte datas em intervalo</li>
<li><code>int_start()</code>: acessa ou atribui data inicial de um intervalo</li>
<li><code>int_end()</code>: acessa ou atribui data final de um intervalo</li>
<li><code>int_length()</code>: comprimento de um intervalo em segundos</li>
<li><code>int_flip()</code>: inverte a ordem da data de início e da data de término em um intervalo</li>
<li><code>int_shift()</code>: desloca as datas de início e término de um intervalo</li>
<li><code>int_aligns()</code>: testa se dois intervalos compartilham um ponto final</li>
<li><code>int_standardize()</code>: garante que todos os intervalos sejam positivos</li>
<li><code>int_diff()</code>: retorna os intervalos que ocorrem entre os elementos de data-hora</li>
<li><code>int_overlaps()</code>: testa se dois intervalos se sobrepõem</li>
<li><code>%within%</code>: testa se o primeiro intervalo está contido no segundo</li>
</ul>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="intro-r.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duas datas - inicio de estudos do r e nascimento do meu filho</span></span>
<span id="cb406-2"><a href="intro-r.html#cb406-2" aria-hidden="true" tabindex="-1"></a>r_inicio <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb406-3"><a href="intro-r.html#cb406-3" aria-hidden="true" tabindex="-1"></a>filho_nascimento <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;26-09-2013&quot;</span>)</span>
<span id="cb406-4"><a href="intro-r.html#cb406-4" aria-hidden="true" tabindex="-1"></a>r_hoje <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb406-5"><a href="intro-r.html#cb406-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-6"><a href="intro-r.html#cb406-6" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval</span></span>
<span id="cb406-7"><a href="intro-r.html#cb406-7" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">interval</span>(r_inicio, r_hoje)</span>
<span id="cb406-8"><a href="intro-r.html#cb406-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-9"><a href="intro-r.html#cb406-9" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval %--%</span></span>
<span id="cb406-10"><a href="intro-r.html#cb406-10" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="ot">&lt;-</span> filho_nascimento <span class="sc">%--%</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb406-11"><a href="intro-r.html#cb406-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-12"><a href="intro-r.html#cb406-12" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes com intervalos</span></span>
<span id="cb406-13"><a href="intro-r.html#cb406-13" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_start</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2011-11-30 UTC&quot;</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="intro-r.html#cb408-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_end</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 UTC&quot;</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="intro-r.html#cb410-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_length</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 292636800</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="intro-r.html#cb412-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_flip</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 2021-03-09 UTC--2011-11-30 UTC</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="intro-r.html#cb414-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_shift</span>(r_intervalo, <span class="fu">duration</span>(<span class="at">days =</span> <span class="dv">30</span>))</span></code></pre></div>
<pre><code>## [1] 2011-12-30 UTC--2021-04-08 UTC</code></pre>
<p>Uma operação de destaque é <strong>verificar a sobreposição</strong> entre dois intervalos.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="intro-r.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar sobreposicao - int_overlaps</span></span>
<span id="cb416-2"><a href="intro-r.html#cb416-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_overlaps</span>(r_intervalo, filho_intervalo)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="intro-r.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar se intervalor contido</span></span>
<span id="cb418-2"><a href="intro-r.html#cb418-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%within%</span> filho_intervalo</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="intro-r.html#cb420-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">%within%</span> r_intervalo</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Podemos ainda <strong>calcular quantos períodos existem dentro de um intervalo</strong>, utilizando as operações de <code>/</code> e <code>%/%</code>.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="intro-r.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - anos</span></span>
<span id="cb422-2"><a href="intro-r.html#cb422-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9.271233</code></pre>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="intro-r.html#cb424-1" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%/%</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="intro-r.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - dias e semandas</span></span>
<span id="cb426-2"><a href="intro-r.html#cb426-2" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">days</span>()</span></code></pre></div>
<pre><code>## [1] 2721</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="intro-r.html#cb428-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>()</span></code></pre></div>
<pre><code>## [1] 388.7143</code></pre>
<p>Ainda podemos fazer <strong>transformações dos dados para períodos</strong> e ter todas as unidades de data e tempo que o intervalo compreende.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="intro-r.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tempo total estudando r</span></span>
<span id="cb430-2"><a href="intro-r.html#cb430-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;9y 3m 9d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="intro-r.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># idade do meu filho</span></span>
<span id="cb432-2"><a href="intro-r.html#cb432-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(filho_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;7y 5m 11d 0H 0M 0S&quot;</code></pre>
<p>Por fim, <strong>fusos horários</strong> tendem a ser um fator complicador quando precisamos analisar informações instantâneas de tempo (horário) de outras partes do planeta, ou mesmo fazer conversões dos horário. No <em>lubridate</em> há funções para ajudar nesse assunto. Para isso, podemos utilizar a função <code>lubridate::with_tz()</code>, e no argumento <strong>tzone</strong> informar o fuso horário para a transformação do horário.</p>
<p>Podemos descobrir o <strong>fuso horário que o R está considerando</strong> com a função <code>Sys.timezone()</code>.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="intro-r.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fuso horario no r</span></span>
<span id="cb434-2"><a href="intro-r.html#cb434-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code></pre></div>
<pre><code>## [1] &quot;America/Sao_Paulo&quot;</code></pre>
<p>No R há uma <strong>listagem dos nomes dos fusos horários</strong> que podemos utilizar no argumento <strong>tzone</strong> para diferentes fusos horários.</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="intro-r.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar os fuso horarios</span></span>
<span id="cb436-2"><a href="intro-r.html#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] 607</code></pre>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="intro-r.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot;
## [4] &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;      &quot;Africa/Asmera&quot;</code></pre>
<p>Podemos nos perguntar que são em outra parte do globo, ou fazer as conversões facilmente no <em>lubridate</em>.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="intro-r.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="co"># que horas sao agoram em...</span></span>
<span id="cb440-2"><a href="intro-r.html#cb440-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 10:41:00 -03&quot;</code></pre>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="intro-r.html#cb442-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 13:41:00 GMT&quot;</code></pre>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="intro-r.html#cb444-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;Europe/Berlin&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 14:41:00 CET&quot;</code></pre>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="intro-r.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># altera o fuso sem mudar a hora</span></span>
<span id="cb446-2"><a href="intro-r.html#cb446-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">force_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 10:41:00 GMT&quot;</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/dates-and-times.html">16 Dates and times</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="purrr" class="section level3" number="5.5.12">
<h3><span class="header-section-number">5.5.12</span> purrr</h3>
<p>Pacote <em>purrr</em> implementa a <strong>Programação Funcional</strong> no R, fornecendo um conjunto completo e consistente de ferramentas para trabalhar com funções e vetores. A programação funcional é um assunto bastante extenso, sendo mais conhecido no R pela família de funções <code>purrr::map()</code>, que permite substituir muitos <strong>loops for</strong> por um código mais sucinto e fácil de ler. Não iremos aqui focar nas outras funções.</p>
<p>Todas as funções deste pacote são listadas na <a href="https://purrr.tidyverse.org/reference/index.html">página de referência</a> do pacote.</p>
<p>Um <strong>loop for</strong> pode ser entendido como uma <strong>iteração</strong>: um bloco de códigos é repetido mudando um contador de uma lista de possibilidades. Vamos exemplificar com uma iteração bem simples, onde iremos imprimir no console os valores de 1 a 10, utilizando a função <code>for()</code>, um contador <code>i</code> em um vetor de dez números <code>1:10</code> que será iterado, no bloco de códigos definido entre <code>{}</code>, i.e, usando a função <code>print()</code> para imprimir os valores.</p>
<p>A ideia é <strong>bastante simples</strong>: a função <code>for()</code> vai atribuir o primeiro valor da lista ao contador <code>i</code>, esse contador será utilizado em todo o bloco de códigos. Quando o bloco terminar, o segundo valor é atribuído ao contador <code>i</code> e entra no bloco de códigos, repetindo esse processo até que todos os elementos da lista seja atribuída ao contador.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="intro-r.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for</span></span>
<span id="cb448-2"><a href="intro-r.html#cb448-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb448-3"><a href="intro-r.html#cb448-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb448-4"><a href="intro-r.html#cb448-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Com essa ideia em mente, a <strong>programação funcional</strong> utilizando a função <code>purrr::map()</code>, ficaria dessa forma.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="intro-r.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for com map</span></span>
<span id="cb450-2"><a href="intro-r.html#cb450-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.f =</span> print)</span></code></pre></div>
<p>Nessa estrutura, temos:</p>
<p><code>map(.x, .f)</code></p>
<ul>
<li><strong>.x</strong>: um vetor, lista ou data frame<br />
</li>
<li><strong>.f</strong>: uma função</li>
</ul>
<p>Num outro exemplo, iremos aplicar a função <code>sum()</code> para <strong>somar os valores de vários elementos de uma lista</strong>.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="intro-r.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># map</span></span>
<span id="cb451-2"><a href="intro-r.html#cb451-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb451-3"><a href="intro-r.html#cb451-3" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(x, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 15
## 
## [[2]]
## [1] 16
## 
## [[3]]
## [1] 3
## 
## [[4]]
## [1] 10</code></pre>
<p>Há <strong>diferente tipos de retornos</strong> da família <code>purrr::map()</code>.</p>
<ul>
<li><code>map()</code>: retorna uma lista</li>
<li><code>map_chr()</code>: retorna um vetor de strings</li>
<li><code>map_dbl()</code>: retorna um vetor numérico (double)</li>
<li><code>map_int()</code>: retorna um vetor numérico (integer)</li>
<li><code>map_lgl()</code>: retorna um vetor lógico</li>
<li><code>map_dfr()</code>: retorna um data frame (por linhas)</li>
<li><code>map_dfc()</code>: retorna um data frame (por colunas)</li>
</ul>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="intro-r.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variacoes da funcao map</span></span>
<span id="cb453-2"><a href="intro-r.html#cb453-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dbl</span>(x, sum)</span></code></pre></div>
<pre><code>## [1] 15 16  3 10</code></pre>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="intro-r.html#cb455-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_chr</span>(x, paste, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1 2 3 4 5&quot; &quot;4 5 7&quot;     &quot;1 1 1&quot;     &quot;2 2 2 2 2&quot;</code></pre>
<p>Essas <strong>funcionalidades</strong> já eram conhecidas no Base R pelas funções da <strong>família <code>apply</code></strong>: <code>apply()</code>, <code>lapply()</code>, <code>sapply()</code>, <code>vapply()</code>, <code>mapply()</code>, <code>rapply()</code> e <code>tapply()</code>. Essas funções formam a base de combinações mais complexas e ajudam a <strong>realizar operações com poucas linhas de código</strong>, para diferentes retornos.</p>
<p>Temos ainda <strong>duas variantes</strong> da função <code>map()</code>: <code>purrr::map2()</code> e <code>purrr::pmap()</code>, para duas ou mais listas, respectivamente. Como vimos para a primeira função, existem duas variações do sufixo para <strong>modificar o retorno</strong> da função.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="intro-r.html#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listas</span></span>
<span id="cb457-2"><a href="intro-r.html#cb457-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb457-3"><a href="intro-r.html#cb457-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb457-4"><a href="intro-r.html#cb457-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb457-5"><a href="intro-r.html#cb457-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-6"><a href="intro-r.html#cb457-6" aria-hidden="true" tabindex="-1"></a><span class="co"># map2</span></span>
<span id="cb457-7"><a href="intro-r.html#cb457-7" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(x, y, prod)</span></code></pre></div>
<pre><code>## [1]  9 25  0  1</code></pre>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="intro-r.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pmap</span></span>
<span id="cb459-2"><a href="intro-r.html#cb459-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pmap_dbl</span>(<span class="fu">list</span>(x, y, z), prod)</span></code></pre></div>
<pre><code>## [1]  27 125   0   1</code></pre>
<p>Essa funções podem ser usadas em conjunto para <strong>implementar rotinas de manipulação e análise de dados</strong> com poucas linhas de código, mas que não exploraremos em sua complitude aqui. Listamos dois exemplos simples.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="intro-r.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo dos dados</span></span>
<span id="cb461-2"><a href="intro-r.html#cb461-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb461-3"><a href="intro-r.html#cb461-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb461-4"><a href="intro-r.html#cb461-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb461-5"><a href="intro-r.html#cb461-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_dbl</span>(mean)</span></code></pre></div>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="intro-r.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># analise dos dados</span></span>
<span id="cb462-2"><a href="intro-r.html#cb462-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb462-3"><a href="intro-r.html#cb462-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_split</span>(island, species) <span class="sc">%&gt;%</span> </span>
<span id="cb462-4"><a href="intro-r.html#cb462-4" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(bill_depth_mm <span class="sc">~</span> bill_length_mm, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span> </span>
<span id="cb462-5"><a href="intro-r.html#cb462-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb462-6"><a href="intro-r.html#cb462-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="st">&quot;r.squared&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do capítulo <a href="https://r4ds.had.co.nz/iteration.html">21 Iteration</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
</div>
<div id="exercícios" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Exercícios</h2>
<div id="base-r" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Base R</h3>
<ol style="list-style-type: decimal">
<li><p>Use o R para verificar o resultado da operação <code>7 + 7 ÷ 7 + 7 x 7 - 7</code>.</p></li>
<li><p>Verifique através do R se <code>3x2³</code> é maior que <code>2x3²</code>.</p></li>
<li><p>Crie dois objetos (qualquer nome) com os valores 100 e 300. Multiplique esses objetos (função <code>prod()</code>) e atribuam ao objeto <strong>mult</strong>. Faça o logaritmo natural (função <code>log()</code>) do objeto mult e atribuam ao objeto <strong>ln</strong>.</p></li>
<li><p>Quantos pacotes existem no CRAN nesse momento? Execute essa combinação no Console: <code>nrow(available.packages(repos = "http://cran.r-project.org"))</code>.</p></li>
<li><p>Instale o pacote <em>tidyverse</em> do CRAN.</p></li>
<li><p>Escolha números para jogar na mega-sena usando o R, nomeando o objeto como <strong>mega</strong>. Lembrando: são 6 valores de 1 a 60 e atribuam a um objeto.</p></li>
<li><p>Crie um fator chamado <strong>tr</strong>, com dois níveis (“cont” e “trat”) para descrever 100 locais de amostragem, 50 de cada tratamento. O fator deve ser dessa forma <code>cont, cont, cont, ...., cont, trat, trat, ...., trat</code>.</p></li>
<li><p>Crie uma matriz chamada <strong>ma</strong>, resultante da disposição de um vetor composto por 10000 valores aleatórios entre 0 e 10. A matriz deve conter 100 linhas e ser disposta por colunas.</p></li>
<li><p>Crie um data frame chamado <strong>df</strong>, resultante da composição desses vetores:</p></li>
</ol>
<ul>
<li><code>id: 1:50</code></li>
<li><code>sp: sp01, sp02, ..., sp49, sp50</code></li>
<li><code>ab: 50 valores aleatórios entre 0 a 5</code></li>
</ul>
<ol start="10" style="list-style-type: decimal">
<li><p>Crie uma lista com os objetos criados anteriormente: <strong>mega</strong>, <strong>tr</strong>, <strong>ma</strong> e <strong>df</strong>.</p></li>
<li><p>Selecione os elmentos ímpares do objeto <strong>tr</strong>, e atribua ao objeto <strong>tr_impar</strong>.</p></li>
<li><p>Selecione as linhas com ids pares do objeto <strong>df</strong>, e atribua ao objeto <strong>df_ids_par</strong>.</p></li>
<li><p>Faça uma amostragem de 10 linhas do objeto <strong>df</strong>, e atribua ao objeto <strong>df_amos10</strong>.</p></li>
</ol>
</div>
<div id="tidyverse-2" class="section level3" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> <em>tidyverse</em></h3>
<ol style="list-style-type: decimal">
<li>Reescreva as operações abaixo utilizando pipes <code>%&gt;%</code>.</li>
</ol>
<ul>
<li><code>log10(cumsum(1:100))</code></li>
<li><code>sum(sqrt(abs(rnorm(100))))</code></li>
<li><code>sum(sort(sample(1:10, 10000, rep = TRUE)))</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>Use a função <code>download.file()</code> e <code>unzip()</code> para baixar e extrair o arquivo do data paper de médios e grandes mamíferos: <a href="https://doi.org/10.1002/ecy.2785">ATLANTIC MAMMALS</a>. Em seguinda, importe para o R, usando a função <code>readxl::read_excel()</code>.</p></li>
<li><p>Use a função <code>tibble::glimpse()</code> para ter uma noção geral dos dados importados no item anterior.</p></li>
<li><p>Compare os dados de penguins (<em>palmerpenguins::penguins_raw</em> e <em>palmerpenguins::penguins</em>). Monte uma série de funções dos pacotes <em>tidyr</em> e <em>dplyr</em> para fazer limpar os dados e fazer com que o primeiro dados seja igual ao segundo.</p></li>
<li><p>Usando os dados de penguins (<em>palmerpenguins::penguins</em>), calcule a correlação de Pearson entre comprimento e profundidade do bico para cada espécie e para todas as espécies. Compare os índices de correlação para exemplificar o Paradoxo de Simpsom.</p></li>
<li><p>Oficialmente, a pandemia de COVID-19 começou com o primeiro caso no dia 26 de fevereiro de 2020. Calcule quantos anos, meses, dias, semanas, horas, minutos e segundos se passou desde então.</p></li>
</ol>
</div>
</div>
<div id="para-se-aprofundar" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Para se aprofundar</h2>
<p>Listamos a seguir livros, apostilas e links com material que recomendamos para seguir com sua aprendizagem em R e tidyverse.</p>
<div id="livros" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Livros</h3>
<p><strong>Português</strong></p>
<p>Curso-R. 2021. Ciência de Dados em R. [<a href="https://livro.curso-r.com/" class="uri">https://livro.curso-r.com/</a>]</p>
<p>Faria PD, Parga JPFA. 2020. Introdução à Linguagem R: seus fundamentos e sua prática. [<a href="https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica" class="uri">https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica</a>]</p>
<p>Oliveira PF, Guerra S, Mcdonnell, R. 2018. Ciência de dados com R – Introdução. IBPAD. [<a href="https://cdr.ibpad.com.br/" class="uri">https://cdr.ibpad.com.br/</a>]</p>
<p><strong>Inglês</strong></p>
<p>Adler J. 2012. R in a Nutshell: A Desktop Quick Reference. 2 ed. O’Reilly Media.</p>
<p>Burns P. 2011. The R Inferno. [<a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf" class="uri">https://www.burns-stat.com/pages/Tutor/R_inferno.pdf</a>]</p>
<p>Cotton R. 2013. Learning R: A Step-by-Step Function Guide to Data Analysis. O’Reilly Media.</p>
<p>Crawley MJ. 2012. The R Book. 2 ed. Wiley.</p>
<p>Davies TM. 2016. The Book of R: A First Course in Programming and Statistics. No Starch Press.</p>
<p>Douglas A, Roos D, Mancini F, Couto A, Lusseau D. An Introduction to R. 2021 [<a href="https://intro2r.com/" class="uri">https://intro2r.com/</a>]</p>
<p>Engel C. 2019. Introduction to R. [<a href="https://cengel.github.io/R-intro/" class="uri">https://cengel.github.io/R-intro/</a>]</p>
<p>Gillespie C., Lovelace R, 2016. Efficient R programming. O’Reilly Media. [<a href="https://bookdown.org/csgillespie/efficientR/" class="uri">https://bookdown.org/csgillespie/efficientR/</a>]</p>
<p>Grolemund G. 2014. Hands-On Programming with R. O’Reilly Media.</p>
<p>Grolemund G. 2017. The Essentials of Data Science: Knowledge Discovery Using R. Chapman and Hall/CRC.</p>
<p>Hastle T, Tibshirani R, Friedman J. 2016. The Elements of Statistical Learning: Data Mining, Inference, and Prediction. 2 ed. Springer. [<a href="https://web.stanford.edu/~hastie/ElemStatLearn" class="uri">https://web.stanford.edu/~hastie/ElemStatLearn</a>]</p>
<p>Irizarry RA, Love MI. 2016. Data Analysis for the Life Sciences with R. Chapman and Hall/CRC.</p>
<p>Irizarry RA. 2019. Introduction to Data Science: Data Analysis and Prediction Algorithms with R. Chapman and Hall/CRC. [<a href="https://rafalab.github.io/dsbook/" class="uri">https://rafalab.github.io/dsbook/</a>]</p>
<p>Ismay C., Kim AY. 2019. Statistical Inference via Data Science: A ModernDive into R and the Tidyverse. Chapman and Hall/CRC. [<a href="https://moderndive.com/" class="uri">https://moderndive.com/</a>]</p>
<p>James G, Witten D, Hastie T, Tibshirani R. 2013. An Introduction to Statistical Learning: with Applications in R. 2 ed. Springer. [<a href="http://faculty.marshall.usc.edu/gareth-james/ISL/" class="uri">http://faculty.marshall.usc.edu/gareth-james/ISL/</a>]</p>
<p>Kabacoff RI. 2015. R in Action: Data analysis and graphics with R. 2 ed. Manning.</p>
<p>Lander JP. 2017. R for Everyone: Advanced Analytics and Graphics. Addison-Wesley Professional.</p>
<p>Matloff N. 2011. The Art of R Programming: A Tour of Statistical Software Design. No Starch Press.</p>
<p>Peng DP. 2020. R Programming for Data Science. [<a href="https://bookdown.org/rdpeng/rprogdatascience/" class="uri">https://bookdown.org/rdpeng/rprogdatascience/</a>]</p>
<p>Long JD, Teetor P. 2019. R Cookbook.2 ed. O’Reilly Media. [<a href="https://rc2e.com/" class="uri">https://rc2e.com/</a>]</p>
<p>Wickham H, Grolemund G. 2017. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. O’Reilly Media. [<a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>]</p>
<p>Wickham H. 2019. Advanced R. 2 ed. Chapman and Hall/CRC. [<a href="https://adv-r.hadley.nz/" class="uri">https://adv-r.hadley.nz/</a>]</p>
<p>Wickham H. 2015. R Packages: Organize, Test, Document, and Share Your Code. O’Reilly Media. [<a href="https://r-pkgs.org/" class="uri">https://r-pkgs.org/</a>]</p>
<p>Wright C, Ellis S, Hicks S &amp; Peng R D. 2021. Tidyverse Skills for Data Science in R. [<a href="https://jhudatascience.org/tidyversecourse/" class="uri">https://jhudatascience.org/tidyversecourse/</a>]</p>
<p>Zumel N, Mount J. 2014. Practical Data Science with R Paperback. Manning.</p>
</div>
<div id="links" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Links</h3>
<p><a href="https://paulvanderlaken.com/2017/08/10/r-resources-cheatsheets-tutorials-books">R resources (free courses, books, tutorials, &amp; cheat sheets)</a></p>
<p><a href="https://ourcodingclub.github.io/course">Data Science for Ecologists and Environmental Scientists</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="voltando-ao-básico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gráficos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/paternogbc/livro_r_ecologia/edit/master/04_r_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["livro_r_ecologia.pdf", "livro_r_ecologia.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
