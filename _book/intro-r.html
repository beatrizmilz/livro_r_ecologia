<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Cap√≠tulo 5 Introdu√ß√£o √† linguagem R | Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Cap√≠tulo 5 Introdu√ß√£o √† linguagem R | Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Cap√≠tulo 5 Introdu√ß√£o √† linguagem R | Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  



<meta name="date" content="2021-03-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"/>
<link rel="next" href="gr√°ficos.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Pr√©-requisitos</a></li>
<li class="chapter" data-level="2" data-path="pr√©-requisitos-1.html"><a href="pr√©-requisitos-1.html"><i class="fa fa-check"></i><b>2</b> Pr√©-requisitos</a></li>
<li class="chapter" data-level="3" data-path="introdu√ß√£o.html"><a href="introdu√ß√£o.html"><i class="fa fa-check"></i><b>3</b> Introdu√ß√£o</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introdu√ß√£o.html"><a href="introdu√ß√£o.html#hist√≥rico-deste-livro"><i class="fa fa-check"></i><b>3.1</b> Hist√≥rico deste livro</a></li>
<li class="chapter" data-level="3.2" data-path="introdu√ß√£o.html"><a href="introdu√ß√£o.html#objetivo-deste-livro"><i class="fa fa-check"></i><b>3.2</b> Objetivo deste livro</a></li>
<li class="chapter" data-level="3.3" data-path="introdu√ß√£o.html"><a href="introdu√ß√£o.html#o-que-voc√™-n√£o-encontrar√°-neste-livro"><i class="fa fa-check"></i><b>3.3</b> O que voc√™ n√£o encontrar√° neste livro</a></li>
<li class="chapter" data-level="3.4" data-path="introdu√ß√£o.html"><a href="introdu√ß√£o.html#por-que-usar-o-r"><i class="fa fa-check"></i><b>3.4</b> Por que usar o R?</a></li>
<li class="chapter" data-level="3.5" data-path="introdu√ß√£o.html"><a href="introdu√ß√£o.html#como-usar-este-livro"><i class="fa fa-check"></i><b>3.5</b> Como usar este livro</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><i class="fa fa-check"></i><b>4</b> Voltando ao b√°sico: como dominar a arte de fazer perguntas cientificamente relevantes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#introdu√ß√£o-1"><i class="fa fa-check"></i><b>4.1</b> Introdu√ß√£o</a></li>
<li class="chapter" data-level="4.2" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#perguntas-devem-preceder-as-an√°lises-estat√≠sticas"><i class="fa fa-check"></i><b>4.2</b> Perguntas devem preceder as an√°lises estat√≠sticas</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#um-besti√°rio1-para-o-teste-de-hip√≥teses-voc√™-est√°-fazendo-a-pergunta-certa"><i class="fa fa-check"></i><b>4.2.1</b> Um besti√°rio[^1] para o teste de hip√≥teses (Voc√™ est√° fazendo a pergunta certa?)</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#fluxograma-conectando-vari√°veis-para-melhorar-o-desenho-experimental-e-as-an√°lises-estat√≠sticas"><i class="fa fa-check"></i><b>4.3</b> Fluxograma: Conectando Vari√°veis para Melhorar o desenho experimental e as an√°lises estat√≠sticas</a></li>
<li class="chapter" data-level="4.4" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#quest√µes-fundamentais-em-etnobiologia-ecologia-e-conserva√ß√£o"><i class="fa fa-check"></i><b>4.4</b> Quest√µes fundamentais em etnobiologia, ecologia e conserva√ß√£o</a></li>
<li class="chapter" data-level="4.5" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#considera√ß√µes-finais"><i class="fa fa-check"></i><b>4.5</b> Considera√ß√µes Finais</a></li>
<li class="chapter" data-level="4.6" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#refer√™ncias"><i class="fa fa-check"></i><b>4.6</b> Refer√™ncias</a></li>
<li class="chapter" data-level="4.7" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#principais-erros-de-iniciantes-e-a-melhor-forma-de-pedir-ajuda"><i class="fa fa-check"></i><b>4.7</b> Principais erros de iniciantes e a melhor forma de pedir ajuda</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#procurando-e-entendendo-erros"><i class="fa fa-check"></i><b>4.7.1</b> Procurando e entendendo erros</a></li>
<li class="chapter" data-level="4.7.2" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#tentando-resolver-seus-pr√≥prios-erros"><i class="fa fa-check"></i><b>4.7.2</b> Tentando resolver seus pr√≥prios erros</a></li>
<li class="chapter" data-level="4.7.3" data-path="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html"><a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html#idealmente-como-pedir-ajuda"><i class="fa fa-check"></i><b>4.7.3</b> Idealmente, como pedir ajuda?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="intro-r.html"><a href="intro-r.html"><i class="fa fa-check"></i><b>5</b> Introdu√ß√£o √† linguagem R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="intro-r.html"><a href="intro-r.html#introdu√ß√£o-2"><i class="fa fa-check"></i><b>5.1</b> Introdu√ß√£o</a></li>
<li class="chapter" data-level="5.2" data-path="intro-r.html"><a href="intro-r.html#r-e-rstudio"><i class="fa fa-check"></i><b>5.2</b> R e RStudio</a></li>
<li class="chapter" data-level="5.3" data-path="intro-r.html"><a href="intro-r.html#funcionamento-da-linguagem-r"><i class="fa fa-check"></i><b>5.3</b> Funcionamento da linguagem R</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="intro-r.html"><a href="intro-r.html#console"><i class="fa fa-check"></i><b>5.3.1</b> Console</a></li>
<li class="chapter" data-level="5.3.2" data-path="intro-r.html"><a href="intro-r.html#scripts"><i class="fa fa-check"></i><b>5.3.2</b> Scripts</a></li>
<li class="chapter" data-level="5.3.3" data-path="intro-r.html"><a href="intro-r.html#operadores"><i class="fa fa-check"></i><b>5.3.3</b> Operadores</a></li>
<li class="chapter" data-level="5.3.4" data-path="intro-r.html"><a href="intro-r.html#objetos"><i class="fa fa-check"></i><b>5.3.4</b> Objetos</a></li>
<li class="chapter" data-level="5.3.5" data-path="intro-r.html"><a href="intro-r.html#fun√ß√µes"><i class="fa fa-check"></i><b>5.3.5</b> Fun√ß√µes</a></li>
<li class="chapter" data-level="5.3.6" data-path="intro-r.html"><a href="intro-r.html#pacotes"><i class="fa fa-check"></i><b>5.3.6</b> Pacotes</a></li>
<li class="chapter" data-level="5.3.7" data-path="intro-r.html"><a href="intro-r.html#ajuda-help"><i class="fa fa-check"></i><b>5.3.7</b> Ajuda (<em>Help</em>)</a></li>
<li class="chapter" data-level="5.3.8" data-path="intro-r.html"><a href="intro-r.html#ambiente-environment"><i class="fa fa-check"></i><b>5.3.8</b> Ambiente (<em>Environment</em>)</a></li>
<li class="chapter" data-level="5.3.9" data-path="intro-r.html"><a href="intro-r.html#cita√ß√µes"><i class="fa fa-check"></i><b>5.3.9</b> Cita√ß√µes</a></li>
<li class="chapter" data-level="5.3.10" data-path="intro-r.html"><a href="intro-r.html#principais-erros-de-iniciantes"><i class="fa fa-check"></i><b>5.3.10</b> Principais erros de iniciantes</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="intro-r.html"><a href="intro-r.html#estrutura-e-manipula√ß√£o-de-objetos"><i class="fa fa-check"></i><b>5.4</b> Estrutura e manipula√ß√£o de objetos</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="intro-r.html"><a href="intro-r.html#atributo-dos-objetos"><i class="fa fa-check"></i><b>5.4.1</b> Atributo dos objetos</a></li>
<li class="chapter" data-level="5.4.2" data-path="intro-r.html"><a href="intro-r.html#manipula√ß√£o-de-objetos-unidimensionais"><i class="fa fa-check"></i><b>5.4.2</b> Manipula√ß√£o de objetos unidimensionais</a></li>
<li class="chapter" data-level="5.4.3" data-path="intro-r.html"><a href="intro-r.html#manipula√ß√£o-de-objetos-multidimensionais"><i class="fa fa-check"></i><b>5.4.3</b> Manipula√ß√£o de objetos multidimensionais</a></li>
<li class="chapter" data-level="5.4.4" data-path="intro-r.html"><a href="intro-r.html#valores-faltantes-e-especiais"><i class="fa fa-check"></i><b>5.4.4</b> Valores faltantes e especiais</a></li>
<li class="chapter" data-level="5.4.5" data-path="intro-r.html"><a href="intro-r.html#diret√≥rio-de-trabalho"><i class="fa fa-check"></i><b>5.4.5</b> Diret√≥rio de trabalho</a></li>
<li class="chapter" data-level="5.4.6" data-path="intro-r.html"><a href="intro-r.html#importar-dados"><i class="fa fa-check"></i><b>5.4.6</b> Importar dados</a></li>
<li class="chapter" data-level="5.4.7" data-path="intro-r.html"><a href="intro-r.html#confer√™ncia-de-dados-importados"><i class="fa fa-check"></i><b>5.4.7</b> Confer√™ncia de dados importados</a></li>
<li class="chapter" data-level="5.4.8" data-path="intro-r.html"><a href="intro-r.html#exportar-dados"><i class="fa fa-check"></i><b>5.4.8</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="intro-r.html"><a href="intro-r.html#tidyverse"><i class="fa fa-check"></i><b>5.5</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="intro-r.html"><a href="intro-r.html#contextualiza√ß√£o"><i class="fa fa-check"></i><b>5.5.1</b> Contextualiza√ß√£o</a></li>
<li class="chapter" data-level="5.5.2" data-path="intro-r.html"><a href="intro-r.html#tidyverse-1"><i class="fa fa-check"></i><b>5.5.2</b> <em>tidyverse</em></a></li>
<li class="chapter" data-level="5.5.3" data-path="intro-r.html"><a href="intro-r.html#here"><i class="fa fa-check"></i><b>5.5.3</b> here</a></li>
<li class="chapter" data-level="5.5.4" data-path="intro-r.html"><a href="intro-r.html#readr-readxl-e-writexl"><i class="fa fa-check"></i><b>5.5.4</b> readr, readxl e writexl</a></li>
<li class="chapter" data-level="5.5.5" data-path="intro-r.html"><a href="intro-r.html#tibble"><i class="fa fa-check"></i><b>5.5.5</b> tibble</a></li>
<li class="chapter" data-level="5.5.6" data-path="intro-r.html"><a href="intro-r.html#magrittr-pipe--"><i class="fa fa-check"></i><b>5.5.6</b> magrittr (pipe - %&gt;%)</a></li>
<li class="chapter" data-level="5.5.7" data-path="intro-r.html"><a href="intro-r.html#tidyr"><i class="fa fa-check"></i><b>5.5.7</b> tidyr</a></li>
<li class="chapter" data-level="5.5.8" data-path="intro-r.html"><a href="intro-r.html#dplyr"><i class="fa fa-check"></i><b>5.5.8</b> dplyr</a></li>
<li class="chapter" data-level="5.5.9" data-path="intro-r.html"><a href="intro-r.html#stringr"><i class="fa fa-check"></i><b>5.5.9</b> stringr</a></li>
<li class="chapter" data-level="5.5.10" data-path="intro-r.html"><a href="intro-r.html#forcats"><i class="fa fa-check"></i><b>5.5.10</b> forcats</a></li>
<li class="chapter" data-level="5.5.11" data-path="intro-r.html"><a href="intro-r.html#lubridate"><i class="fa fa-check"></i><b>5.5.11</b> lubridate</a></li>
<li class="chapter" data-level="5.5.12" data-path="intro-r.html"><a href="intro-r.html#purrr"><i class="fa fa-check"></i><b>5.5.12</b> purrr</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="intro-r.html"><a href="intro-r.html#exerc√≠cios"><i class="fa fa-check"></i><b>5.6</b> Exerc√≠cios</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="intro-r.html"><a href="intro-r.html#base-r"><i class="fa fa-check"></i><b>5.6.1</b> Base R</a></li>
<li class="chapter" data-level="5.6.2" data-path="intro-r.html"><a href="intro-r.html#tidyverse-2"><i class="fa fa-check"></i><b>5.6.2</b> <em>tidyverse</em></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="intro-r.html"><a href="intro-r.html#para-se-aprofundar"><i class="fa fa-check"></i><b>5.7</b> Para se aprofundar</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="intro-r.html"><a href="intro-r.html#livros"><i class="fa fa-check"></i><b>5.7.1</b> Livros</a></li>
<li class="chapter" data-level="5.7.2" data-path="intro-r.html"><a href="intro-r.html#links"><i class="fa fa-check"></i><b>5.7.2</b> Links</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="gr√°ficos.html"><a href="gr√°ficos.html"><i class="fa fa-check"></i><b>6</b> Gr√°ficos</a></li>
<li class="chapter" data-level="7" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html"><i class="fa fa-check"></i><b>7</b> Estat√≠stica b√°sica</a>
<ul>
<li class="chapter" data-level="7.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#teste-t-de-student-para-duas-amostras-independentes"><i class="fa fa-check"></i><b>7.1</b> Teste T (de Student) para duas amostras independentes</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise"><i class="fa fa-check"></i><b>7.1.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.1.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise"><i class="fa fa-check"></i><b>7.1.2</b> An√°lise</a></li>
<li class="chapter" data-level="7.1.3" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-1"><i class="fa fa-check"></i><b>7.1.3</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#teste-t-para-amostras-pareadas"><i class="fa fa-check"></i><b>7.2</b> Teste T para amostras pareadas</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-1"><i class="fa fa-check"></i><b>7.2.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.2.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-2"><i class="fa fa-check"></i><b>7.2.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#correla√ß√£o-de-pearson"><i class="fa fa-check"></i><b>7.3</b> Correla√ß√£o de Pearson</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-2"><i class="fa fa-check"></i><b>7.3.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.3.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-3"><i class="fa fa-check"></i><b>7.3.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#regress√£o-simples"><i class="fa fa-check"></i><b>7.4</b> Regress√£o Simples</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-3"><i class="fa fa-check"></i><b>7.4.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.4.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-4"><i class="fa fa-check"></i><b>7.4.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#regress√£o-m√∫ltipla"><i class="fa fa-check"></i><b>7.5</b> Regress√£o M√∫ltipla</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-4"><i class="fa fa-check"></i><b>7.5.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="7.5.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-5"><i class="fa fa-check"></i><b>7.5.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lises-de-vari√¢ncia-anova"><i class="fa fa-check"></i><b>7.6</b> An√°lises de Vari√¢ncia (ANOVA)</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#backgorund-da-an√°lise-5"><i class="fa fa-check"></i><b>7.6.1</b> Backgorund da an√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#anova-de-um-fator"><i class="fa fa-check"></i><b>7.7</b> ANOVA de um fator</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-6"><i class="fa fa-check"></i><b>7.7.1</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#anova-de-dois-fatores-ou-anova-fatorial"><i class="fa fa-check"></i><b>7.8</b> ANOVA de dois fatores ou Anova fatorial</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-7"><i class="fa fa-check"></i><b>7.8.1</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#anova-em-blocos-aleatorizados"><i class="fa fa-check"></i><b>7.9</b> ANOVA em blocos aleatorizados</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-8"><i class="fa fa-check"></i><b>7.9.1</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-de-covari√¢ncia-ancova"><i class="fa fa-check"></i><b>7.10</b> An√°lise de covari√¢ncia (ANCOVA)</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#an√°lise-9"><i class="fa fa-check"></i><b>7.10.1</b> An√°lise</a></li>
<li class="chapter" data-level="7.10.2" data-path="estat√≠stica-b√°sica.html"><a href="estat√≠stica-b√°sica.html#para-se-aprofundar-1"><i class="fa fa-check"></i><b>7.10.2</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="an√°lises-univariadas-glm.html"><a href="an√°lises-univariadas-glm.html"><i class="fa fa-check"></i><b>8</b> An√°lises univariadas - GLM</a></li>
<li class="chapter" data-level="9" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><i class="fa fa-check"></i><b>9</b> Introdu√ß√£o √† An√°lises Multidimensionais</a>
<ul>
<li class="chapter" data-level="9.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#backgorund-da-an√°lise-6"><i class="fa fa-check"></i><b>9.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="9.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-1"><i class="fa fa-check"></i><b>9.2</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#explica√ß√£o-da-an√°lise"><i class="fa fa-check"></i><b>9.2.1</b> Explica√ß√£o da an√°lise</a></li>
<li class="chapter" data-level="9.2.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#an√°lise-10"><i class="fa fa-check"></i><b>9.2.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-2"><i class="fa fa-check"></i><b>9.3</b> Exemplo 2:</a></li>
<li class="chapter" data-level="9.4" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#backgorund-da-an√°lise-7"><i class="fa fa-check"></i><b>9.4</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="9.5" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-1-1"><i class="fa fa-check"></i><b>9.5</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#explica√ß√£o-da-an√°lise-1"><i class="fa fa-check"></i><b>9.5.1</b> Explica√ß√£o da an√°lise</a></li>
<li class="chapter" data-level="9.5.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#an√°lise-11"><i class="fa fa-check"></i><b>9.5.2</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#backgorund-da-an√°lise-8"><i class="fa fa-check"></i><b>9.6</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="9.7" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#exemplo-1-2"><i class="fa fa-check"></i><b>9.7</b> Exemplo 1:</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#explica√ß√£o-da-an√°lise-2"><i class="fa fa-check"></i><b>9.7.1</b> Explica√ß√£o da an√°lise</a></li>
<li class="chapter" data-level="9.7.2" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#an√°lise-12"><i class="fa fa-check"></i><b>9.7.2</b> An√°lise</a></li>
<li class="chapter" data-level="9.7.3" data-path="introdu√ß√£o-√†-an√°lises-multidimensionais.html"><a href="introdu√ß√£o-√†-an√°lises-multidimensionais.html#para-se-aprofundar-2"><i class="fa fa-check"></i><b>9.7.3</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html"><i class="fa fa-check"></i><b>10</b> Rarefa√ß√£o</a>
<ul>
<li class="chapter" data-level="10.1" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#background-da-an√°lise"><i class="fa fa-check"></i><b>10.1</b> Background da an√°lise</a></li>
<li class="chapter" data-level="10.2" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#exemplo-pr√°tico-1---morcegos"><i class="fa fa-check"></i><b>10.2</b> Exemplo pr√°tico 1 - Morcegos</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#explica√ß√£o"><i class="fa fa-check"></i><b>10.2.1</b> Explica√ß√£o</a></li>
<li class="chapter" data-level="10.2.2" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#an√°lise-13"><i class="fa fa-check"></i><b>10.2.2</b> An√°lise</a></li>
<li class="chapter" data-level="10.2.3" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#interpreta√ß√£o-dos-resultados-1"><i class="fa fa-check"></i><b>10.2.3</b> Interpreta√ß√£o dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#exemplo-pr√°tico-2---rarefa√ß√£o"><i class="fa fa-check"></i><b>10.3</b> Exemplo pr√°tico 2 - Rarefa√ß√£o</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#explica√ß√£o-1"><i class="fa fa-check"></i><b>10.3.1</b> Explica√ß√£o</a></li>
<li class="chapter" data-level="10.3.2" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#an√°lise-14"><i class="fa fa-check"></i><b>10.3.2</b> An√°lise</a></li>
<li class="chapter" data-level="10.3.3" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#interpreta√ß√£o-dos-resultados-2"><i class="fa fa-check"></i><b>10.3.3</b> Interpreta√ß√£o dos resultados</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="rarefa√ß√£o.html"><a href="rarefa√ß√£o.html#para-se-aprofundar-3"><i class="fa fa-check"></i><b>10.4</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html"><i class="fa fa-check"></i><b>11</b> Estimadores de Riqueza</a>
<ul>
<li class="chapter" data-level="11.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#backgorund-da-an√°lise-9"><i class="fa fa-check"></i><b>11.1</b> Backgorund da an√°lise</a></li>
<li class="chapter" data-level="11.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-abund√¢ncia-das-esp√©cies"><i class="fa fa-check"></i><b>11.2</b> Estimadores baseados na abund√¢ncia das esp√©cies</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-1---chao-1984-1987"><i class="fa fa-check"></i><b>11.2.1</b> CHAO 1 - (Chao 1984, 1987):</a></li>
<li class="chapter" data-level="11.2.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-15"><i class="fa fa-check"></i><b>11.2.2</b> An√°lise</a></li>
<li class="chapter" data-level="11.2.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#ace---abundance-based-coverage-estimador-chao-lee-1992-chao-et-al.-2000"><i class="fa fa-check"></i><b>11.2.3</b> ACE - <em>Abundance-based Coverage Estimador</em> (Chao &amp; Lee 1992, Chao et al.¬†2000):</a></li>
<li class="chapter" data-level="11.2.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-16"><i class="fa fa-check"></i><b>11.2.4</b> An√°lise</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#estimadores-baseados-na-incid√™ncia-das-esp√©cies"><i class="fa fa-check"></i><b>11.3</b> Estimadores baseados na incid√™ncia das esp√©cies</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#chao-2---chao-1987"><i class="fa fa-check"></i><b>11.3.1</b> CHAO 2 - (Chao 1987):</a></li>
<li class="chapter" data-level="11.3.2" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-17"><i class="fa fa-check"></i><b>11.3.2</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.3" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-1-burnham-overton-1978-1979"><i class="fa fa-check"></i><b>11.3.3</b> JACKKNIFE 1 (Burnham &amp; Overton 1978, 1979):</a></li>
<li class="chapter" data-level="11.3.4" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-18"><i class="fa fa-check"></i><b>11.3.4</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.5" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#jackknife-2-burnham-overton-1978-1979-palmer-1991"><i class="fa fa-check"></i><b>11.3.5</b> JACKKNIFE 2 (Burnham &amp; Overton 1978, 1979, Palmer 1991):</a></li>
<li class="chapter" data-level="11.3.6" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-19"><i class="fa fa-check"></i><b>11.3.6</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.7" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#bootstrap-smith-van-belle-1984"><i class="fa fa-check"></i><b>11.3.7</b> BOOTSTRAP (Smith &amp; van Belle 1984):</a></li>
<li class="chapter" data-level="11.3.8" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-20"><i class="fa fa-check"></i><b>11.3.8</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.9" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#interpola√ß√£o-e-extrapola√ß√£o-baseadas-em-rarefa√ß√£o-usando-amostragens-de-incid√™ncia-ou-abund√¢ncia-chao-jost-2012-colwell-et-al.-2012"><i class="fa fa-check"></i><b>11.3.9</b> Interpola√ß√£o e Extrapola√ß√£o baseadas em rarefa√ß√£o usando amostragens de incid√™ncia ou abund√¢ncia (Chao &amp; Jost 2012, Colwell et al.¬†2012):</a></li>
<li class="chapter" data-level="11.3.10" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#an√°lise-21"><i class="fa fa-check"></i><b>11.3.10</b> An√°lise</a></li>
<li class="chapter" data-level="11.3.11" data-path="estimadores-de-riqueza.html"><a href="estimadores-de-riqueza.html#para-se-aprofundar-4"><i class="fa fa-check"></i><b>11.3.11</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html"><i class="fa fa-check"></i><b>12</b> Diversidade Taxon√¥mica</a>
<ul>
<li class="chapter" data-level="12.1" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diversidade-alfa-ùõÇ"><i class="fa fa-check"></i><b>12.1</b> Diversidade alfa (ùõÇ)</a></li>
<li class="chapter" data-level="12.2" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#riqueza-de-esp√©cies-ou-n√∫mero-de-esp√©cies"><i class="fa fa-check"></i><b>12.2</b> Riqueza de esp√©cies ou n√∫mero de esp√©cies</a></li>
<li class="chapter" data-level="12.3" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diversidade-de-esp√©cies"><i class="fa fa-check"></i><b>12.3</b> Diversidade de esp√©cies</a></li>
<li class="chapter" data-level="12.4" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diagramas-de-whittaker-ou-curva-de-domin√¢ncia"><i class="fa fa-check"></i><b>12.4</b> Diagramas de Whittaker ou Curva de Domin√¢ncia</a></li>
<li class="chapter" data-level="12.5" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#n√∫meros-de-hill"><i class="fa fa-check"></i><b>12.5</b> N√∫meros de Hill</a></li>
<li class="chapter" data-level="12.6" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#diversidade-beta-ùõÉ"><i class="fa fa-check"></i><b>12.6</b> Diversidade beta (ùõÉ)</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="diversidade-taxon√¥mica.html"><a href="diversidade-taxon√¥mica.html#para-se-aprofundar-5"><i class="fa fa-check"></i><b>12.6.1</b> Para se aprofundar</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="diversidade-filogen√©tica.html"><a href="diversidade-filogen√©tica.html"><i class="fa fa-check"></i><b>13</b> Diversidade filogen√©tica</a></li>
<li class="chapter" data-level="14" data-path="diversidade-funcional.html"><a href="diversidade-funcional.html"><i class="fa fa-check"></i><b>14</b> Diversidade funcional</a></li>
<li class="chapter" data-level="15" data-path="dados-geograficos.html"><a href="dados-geograficos.html"><i class="fa fa-check"></i><b>15</b> Dados geogr√°ficos no R</a>
<ul>
<li class="chapter" data-level="15.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#introdu√ß√£o-3"><i class="fa fa-check"></i><b>15.1</b> Introdu√ß√£o</a></li>
<li class="chapter" data-level="15.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pr√©-requisitos-2"><i class="fa fa-check"></i><b>15.2</b> Pr√©-requisitos</a></li>
<li class="chapter" data-level="15.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-1"><i class="fa fa-check"></i><b>15.3</b> Vetor</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pontos"><i class="fa fa-check"></i><b>15.3.1</b> Pontos</a></li>
<li class="chapter" data-level="15.3.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#linhas"><i class="fa fa-check"></i><b>15.3.2</b> Linhas</a></li>
<li class="chapter" data-level="15.3.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pol√≠gonos"><i class="fa fa-check"></i><b>15.3.3</b> Pol√≠gonos</a></li>
<li class="chapter" data-level="15.3.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tabela-de-atributos"><i class="fa fa-check"></i><b>15.3.4</b> Tabela de atributos</a></li>
<li class="chapter" data-level="15.3.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sf-principal-pacote-no-r-para-dados-vetoriais"><i class="fa fa-check"></i><b>15.3.5</b> <em>sf</em>: principal pacote no R para dados vetoriais</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster"><i class="fa fa-check"></i><b>15.4</b> Raster</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#tipos-de-raster"><i class="fa fa-check"></i><b>15.4.1</b> Tipos de raster</a></li>
<li class="chapter" data-level="15.4.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-principal-pacote-no-r-para-dados-raster"><i class="fa fa-check"></i><b>15.4.2</b> <em>raster</em>: principal pacote no R para dados raster</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-refer√™ncia-de-coordenadas-e-unidades"><i class="fa fa-check"></i><b>15.5</b> Sistema de Refer√™ncia de Coordenadas e Unidades</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-geogr√°ficas"><i class="fa fa-check"></i><b>15.5.1</b> Sistema de Coordenadas Geogr√°ficas</a></li>
<li class="chapter" data-level="15.5.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-coordenadas-projetadas"><i class="fa fa-check"></i><b>15.5.2</b> Sistema de Coordenadas Projetadas</a></li>
<li class="chapter" data-level="15.5.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#datum"><i class="fa fa-check"></i><b>15.5.3</b> Datum</a></li>
<li class="chapter" data-level="15.5.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#sistema-de-refer√™ncia-de-coordenadas-crs-no-r"><i class="fa fa-check"></i><b>15.5.4</b> Sistema de Refer√™ncia de Coordenadas (CRS) no R</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-fontes-de-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.6</b> Principais fontes de dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.6.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-2"><i class="fa fa-check"></i><b>15.6.1</b> Vetor</a></li>
<li class="chapter" data-level="15.6.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-1"><i class="fa fa-check"></i><b>15.6.2</b> Raster</a></li>
<li class="chapter" data-level="15.6.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#pacotes-do-r"><i class="fa fa-check"></i><b>15.6.3</b> Pacotes do R</a></li>
</ul></li>
<li class="chapter" data-level="15.7" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-e-exportar-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.7</b> Importar e exportar dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-formatos-de-arquivos-geogr√°ficos"><i class="fa fa-check"></i><b>15.7.1</b> Principais formatos de arquivos geogr√°ficos</a></li>
<li class="chapter" data-level="15.7.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#importar-dados-1"><i class="fa fa-check"></i><b>15.7.2</b> Importar dados</a></li>
<li class="chapter" data-level="15.7.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exportar-dados-1"><i class="fa fa-check"></i><b>15.7.3</b> Exportar dados</a></li>
</ul></li>
<li class="chapter" data-level="15.8" data-path="dados-geograficos.html"><a href="dados-geograficos.html#descri√ß√£o-de-objetos-espaciais"><i class="fa fa-check"></i><b>15.8</b> Descri√ß√£o de objetos espaciais</a>
<ul>
<li class="chapter" data-level="15.8.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-5"><i class="fa fa-check"></i><b>15.8.1</b> Vetor</a></li>
<li class="chapter" data-level="15.8.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-4"><i class="fa fa-check"></i><b>15.8.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.9" data-path="dados-geograficos.html"><a href="dados-geograficos.html#reproje√ß√£o-de-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.9</b> Reproje√ß√£o de dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.9.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#vetor-6"><i class="fa fa-check"></i><b>15.9.1</b> Vetor</a></li>
<li class="chapter" data-level="15.9.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#raster-5"><i class="fa fa-check"></i><b>15.9.2</b> Raster</a></li>
</ul></li>
<li class="chapter" data-level="15.10" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-opera√ß√µes-com-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.10</b> Principais opera√ß√µes com dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.10.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#opera√ß√µes-de-atributos"><i class="fa fa-check"></i><b>15.10.1</b> Opera√ß√µes de atributos</a></li>
<li class="chapter" data-level="15.10.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#opera√ß√µes-espaciais"><i class="fa fa-check"></i><b>15.10.2</b> Opera√ß√µes espaciais</a></li>
<li class="chapter" data-level="15.10.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#opera√ß√µes-geom√©tricas"><i class="fa fa-check"></i><b>15.10.3</b> Opera√ß√µes geom√©tricas</a></li>
</ul></li>
<li class="chapter" data-level="15.11" data-path="dados-geograficos.html"><a href="dados-geograficos.html#visualiza√ß√£o-de-dados-geogr√°ficos"><i class="fa fa-check"></i><b>15.11</b> Visualiza√ß√£o de dados geogr√°ficos</a>
<ul>
<li class="chapter" data-level="15.11.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-elementos-de-um-mapa"><i class="fa fa-check"></i><b>15.11.1</b> Principais elementos de um mapa</a></li>
<li class="chapter" data-level="15.11.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#principais-pacotes-para-a-composi√ß√£o-de-mapas"><i class="fa fa-check"></i><b>15.11.2</b> Principais pacotes para a composi√ß√£o de mapas</a></li>
<li class="chapter" data-level="15.11.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-est√°ticos"><i class="fa fa-check"></i><b>15.11.3</b> Mapas est√°ticos</a></li>
<li class="chapter" data-level="15.11.4" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-animados"><i class="fa fa-check"></i><b>15.11.4</b> Mapas animados</a></li>
<li class="chapter" data-level="15.11.5" data-path="dados-geograficos.html"><a href="dados-geograficos.html#mapas-interativos"><i class="fa fa-check"></i><b>15.11.5</b> Mapas interativos</a></li>
</ul></li>
<li class="chapter" data-level="15.12" data-path="dados-geograficos.html"><a href="dados-geograficos.html#exemplos-de-aplica√ß√µes-de-an√°lises-geogr√°ficas-para-dados-ecol√≥gicos"><i class="fa fa-check"></i><b>15.12</b> Exemplos de aplica√ß√µes de an√°lises geogr√°ficas para dados ecol√≥gicos</a>
<ul>
<li class="chapter" data-level="15.12.1" data-path="dados-geograficos.html"><a href="dados-geograficos.html#resumir-informa√ß√µes-de-biodiversidade-para-unidades-espaciais"><i class="fa fa-check"></i><b>15.12.1</b> Resumir informa√ß√µes de biodiversidade para unidades espaciais</a></li>
<li class="chapter" data-level="15.12.2" data-path="dados-geograficos.html"><a href="dados-geograficos.html#atribui√ß√£o-de-dados-clim√°ticos-para-pontos"><i class="fa fa-check"></i><b>15.12.2</b> Atribui√ß√£o de dados clim√°ticos para pontos</a></li>
<li class="chapter" data-level="15.12.3" data-path="dados-geograficos.html"><a href="dados-geograficos.html#predi√ß√µes-espaciais-de-objetos-raster"><i class="fa fa-check"></i><b>15.12.3</b> Predi√ß√µes espaciais de objetos raster</a></li>
</ul></li>
<li class="chapter" data-level="15.13" data-path="dados-geograficos.html"><a href="dados-geograficos.html#para-se-aprofundar-6"><i class="fa fa-check"></i><b>15.13</b> Para se aprofundar</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><i class="fa fa-check"></i><b>16</b> Reprodutibilidade em pesquisa e gerenciamento de dados</a>
<ul>
<li class="chapter" data-level="16.1" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#gest√£o-de-projetos-acad√™micos-no-rstudio"><i class="fa fa-check"></i><b>16.1</b> Gest√£o de projetos acad√™micos no RStudio</a></li>
<li class="chapter" data-level="16.2" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#documentos-din√¢micos-r-markdown"><i class="fa fa-check"></i><b>16.2</b> Documentos din√¢micos (R Markdown)</a></li>
<li class="chapter" data-level="16.3" data-path="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html"><a href="reprodutibilidade-em-pesquisa-e-gerenciamento-de-dados.html#controle-de-vers√£o-git-e-github"><i class="fa fa-check"></i><b>16.3</b> Controle de vers√£o, Git e GitHub</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introdu√ß√£o ao R com aplica√ß√µes em biodiversidade e conserva√ß√£o</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="intro-r" class="section level1" number="5">
<h1><span class="header-section-number">Cap√≠tulo 5</span> Introdu√ß√£o √† linguagem R</h1>
<div id="introdu√ß√£o-2" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Introdu√ß√£o</h2>
<p>O objetivo desta se√ß√£o √© <strong>apresentar os aspectos b√°sicos da linguagem R</strong> para que qualquer pessoa possa realizar todos os passos para a an√°lise de dados nessa linguagem. Nela, abordaremos as quest√µes mais b√°sicas sobre a linguagem como: 1) R e RStudio, 2) funcionamento da linguagem, 3) estrutura e manipula√ß√£o de objetos, 4) <em>tidyverse</em> e 5) principais livros e diversos materiais de R para se aprofundar nos estudos.</p>
<p>Todo processo de aprendizagem torna-se mais efetivo quando a <strong>teoria √© combinada com a pr√°tica</strong>, ent√£o recomendamos fortemente que voc√™ leitor, acompanhe os c√≥digos e exerc√≠cios deste livro, ao mesmo tempo que os executa em seu computador, e n√£o s√≥ os leia passivamente. Por motivos de espa√ßo, n√£o abordaremos todas as quest√µes relacionadas ao uso da linguagem R nesta se√ß√£o. Logo, aconselhamos que o leitor consulte o material sugerido no final dessa se√ß√£o para se aprofundar.</p>
</div>
<div id="r-e-rstudio" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> R e RStudio</h2>
<p>Com o R √© poss√≠vel <strong>manipular e analisar dados, visualizar gr√°ficos</strong> e escrever desde <strong>pequenas linhas de c√≥digos at√© programas inteiros</strong>. O R √© a vers√£o em c√≥digo aberto de uma linguagem de programa√ß√£o criada por <strong>John M. Chambers</strong> (Stanford University, CA, EUA), nos anos 1980 no Bell Labs, chamada de S, que contou com tr√™s vers√µes: Old S (1976-1987), New S (1988-1997) e S4 (1998), utilizada na IDE S-PLUS (1988-2008). Essa linguagem tornou-se bastante popular e v√°rios produtos comerciais que a usam est√£o dispon√≠veis, como o S-PLUS, SPSS, STATA e SAS.</p>
<p>No final dos anos 1990, <strong>Robert Gentleman</strong> e <strong>Ross Ihaka</strong> (Auckland University, NZ), iniciaram o desenvolvimento da <strong>vers√£o free da linguagem S</strong>, com o seguinto hist√≥rico: Desenvolvimento (1997-2000), Vers√£o 1 (2000-2004), Vers√£o 2 (2004-2013), Vers√£o 3 (2013-2020) e Vers√£o 4 (2020). Para mais detalhes do hist√≥rio de desenvolvimento do S e R, consultar Wickham (2013), sendo que atualmente a linguagem R √© mantida por uma rede de colaboradores denominada <strong>R Core Team</strong>. A <strong>origem do nome R</strong> √© desconhecida, mas reza que ao lan√ßarem o nome da linguagem os autores se valeram da letra que vinha antes do S, uma vez que a linguagem R foi baseada nela, e utilizaram a letra ‚ÄúR.‚Äù</p>
<p>Um aspecto digno de nota √© que a linguagem R, ao contr√°rio de outras linguagem como Fortran e C que s√£o compiladas, √© uma <strong>linguagem interpretada</strong>, o que a faz ser mais f√°cil de programar, pois processa linhas de comando e as transforma em linguagem de m√°quina (c√≥digo bin√°rio que o computador efetivamente l√™), apesar desse fato diminuir a velocidade de processamento.</p>
<p>Para come√ßarmos a trabalhar com o R √© necess√°rio baix√°-lo na p√°gina do R Project. Ent√£o, acesse esse <a href="http://www.r-project.org">site</a>, e em seguida, clique no link <strong>download R</strong>, que o levar√° √† pagina do CRAN Mirros (<em>Comprehensive R Archive Network</em>). Escolha a <strong>p√°gina espelho do Brasil</strong> mais pr√≥xima de voc√™ para baixar o programa. Escolha agora o <strong>sistema operacional</strong> do seu computador (passos adicionais existem para diferentes distribui√ß√µes Linux), para Windows, clique em <strong>base</strong> para finalmente chegar √† <strong>p√°gina de download</strong> com a vers√£o mais recente do R.</p>
<p>Reserve algum tempo posteriormente para <strong>explorar esta p√°gina do R-Project</strong>. Existem
v√°rios <a href="http://www.r-project.org/doc/bib/R-books.html">livros</a> dedicados a diversos assuntos baseados no R. Al√©m disso, est√£o dispon√≠veis <a href="http://cran.r-project.org/manuals.html">manuais</a> em <a href="http://cran.r-project.org/other-docs.html">diversas l√≠nguas</a> para serem baixados gratuitamente.</p>
<p>Como o R √© um software livre, n√£o existe a possibilidade de o usu√°rio entrar em <strong>contato com um servi√ßo de suporte de usu√°rios</strong>, muito comuns em softwares pagos. Ao inv√©s disso, existem v√°rias listas de emails que fornecem suporte √† <a href="http://www.r-project.org/mail.html">comunidade de usu√°rios</a>. N√≥s, particularmente, recomendamos o ingresso nas seguintes listas: R-help, R-sig-ecology, e <a href="http://www.leg.ufpr.br/doku.php/software:rbr">R-br</a>. Este √∫ltimo representa um grupo de usu√°rios brasileiro do programa R.</p>
<p>Apesar de podemos utilizar o R com a IDE (Ambiente de Desenvolvimento Integrado - <em>Integrated Development Environment</em>) RGui que vem com a instala√ß√£o da linguagem, para usu√°rios Windows (Figura <a href="intro-r.html#fig:fig-rgui">5.1</a>) ou no pr√≥prio terminal para usu√°rios Linux e MacOS, existem alguns IDEs espec√≠ficos para facilitar nosso uso dessa linguagem.</p>
<div class="figure" style="text-align: center"><span id="fig:fig-rgui"></span>
<img src="img/cap04_rgui.png" alt="Interface do RGui. Os n√∫meros indicam: (1) R Script, (2) R Console, e (3) R Graphics." width="100%" />
<p class="caption">
Figura 5.1: Interface do RGui. Os n√∫meros indicam: (1) R Script, (2) R Console, e (3) R Graphics.
</p>
</div>
<p>Entretanto, desde 2011, um IDE se tornou mais popular na comunidade: o <a href="https://rstudio.com/">RStudio</a> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a>). O RStudio possui algumas caracter√≠sticas que o tornam t√£o popular: v√°rias janelas de visualiza√ß√£o, marca√ß√£o e preenchimento autom√°tico do script, integra√ß√£o com controle de vers√£o, dentre outras op√ß√µes. Para fazer o download do RStudio, acessamos o <a href="https://rstudio.com/products/rstudio/download/#download">site</a>, e escolhemos o instalador com base em nosso sistema operacional.</p>
<p>Um √∫ltimo ponto t√©cnico importante: para evitar poss√≠veis erros, √© interessante instalar primeiro a linguagem R, seguida do IDE RStudio.</p>
</div>
<div id="funcionamento-da-linguagem-r" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Funcionamento da linguagem R</h2>
<p>Nesta se√ß√£o veremos o <strong>principais conceitos</strong> para entender como a <strong>linguagem funciona</strong> ou como geralmente utilizamos o IDE RStudio no dia-a-dia, para executar nossas rotinas utilizando a linguagem R. Veremos ent√£o: 1) console, 2) script (editor/roteiro), 3) objetos (vari√°veis), 4) operadores, 5 ) fun√ß√µes, 6) pacotes, 7) ambiente (environment/workspace), 8) ajuda (help) e 9) cita√ß√µes.</p>
<p>Antes de iniciarmos propriamente dito, √© fundamental entendermos alguns pontos sobre as janelas e o funcionamento delas no RStudio (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:fig-rstudio"></span>
<img src="img/cap04_rstudio.png" alt="Interface do RStudio. Os n√∫meros indicam: (1) janelas com abas de Script e R Markdown; (2) janela com abas de Console, Terminal e Jobs; (3) janela com abas de Environment, History, Conections e Tutorial; e (4) janela com abas de Files, Plots, Packages, Help e Viewer." width="100%" />
<p class="caption">
Figura 5.2: Interface do RStudio. Os n√∫meros indicam: (1) janelas com abas de Script e R Markdown; (2) janela com abas de Console, Terminal e Jobs; (3) janela com abas de Environment, History, Conections e Tutorial; e (4) janela com abas de Files, Plots, Packages, Help e Viewer.
</p>
</div>
<p>Detalhando algumas dessas janelas, temos:</p>
<ul>
<li><strong>Console</strong>: √© onde os c√≥digos s√£o rodados e vemos as sa√≠das</li>
<li><strong>Editor/Script</strong>: √© onde escrevemos nossos c√≥digos em R ou R Markdown</li>
<li><strong>Environment</strong>: painel com todos os objetos criados na sess√£o</li>
<li><strong>History</strong>: painel com o hist√≥rico dos comandos rodados</li>
<li><strong>Files</strong>: painel que mostra os arquivos no diret√≥rio de trabalho</li>
<li><strong>Plots</strong>: painel onde os gr√°ficos s√£o apresentados</li>
<li><strong>Packages</strong>: painel que lista os pacotes</li>
<li><strong>Help</strong>: painel onde a documenta√ß√£o das fun√ß√µes √© exibida</li>
</ul>
<p>No RStudio, alguns atalhos s√£o fundamentais para aumentar nossa produtividade:</p>
<ul>
<li><strong>f1</strong>: abre o painel de <em>Help</em></li>
<li><strong>ctrl + Enter</strong>: roda a linha selecionada no script</li>
<li><strong>ctrl + Shift + N</strong>: abre um novo script</li>
<li><strong>ctrl + S</strong>: salva um script</li>
<li><strong>ctrl + Z</strong>: desfaz uma opera√ß√£o</li>
<li><strong>ctrl + shift + Z</strong>: refaz uma opera√ß√£o</li>
<li><strong>alt + -</strong>: insere um sinal de atribui√ß√£o (&lt;-)</li>
<li><strong>ctrl + Shift + M</strong>: insere um operador pipe (%&gt;%)</li>
<li><strong>ctrl + Shift + C</strong>: comenta uma linha no script - insere um (#)</li>
<li><strong>ctrl + Shift + R</strong>: insere uma sess√£o (# ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî-)</li>
<li><strong>ctrl + Shift + H</strong>: abre uma janela para selecionar o diret√≥rio de trabalho</li>
<li><strong>ctrl + Shift + f10</strong>: reinicia o console</li>
<li><strong>ctrl + L</strong>: limpa os comandos do console</li>
<li><strong>alt + Shift + K</strong>: abre uma janela com todos os atalhos dispon√≠veis</li>
</ul>
<div id="console" class="section level3" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Console</h3>
<p>O console √© onde a vers√£o da linguagem R instalada √© carregada para executar os c√≥digos da linguagem (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (2)). Na janela do console ir√° aparecer o s√≠mbolo <code>&gt;</code> seguida de uma barra vertical <code>|</code> que fica piscando, onde iremos digitar ou enviar nossos c√≥digos do script. Podemos fazer um pequeno exerc√≠cio: vamos digitar <code>2 + 2</code>, seguido da tecla <code>Enter</code> para que essa opera√ß√£o seja executada.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="intro-r.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>O resultado retorna o valor <code>12</code>, precedido de um valor entre colchetes. Esses colchetes demonstram a posi√ß√£o do elemento numa sequ√™ncia de valores. Se fizermos essa outra opera√ß√£o <code>1:42</code>, o R vai criar uma sequ√™ncia unit√°ria de valores de 1 a 42. A depender da largura da janela do console, vai aparecer um n√∫mero diferente entre colchete indicando sua posi√ß√£o na sequ√™ncia: antes do 1 vai aparecer o <code>[1]</code>, depois quando a sequ√™ncia for quebrada, vai aparecer o n√∫mero correspondente da posi√ß√£o do elemento, no nosso caso <code>[26]</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="intro-r.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">42</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42</code></pre>
<p>Podemos ver o hit√≥rico dos c√≥digo executados no Console na aba <strong>History</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (3)).</p>
</div>
<div id="scripts" class="section level3" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Scripts</h3>
<p>Scripts s√£o <strong>rascunhos dos c√≥digos</strong>, e onde de fato os c√≥digos s√£o escritos e depois enviados ao console (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (1)). Scripts s√£o arquivos de texto simples, criados com a extens√£o (termina√ß√£o) <code>.R</code>. Para criar um script basta ir em <code>File &gt; New File &gt; R Script</code>, ou clicando no √≠cone logo abaixo de File, ou ainda usando o atalho <code>ctrl + shift + N</code>.</p>
<p>Uma vez escrito os c√≥digos no script, podemos rodar esses c√≥digos de duas formas: 1)
todo o script de uma vez, clicando em <strong>Source</strong> ou usando o atalho <code>ctrl + shift + enter</code>; 2) a linha onde o cursos estiver posicionado, independente de sua posi√ß√£o naquela linha, clicando em <strong>Run</strong> ou usando o atalho <code>ctrl + enter</code>.</p>
<p>Devemos sempre <strong>salvar nossos scripts</strong>, tomando por via de regra: primeiro criar o arquivo e depois ir salvando vers√£o desse mesmo arquivo. H√° diversos motivos para criar um script: continuar o desenvolvimento do mesmo em outro momento ou em outro computador, preservar trabalhos passados, ou ainda compartilhar seus c√≥digos com outra pessoa. Para criar ou salvar um script basta ir em <code>File &gt; Save</code>, escolher um diret√≥rio e nome para o script, e salvar. Podemos ainda utilizar o atalho <code>ctrl + S</code>.</p>
<p>Em rela√ß√£o aos scripts, ainda h√° os <strong>coment√°rios</strong>, representados pelos s√≠mbolos <code>#</code> (hash) ou <code>#'</code> (hash-linha). Coment√°rios n√£o s√£o lidos pelo console do R e s√£o utilizados geralmente para descrever informa√ß√µes sobre dados ou fun√ß√µes, ou ainda para suprimir linhas de c√≥digo. √â interessante ter no in√≠cio de cada script um cabe√ßalho identificando o objetivo ou an√°lise, autor e data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="intro-r.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; ---</span></span>
<span id="cb5-2"><a href="intro-r.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; title: capitulo 04 - introducao ao r</span></span>
<span id="cb5-3"><a href="intro-r.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; author: mauricio vancine</span></span>
<span id="cb5-4"><a href="intro-r.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; date: 2021-02-26</span></span>
<span id="cb5-5"><a href="intro-r.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; ---</span></span></code></pre></div>
<p>Al√©m disso, podemos usar coment√°rios para adicionar informa√ß√µes sobre os c√≥digos.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="intro-r.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comentarios</span></span>
<span id="cb6-2"><a href="intro-r.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># o r nao le o codigo depois do # (hash)</span></span>
<span id="cb6-3"><a href="intro-r.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dv">42</span> <span class="co"># essas palavras nao sao executadas, apenas o 42</span></span></code></pre></div>
<pre><code>## [1] 42</code></pre>
<p>Um ponto muito importante √© escrever os coment√°rios sempre em ingl√™s para tornar seu c√≥digo mais reprodut√≠vel poss√≠vel. Por fim, outro ponto fundamental √© ter <strong>boas pr√°ticas de estilo de c√≥digo</strong>. Quanto mais organizado e padronizado estiver os scripts, mais f√°cil de entend√™-los e de procurar poss√≠veis erros. Existem dois guias de boas pr√°ticas para adequadar seus scripts: <a href="http://adv-r.had.co.nz/Style.html">Hadley Wickham</a> e <a href="https://google.github.io/styleguide/Rguide.xml">Google</a>.</p>
</div>
<div id="operadores" class="section level3" number="5.3.3">
<h3><span class="header-section-number">5.3.3</span> Operadores</h3>
<p>No R, temos <strong>cinco tipos de operadores</strong>: aritm√©ticos, relacionais, l√≥gicos, atribui√ß√£o e diversos. Todos s√£o descritos na Tabela <a href="intro-r.html#tab:tab-operadores">5.1</a>.</p>
<table>
<caption><span id="tab:tab-operadores">Tabela 5.1: </span>Operadores no R.</caption>
<thead>
<tr class="header">
<th align="center">Operador</th>
<th align="center">Tipo</th>
<th align="center">Descri√ß√£o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">+</td>
<td align="center">Aritm√©tico</td>
<td align="center">Adi√ß√£o</td>
</tr>
<tr class="even">
<td align="center">-</td>
<td align="center">Aritm√©tico</td>
<td align="center">Subtra√ß√£o</td>
</tr>
<tr class="odd">
<td align="center">*</td>
<td align="center">Aritm√©tico</td>
<td align="center">Multiplica√ß√£o</td>
</tr>
<tr class="even">
<td align="center">/</td>
<td align="center">Aritm√©tico</td>
<td align="center">Divis√£o</td>
</tr>
<tr class="odd">
<td align="center">%%</td>
<td align="center">Aritm√©tico</td>
<td align="center">Resto da divis√£o</td>
</tr>
<tr class="even">
<td align="center">%/%</td>
<td align="center">Aritm√©tico</td>
<td align="center">Divis√£o inteira</td>
</tr>
<tr class="odd">
<td align="center">^ ou **</td>
<td align="center">Aritm√©tico</td>
<td align="center">Expoente</td>
</tr>
<tr class="even">
<td align="center">&gt;</td>
<td align="center">Relacional</td>
<td align="center">Maior</td>
</tr>
<tr class="odd">
<td align="center">&lt;</td>
<td align="center">Relacional</td>
<td align="center">Menor</td>
</tr>
<tr class="even">
<td align="center">&gt;=</td>
<td align="center">Relacional</td>
<td align="center">Maior ou igual</td>
</tr>
<tr class="odd">
<td align="center">&lt;=</td>
<td align="center">Relacional</td>
<td align="center">Menor ou igual</td>
</tr>
<tr class="even">
<td align="center">==</td>
<td align="center">Relacional</td>
<td align="center">Igualdade</td>
</tr>
<tr class="odd">
<td align="center">!=</td>
<td align="center">Relacional</td>
<td align="center">Diferen√ßa</td>
</tr>
<tr class="even">
<td align="center">!</td>
<td align="center">L√≥gico</td>
<td align="center">L√≥gico N√ÉO</td>
</tr>
<tr class="odd">
<td align="center">&amp;</td>
<td align="center">L√≥gico</td>
<td align="center">L√≥gico elementar E</td>
</tr>
<tr class="even">
<td align="center">|</td>
<td align="center">L√≥gico</td>
<td align="center">L√≥gico elementar OU</td>
</tr>
<tr class="odd">
<td align="center">&amp;&amp;</td>
<td align="center">L√≥gico</td>
<td align="center">L√≥gico E</td>
</tr>
<tr class="even">
<td align="center">||</td>
<td align="center">L√≥gico</td>
<td align="center">L√≥gico OU</td>
</tr>
<tr class="odd">
<td align="center">&lt;- ou =</td>
<td align="center">Atribui√ß√£o</td>
<td align="center">Atribui√ß√£o √† esquerda</td>
</tr>
<tr class="even">
<td align="center">&lt;&lt;-</td>
<td align="center">Atribui√ß√£o</td>
<td align="center">Super atribui√ß√£o √† esquerda</td>
</tr>
<tr class="odd">
<td align="center">-&gt;</td>
<td align="center">Atribui√ß√£o</td>
<td align="center">Atribui√ß√£o √† direita</td>
</tr>
<tr class="even">
<td align="center">-&gt;&gt;</td>
<td align="center">Atribui√ß√£o</td>
<td align="center">Super atribui√ß√£o √† direita</td>
</tr>
<tr class="odd">
<td align="center">:</td>
<td align="center">Diversos</td>
<td align="center">Sequ√™ncia unit√°ria</td>
</tr>
<tr class="even">
<td align="center">%in%</td>
<td align="center">Diversos</td>
<td align="center">Elementos que pertencem a um vetor</td>
</tr>
<tr class="odd">
<td align="center">%*%</td>
<td align="center">Diversos</td>
<td align="center">Multiplar matriz com sua transposta</td>
</tr>
<tr class="even">
<td align="center">%&gt;%</td>
<td align="center">Diversos</td>
<td align="center">pipe</td>
</tr>
<tr class="odd">
<td align="center">%‚Äì%</td>
<td align="center">Diversos</td>
<td align="center">Intervalo de datas</td>
</tr>
</tbody>
</table>
<p>Como exemplo, podemos fazer opera√ß√µes simples usando os operadores aritm√©ticos.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="intro-r.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes aritmeticas</span></span>
<span id="cb8-2"><a href="intro-r.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">+</span> <span class="dv">2</span> <span class="co"># adicao</span></span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="intro-r.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">*</span> <span class="dv">2</span> <span class="co"># multiplicacao</span></span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Precisamos ficar atentos √† <strong>domin√¢ncia</strong> dos operadores aritm√©ticos: <code>^ &gt;&gt; * ou / &gt;&gt; + ou -</code>. Veja no exemplo abaixo como o uso dos par√™nteses mudam os resultados.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="intro-r.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sem especificar - segue a ordem dos operadores</span></span>
<span id="cb12-2"><a href="intro-r.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">/</span> <span class="dv">2</span> <span class="sc">^</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="intro-r.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especificando - segue a ordem dos parenteses</span></span>
<span id="cb14-2"><a href="intro-r.html#cb14-2" aria-hidden="true" tabindex="-1"></a>((<span class="dv">1</span> <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">+</span> (<span class="dv">2</span> <span class="sc">/</span> <span class="dv">2</span>)) <span class="sc">^</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 9</code></pre>
</div>
<div id="objetos" class="section level3" number="5.3.4">
<h3><span class="header-section-number">5.3.4</span> Objetos</h3>
<p><strong>Objetos</strong> s√£o <strong>palavras</strong> √†s quais s√£o <strong>atribu√≠dos dados</strong>. Essa atribui√ß√£o possibilita a manipula√ß√£o de dados ou resultados de an√°lises. Iremos utilizar os s√≠mbolos <code>&lt;</code> (menor), seguido de <code>-</code> (menos), sem espa√ßo, dessa forma <code>&lt;-</code>. Tamb√©m podemos utilizar o s√≠mbolo de igual (<code>=</code>), mas n√£o recomendamos, por n√£o fazer parte das boas pr√°ticas de escrita de c√≥digos em R. Podemos inserir essa combina√ß√£o de s√≠mbolos com o atalho <code>alt + -</code>. Para demonstrar, vamos atribuir o valor <code>10</code> √† palavra <code>obj_10</code>, e chamar esse objeto novamente para verificar seu conte√∫do.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="intro-r.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atribuicao - simbolo (&lt;-)</span></span>
<span id="cb16-2"><a href="intro-r.html#cb16-2" aria-hidden="true" tabindex="-1"></a>obj_10 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb16-3"><a href="intro-r.html#cb16-3" aria-hidden="true" tabindex="-1"></a>obj_10</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>Todos os objetos criados numa sess√£o do R ficam listados na aba <strong>Environment</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (3)). Al√©m disso, o RStudio possui a fun√ß√£o <em>auto complete</em>, ou seja, podemos digitar as primeiras letras de um objeto (ou fun√ß√£o) e em seguida apertar <code>Tab</code> para que o RStudio liste tudo que come√ßar com essas letras.</p>
<p>Dois pontos importantes sobre atribui√ß√µes: primeiro, o R sobrescreve os valores dos objetos com o mesmo nome, deixando o objeto com o valor da segunda atribui√ß√£o.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="intro-r.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sobrescreve o valor dos objetos</span></span>
<span id="cb18-2"><a href="intro-r.html#cb18-2" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb18-3"><a href="intro-r.html#cb18-3" aria-hidden="true" tabindex="-1"></a>obj</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="intro-r.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># obj agora vale 2</span></span>
<span id="cb20-2"><a href="intro-r.html#cb20-2" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb20-3"><a href="intro-r.html#cb20-3" aria-hidden="true" tabindex="-1"></a>obj</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Segundo, o R tem limita√ß√µes ao nomear objetos:</p>
<ul>
<li>nome de objetos s√≥ podem <strong>come√ßar por letras</strong> (<code>a-z</code> ou <code>A-Z</code>) ou <strong>pontos</strong> (<code>.</code>)</li>
<li>nome de objetos s√≥ podem <strong>conter letras</strong> (<code>a-z</code> ou <code>A-Z</code>), <strong>n√∫mero</strong>s (<code>0-9</code>), <strong>underscores</strong> (<code>_</code>) ou <strong>pontos</strong> (<code>.</code>)</li>
<li>R √© <em>case-sensitive</em>, i.e., ele difere <strong>letras mai√∫sculas de min√∫sculas</strong>. Assim, um objeto chamado ‚Äúresposta‚Äù √© diferente do objeto ‚ÄúRESPOSTA‚Äù</li>
<li>devemos <strong>evitar acentos ou cedilha</strong> (<code>√ß</code>) para facilitar a memoriza√ß√£o dos objetos</li>
<li>nome de objetos n√£o podem ser iguais a <strong>nomes especies</strong> (<code>break</code>, <code>else</code>, <code>FALSE</code>, <code>for</code>, <code>function</code>, <code>if</code>, <code>Inf</code>, <code>NA</code>, <code>NaN</code>, <code>next</code>, <code>repeat</code>, <code>return</code>, <code>TRUE</code>, <code>while</code>)</li>
</ul>
<p>Podemos ainda utilizar objetos para <strong>fazer opera√ß√µes e criar novos objetos</strong>. Isso pode parecer um pouco confuso para os iniciantes na linguagem, mas √© fundamental aprender essa l√≥gica para passar para os pr√≥ximos passos.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="intro-r.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir dois objetos</span></span>
<span id="cb22-2"><a href="intro-r.html#cb22-2" aria-hidden="true" tabindex="-1"></a>va1 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb22-3"><a href="intro-r.html#cb22-3" aria-hidden="true" tabindex="-1"></a>va2 <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb22-4"><a href="intro-r.html#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="intro-r.html#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes com objetos e atribuicao</span></span>
<span id="cb22-6"><a href="intro-r.html#cb22-6" aria-hidden="true" tabindex="-1"></a>adi <span class="ot">&lt;-</span> va1 <span class="sc">+</span> va2</span>
<span id="cb22-7"><a href="intro-r.html#cb22-7" aria-hidden="true" tabindex="-1"></a>adi</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
</div>
<div id="fun√ß√µes" class="section level3" number="5.3.5">
<h3><span class="header-section-number">5.3.5</span> Fun√ß√µes</h3>
<p>Fun√ß√µes s√£o <strong>c√≥digos preparados para realizar uma tarefa</strong> de modo simples. Outra forma de entender uma fun√ß√£o √©: comandos que realizam opera√ß√µes em argumentos. A estrutura de uma fun√ß√£o √© muito similar √† sintaxe usada em planilhas eletr√¥nicas, sendo composta por:</p>
<blockquote>
<p>nome_da_funcao(argumento1, argumento2)</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><strong>Nome da fun√ß√£o</strong>: remete ao que ela faz</li>
<li><strong>Par√™nteses</strong>: limitam a fun√ß√£o</li>
<li><strong>Argumentos</strong>: onde a fun√ß√£o ir√° atuar</li>
<li><strong>V√≠rgulas</strong>: separam os argumentos</li>
</ol>
<p>Os argumentos de uma fun√ß√£o podem ser de dois tipos:</p>
<ol style="list-style-type: decimal">
<li><strong>Valores ou objetos</strong>: a fun√ß√£o ir√° alterar os valores em si ou os valores atribu√≠dos aos objetos</li>
<li><strong>Par√¢metros</strong>: valores fixos que informam um m√©todo ou a realiza√ß√£o de uma opera√ß√£o. Informa-se o nome desse argumento, seguido de ‚Äú=‚Äù e um n√∫mero, texto ou TRUE ou FALSE</li>
</ol>
<p>Alguns exemplos de argumentos como valores ou objetos.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="intro-r.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes - argumentos como valores</span></span>
<span id="cb24-2"><a href="intro-r.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># soma</span></span>
<span id="cb24-3"><a href="intro-r.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">10</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="intro-r.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes - argumentos como objetos</span></span>
<span id="cb26-2"><a href="intro-r.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># soma</span></span>
<span id="cb26-3"><a href="intro-r.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(va1, va2)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>Alguns exemplos de argumentos como par√¢metros. Note que apesar do valor do argumento ser o mesmo (10), seu efeito no resultado muda drasticamente. Aqui tamb√©m √© importante destacar um ponto: 1 podemos informar os argumentos sequencialmente, sem explicitar seus nomes, ou 2) independente da ordem, mas explicitando seus nomes. Entretanto, como no exemplo abaixo, devemos informar o nome do argumento (i.e., par√¢metro), para que seu efeito seja o que desejamos.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="intro-r.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes - argumentos como parametros</span></span>
<span id="cb28-2"><a href="intro-r.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao - repita todos os elementos</span></span>
<span id="cb28-3"><a href="intro-r.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">times =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3
## [39] 4 5 1 2 3 4 5 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="intro-r.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao - repita cada um dos elementos</span></span>
<span id="cb30-2"><a href="intro-r.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">each =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 4 4 4 4 4 4 4 4
## [39] 4 4 5 5 5 5 5 5 5 5 5 5</code></pre>
<p>Um ponto fundamental, e que deve ser entendido nesse ponto, √© o <strong>fluxo de atribui√ß√µes do resultado da opera√ß√£o de fun√ß√µes a novos objetos</strong>. No desenvolvimento de qualquer script, grande parte da estrutura do mesmo ser√° dessa forma: atribui√ß√£o de dados &gt; opera√ß√µes com fun√ß√µes &gt; atribui√ß√£o dos resultados a novos objetos &gt; opera√ß√µes com fun√ß√µes desses novos objetos &gt; atribui√ß√£o dos resultados a novaos objetos‚Ä¶.Ao entender esse funcionamento, come√ßamos a entender como devemos pensar na organiza√ß√£o do nosso script para montar as an√°lises de que precisamos.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="intro-r.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atribuicao dos resultados</span></span>
<span id="cb32-2"><a href="intro-r.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao</span></span>
<span id="cb32-3"><a href="intro-r.html#cb32-3" aria-hidden="true" tabindex="-1"></a>rep_times <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">times =</span> <span class="dv">10</span>)</span>
<span id="cb32-4"><a href="intro-r.html#cb32-4" aria-hidden="true" tabindex="-1"></a>rep_times</span></code></pre></div>
<pre><code>##  [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 1 2 3
## [39] 4 5 1 2 3 4 5 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="intro-r.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somar e atribuir</span></span>
<span id="cb34-2"><a href="intro-r.html#cb34-2" aria-hidden="true" tabindex="-1"></a>rep_times_soma <span class="ot">&lt;-</span> <span class="fu">sum</span>(rep_times)</span>
<span id="cb34-3"><a href="intro-r.html#cb34-3" aria-hidden="true" tabindex="-1"></a>rep_times_soma</span></code></pre></div>
<pre><code>## [1] 150</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="intro-r.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># raiz e atribuir</span></span>
<span id="cb36-2"><a href="intro-r.html#cb36-2" aria-hidden="true" tabindex="-1"></a>rep_times_soma_raiz <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(rep_times_soma)</span>
<span id="cb36-3"><a href="intro-r.html#cb36-3" aria-hidden="true" tabindex="-1"></a>rep_times_soma_raiz</span></code></pre></div>
<pre><code>## [1] 12.24745</code></pre>
<p>Por fim, √© fundamental tamb√©m entender a <strong>origem das fun√ß√µes</strong> que usamos no R. Todas as fun√ß√µes s√£o advindas de <strong>pacotes</strong>. Esses pacotes possuem duas origens.</p>
<ol style="list-style-type: decimal">
<li>pacotes j√° instalados por padr√£o e que s√£o carregados quando abrimos o R (<em>R Base</em>)</li>
<li>pacotes que instalamos e carregamos com fun√ß√µes</li>
</ol>
</div>
<div id="pacotes" class="section level3" number="5.3.6">
<h3><span class="header-section-number">5.3.6</span> Pacotes</h3>
<p>Pacotes s√£o <strong>conjunto extras de fun√ß√µes para executar tarefas espec√≠ficas</strong>, al√©m do <em>R Base</em>. Existe literalmente milhares de pacotes para as mais diversas tarefas: estat√≠stica, ecologia, geografia, sensoriamento remoto, econometria, ci√™ncias sociais, gr√°ficos, <em>machine learning</em> etc. Podemos verificar este vasto conjunto de pacotes pelo <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">link</a> que lista por nome os <strong>pacotes oficiais</strong>, ou seja, que passaram pelo crivo do <strong>CRAN</strong>. Existem ainda muito mais <strong>pacotes em desenvolvimento</strong>, geralmente disponibilizados em reposit√≥rios do <strong>GitHub ou GitLab</strong>.</p>
<p>Primeiramente, com uma sess√£o do R sem carregar nenhum pacote extra, podemos verificar pacotes carregados pelo <em>R Base</em> utilizando a fun√ß√£o <code>search()</code>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="intro-r.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar pacotes carregados</span></span>
<span id="cb38-2"><a href="intro-r.html#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">search</span>()</span></code></pre></div>
<p>Podemos ainda verificar todos pacotes instalados em seu computador com a fun√ß√£o <code>library()</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="intro-r.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar pacotes instalados</span></span>
<span id="cb39-2"><a href="intro-r.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>()</span></code></pre></div>
<p>No R, quando tratamos de pacotes, devemos destacar dois conceitos: instalar um pacote e carregar um pacote. A <strong>instala√ß√£o</strong> de pacotes possui algumas caracter√≠sticas:</p>
<ul>
<li>Instala-se apenas uma vez</li>
<li>Precisa estar conectado √† internet</li>
<li>O nome do pacote precisa estar entre aspas</li>
<li>Fun√ß√£o (CRAN): <code>install.packages()</code></li>
</ul>
<p>Vamos instalar o pacote <em>vegan</em> diretamente do CRAN, que possui fun√ß√µes para realizar uma s√©rie de an√°lise em ecologia. Para isso, podemos ir em <code>Tools &gt; Install Packages...</code>, ou ir na aba <strong>Packages</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)), procurar um pacote ou simplesmente clicar em ‚ÄúInstall.‚Äù Podemos ainda utilizar a fun√ß√£o <code>install.packages()</code>.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="intro-r.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacotes</span></span>
<span id="cb40-2"><a href="intro-r.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<p>Podemos conferir em que diret√≥rio um pacote √© instalado com a fun√ß√£o <code>.libPaths()</code>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="intro-r.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># diretorio de intalacao dos pacotes</span></span>
<span id="cb41-2"><a href="intro-r.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span></code></pre></div>
<pre><code>## [1] &quot;/home/mude/R/x86_64-pc-linux-gnu-library/4.0&quot;
## [2] &quot;/usr/local/lib/R/site-library&quot;               
## [3] &quot;/usr/lib/R/site-library&quot;                     
## [4] &quot;/usr/lib/R/library&quot;</code></pre>
<p>Uma vez instalado um pacote, n√£o h√° necessidade de instal√°-lo novamente. Entretanto, todas as vezes que iniciarmos uma sess√£o no R, precisamos <strong>carregar</strong> os pacotes com as fun√ß√µes que precisamos utilizar. O <strong>carregamento</strong> de pacotes possui algumas caracter√≠sticas:</p>
<ul>
<li>Carrega-se toda vez que se abre uma nova sess√£o do R</li>
<li>N√£o precisa estar conectado √† internet</li>
<li>O nome do pacote n√£o precisa estar entre aspas</li>
<li>Fun√ß√µes: <code>library()</code> ou <code>require()</code></li>
</ul>
<p>Vamos carregar o pacote <em>vegan</em> que instalamos anteriormente. Podemos ir na aba <strong>Packages</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)) e ticar o pacote que queremos carregar ou utilizar a fun√ß√£o <code>library()</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="intro-r.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar pacotes</span></span>
<span id="cb43-2"><a href="intro-r.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span></code></pre></div>
<pre><code>## Loading required package: permute</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## This is vegan 2.5-7</code></pre>
<p>Como dissemos anteriormente, alguns pacotes em desenvlvimento encontram-se dispon√≠veis em reposit√≥rios do GitHub ou GitLab. Para instalar pacotes do GitHub, por exemplo, precisamos instalar e carregar o pacote <em>devtools</em>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="intro-r.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacote devtools</span></span>
<span id="cb47-2"><a href="intro-r.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb47-3"><a href="intro-r.html#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="intro-r.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar pacote devtools</span></span>
<span id="cb47-5"><a href="intro-r.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code></pre></div>
<p>Uma vez instalado e carregado este pacote, podemos instalar o pacote do GitHub, utilizando a fun√ß√£o <code>devtools::install_github()</code>. Precisamos atentar para usar essa forma ‚Äúnome_usuario/nome_repositorio,‚Äù retirados do link do reposit√≥rio de interesse. Como exemplo, podemos instalar mesmo pacote <em>vegan</em> do reposit√≥rio do GitHub <a href="https://github.com/vegandevs/vegan">vegandevs/vegan</a>, e depois utilizar a fun√ß√£o <code>library()</code> para carreg√°-lo normalmente.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="intro-r.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacote do github</span></span>
<span id="cb48-2"><a href="intro-r.html#cb48-2" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;vegandevs/vegan&quot;</span>)</span>
<span id="cb48-3"><a href="intro-r.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="intro-r.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar pacote do github</span></span>
<span id="cb48-5"><a href="intro-r.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<p>A maioria dos pacotes vem com bancos de dados que podem ser acessados pela fun√ß√£o <code>data()</code>. Esses bancos de dados podem ser usados para testar as fun√ß√µes do pacote. Se estiver com d√∫vida na maneira como voc√™ deve preparar a planilha para realizar uma an√°lise espec√≠fica, entre no help da fun√ß√£o e veja os conjuntos de dados que est√£o no exemplo desta fun√ß√£o. Como exemplo, vamos carregar os dados <code>dune</code> do pacote <em>vegan</em>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="intro-r.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar dados de um pacote</span></span>
<span id="cb49-2"><a href="intro-r.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb49-3"><a href="intro-r.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dune)</span>
<span id="cb49-4"><a href="intro-r.html#cb49-4" aria-hidden="true" tabindex="-1"></a>dune[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##   Achimill Agrostol Airaprae Alopgeni Anthodor Bellpere
## 1        1        0        0        0        0        0
## 2        3        0        0        2        0        3
## 3        0        4        0        7        0        2
## 4        0        8        0        2        0        2
## 5        2        0        0        0        4        2
## 6        2        0        0        0        3        0</code></pre>
<p>Se por algum motivo precisarmos <strong>desinstalar</strong> um pacote, podemos utilizar a fun√ß√£o <code>remove.packages()</code>. J√° para <strong>descarregar</strong> um pacote, podemos usar a fun√ß√£o <code>detach()</code>.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="intro-r.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># descarregar um pacote</span></span>
<span id="cb51-2"><a href="intro-r.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">&quot;package:vegan&quot;</span>, <span class="at">unload =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>E um √∫ltimo ponto fundamental de pacotes, diz respeito √† <strong>atualiza√ß√£o</strong> dos mesmos. Os pacotes s√£o atualizados com frequ√™ncia, e infelizmente ou felizmente (pois as atualiza√ß√µes podem oferecer algumas quebras entre pacotes), n√£o se atualizam sozinhos. Muitas vezes, a instala√ß√£o de um pacote pode depender da vers√£o dos pacotes dependentes, e geralmente uma janela se abre que todos os pacotes dependentes sejam atualizados. Podemos ir na aba <strong>Packages</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)) e clicar em ‚ÄúUpdate‚Äù ou usar a fun√ß√£o <code>update.packages(ask = FALSE)</code> para atualiz√°-los, entretanto, essa √© uma fun√ß√£o que costuma demorar para terminar de rodar.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="intro-r.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atualizacao dos pacotes</span></span>
<span id="cb52-2"><a href="intro-r.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>(<span class="at">ask =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="ajuda-help" class="section level3" number="5.3.7">
<h3><span class="header-section-number">5.3.7</span> Ajuda (<em>Help</em>)</h3>
<p>Um importante passo para melhorar a usuabilidade e ter mais familiaridade com a linguagem R √© aprender a usar a <strong>ajuda de cada fun√ß√£o</strong>. Para tanto, podemos utilizar a fun√ß√£o <code>help()</code> ou o operador <code>?</code>, depois de ter carregado o pacote, para abri uma nova aba (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (4)) que possui diversas informa√ß√µes sobre a fun√ß√£o de interesse. O arquivo de ajuda do R possui geralmente nove ou dez t√≥picos, que nos auxiliam muito no entendimento dos dados de entrada, argumento e que opera√ß√µes est√£o sendo realizadas:</p>
<ul>
<li><strong>Description</strong>: resumo da fun√ß√£o</li>
<li><strong>Usage</strong>: como utilizar a fun√ß√£o e quais os seus argumentos</li>
<li><strong>Arguments</strong>: detalha os argumentos e como os mesmos devem ser especifidados</li>
<li><strong>Details</strong>: detalhes importantes para se usar a fun√ß√£o</li>
<li><strong>Value</strong>: mostra como interpretar a sa√≠da (<em>output</em>) da fun√ß√£o (os resultados)</li>
<li><strong>Note</strong>: notas gerais sobre a fun√ß√£o</li>
<li><strong>Authors</strong>: autores da fun√ß√£o</li>
<li><strong>References</strong>: refer√™ncias bibliogr√°ficas para os m√©todos usados pra construir a fun√ß√£o</li>
<li><strong>See also</strong>: fun√ß√µes relacionadas</li>
<li><strong>Examples</strong>: exemplos do uso da fun√ß√£o. √Äs vezes pode ser √∫til copiar esse trecho e colar no R para ver como funciona e como usar a fun√ß√£o.</li>
</ul>
<p>Vamos realizar um exemplo, buscando o <em>help</em> da fun√ß√£o <code>aov()</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="intro-r.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># help</span></span>
<span id="cb53-2"><a href="intro-r.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(aov)</span>
<span id="cb53-3"><a href="intro-r.html#cb53-3" aria-hidden="true" tabindex="-1"></a>?aov</span></code></pre></div>
<p>Al√©m das fun√ß√µes, podemos buscas detalhes de um pacote em espec√≠fico, para uma p√°gina simples do <em>help</em> utilizando a fun√ß√£o <code>help()</code> ou o operador <code>?</code>. Entretanto, para uma op√ß√£o que ofere√ßa uma descri√ß√£o detalhada e um √≠ndice de todas as fun√ß√µes do pacote, podemos utilizar a fun√ß√£o <code>library()</code>, mas agora utilizando o argumento ‚Äúhelp,‚Äù indicamos o pacote de interesse entre aspas.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="intro-r.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># help do pacote</span></span>
<span id="cb54-2"><a href="intro-r.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(vegan)</span>
<span id="cb54-3"><a href="intro-r.html#cb54-3" aria-hidden="true" tabindex="-1"></a>?vegan</span>
<span id="cb54-4"><a href="intro-r.html#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="intro-r.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co"># help detalhado</span></span>
<span id="cb54-6"><a href="intro-r.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> <span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<p>Outra ferramenta de busca √© a p√°gina <a href="http://www.rseek.org">rseek</a>, na qual √© poss√≠vel buscar por um termo n√£o s√≥ nos pacotes do R, mas tamb√©m em listas de emails, manuais, p√°ginas na internet e livros sobre o programa.</p>
</div>
<div id="ambiente-environment" class="section level3" number="5.3.8">
<h3><span class="header-section-number">5.3.8</span> Ambiente (<em>Environment</em>)</h3>
<p>O ambiente <em>Environment</em> como vimos √© onde os objetos criados s√£o armazenados. √â fundamental entender que um objeto √© uma <strong>aloca√ß√£o de um pequeno espa√ßo na mem√≥ria RAM</strong> do seu computador, onde o R armazenar√° um valor ou o resultado de uma fun√ß√£o, utilizando o nome que definimos. Sendo assim, se fizermos uma atribui√ß√£o de um <strong>objeto maior que o tamanho da mem√≥ria RAM</strong>, esse objeto <strong>n√£o ser√° alocado</strong>, e a atribui√ß√£o n√£o funcionar√°. Existem op√ß√µes para contornar esse tipo de limita√ß√£o, mas n√£o abordaremos aqui. Entretanto, podemos utilizar a fun√ß√£o <code>object.size()</code> para saber quanto espa√ßo nosso objeto criado est√° alocando de mem√≥ria RAM. O conceito de fun√ß√£o √© tratado na se√ß√£o seguinte.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="intro-r.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tamanho de um objeto</span></span>
<span id="cb55-2"><a href="intro-r.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">object.size</span>(adi)</span></code></pre></div>
<pre><code>## 56 bytes</code></pre>
<p>Podemos listar todos os objetos criados com a fun√ß√£o <code>ls()</code> ou <code>objects()</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="intro-r.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os objetos</span></span>
<span id="cb57-2"><a href="intro-r.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## [1] &quot;adi&quot;                 &quot;dune&quot;                &quot;obj&quot;                
## [4] &quot;obj_10&quot;              &quot;rep_times&quot;           &quot;rep_times_soma&quot;     
## [7] &quot;rep_times_soma_raiz&quot; &quot;va1&quot;                 &quot;va2&quot;</code></pre>
<p>Podemos ainda remover objetos criados com a fun√ß√£o <code>rm()</code> ou <code>remove()</code>. Ou ainda fazer uma fun√ß√£o composta para remove todos os objetos do <em>Environment</em>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="intro-r.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover um objeto</span></span>
<span id="cb59-2"><a href="intro-r.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(adi)</span>
<span id="cb59-3"><a href="intro-r.html#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="intro-r.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remover todos os objetos criados</span></span>
<span id="cb59-5"><a href="intro-r.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
<p>Quando usamos a fun√ß√£o <code>ls()</code>, nenhum objeto √© lista.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="intro-r.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os objetos</span></span>
<span id="cb60-2"><a href="intro-r.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>Toda a vez que <strong>fechamos o R</strong>, os objetos criados s√£o <strong>apagados</strong> do <strong>enrironmental</strong>. Dessa forma, em algumas ocasi√µes, por exemplo, an√°lises estat√≠sticas que demoram um grande tempo para serem realizadas, pode ser interessante <strong>exportar alguns ou todos os objetos criados</strong>. Para salvar todo os objetos, ou seja, todo o <em>workspace</em>, podemos ir em <code>Session -&gt; Save Workspace As...</code> e escolher o nome do arquivo do <em>workspace</em>, por exemplo, ‚Äúmeu_workspace.RData.‚Äù Podemos ainda utilizar fun√ß√µes para essas tarefas. A fun√ß√£o <code>save.image()</code> salva todo <em>workspace</em> com a extens√£o <code>.RData</code>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="intro-r.html#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar todo o workspace</span></span>
<span id="cb62-2"><a href="intro-r.html#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save.image</span>(<span class="at">file =</span> <span class="st">&quot;meu_workspace.RData&quot;</span>)</span></code></pre></div>
<p>Depois disso, podemos fechar o RStudio tranquilamente, e quando formos trabalhar novamente, carregar os objetos criados indo em <code>Session -&gt; Load Workspace...</code>, ou utilizando a fun√ß√£o <code>load()</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="intro-r.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar todo o workspace</span></span>
<span id="cb63-2"><a href="intro-r.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;meu_workspace.RData&quot;</span>)</span></code></pre></div>
<p>Entretanto, em algumas ocasi√µes, n√£o precisamos salvar todos os objetos. Dessa forma, podemos salvar apenas alguns objetos espec√≠ficos usando a fun√ß√£o <code>save()</code>, tamb√©m com a extens√£o <code>.RData</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="intro-r.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar apenas um objeto</span></span>
<span id="cb64-2"><a href="intro-r.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(obj1, <span class="at">file =</span> <span class="st">&quot;meu_obj.RData&quot;</span>)</span>
<span id="cb64-3"><a href="intro-r.html#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="intro-r.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar apenas um objeto</span></span>
<span id="cb64-5"><a href="intro-r.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(obj1, obj2, <span class="at">file =</span> <span class="st">&quot;meus_objs.RData&quot;</span>)</span>
<span id="cb64-6"><a href="intro-r.html#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="intro-r.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar os objetos</span></span>
<span id="cb64-8"><a href="intro-r.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;meus_objs.RData&quot;</span>)</span></code></pre></div>
<p>Ou ainda podemos saber apenas um objeto com a extens√£o <code>.rds</code>. Para isso, usamos as fun√ß√µes <code>saveRDS()</code> e <code>readRDS()</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="intro-r.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># salvar um objeto para um arquivo</span></span>
<span id="cb65-2"><a href="intro-r.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(obj, <span class="at">file =</span> <span class="st">&quot;meu_obj.rds&quot;</span>)</span>
<span id="cb65-3"><a href="intro-r.html#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="intro-r.html#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar esse objeto</span></span>
<span id="cb65-5"><a href="intro-r.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">&quot;meu_obj.rds&quot;</span>)</span></code></pre></div>
</div>
<div id="cita√ß√µes" class="section level3" number="5.3.9">
<h3><span class="header-section-number">5.3.9</span> Cita√ß√µes</h3>
<p>Ao utilizar o R para realizar alguma an√°lise em seus estudos ecol√≥gicos, √© fundamental a cita√ß√£o do mesmo. Para saber como citar exatamente o R em artigos, existe uma fun√ß√£o denominada <code>citation()</code>, que prov√™ um formato gen√©rico de cita√ß√£o e um BibTeX para arquivos LaTeX e R Markdown.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="intro-r.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># citacao do r</span></span>
<span id="cb66-2"><a href="intro-r.html#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>()</span></code></pre></div>
<pre><code>## 
## To cite R in publications use:
## 
##   R Core Team (2021). R: A language and environment for statistical
##   computing. R Foundation for Statistical Computing, Vienna, Austria.
##   URL https://www.R-project.org/.
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {R: A Language and Environment for Statistical Computing},
##     author = {{R Core Team}},
##     organization = {R Foundation for Statistical Computing},
##     address = {Vienna, Austria},
##     year = {2021},
##     url = {https://www.R-project.org/},
##   }
## 
## We have invested a lot of time and effort in creating R, please cite it
## when using it for data analysis. See also &#39;citation(&quot;pkgname&quot;)&#39; for
## citing R packages.</code></pre>
<p>No resultado dessa fun√ß√£o, h√° uma mensagem muito interessante: ‚ÄúSee also ‚Äòcitation(‚Äúpkgname‚Äù)‚Äô for citing R packages.‚Äù Dessa forma, aconselhamos os usu√°rios de R a citar tamb√©m os pacotes que utilizaram em suas an√°lises para dar os devidos cr√©ditos aos desenvolvedores das fun√ß√µes implementadas nos pacotes. Como exemplo, vamos ver como fica a cita√ß√£o do pacote <em>vegan</em>.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="intro-r.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># citacao do pacote vegan</span></span>
<span id="cb68-2"><a href="intro-r.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">&quot;vegan&quot;</span>)</span></code></pre></div>
<pre><code>## 
## To cite package &#39;vegan&#39; in publications use:
## 
##   Jari Oksanen, F. Guillaume Blanchet, Michael Friendly, Roeland Kindt,
##   Pierre Legendre, Dan McGlinn, Peter R. Minchin, R. B. O&#39;Hara, Gavin
##   L. Simpson, Peter Solymos, M. Henry H. Stevens, Eduard Szoecs and
##   Helene Wagner (2020). vegan: Community Ecology Package. R package
##   version 2.5-7. https://CRAN.R-project.org/package=vegan
## 
## A BibTeX entry for LaTeX users is
## 
##   @Manual{,
##     title = {vegan: Community Ecology Package},
##     author = {Jari Oksanen and F. Guillaume Blanchet and Michael Friendly and Roeland Kindt and Pierre Legendre and Dan McGlinn and Peter R. Minchin and R. B. O&#39;Hara and Gavin L. Simpson and Peter Solymos and M. Henry H. Stevens and Eduard Szoecs and Helene Wagner},
##     year = {2020},
##     note = {R package version 2.5-7},
##     url = {https://CRAN.R-project.org/package=vegan},
##   }
## 
## ATTENTION: This citation information has been auto-generated from the
## package DESCRIPTION file and may need manual editing, see
## &#39;help(&quot;citation&quot;)&#39;.</code></pre>
</div>
<div id="principais-erros-de-iniciantes" class="section level3" number="5.3.10">
<h3><span class="header-section-number">5.3.10</span> Principais erros de iniciantes</h3>
<p><strong>Errar</strong> quando se est√° iniciando com R √© <strong>muito comum e faz parte do aprendizado</strong>. Entretanto, os erros nunca devem ser encarados como uma forma de desest√≠mulo para continuar tentando. Todos n√≥s, autores desse livro, e provavelmente usu√°rios muito experientes j√° passaram por um momento em que se quer desistir de tudo. Jovem aprendiz de R, a <strong>√∫nica diferen√ßa entre voc√™</strong> que est√° iniciando agora e n√≥s que usamos h√° mais tempo, <strong>s√£o as horas de uso (e raiva)</strong>. O que temos a mais √© experi√™ncia para olhar o erro, l√™-lo e conseguir interpretar.</p>
<p>Dessa forma, o ponto mais importante de quem est√° iniciando √© ter <strong>paci√™ncia, calma, bom humor, ler e entender a mensagem de erro</strong>. Iremos listar aqui o que consideramos os <strong>princiais erros dos iniciantes no R</strong>.</p>
<p><strong>1. Esquecer de completar uma fun√ß√£o ou bloco de comandos</strong></p>
<p>Esquecer de completar uma fun√ß√£o ou bloco de comandos √© algo bem comum. Geralmente esquecemos de fechar aspas <code>""</code> ou par√™nteses <code>()</code>, mas felizmente geralmente o R nos informa isso, indicando um s√≠mbolo de <code>+</code>. `</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="intro-r.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span>, <span class="dv">2</span></span>
<span id="cb70-2"><a href="intro-r.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">+</span></span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:3:0: unexpected end of input
## 1: sum(1, 2
## 2:   +
##   ^</code></pre>
<p><strong>2. Esquecer da v√≠rgula</strong></p>
<p>Outro erro bastante comum √© esquecer de acrescentar a v√≠rgula <code>,</code> para separar argumentos dentro de uma fun√ß√£o, principalmente se estamos compondo v√°rias fun√ß√£o acopladas, i.e., uma fun√ß√£o dentro da outra.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="intro-r.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:7: unexpected numeric constant
## 1: sum(1 2
##           ^</code></pre>
<p><strong>3. Chamar um objeto errado</strong></p>
<p>Pode parecer simples, mas esse √© de longo o erro que as pessoas mais me interrompiam no laborat√≥rio. Quando estamos mais avan√ßados e temos um longo script, fomos atribundo diversos objetos e em algum momento atribu√≠mos um nome do qual n√£o lembramos. E a√≠, quando chamamos o objeto ele n√£o existe e devolve um erro, que pode ser facilmente identificado, como o exemplo abaixo.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="intro-r.html#cb74-1" aria-hidden="true" tabindex="-1"></a>obj <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb74-2"><a href="intro-r.html#cb74-2" aria-hidden="true" tabindex="-1"></a>OBJ</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;OBJ&#39; not found</code></pre>
<p><strong>4. Esquecer de carregar um pacote</strong></p>
<p>Esse tamb√©m um erro recorrentes, mesmo para usu√°rios mais experientes. Em scripts de an√°lises complexas, que requerem v√°rios pacotes, geralmente esquecemos de um ou outro‚Ä¶ A melhor forma de evitar esse tipo de erro √© listar o pacotes que vamos precisar usar logo no in√≠cio do script.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="intro-r.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar dados</span></span>
<span id="cb76-2"><a href="intro-r.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dune)</span>
<span id="cb76-3"><a href="intro-r.html#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="intro-r.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># funcao do pacote vegan</span></span>
<span id="cb76-5"><a href="intro-r.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="fu">decostand</span>(dune, <span class="st">&quot;hell&quot;</span>)</span></code></pre></div>
<pre><code>## Error in decostand(dune, &quot;hell&quot;): could not find function &quot;decostand&quot;</code></pre>
<p>Geralmente a mensagem de erro ser√° de que a <strong>fun√ß√£o n√£o foi encontrada</strong> ou algo nesse sentido. Carregando o pacote, esse erro √© contornado.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="intro-r.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote</span></span>
<span id="cb78-2"><a href="intro-r.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)</span>
<span id="cb78-3"><a href="intro-r.html#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="intro-r.html#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar dados</span></span>
<span id="cb78-5"><a href="intro-r.html#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dune)</span>
<span id="cb78-6"><a href="intro-r.html#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="intro-r.html#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co"># funcao do pacote vegan</span></span>
<span id="cb78-8"><a href="intro-r.html#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="fu">decostand</span>(dune[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="st">&quot;hell&quot;</span>)</span></code></pre></div>
<pre><code>##    Achimill  Agrostol Airaprae  Alopgeni  Anthodor  Bellpere
## 1 1.0000000 0.0000000        0 0.0000000 0.0000000 0.0000000
## 2 0.6123724 0.0000000        0 0.5000000 0.0000000 0.6123724
## 3 0.0000000 0.5547002        0 0.7337994 0.0000000 0.3922323
## 4 0.0000000 0.8164966        0 0.4082483 0.0000000 0.4082483
## 5 0.5000000 0.0000000        0 0.0000000 0.7071068 0.5000000
## 6 0.6324555 0.0000000        0 0.0000000 0.7745967 0.0000000</code></pre>
<p><strong>5. Usar o nome da fun√ß√£o de forma err√¥nea</strong></p>
<p>Esse erro n√£o √© t√£o comum, mas pode ser inc√¥modo √†s vezes. Algumas fun√ß√µes possuem nomes no padr√£o ‚ÄúCamel Case,‚Äù i.e., com letras mai√∫sculas para no meio do nome da fun√ß√£o. Isso √†s vezes pode confundir, ou ainda, as fun√ß√µes podem ou n√£o ser separadas com <code>.</code>, como <code>row.names()</code> e <code>colnames()</code>. Na se√ß√£o de <em>tidyverse</em>, veremos que houve uma padroniza√ß√£o nos nomes das fun√ß√µes para ‚ÄúSnake Case,‚Äù i.e, todas as fun√ß√µes possuem letras min√∫sculas, com palavras separadas por <em>underscore</em> <code>_</code>.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="intro-r.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colsums</span>(dune)</span></code></pre></div>
<pre><code>## Error in colsums(dune): could not find function &quot;colsums&quot;</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="intro-r.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(dune)</span></code></pre></div>
<pre><code>## Achimill Agrostol Airaprae Alopgeni Anthodor Bellpere Bromhord Chenalbu 
##       16       48        5       36       21       13       15        1 
## Cirsarve Comapalu Eleopalu Elymrepe Empenigr Hyporadi Juncarti Juncbufo 
##        2        4       25       26        2        9       18       13 
## Lolipere Planlanc  Poaprat  Poatriv Ranuflam Rumeacet Sagiproc Salirepe 
##       58       26       48       63       14       18       20       11 
## Scorautu Trifprat Trifrepe Vicilath Bracruta Callcusp 
##       54        9       47        4       49       10</code></pre>
</div>
</div>
<div id="estrutura-e-manipula√ß√£o-de-objetos" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Estrutura e manipula√ß√£o de objetos</h2>
<p>O conhecimento sobre a <strong>estrutura e manipula√ß√£o de objetos</strong> √© fundamental para ter dom√≠nio e entendimento do funcionamento da linguagem R. Nesta se√ß√£o, trataremos da estrutura e manipula√ß√£o de dados no R, no que ficou conhecido como modo <em>R Base</em>, em contrapartida ao <em>tidyverse</em>, t√≥pico da pr√≥xima se√ß√£o. Abordaremos temas chaves: 1) atributos de objetos, 2) manipula√ß√£o de objetos unidimensionais e
multidimensionais, 3) valores faltantes e especiais, 4) diret√≥rio de trabalho, 5) importar, conferir e exportar dados.</p>
<div id="atributo-dos-objetos" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Atributo dos objetos</h3>
<p>Quando fazemos <strong>atribui√ß√µes de dados</strong> no R (<code>&lt;-</code>), os objetos gerados possuem tr√™s caracter√≠sticas.</p>
<ol style="list-style-type: decimal">
<li><strong>Nome</strong>: palavra que o R reconhece os dados atribu√≠dos</li>
<li><strong>Conte√∫do</strong>: dados em si</li>
<li><strong>Atributos</strong>: modos (<em>natureza</em>) e estruturas (<em>organiza√ß√£o</em>)</li>
</ol>
<p>Vamos explorar mais a fundo os <strong>modos</strong> e <strong>estruturas</strong>. Vale ressaltar que isso √© uma simplifica√ß√£o, pois h√° muitas classes de objetos como fun√ß√µes e sa√≠das de fun√ß√µes que possuem outros atributos.</p>
<p>Podemos verificar os atributos dos objetos com a fun√ß√£o <code>attributes()</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="intro-r.html#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atributos</span></span>
<span id="cb84-2"><a href="intro-r.html#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(dune)</span></code></pre></div>
<pre><code>## $names
##  [1] &quot;Achimill&quot; &quot;Agrostol&quot; &quot;Airaprae&quot; &quot;Alopgeni&quot; &quot;Anthodor&quot; &quot;Bellpere&quot;
##  [7] &quot;Bromhord&quot; &quot;Chenalbu&quot; &quot;Cirsarve&quot; &quot;Comapalu&quot; &quot;Eleopalu&quot; &quot;Elymrepe&quot;
## [13] &quot;Empenigr&quot; &quot;Hyporadi&quot; &quot;Juncarti&quot; &quot;Juncbufo&quot; &quot;Lolipere&quot; &quot;Planlanc&quot;
## [19] &quot;Poaprat&quot;  &quot;Poatriv&quot;  &quot;Ranuflam&quot; &quot;Rumeacet&quot; &quot;Sagiproc&quot; &quot;Salirepe&quot;
## [25] &quot;Scorautu&quot; &quot;Trifprat&quot; &quot;Trifrepe&quot; &quot;Vicilath&quot; &quot;Bracruta&quot; &quot;Callcusp&quot;
## 
## $row.names
##  [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot;
## [16] &quot;16&quot; &quot;17&quot; &quot;18&quot; &quot;19&quot; &quot;20&quot;
## 
## $class
## [1] &quot;data.frame&quot;</code></pre>
<div id="modo-dos-objetos" class="section level4" number="5.4.1.1">
<h4><span class="header-section-number">5.4.1.1</span> Modo dos objetos</h4>
<p>A depender da <strong>natureza dos elementos</strong> que comp√µem os dados que foram atribu√≠dos aos objetos, esses objetos podem ser, de forma simples um dos cinco: num√©rico do tipo inteiro (<em>interger</em>), num√©rico do tipo flutuante (<em>double</em>), texto (<em>character</em>), l√≥gico (<em>logical</em>), e complexos (<em>complex</em>).</p>
<p>A atribui√ß√£o de n√∫meros no R podem gerar dois tipos de modos: <strong>interger</strong> para n√∫meros inteiros e <strong>double</strong> para n√∫meros flutuantes ou com decimais.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="intro-r.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numerico double</span></span>
<span id="cb86-2"><a href="intro-r.html#cb86-2" aria-hidden="true" tabindex="-1"></a>obj_numerico_double <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb86-3"><a href="intro-r.html#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="intro-r.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb86-5"><a href="intro-r.html#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_numerico_double)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="intro-r.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tipo</span></span>
<span id="cb88-2"><a href="intro-r.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(obj_numerico_double)</span></code></pre></div>
<pre><code>## [1] &quot;double&quot;</code></pre>
<p>A t√≠tulo de praticidade, ambos s√£o incorporados como o modo <strong>numeric</strong>, com o tipo <strong>double</strong>, a menos que especifiquemos que seja inteiro com o a letra <code>L</code> depois do n√∫mero.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="intro-r.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numerico interger</span></span>
<span id="cb90-2"><a href="intro-r.html#cb90-2" aria-hidden="true" tabindex="-1"></a>obj_numerico_inteiro <span class="ot">&lt;-</span> 1L</span>
<span id="cb90-3"><a href="intro-r.html#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="intro-r.html#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb90-5"><a href="intro-r.html#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_numerico_inteiro)</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="intro-r.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tipo</span></span>
<span id="cb92-2"><a href="intro-r.html#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(obj_numerico_inteiro)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>Al√©m de n√∫meros, podemos atribuir textos, utilizando para isso aspas <code>""</code>.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="intro-r.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># caracter</span></span>
<span id="cb94-2"><a href="intro-r.html#cb94-2" aria-hidden="true" tabindex="-1"></a>obj_caracter <span class="ot">&lt;-</span> <span class="st">&quot;a&quot;</span> <span class="co"># atencao para as aspas</span></span>
<span id="cb94-3"><a href="intro-r.html#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="intro-r.html#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb94-5"><a href="intro-r.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_caracter)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Em algumas situa√ß√µes, precisamos indicar a ocorr√™ncia ou n√£o de um evento. Para isso, utilizamos as palavras reservadas (<code>TRUE</code> e <code>FALSE</code>), chamadas de vari√°veis booleanas. Devemos nos ater para que essas palavras s√£o com letras mai√∫sculas e sem aspas.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="intro-r.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logico</span></span>
<span id="cb96-2"><a href="intro-r.html#cb96-2" aria-hidden="true" tabindex="-1"></a>obj_logico <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># maiusculas e sem aspas</span></span>
<span id="cb96-3"><a href="intro-r.html#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="intro-r.html#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb96-5"><a href="intro-r.html#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_logico)</span></code></pre></div>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<p>Por fim, existe um modo pouco utilizado que cria n√∫meros complexos (raiz de n√∫meros negativos).</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="intro-r.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># complexo</span></span>
<span id="cb98-2"><a href="intro-r.html#cb98-2" aria-hidden="true" tabindex="-1"></a>obj_complexo <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">+</span>1i</span>
<span id="cb98-3"><a href="intro-r.html#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="intro-r.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co"># modo</span></span>
<span id="cb98-5"><a href="intro-r.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(obj_complexo)</span></code></pre></div>
<pre><code>## [1] &quot;complex&quot;</code></pre>
<p>Podemos fazer convers√£o entre esses modos com diversas fun√ß√µes.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="intro-r.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># conversoes entre modos</span></span>
<span id="cb100-2"><a href="intro-r.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>()</span>
<span id="cb100-3"><a href="intro-r.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>()</span>
<span id="cb100-4"><a href="intro-r.html#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>()</span>
<span id="cb100-5"><a href="intro-r.html#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="fu">as.logical</span>()</span>
<span id="cb100-6"><a href="intro-r.html#cb100-6" aria-hidden="true" tabindex="-1"></a><span class="fu">as.complex</span>()</span></code></pre></div>
</div>
<div id="estrutura-dos-objetos" class="section level4" number="5.4.1.2">
<h4><span class="header-section-number">5.4.1.2</span> Estrutura dos objetos</h4>
<p>Uma vez entendido a <strong>natureza dos modos dos elementos</strong> do objetos no R, podemos passar para o passo seguinte, e entender como esses <strong>elementos s√£o estruturados</strong> dentro dos objetos.</p>
<p>Essa estrutura√ß√£o ir√° nos contar sobre a <strong>organiza√ß√£o dos elementos</strong>, com rela√ß√£o aos <strong>modos e dimensionalidade</strong> da disposi√ß√£o dos elementos (Figura <a href="intro-r.html#fig:fig-r-estruturas">5.3</a>). De modo bem simples, os elementos podem ser estruturados em cinco tipos:</p>
<ol style="list-style-type: decimal">
<li><strong>Vetores e fatores</strong>: homog√™nio (<em>um modo</em>) e unidimensional (<em>uma dimens√£o</em>) Um tipo especial de vetor s√£o os fatores, usados para designar vari√°veis categ√≥ricas</li>
<li><strong>Matrizes</strong>: homog√™nio (<em>um modo</em>) e bidimensional (<em>duas dimens√µes</em>)</li>
<li><strong>Arrays</strong>: homog√™nio (<em>um modo</em>) e multidimensional (<em>mais de duas dimens√µes</em>)</li>
<li><strong>Data frames</strong>: heterog√™neo (<em>mais de um modo</em>) e bidimensional (<em>duas dimens√µes</em>)</li>
<li><strong>Listas</strong>: heterog√™neo (<em>mais de um modo</em>) e unidimensional (<em>uma dimens√£o</em>)</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:fig-r-estruturas"></span>
<img src="img/cap04_estrutura_dados.png" alt="Estruturas de dados mais comuns de R: vetores, matrizes, arrays, listas e data frames. Adaptado de: Grolemund (2014)." width="70%" />
<p class="caption">
Figura 5.3: Estruturas de dados mais comuns de R: vetores, matrizes, arrays, listas e data frames. Adaptado de: Grolemund (2014).
</p>
</div>
<div id="vetor" class="section level5" number="5.4.1.2.1">
<h5><span class="header-section-number">5.4.1.2.1</span> Vetor</h5>
<p><strong>Vetores</strong> representam o <strong>encadeamento de elementos</strong> numa sequ√™ncia unidimensionais. No Cap√≠tulo YY, vimos o conceito de vari√°veis aleat√≥rias. No R, essas vari√°veis podem ser entendidas como vetores. Dessa forma essa estrutura de dados pode ser traduzida como medidas de uma <strong>vari√°vel quantitativa</strong> (discretas ou cont√≠nuas), <strong>vari√°vel bin√°ria</strong> (booleana - TRUE e FALSE) ou <strong>descri√ß√£o</strong> (informa√ß√µes em texto).</p>
<p>H√° diversas formas de se <strong>criar um vetor</strong> no R:</p>
<ol style="list-style-type: decimal">
<li>Concatenando elementos com a fun√ß√£o <code>c</code></li>
<li>Criando sequ√™ncias unit√°rias <code>:</code> ou com a fun√ß√£o <code>seq()</code></li>
<li>Criando repeti√ß√µes com a fun√ß√£o <code>rep()</code></li>
<li>‚ÄúColar‚Äù palavras com uma sequ√™ncia num√©rica com a fun√ß√£o <code>paste()</code> ou <code>paste0()</code></li>
<li>Amostrando aleatoriamente elementos com a fun√ß√£o <code>sample()</code></li>
</ol>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="intro-r.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenar elementos numericos</span></span>
<span id="cb101-2"><a href="intro-r.html#cb101-2" aria-hidden="true" tabindex="-1"></a>concatenar <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">18</span>)</span>
<span id="cb101-3"><a href="intro-r.html#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="intro-r.html#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co"># sequencia unitaria (x1:x2)</span></span>
<span id="cb101-5"><a href="intro-r.html#cb101-5" aria-hidden="true" tabindex="-1"></a>sequencia <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb101-6"><a href="intro-r.html#cb101-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-7"><a href="intro-r.html#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="co"># sequencia com diferentes espacamentos </span></span>
<span id="cb101-8"><a href="intro-r.html#cb101-8" aria-hidden="true" tabindex="-1"></a>sequencia_esp <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>) </span>
<span id="cb101-9"><a href="intro-r.html#cb101-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-10"><a href="intro-r.html#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="co"># repeticao</span></span>
<span id="cb101-11"><a href="intro-r.html#cb101-11" aria-hidden="true" tabindex="-1"></a>repeticao <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="at">times =</span> <span class="dv">5</span>)</span>
<span id="cb101-12"><a href="intro-r.html#cb101-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-13"><a href="intro-r.html#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="co"># cola palavra e sequencia numerica - sem separacao definida (&quot; &quot;)</span></span>
<span id="cb101-14"><a href="intro-r.html#cb101-14" aria-hidden="true" tabindex="-1"></a>colar <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;amostra&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb101-15"><a href="intro-r.html#cb101-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-16"><a href="intro-r.html#cb101-16" aria-hidden="true" tabindex="-1"></a><span class="co"># amostragem aleat√≥ria - sem reposi√ß√£o</span></span>
<span id="cb101-17"><a href="intro-r.html#cb101-17" aria-hidden="true" tabindex="-1"></a>amostragem <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">10</span>)</span></code></pre></div>
<p>Como os vetores s√£o homog√™nios, i.e., s√≥ comportam um modo, quando combinamos mais de modo no mesmo objeto existe uma domin√¢ncia de modos. Existe dessa forma uma <strong>coer√ß√£o</strong> dos elementos combinados para todos fiquem iguais. Essa domin√¢ncia segue essa ordem:</p>
<blockquote>
<p><strong><code>DOMINANTE</code></strong> character &gt;&gt;&gt; double &gt;&gt;&gt; interger &gt;&gt;&gt; logical <strong><code>RECESSIVO</code></strong></p>
</blockquote>
<p>Al√©m disso, podemos utilizar as convers√µes listadas anteiormente para alterar os modos. Vamos exemplificar combinando os vetores criados anteriormente, e convertendo-os.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="intro-r.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coercao</span></span>
<span id="cb102-2"><a href="intro-r.html#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(colar, amostragem)</span></code></pre></div>
<pre><code>##  [1] &quot;amostra 1&quot; &quot;amostra 2&quot; &quot;amostra 3&quot; &quot;amostra 4&quot; &quot;amostra 5&quot; &quot;100&quot;      
##  [7] &quot;69&quot;        &quot;44&quot;        &quot;35&quot;        &quot;71&quot;        &quot;97&quot;        &quot;60&quot;       
## [13] &quot;5&quot;         &quot;59&quot;        &quot;31&quot;</code></pre>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="intro-r.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao</span></span>
<span id="cb104-2"><a href="intro-r.html#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(repeticao)</span></code></pre></div>
<pre><code>##  [1] 1 0 1 0 1 0 1 0 1 0</code></pre>
</div>
<div id="fator" class="section level5" number="5.4.1.2.2">
<h5><span class="header-section-number">5.4.1.2.2</span> Fator</h5>
<p>O <strong>fator</strong> representa medidas de uma <strong>vari√°vel qualitativa</strong>, podendo ser <strong>nominal ou ordinal</strong>. √â fundamental destacar que fatores no R devem ser entendidos como um vetor de <strong>interger</strong>, i.e., ele √© composto por n√∫meros inteiros representando os n√≠veis da vari√°vel categ√≥rica.</p>
<p>Para criar um fator no R, usamos uma fun√ß√£o espec√≠fica <code>factor()</code>, na qual podemos especificar os <strong>n√≠veis</strong> com o argumento <strong>leval</strong>, ou fazemos uma convers√£o usando a fun√ß√£o <code>as.factor()</code>. Trabalhar com fatores no <em>R Base</em> n√£o √© das tarefas mais agrad√°veis, mas mais adiante na se√ß√£o XX usaremos a vers√£o <em>tidyverse</em> usando o pacote <em>forcats</em>.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="intro-r.html#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fatores nominal</span></span>
<span id="cb106-2"><a href="intro-r.html#cb106-2" aria-hidden="true" tabindex="-1"></a>fator_nominal <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;pastagem&quot;</span>, <span class="st">&quot;cerrado&quot;</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb106-3"><a href="intro-r.html#cb106-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;pastagem&quot;</span>, <span class="st">&quot;cerrado&quot;</span>))</span>
<span id="cb106-4"><a href="intro-r.html#cb106-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-5"><a href="intro-r.html#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="co"># fatores ordinal</span></span>
<span id="cb106-6"><a href="intro-r.html#cb106-6" aria-hidden="true" tabindex="-1"></a>fator_ordinal <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="at">x =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;baixa&quot;</span>, <span class="st">&quot;media&quot;</span>, <span class="st">&quot;alta&quot;</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb106-7"><a href="intro-r.html#cb106-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;baixa&quot;</span>, <span class="st">&quot;media&quot;</span>, <span class="st">&quot;alta&quot;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb106-8"><a href="intro-r.html#cb106-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-9"><a href="intro-r.html#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao</span></span>
<span id="cb106-10"><a href="intro-r.html#cb106-10" aria-hidden="true" tabindex="-1"></a>fator <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="at">x =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;pastagem&quot;</span>, <span class="st">&quot;cerrado&quot;</span>), <span class="dv">20</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<div id="matriz" class="section level5" number="5.4.1.2.3">
<h5><span class="header-section-number">5.4.1.2.3</span> Matriz</h5>
<p>A <strong>matrix</strong> representa os dados no <strong>formato de tabela</strong>, com linhas e colunas. As linhas representam <strong>unidades amostrais</strong> (locais, transectos, parcelas) e as coluncas representam <strong>vari√°veis quantitativas</strong> (discretas ou cont√≠nuas) ou <strong>descri√ß√µes</strong> (informa√ß√µes em texto).</p>
<p>Podemos <strong>criar matrizes</strong> no R de <strong>duas formas</strong> principais. A primeira delas <strong>dispondo elementos de um vetor</strong> em um certo n√∫mero de linhas e colunas com a fun√ß√£o <code>matrix()</code>, podendo preencher essa matriz com os elementos do vetor por linhas ou por colunas alterando o argumento <strong>byrow</strong>.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="intro-r.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vetor</span></span>
<span id="cb107-2"><a href="intro-r.html#cb107-2" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span></span>
<span id="cb107-3"><a href="intro-r.html#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="intro-r.html#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix - preenchimento por linhas - horizontal</span></span>
<span id="cb107-5"><a href="intro-r.html#cb107-5" aria-hidden="true" tabindex="-1"></a>ma_row <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> ve, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb107-6"><a href="intro-r.html#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="intro-r.html#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix - preenchimento por colunas - vertical</span></span>
<span id="cb107-8"><a href="intro-r.html#cb107-8" aria-hidden="true" tabindex="-1"></a>ma_col <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> ve, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>A segundo forma <strong>combinando vetores</strong>, utilizando a fun√ß√£o <code>rbind</code> para combinar veores por linha, i.e., vetor embaixo do outro, e <code>cbind</code> para combinar vetores por coluna, i.e., vetor ao lado do outro.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="intro-r.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar dois vetores</span></span>
<span id="cb108-2"><a href="intro-r.html#cb108-2" aria-hidden="true" tabindex="-1"></a>vec_1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb108-3"><a href="intro-r.html#cb108-3" aria-hidden="true" tabindex="-1"></a>vec_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb108-4"><a href="intro-r.html#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="intro-r.html#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar por linhas - vertical - um embaixo do outro</span></span>
<span id="cb108-6"><a href="intro-r.html#cb108-6" aria-hidden="true" tabindex="-1"></a>ma_rbind <span class="ot">&lt;-</span> <span class="fu">rbind</span>(vec_1, vec_2)</span>
<span id="cb108-7"><a href="intro-r.html#cb108-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-8"><a href="intro-r.html#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar por colunas - horizontal - um ao lado do outro</span></span>
<span id="cb108-9"><a href="intro-r.html#cb108-9" aria-hidden="true" tabindex="-1"></a>ma_cbind <span class="ot">&lt;-</span> <span class="fu">cbind</span>(vec_1, vec_2)</span></code></pre></div>
</div>
<div id="array" class="section level5" number="5.4.1.2.4">
<h5><span class="header-section-number">5.4.1.2.4</span> Array</h5>
<p>O <strong>array</strong> representa <strong>combina√ß√£o de tabelas</strong>, com linhas, colunas e dimens√µes. Essa combina√ß√£o pode ser feita em m√∫ltiplas dimens√µes, mas apesar disso, geralmente √© mais comum o uso em Ecologia para tr√™s dimens√µes, por exemplo: <strong>linhas </strong>(unidades amostrais), <strong>colunas</strong> (esp√©cies) e <strong>dimens√£o</strong> (tempo). Isso gera um ‚Äúcubo m√°gico,‚Äù onde podemos comparar, nesse caso, comunidades ao longo do tempo.</p>
<p>Podemos criar arrays no R <strong>dispondo elementos de um vetor</strong> em um certo <strong>n√∫mero de linhas, colunas e dimens√µes</strong> com a fun√ß√£o <code>array()</code>. Em nosso exemplo, vamos compor 10 comunidades de 20 esp√©cies ao longo de cinco per√≠odos.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="intro-r.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># array</span></span>
<span id="cb109-2"><a href="intro-r.html#cb109-2" aria-hidden="true" tabindex="-1"></a>ar <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="at">data =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="fl">1e3</span>, <span class="at">rep =</span> <span class="cn">TRUE</span>), </span>
<span id="cb109-3"><a href="intro-r.html#cb109-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">5</span>))</span></code></pre></div>
</div>
<div id="data-frame" class="section level5" number="5.4.1.2.5">
<h5><span class="header-section-number">5.4.1.2.5</span> Data frame</h5>
<p>O <strong>data frame</strong> representa dados no <strong>formato de tabela</strong>, com linhas e colunas, muito semelhante √† matriz. Mas diferentemente das matrizes, os data frames comportam <strong>mais de um modo</strong> em suas colunas. Dessa forma, as linhas do data frame ainda representam <strong>unidades amostrais</strong> (locais, transectos, parcelas), mas as colunas agora podem representar <strong>descri√ß√µes</strong> (informa√ß√µes em texto), <strong>vari√°veis quantitativas</strong> (discretas ou cont√≠nuas) e/ou <strong>vari√°veis qualitativas</strong> (nominais ou ordinais).</p>
<p>A forma mais simples de criar data frames no R √© atrav√©s da <strong>combina√ß√£o de vetores</strong>. Essa combina√ß√£o √© feita com a fun√ß√£o <code>data.frame()</code>, e ocorre de <strong>forma horizontal</strong>, semelhante √† fun√ß√£o <code>cbind()</code>. Sendo assim, todos os vetores precisam ter o mesmo <strong>n√∫mero de elementos</strong>, ou seja, <strong>mesmo comprimento</strong>. Podemos ainda nomear as colunas para cada vetor.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="intro-r.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar tres vetores</span></span>
<span id="cb110-2"><a href="intro-r.html#cb110-2" aria-hidden="true" tabindex="-1"></a>vec_ch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;sp1&quot;</span>, <span class="st">&quot;sp2&quot;</span>, <span class="st">&quot;sp3&quot;</span>)</span>
<span id="cb110-3"><a href="intro-r.html#cb110-3" aria-hidden="true" tabindex="-1"></a>vec_nu <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb110-4"><a href="intro-r.html#cb110-4" aria-hidden="true" tabindex="-1"></a>vec_fa <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;campo&quot;</span>, <span class="st">&quot;floresta&quot;</span>, <span class="st">&quot;floresta&quot;</span>))</span>
<span id="cb110-5"><a href="intro-r.html#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="intro-r.html#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame - combinar por colunas - horizontal - um ao lado do outro</span></span>
<span id="cb110-7"><a href="intro-r.html#cb110-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(vec_ch, vec_nu, vec_fa)</span>
<span id="cb110-8"><a href="intro-r.html#cb110-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-9"><a href="intro-r.html#cb110-9" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame - nomear as colunas</span></span>
<span id="cb110-10"><a href="intro-r.html#cb110-10" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">especies =</span> vec_ch, </span>
<span id="cb110-11"><a href="intro-r.html#cb110-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">abundancia =</span> vec_nu, </span>
<span id="cb110-12"><a href="intro-r.html#cb110-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">vegetacao =</span> vec_fa)</span></code></pre></div>
</div>
<div id="lista" class="section level5" number="5.4.1.2.6">
<h5><span class="header-section-number">5.4.1.2.6</span> Lista</h5>
<p>A <strong>lista √© tipo especial de vetor</strong>, que aceita objetos como elementos. Ela √© a estrutura de dados utilizada para <strong>agrupar objetos</strong>, e √© geralmente a <strong>sa√≠da de muitas fun√ß√µes</strong> que fazem an√°lises estat√≠sticas.</p>
<p>Podemos criar listas atrav√©s da fun√ß√£o <code>list()</code>. Essa fun√ß√£o funciona de forma semelhante √† fun√ß√£o <code>c()</code> para a cria√ß√£o de vetores, mas agora estamos concatenando elementos. Podemos ainda nomear os elementos que estamos combinando.</p>
<p>Um ponto interessante para entender <strong>data frames</strong>, √© que eles s√£o listas, em que todos os elementos (colunas) possuem o mesmo <strong>n√∫mero de elementos</strong>, ou seja, <strong>mesmo comprimento</strong>.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="intro-r.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lista</span></span>
<span id="cb111-2"><a href="intro-r.html#cb111-2" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="co"># vector</span></span>
<span id="cb111-3"><a href="intro-r.html#cb111-3" aria-hidden="true" tabindex="-1"></a>              <span class="fu">factor</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="co"># factor</span></span>
<span id="cb111-4"><a href="intro-r.html#cb111-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))) <span class="co"># matrix</span></span>
<span id="cb111-5"><a href="intro-r.html#cb111-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-6"><a href="intro-r.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co"># lista - nomear os elementos</span></span>
<span id="cb111-7"><a href="intro-r.html#cb111-7" aria-hidden="true" tabindex="-1"></a>lista <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">vector =</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">20</span>), <span class="co"># vector</span></span>
<span id="cb111-8"><a href="intro-r.html#cb111-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">factor =</span> <span class="fu">factor</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="co"># factor</span></span>
<span id="cb111-9"><a href="intro-r.html#cb111-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">matrix =</span> <span class="fu">cbind</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))) <span class="co"># matrix</span></span></code></pre></div>
</div>
<div id="fun√ß√µes-1" class="section level5" number="5.4.1.2.7">
<h5><span class="header-section-number">5.4.1.2.7</span> Fun√ß√µes</h5>
<p>Uma √∫ltima estrutura de objetos criados no R s√£o as <strong>fun√ß√µes</strong>. Elas s√£o objetos <strong>criados pelo usu√°rio</strong> e <strong>reutilizados</strong> para fazer opera√ß√µes espec√≠ficas. A cria√ß√£o de fun√ß√µes geralmente √© um t√≥pico tratado num segundo momento, quando o usu√°rio de R adquire certo conhecimento da linguagem. Aqui abordarem apenas seu funcionamento b√°sico, diferenciando sua estrutura para entendimento e sua diferencia√ß√£o das demais estruturas. Vamos criar uma fun√ß√£o simples que retorna a multiplica√ß√£o de dois termos.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="intro-r.html#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar uma funcao</span></span>
<span id="cb112-2"><a href="intro-r.html#cb112-2" aria-hidden="true" tabindex="-1"></a>multi <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y){</span>
<span id="cb112-3"><a href="intro-r.html#cb112-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb112-4"><a href="intro-r.html#cb112-4" aria-hidden="true" tabindex="-1"></a>  mu <span class="ot">&lt;-</span> (x <span class="sc">*</span> y)</span>
<span id="cb112-5"><a href="intro-r.html#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(mu)</span>
<span id="cb112-6"><a href="intro-r.html#cb112-6" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb112-7"><a href="intro-r.html#cb112-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb112-8"><a href="intro-r.html#cb112-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-9"><a href="intro-r.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="co"># uso</span></span>
<span id="cb112-10"><a href="intro-r.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="fu">multi</span>(<span class="dv">42</span>, <span class="dv">42</span>)</span></code></pre></div>
<pre><code>## [1] 1764</code></pre>
</div>
</div>
</div>
<div id="manipula√ß√£o-de-objetos-unidimensionais" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Manipula√ß√£o de objetos unidimensionais</h3>
<p>Vamos agora explorar formas de <strong>manipular elementos de objetos unidimensionais</strong>, ou seja vetores, fatores e listas.</p>
<p>A primeira forma de manipula√ß√£o √© atrav√©s da <strong>indexa√ß√£o</strong>, utilizando os operadores <code>[]</code>. Com a indexa√ß√£o podemos <strong>acessar elementos</strong> de vetores e fatores por <strong>sua posi√ß√£o</strong>. Iremos utilizar n√∫meros, sequ√™ncia de n√∫meros ou opera√ß√£o booleanas para retornar partes dos vetores ou factores. Podemos ainda retirar elementos dos vetores com o opera√ß√£o aritm√©tico <code>-</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="intro-r.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar a amostragem</span></span>
<span id="cb114-2"><a href="intro-r.html#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb114-3"><a href="intro-r.html#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="intro-r.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># amostrar 10 elementos de uma sequencia</span></span>
<span id="cb114-5"><a href="intro-r.html#cb114-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">2</span>, .<span class="dv">05</span>), <span class="dv">10</span>)</span>
<span id="cb114-6"><a href="intro-r.html#cb114-6" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>##  [1] 1.80 0.00 1.20 0.45 1.75 0.85 1.15 0.30 1.90 0.20</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="intro-r.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona o quinto elemento</span></span>
<span id="cb116-2"><a href="intro-r.html#cb116-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 1.75</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="intro-r.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona os elementos de 1 a 5</span></span>
<span id="cb118-2"><a href="intro-r.html#cb118-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] 1.80 0.00 1.20 0.45 1.75</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="intro-r.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retira o decimo elemento</span></span>
<span id="cb120-2"><a href="intro-r.html#cb120-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="sc">-</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>## [1] 1.80 0.00 1.20 0.45 1.75 0.85 1.15 0.30 1.90</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="intro-r.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retira os elementos 2 a 9</span></span>
<span id="cb122-2"><a href="intro-r.html#cb122-2" aria-hidden="true" tabindex="-1"></a>ve[<span class="sc">-</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>)]</span></code></pre></div>
<pre><code>## [1] 1.8 0.2</code></pre>
<p>Podemos ainda fazer uma <strong>sele√ß√£o condicional</strong> do vetor. Ao utilizarmos operadores relacionais, teremos como resposta um vetor l√≥gico. Esse vetor l√≥gico pode ser utilizado dentro da indexa√ß√£o para sele√ß√£o de elementos.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="intro-r.html#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># quais valores sao maiores que 1?</span></span>
<span id="cb124-2"><a href="intro-r.html#cb124-2" aria-hidden="true" tabindex="-1"></a>ve <span class="sc">&gt;</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="intro-r.html#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># valores acima de 1</span></span>
<span id="cb126-2"><a href="intro-r.html#cb126-2" aria-hidden="true" tabindex="-1"></a>ve[ve <span class="sc">&gt;</span> <span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 1.80 1.20 1.75 1.15 1.90</code></pre>
<p>Al√©m da indexa√ß√£o, temos algumas <strong>fun√ß√£o que nos auxiliam em algumas opera√ß√µes com objetos unidimensionais</strong> listadas na Tabela <a href="intro-r.html#tab:tab-tab-funcoes-conf-uni">5.2</a>.</p>
<table>
<caption><span id="tab:tab-tab-funcoes-conf-uni">Tabela 5.2: </span>Fun√ß√µes para verifica√ß√£o e resumo de dados unidimensionais.</caption>
<thead>
<tr class="header">
<th align="center">Fun√ß√£o</th>
<th align="center">Descri√ß√£o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>max()</code></td>
<td align="center">Valor m√°ximo</td>
</tr>
<tr class="even">
<td align="center"><code>min()</code></td>
<td align="center">Valor m√≠nimo</td>
</tr>
<tr class="odd">
<td align="center"><code>range()</code></td>
<td align="center">Amplitude</td>
</tr>
<tr class="even">
<td align="center"><code>length()</code></td>
<td align="center">Comprimento</td>
</tr>
<tr class="odd">
<td align="center"><code>sum()</code></td>
<td align="center">Soma</td>
</tr>
<tr class="even">
<td align="center"><code>cumsum()</code></td>
<td align="center">Soma cumulativa</td>
</tr>
<tr class="odd">
<td align="center"><code>prod()</code></td>
<td align="center">Produto</td>
</tr>
<tr class="even">
<td align="center"><code>sqrt()</code></td>
<td align="center">Raiz quadrada</td>
</tr>
<tr class="odd">
<td align="center"><code>abs()</code></td>
<td align="center">Valor absoluto</td>
</tr>
<tr class="even">
<td align="center"><code>exp()</code></td>
<td align="center">Expoente</td>
</tr>
<tr class="odd">
<td align="center"><code>log()</code></td>
<td align="center">Logaritmo natural</td>
</tr>
<tr class="even">
<td align="center"><code>log1p()</code></td>
<td align="center">Logaritmo natural mais 1 <em>log(x + 1)</em></td>
</tr>
<tr class="odd">
<td align="center"><code>log2()</code></td>
<td align="center">Logaritmo base 2</td>
</tr>
<tr class="even">
<td align="center"><code>log10()</code></td>
<td align="center">Logaritmo base 10</td>
</tr>
<tr class="odd">
<td align="center"><code>mean()</code></td>
<td align="center">M√©dia</td>
</tr>
<tr class="even">
<td align="center"><code>mean.weighted()</code></td>
<td align="center">M√©dia ponderada</td>
</tr>
<tr class="odd">
<td align="center"><code>var()</code></td>
<td align="center">Vari√¢ncia</td>
</tr>
<tr class="even">
<td align="center"><code>sd()</code></td>
<td align="center">Desvio Padr√£o</td>
</tr>
<tr class="odd">
<td align="center"><code>mediam()</code></td>
<td align="center">Mediana</td>
</tr>
<tr class="even">
<td align="center"><code>quantile()</code></td>
<td align="center">Quantil</td>
</tr>
<tr class="odd">
<td align="center"><code>quarters()</code></td>
<td align="center">Quartil</td>
</tr>
<tr class="even">
<td align="center"><code>round()</code></td>
<td align="center">Arredondamento</td>
</tr>
<tr class="odd">
<td align="center"><code>sort()</code></td>
<td align="center">Ordena√ß√£o</td>
</tr>
<tr class="even">
<td align="center"><code>order()</code></td>
<td align="center">Posi√ß√£o ordenada</td>
</tr>
<tr class="odd">
<td align="center"><code>rev()</code></td>
<td align="center">Reverso</td>
</tr>
<tr class="even">
<td align="center"><code>unique()</code></td>
<td align="center">√önicos</td>
</tr>
<tr class="odd">
<td align="center"><code>summary()</code></td>
<td align="center">Resumo estat√≠stico</td>
</tr>
<tr class="even">
<td align="center"><code>cut()</code></td>
<td align="center">Divide vari√°vel cont√≠nua em fator</td>
</tr>
<tr class="odd">
<td align="center"><code>pretty()</code></td>
<td align="center">Divide vari√°vel cont√≠nua em intervalos</td>
</tr>
<tr class="even">
<td align="center"><code>scale()</code></td>
<td align="center">Padroniza√ß√£o e centraliza√ß√£o</td>
</tr>
<tr class="odd">
<td align="center"><code>sub()</code></td>
<td align="center">Substitui caracteres</td>
</tr>
<tr class="even">
<td align="center"><code>grep()</code></td>
<td align="center">Posi√ß√£o de caracteres</td>
</tr>
<tr class="odd">
<td align="center"><code>any()</code></td>
<td align="center">Algum valor?</td>
</tr>
<tr class="even">
<td align="center"><code>all()</code></td>
<td align="center">Todos os valores?</td>
</tr>
<tr class="odd">
<td align="center"><code>which()</code></td>
<td align="center">Quais valores?</td>
</tr>
<tr class="even">
<td align="center"><code>subset()</code></td>
<td align="center">Subconjunto</td>
</tr>
<tr class="odd">
<td align="center"><code>ifelse()</code></td>
<td align="center">Opera√ß√£o condicional</td>
</tr>
</tbody>
</table>
<p>Para <strong>listas</strong>, tamb√©m podemos usar a indexa√ß√£o <code>[]</code> para <strong>acessar ou retirar elementos</strong>.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="intro-r.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># lista</span></span>
<span id="cb128-2"><a href="intro-r.html#cb128-2" aria-hidden="true" tabindex="-1"></a>li <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">elem1 =</span> <span class="dv">1</span>, <span class="at">elem2 =</span> <span class="dv">2</span>, <span class="at">elem3 =</span> <span class="dv">3</span>)</span>
<span id="cb128-3"><a href="intro-r.html#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="intro-r.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o primeiro elemento</span></span>
<span id="cb128-5"><a href="intro-r.html#cb128-5" aria-hidden="true" tabindex="-1"></a>li[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $elem1
## [1] 1</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="intro-r.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar o primeiro elemento</span></span>
<span id="cb130-2"><a href="intro-r.html#cb130-2" aria-hidden="true" tabindex="-1"></a>li[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $elem2
## [1] 2
## 
## $elem3
## [1] 3</code></pre>
<p>Podemos ainda usar a indexa√ß√£o dupla <code>[[]]</code> para <strong>acessar os valores dos elementos</strong>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="intro-r.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o valor do primeiro elemento</span></span>
<span id="cb132-2"><a href="intro-r.html#cb132-2" aria-hidden="true" tabindex="-1"></a>li[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="intro-r.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o valor do segundo elemento</span></span>
<span id="cb134-2"><a href="intro-r.html#cb134-2" aria-hidden="true" tabindex="-1"></a>li[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Para <strong>listas nomeadas</strong>, podemos ainda utilizar o operador <code>$</code> para acessar elementos pelo nome.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="intro-r.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># acessar o primeiro elemento</span></span>
<span id="cb136-2"><a href="intro-r.html#cb136-2" aria-hidden="true" tabindex="-1"></a>li<span class="sc">$</span>elem1</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>E ainda podemos utilizar fun√ß√µes para medir o comprimento dessa lista, listar os nomes dos elementos ou ainda renomear os elementos: <code>length()</code> e <code>names()</code>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="intro-r.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprimento</span></span>
<span id="cb138-2"><a href="intro-r.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(li)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="intro-r.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nomes</span></span>
<span id="cb140-2"><a href="intro-r.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(li)</span></code></pre></div>
<pre><code>## [1] &quot;elem1&quot; &quot;elem2&quot; &quot;elem3&quot;</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="intro-r.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># renomear</span></span>
<span id="cb142-2"><a href="intro-r.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(li) <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot;elemento0&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb142-3"><a href="intro-r.html#cb142-3" aria-hidden="true" tabindex="-1"></a>li</span></code></pre></div>
<pre><code>## $elemento01
## [1] 1
## 
## $elemento02
## [1] 2
## 
## $elemento03
## [1] 3</code></pre>
</div>
<div id="manipula√ß√£o-de-objetos-multidimensionais" class="section level3" number="5.4.3">
<h3><span class="header-section-number">5.4.3</span> Manipula√ß√£o de objetos multidimensionais</h3>
<p>Da mesma forma que para objetos unidimensionais, <strong>manipular elementos de objetos multidimensionais</strong>, ou seja matrizes, data frames e arrays.</p>
<p>Novamente, a primeira forma de manipula√ß√£o √© atrav√©s da <strong>indexa√ß√£o</strong>, utilizando os operadores <code>[]</code>. Com a indexa√ß√£o podemos <strong>acessar elementos</strong> de matrizes, data frames e arrays por <strong>sua posi√ß√£o</strong>. Podemos ainda retirar elementos dos vetores com o opera√ß√£o aritm√©tico <code>-</code>.</p>
<p>Entretanto, agora temos <strong>mais de uma dimens√£o</strong> na estrutura√ß√£o dos elementos dentro dos objetos. Assim, utilizamos n√∫meros, sequ√™ncia de n√∫meros ou opera√ß√£o booleanas para retornar partes desses objetos, mas as dimens√µes t√™m de ser explicitadas, e separadas por <strong>v√≠rgulas</strong>, i.e., para acessar linhas e colunas, listamos respectivamente n√∫meros antes e depois da v√≠rgula. Essa indexa√ß√£o funciona para matrizes e data frames. Para arrays, especificamos as dimens√µes tamb√©m separadas por v√≠rgulas para acessar outras dimens√µes.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="intro-r.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># matriz</span></span>
<span id="cb144-2"><a href="intro-r.html#cb144-2" aria-hidden="true" tabindex="-1"></a>ma <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb144-3"><a href="intro-r.html#cb144-3" aria-hidden="true" tabindex="-1"></a>ma</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="intro-r.html#cb146-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">3</span>, ] <span class="co"># linha 3</span></span></code></pre></div>
<pre><code>## [1]  3  7 11</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="intro-r.html#cb148-1" aria-hidden="true" tabindex="-1"></a>ma[, <span class="dv">2</span>] <span class="co"># coluna 2</span></span></code></pre></div>
<pre><code>## [1] 5 6 7 8</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="intro-r.html#cb150-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># elemento da linha 1 e coluna 2</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="intro-r.html#cb152-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">1</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="co"># elementos da linha 1 e coluna 1 e 2</span></span></code></pre></div>
<pre><code>## [1] 1 5</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="intro-r.html#cb154-1" aria-hidden="true" tabindex="-1"></a>ma[<span class="dv">1</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)] <span class="co"># elementos da linha 1 e coluna 1 e 3</span></span></code></pre></div>
<pre><code>## [1] 1 9</code></pre>
<p>Para data frames, al√©m de utilizar <strong>n√∫meros e/ou sequ√™ncias de numeros</strong> dentro do operador <code>[]</code> simples, assim como podemos utilizar o operador <code>[[]]</code> duplo para retornar apenas o valores de uma colunas. Se as colunas <strong>estiverem nomeadas</strong>, podemos utilizar o nome da coluna de interesse entre aspas dentro dos operadores <code>[]</code> (retorna coluna) e <code>[[]]</code> (retorna apenas os valores), assim como ainda podemos utilizar o operador <code>$</code>. Essas √∫ltimas opera√ß√µes <strong>retornam um vetor</strong>, para o qual podemos fazer opera√ß√µes de vetores ou ainda <strong>atualizar</strong> o valor dessa coluna selecionada ou <strong>adicionar</strong> outra coluna.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="intro-r.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criar tres vetores</span></span>
<span id="cb156-2"><a href="intro-r.html#cb156-2" aria-hidden="true" tabindex="-1"></a>sp <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">&quot;sp&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb156-3"><a href="intro-r.html#cb156-3" aria-hidden="true" tabindex="-1"></a>abu <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb156-4"><a href="intro-r.html#cb156-4" aria-hidden="true" tabindex="-1"></a>flo <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;campo&quot;</span>, <span class="st">&quot;floresta&quot;</span>), <span class="at">each =</span> <span class="dv">5</span>))</span>
<span id="cb156-5"><a href="intro-r.html#cb156-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-6"><a href="intro-r.html#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame</span></span>
<span id="cb156-7"><a href="intro-r.html#cb156-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(sp, abu, flo)</span>
<span id="cb156-8"><a href="intro-r.html#cb156-8" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##      sp abu      flo
## 1   sp1   1    campo
## 2   sp2   2    campo
## 3   sp3   3    campo
## 4   sp4   4    campo
## 5   sp5   5    campo
## 6   sp6   6 floresta
## 7   sp7   7 floresta
## 8   sp8   8 floresta
## 9   sp9   9 floresta
## 10 sp10  10 floresta</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="intro-r.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [] - numeros</span></span>
<span id="cb158-2"><a href="intro-r.html#cb158-2" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">1</span>]</span></code></pre></div>
<pre><code>##  [1] &quot;sp1&quot;  &quot;sp2&quot;  &quot;sp3&quot;  &quot;sp4&quot;  &quot;sp5&quot;  &quot;sp6&quot;  &quot;sp7&quot;  &quot;sp8&quot;  &quot;sp9&quot;  &quot;sp10&quot;</code></pre>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="intro-r.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [] - nome das colunas - retorna coluna</span></span>
<span id="cb160-2"><a href="intro-r.html#cb160-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">&quot;flo&quot;</span>]</span></code></pre></div>
<pre><code>##         flo
## 1     campo
## 2     campo
## 3     campo
## 4     campo
## 5     campo
## 6  floresta
## 7  floresta
## 8  floresta
## 9  floresta
## 10 floresta</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="intro-r.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># [[]] - nome das colunas - retorna apenas os valores</span></span>
<span id="cb162-2"><a href="intro-r.html#cb162-2" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&quot;flo&quot;</span>]]</span></code></pre></div>
<pre><code>##  [1] campo    campo    campo    campo    campo    floresta floresta floresta
##  [9] floresta floresta
## Levels: campo floresta</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="intro-r.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># $ funciona apenas para data frame </span></span>
<span id="cb164-2"><a href="intro-r.html#cb164-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>sp</span></code></pre></div>
<pre><code>##  [1] &quot;sp1&quot;  &quot;sp2&quot;  &quot;sp3&quot;  &quot;sp4&quot;  &quot;sp5&quot;  &quot;sp6&quot;  &quot;sp7&quot;  &quot;sp8&quot;  &quot;sp9&quot;  &quot;sp10&quot;</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="intro-r.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># operacao de vetors</span></span>
<span id="cb166-2"><a href="intro-r.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(df<span class="sc">$</span>abu)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="intro-r.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># converter colunas</span></span>
<span id="cb168-2"><a href="intro-r.html#cb168-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>abu <span class="ot">&lt;-</span> <span class="fu">as.character</span>(df<span class="sc">$</span>abu)</span>
<span id="cb168-3"><a href="intro-r.html#cb168-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(df<span class="sc">$</span>abu)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="intro-r.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adicionar colunas</span></span>
<span id="cb170-2"><a href="intro-r.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb170-3"><a href="intro-r.html#cb170-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>abu2 <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">nrow</span>(df), <span class="at">rep =</span> <span class="cn">TRUE</span>)</span>
<span id="cb170-4"><a href="intro-r.html#cb170-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-5"><a href="intro-r.html#cb170-5" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##      sp abu      flo abu2
## 1   sp1   1    campo    0
## 2   sp2   2    campo    0
## 3   sp3   3    campo    0
## 4   sp4   4    campo    0
## 5   sp5   5    campo    1
## 6   sp6   6 floresta    1
## 7   sp7   7 floresta    1
## 8   sp8   8 floresta    1
## 9   sp9   9 floresta    0
## 10 sp10  10 floresta    1</code></pre>
<p>Podemos ainda fazer <strong>sele√ß√µes condicionais</strong> para <strong>retornar linhas</strong> com valores que temos interesse, semelhante ao uso de filtro de uma planilha eletr√¥nica.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="intro-r.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar linhas de uma matriz ou data frame </span></span>
<span id="cb172-2"><a href="intro-r.html#cb172-2" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>abu <span class="sc">&gt;</span> <span class="dv">4</span>, ]</span></code></pre></div>
<pre><code>##    sp abu      flo abu2
## 5 sp5   5    campo    1
## 6 sp6   6 floresta    1
## 7 sp7   7 floresta    1
## 8 sp8   8 floresta    1
## 9 sp9   9 floresta    0</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="intro-r.html#cb174-1" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>flo <span class="sc">==</span> <span class="st">&quot;floresta&quot;</span>, ]</span></code></pre></div>
<pre><code>##      sp abu      flo abu2
## 6   sp6   6 floresta    1
## 7   sp7   7 floresta    1
## 8   sp8   8 floresta    1
## 9   sp9   9 floresta    0
## 10 sp10  10 floresta    1</code></pre>
<p>Al√©m disso, h√° uma s√©rie de fun√ß√µes para confer√™ncia e manipula√ß√£o de dados que listamos na Tabela <a href="intro-r.html#tab:tab-funcoes-conf-multi">5.3</a>.</p>
<table>
<caption><span id="tab:tab-funcoes-conf-multi">Tabela 5.3: </span>Fun√ß√µes para verifica√ß√£o e resumo de dados multidimensionais.</caption>
<thead>
<tr class="header">
<th align="center">Fun√ß√£o</th>
<th align="center">Descri√ß√£o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>head()</code></td>
<td align="center">Mostra as primeiras 6 linhas</td>
</tr>
<tr class="even">
<td align="center"><code>tail()</code></td>
<td align="center">Mostra as √∫ltimas 6 linhas</td>
</tr>
<tr class="odd">
<td align="center"><code>nrow()</code></td>
<td align="center">Mostra o n√∫mero de linhas</td>
</tr>
<tr class="even">
<td align="center"><code>ncol()</code></td>
<td align="center">Mostra o n√∫mero de colunas</td>
</tr>
<tr class="odd">
<td align="center"><code>dim()</code></td>
<td align="center">Mostra o n√∫mero de linhas e de colunas</td>
</tr>
<tr class="even">
<td align="center"><code>rownames()</code></td>
<td align="center">Mostra os nomes das linhas (locais)</td>
</tr>
<tr class="odd">
<td align="center"><code>colnames()</code></td>
<td align="center">Mostra os nomes das colunas (vari√°veis)</td>
</tr>
<tr class="even">
<td align="center"><code>str()</code></td>
<td align="center">Mostra as classes de cada coluna (estrutura)</td>
</tr>
<tr class="odd">
<td align="center"><code>summary()</code></td>
<td align="center">Mostra um resumo dos valores de cada coluna</td>
</tr>
<tr class="even">
<td align="center"><code>rowSums()</code></td>
<td align="center">Calcula a soma das linhas (horizontal)</td>
</tr>
<tr class="odd">
<td align="center"><code>colSums()</code></td>
<td align="center">Calcula a soma das colunas (vertical)</td>
</tr>
<tr class="even">
<td align="center"><code>rowMeans()</code></td>
<td align="center">Calcula a m√©dia das linhas (horizontal)</td>
</tr>
<tr class="odd">
<td align="center"><code>colMeans()</code></td>
<td align="center">Calcula a m√©dia das colunas (vertical)</td>
</tr>
<tr class="even">
<td align="center"><code>str()</code></td>
<td align="center">Mostra a estrutura dos dados</td>
</tr>
<tr class="odd">
<td align="center"><code>table()</code></td>
<td align="center">Tabula√ß√£o cruzada</td>
</tr>
<tr class="even">
<td align="center"><code>t()</code></td>
<td align="center">Matriz ou data frame transposto</td>
</tr>
</tbody>
</table>
</div>
<div id="valores-faltantes-e-especiais" class="section level3" number="5.4.4">
<h3><span class="header-section-number">5.4.4</span> Valores faltantes e especiais</h3>
<p><strong>Valores faltantes e especiais</strong> s√£o <strong>valores reservados</strong> que representam dados faltantes, indefini√ß√µes matem√°ticas, infinitos e objetos nulos.</p>
<ol style="list-style-type: decimal">
<li><strong>NA (<em>Not Available</em>)</strong>: significa dado faltante/indispon√≠vel</li>
<li><strong>NaN (<em>Not a Number</em>)</strong>: representa indefini√ß√µes matem√°ticas</li>
<li><strong>Inf (<em>Infinito</em>)</strong>: √© um n√∫mero muito grande ou um limite matem√°tico</li>
<li><strong>NULL <em>(Nulo</em>)</strong>: representa um objeto nulo, sendo √∫til para preenchimento de la√ßos e outras aplica√ß√µes de programa√ß√£o</li>
</ol>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="intro-r.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data frame com elemento NA</span></span>
<span id="cb176-2"><a href="intro-r.html#cb176-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">var1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="cn">NA</span>), <span class="at">var2 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">2</span>))</span>
<span id="cb176-3"><a href="intro-r.html#cb176-3" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   var1 var2
## 1    1    1
## 2    4    4
## 3    2    5
## 4   NA    2</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="intro-r.html#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resposta booleana para elementos na</span></span>
<span id="cb178-2"><a href="intro-r.html#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(df)</span></code></pre></div>
<pre><code>##       var1  var2
## [1,] FALSE FALSE
## [2,] FALSE FALSE
## [3,] FALSE FALSE
## [4,]  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="intro-r.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co"># algum elemento √© na?</span></span>
<span id="cb180-2"><a href="intro-r.html#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(df))</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="intro-r.html#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover as linhas com nas</span></span>
<span id="cb182-2"><a href="intro-r.html#cb182-2" aria-hidden="true" tabindex="-1"></a>df_sem_na <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(df)</span>
<span id="cb182-3"><a href="intro-r.html#cb182-3" aria-hidden="true" tabindex="-1"></a>df_sem_na</span></code></pre></div>
<pre><code>##   var1 var2
## 1    1    1
## 2    4    4
## 3    2    5</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="intro-r.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># substituir nas por 0</span></span>
<span id="cb184-2"><a href="intro-r.html#cb184-2" aria-hidden="true" tabindex="-1"></a>df[<span class="fu">is.na</span>(df)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb184-3"><a href="intro-r.html#cb184-3" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   var1 var2
## 1    1    1
## 2    4    4
## 3    2    5
## 4    0    2</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="intro-r.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nan - not a number</span></span>
<span id="cb186-2"><a href="intro-r.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="intro-r.html#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="intro-r.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># limite matematico</span></span>
<span id="cb190-2"><a href="intro-r.html#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="intro-r.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numero grande</span></span>
<span id="cb192-2"><a href="intro-r.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span><span class="sc">^</span><span class="dv">310</span></span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="intro-r.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># objeto nulo</span></span>
<span id="cb194-2"><a href="intro-r.html#cb194-2" aria-hidden="true" tabindex="-1"></a>nulo <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb194-3"><a href="intro-r.html#cb194-3" aria-hidden="true" tabindex="-1"></a>nulo</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="diret√≥rio-de-trabalho" class="section level3" number="5.4.5">
<h3><span class="header-section-number">5.4.5</span> Diret√≥rio de trabalho</h3>
<p>O diret√≥rio de trabalho √© o <strong>endere√ßo da pasta (ou diret√≥rio)</strong> de onde o R ir√° <strong>importar ou exportar</strong> os nossos dados.</p>
<p>Podemos utilizar o pr√≥prio RStudio para tal tarefa, indo em Session &gt; Set Work Directory &gt; Choose Directory‚Ä¶, ou simplesmente utilizar o atalho <code>ctrl + shift + H</code>.</p>
<p>Podemos ainda utilizar as fun√ß√µes do R para definir o diret√≥rio. Para tanto, podemos navegar com o aplicativo de gerenciador de arquivos (e.g.¬†Windows Explorer) at√© nosso diret√≥rio de interesse, e copiar o endere√ßo na barra superior. Voltamos para o R e colamos esse endere√ßo entre aspas como um argumento da fun√ß√£o <code>setwd()</code>. √â fundamental destacar que em Sistemas Operacionais Windows √© necess√°rio inverter as barras (<code>\</code> por <code>/</code>).</p>
<p>Aconselhamos ainda utilizar as fun√ß√µes <code>getwd()</code> para retornar o diret√≥rio definido na sess√£o do R, assim como as fun√ß√µes <code>dir()</code> ou <code>list.files()</code> para listagem dos arquivos no diret√≥rio, ambas medidas de confer√™ncia do diret√≥rio correto.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="intro-r.html#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># definir o diretorio de trabalho</span></span>
<span id="cb196-2"><a href="intro-r.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/mude/data/github/livro_r_ecologia/dados&quot;</span>)</span>
<span id="cb196-3"><a href="intro-r.html#cb196-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-4"><a href="intro-r.html#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar o diretorio</span></span>
<span id="cb196-5"><a href="intro-r.html#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb196-6"><a href="intro-r.html#cb196-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-7"><a href="intro-r.html#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co"># listar os arquivos no diretorio</span></span>
<span id="cb196-8"><a href="intro-r.html#cb196-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dir</span>()</span>
<span id="cb196-9"><a href="intro-r.html#cb196-9" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>()</span></code></pre></div>
</div>
<div id="importar-dados" class="section level3" number="5.4.6">
<h3><span class="header-section-number">5.4.6</span> Importar dados</h3>
<p>Uma das opera√ß√µes mais corriqueiras do R, antes de realizar alguma an√°lise, √© a de <strong>importar dados</strong> que foram <strong>tabulados numa planilha eletr√¥nica</strong> e salvos no formato .csv, .txt ou .xlsx. Ao importar esse tipo de dado para o R, o formato que o mesmo assume, se nenhum par√¢metro for especificado, √© o da classes <code>dataframe</code>, prevendo que a planilha de dados possua colunas com diferentes modos.</p>
<p>Existe diversas formas de importar dados para o R. Podemos importar utilizando o RStudio, indo na janela <strong>Environment</strong> (Figura <a href="intro-r.html#fig:fig-rstudio">5.2</a> (3)) e clicar em ‚ÄúImportar Dataset.‚Äù</p>
<p>Entretanto, aconselhamos o <strong>uso de fun√ß√µes</strong> que fiquem salvas em um script para aumentar a reprodutibilidade do script. Dessa forma, as <strong>tr√™s principais fun√ß√µes</strong> para importar os arquivos nos <strong>tr√™s principais extens√µes</strong> (.csv, .txt ou .xlsx) s√£o, respectivamente: <code>read.csv()</code>, <code>read.table()</code> e `openxlsx::read.xlsx()``, sendo o √∫ltimo do pacote <em>openxlsx</em>.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="intro-r.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar pacote openxlsx</span></span>
<span id="cb197-2"><a href="intro-r.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;openxlsx&quot;</span>)</span>
<span id="cb197-3"><a href="intro-r.html#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span></code></pre></div>
<p>Para exemplificar como importar dados, vamos usar os dados de <strong>comunidades de anf√≠bios da Mata Atl√¢ntica</strong> (Atlantic Amphibians, Vancine et al.¬†2018). Iremos fazer o download diretamente do site da fonte dos dados.</p>
<p>Antes vamos antes escolher um diret√≥rio de trabalho com a fun√ß√£o <code>setwd()</code>, e em seguida criar um diret√≥rio com a fun√ß√£o <code>dir.create()</code> chamado ‚Äúdados.‚Äù Em seguida, vamos mudar nosso diret√≥ri para essa pasta, e criar mais um diret√≥rio chamado ‚Äútabelas,‚Äù e definir esse diret√≥rio para fazer o download.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="intro-r.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># escolher um diretorio</span></span>
<span id="cb198-2"><a href="intro-r.html#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;/home/mude/data/github/livro_r_ecologia&quot;</span>)</span>
<span id="cb198-3"><a href="intro-r.html#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="intro-r.html#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="co"># criar um diretorio &#39;dados&#39;</span></span>
<span id="cb198-5"><a href="intro-r.html#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;dados&quot;</span>)</span>
<span id="cb198-6"><a href="intro-r.html#cb198-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-7"><a href="intro-r.html#cb198-7" aria-hidden="true" tabindex="-1"></a><span class="co"># escolher diretorio &#39;dados&#39;</span></span>
<span id="cb198-8"><a href="intro-r.html#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;dados&quot;</span>)</span>
<span id="cb198-9"><a href="intro-r.html#cb198-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-10"><a href="intro-r.html#cb198-10" aria-hidden="true" tabindex="-1"></a><span class="co"># criar um diretorio &#39;tabelas&#39;</span></span>
<span id="cb198-11"><a href="intro-r.html#cb198-11" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="st">&quot;tabelas&quot;</span>)</span>
<span id="cb198-12"><a href="intro-r.html#cb198-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-13"><a href="intro-r.html#cb198-13" aria-hidden="true" tabindex="-1"></a><span class="co"># escolher diretorio &#39;tabelas&#39;</span></span>
<span id="cb198-14"><a href="intro-r.html#cb198-14" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;tabelas&quot;</span>)</span></code></pre></div>
<p>Agora podemos fazer o download de um arquivo <code>.zip</code> e extrair as tabelas usando a fun√ß√£o <code>unzip()</code> nesse mesmo diret√≥rio.</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="intro-r.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># download</span></span>
<span id="cb199-2"><a href="intro-r.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">&quot;https://esajournals.onlinelibrary.wiley.com/action/downloadSupplement?doi=10.1002%2Fecy.2392&amp;file=ecy2392-sup-0001-DataS1.zip&quot;</span>,</span>
<span id="cb199-3"><a href="intro-r.html#cb199-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">destfile =</span> <span class="st">&quot;atlantic_amphibians.zip&quot;</span>, <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span>)</span>
<span id="cb199-4"><a href="intro-r.html#cb199-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-5"><a href="intro-r.html#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="co"># unzip</span></span>
<span id="cb199-6"><a href="intro-r.html#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span>(<span class="at">zipfile =</span> <span class="st">&quot;atlantic_amphibians.zip&quot;</span>)</span></code></pre></div>
<p>Agora podemos importar a tabela de dados com a fun√ß√£o <code>read.csv()</code>, atribuindo ao objeto <code>aa_locais</code>.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="intro-r.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importar tabela de locais</span></span>
<span id="cb200-2"><a href="intro-r.html#cb200-2" aria-hidden="true" tabindex="-1"></a>aa_locais <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;dados/tabelas/ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>)</span></code></pre></div>
<p>Esse arquivo foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>. Caso tivesse sido criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, usar√≠amos a fun√ß√£o <code>read.csv2()</code>.</p>
</div>
<div id="confer√™ncia-de-dados-importados" class="section level3" number="5.4.7">
<h3><span class="header-section-number">5.4.7</span> Confer√™ncia de dados importados</h3>
<p>Uma vez importados os dados para o R, geralmente antes de inicarmos qualquer manejo, visualiza√ß√£o ou an√°lise de dados, fazemos a <strong>confer√™ncia desses dados</strong>. Para isso, podemos utilizar as fun√ß√µes listadas na Tabela <a href="intro-r.html#tab:tab-funcoes-conf-multi">5.3</a>.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="intro-r.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># primeiras linhas</span></span>
<span id="cb201-2"><a href="intro-r.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(aa_locais)</span></code></pre></div>
<pre><code>##        id reference_number species_number record sampled_habitat active_methods
## 1 amp1001             1001             19     ab           fo,ll             as
## 2 amp1002             1002             16     co        fo,la,ll             as
## 3 amp1003             1002             14     co        fo,la,ll             as
## 4 amp1004             1002             13     co        fo,la,ll             as
## 5 amp1005             1003             30     co        fo,ll,br             as
## 6 amp1006             1004             42     co  tp,pp,la,ll,is           &lt;NA&gt;
##   passive_methods complementary_methods      period month_start year_start
## 1              pt                  &lt;NA&gt; mo,da,tw,ni           9       2000
## 2              pt                  &lt;NA&gt; mo,da,tw,ni          12       2007
## 3              pt                  &lt;NA&gt; mo,da,tw,ni          12       2007
## 4              pt                  &lt;NA&gt; mo,da,tw,ni          12       2007
## 5            &lt;NA&gt;                  &lt;NA&gt;    mo,da,ni           7       1988
## 6            &lt;NA&gt;                  &lt;NA&gt;        &lt;NA&gt;          NA         NA
##   month_finish year_finish effort_months country    state state_abbreviation
## 1            1        2002            16  Brazil Piau\xed              BR-PI
## 2            5        2009            17  Brazil Cear\xe1              BR-CE
## 3            5        2009            17  Brazil Cear\xe1              BR-CE
## 4            5        2009            17  Brazil Cear\xe1              BR-CE
## 5            8        2001           157  Brazil Cear\xe1              BR-CE
## 6           NA          NA            NA  Brazil Cear\xe1              BR-CE
##                    municipality                                        site
## 1               Canto do Buriti      Parque Nacional Serra das Confus\xf5es
## 2 S\xe3o Gon\xe7alo do Amarante                                       Dunas
## 3 S\xe3o Gon\xe7alo do Amarante Jardim Bot\xe2nico\xa0Municipal de\xa0Bauru
## 4 S\xe3o Gon\xe7alo do Amarante                                    Ta\xedba
## 5                   Baturit\xe9                        Serra de Baturit\xe9
## 6                   Quebrangulo       Reserva Biol\xf3gica de Pedra Talhada
##    latitude longitude coordinate_precision altitude temperature precipitation
## 1 -8.680000 -43.42194                   gm      543       24.98           853
## 2 -3.545527 -38.85783                   dd       15       26.53          1318
## 3 -3.574194 -38.88869                   dd       29       26.45          1248
## 4 -3.515250 -38.91880                   dd       25       26.55          1376
## 5 -4.280556 -38.91083                   gm      750       21.35          1689
## 6 -9.229167 -36.42806                 &lt;NA&gt;      745       20.45          1249</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="intro-r.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ultimas linhas</span></span>
<span id="cb203-2"><a href="intro-r.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(aa_locais)</span></code></pre></div>
<pre><code>##           id reference_number species_number record sampled_habitat
## 1158 amp2158             1389              3     co            &lt;NA&gt;
## 1159 amp2159             1389              9     co            &lt;NA&gt;
## 1160 amp2160             1389              6     co            &lt;NA&gt;
## 1161 amp2161             1389              1     co            &lt;NA&gt;
## 1162 amp2162             1389              2     co            &lt;NA&gt;
## 1163 amp2163             1389              2     co            &lt;NA&gt;
##      active_methods passive_methods complementary_methods period month_start
## 1158           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1159           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1160           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1161           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1162           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
## 1163           &lt;NA&gt;            &lt;NA&gt;                  &lt;NA&gt;   &lt;NA&gt;          NA
##      year_start month_finish year_finish effort_months   country    state
## 1158         NA           NA          NA            NA Argentina Misiones
## 1159         NA           NA          NA            NA Argentina Misiones
## 1160         NA           NA          NA            NA Argentina Misiones
## 1161         NA           NA          NA            NA Argentina Misiones
## 1162         NA           NA          NA            NA Argentina Misiones
## 1163         NA           NA          NA            NA Argentina Misiones
##      state_abbreviation    municipality                                   site
## 1158               AR-N Manuel Belgrano                   Comandante Andresito
## 1159               AR-N         Posadas                                Posadas
## 1160               AR-N      Montecarlo                             Montecarlo
## 1161               AR-N       San Pedro                      Refugio Mocon\xe1
## 1162               AR-N     Caingu\xe1s Balneario Municipal Cu\xf1\xe1 Pir\xfa
## 1163               AR-N        Ober\xe1                Chacra San Juan de Dios
##       latitude longitude coordinate_precision altitude temperature
## 1158 -25.66944 -54.04556                  gms      251       19.94
## 1159 -27.45333 -55.89250                  gms      105       21.30
## 1160 -26.56889 -53.60889                  gms      597       18.35
## 1161 -27.14083 -53.92611                  gms      202       19.92
## 1162 -27.08722 -54.95278                  gms      213       21.04
## 1163 -27.47333 -55.17194                  gms      254       20.67
##      precipitation
## 1158          1780
## 1159          1768
## 1160          1954
## 1161          1850
## 1162          1553
## 1163          1683</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="intro-r.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numero de linhas e colunas</span></span>
<span id="cb205-2"><a href="intro-r.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(aa_locais)</span></code></pre></div>
<pre><code>## [1] 1163</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="intro-r.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(aa_locais)</span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="intro-r.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(aa_locais)</span></code></pre></div>
<pre><code>## [1] 1163   25</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="intro-r.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nome das linhas e colunas</span></span>
<span id="cb211-2"><a href="intro-r.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(aa_locais)</span>
<span id="cb211-3"><a href="intro-r.html#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(aa_locais)</span>
<span id="cb211-4"><a href="intro-r.html#cb211-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-5"><a href="intro-r.html#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="co"># estrutura dos dados</span></span>
<span id="cb211-6"><a href="intro-r.html#cb211-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(aa_locais)</span>
<span id="cb211-7"><a href="intro-r.html#cb211-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-8"><a href="intro-r.html#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo dos dados</span></span>
<span id="cb211-9"><a href="intro-r.html#cb211-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(aa_locais)</span>
<span id="cb211-10"><a href="intro-r.html#cb211-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-11"><a href="intro-r.html#cb211-11" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar nas</span></span>
<span id="cb211-12"><a href="intro-r.html#cb211-12" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(aa_locais))</span>
<span id="cb211-13"><a href="intro-r.html#cb211-13" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">is.na</span>(aa_locais))</span>
<span id="cb211-14"><a href="intro-r.html#cb211-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-15"><a href="intro-r.html#cb211-15" aria-hidden="true" tabindex="-1"></a><span class="co"># remover as linhas com nas</span></span>
<span id="cb211-16"><a href="intro-r.html#cb211-16" aria-hidden="true" tabindex="-1"></a>aa_locais_na <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(aa_locais)</span></code></pre></div>
</div>
<div id="exportar-dados" class="section level3" number="5.4.8">
<h3><span class="header-section-number">5.4.8</span> Exportar dados</h3>
<p>Uma vez realizado as opera√ß√µes de manipula√ß√µes ou tendo dados que foram analisados e guardados num objeto no formato de data frame ou matriz, podemos <strong>exportar esses dados</strong> do R para o diret√≥rio que definimos anteriormente.</p>
<p>Para tanto, podemos utilizar fun√ß√µes de <strong>escrita de dados</strong>, como <code>write.csv()</code>, <code>write.table()</code> e <code>openxlsx::write.xlsx()</code>. Dois pontos s√£o fundamentais: 1. o nome do arquivo tem de estar entre aspas e no final dele deve constar a extens√£o que pretende que o arquivo tenha; 2. √© interessante utilizar os argumentos <strong>row.names = FALSE</strong> e <strong>quote</strong>, para que o arquivo escrito n√£o tenha o nome das linhas ou aspas em todas as c√©lulas.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="intro-r.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar dados na extensao .csv</span></span>
<span id="cb212-2"><a href="intro-r.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(aa_locais_na, <span class="st">&quot;ATLANTIC_AMPHIBIAN_sites_na.csv&quot;</span>, </span>
<span id="cb212-3"><a href="intro-r.html#cb212-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span>
<span id="cb212-4"><a href="intro-r.html#cb212-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-5"><a href="intro-r.html#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar dados na extensao .txt</span></span>
<span id="cb212-6"><a href="intro-r.html#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(aa_locais_na, <span class="st">&quot;ATLANTIC_AMPHIBIAN_sites_na.txt&quot;</span>, </span>
<span id="cb212-7"><a href="intro-r.html#cb212-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span>
<span id="cb212-8"><a href="intro-r.html#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="intro-r.html#cb212-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-10"><a href="intro-r.html#cb212-10" aria-hidden="true" tabindex="-1"></a><span class="co"># exportar dados na extensao .xlsx</span></span>
<span id="cb212-11"><a href="intro-r.html#cb212-11" aria-hidden="true" tabindex="-1"></a>openxlsx<span class="sc">::</span><span class="fu">write.xlsx</span>(aa_locais_na, <span class="st">&quot;ATLANTIC_AMPHIBIAN_sites_na.xlsx&quot;</span>, </span>
<span id="cb212-12"><a href="intro-r.html#cb212-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
</div>
<div id="tidyverse" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Tidyverse</h2>
<div id="contextualiza√ß√£o" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Contextualiza√ß√£o</h3>
<p>Como todo idioma, a linguagem R vem passando por transforma√ß√µes nos √∫ltimos anos. Grande parte dessas mudan√ßas est√£o dentro do paradigma da <strong>Ci√™ncia de Dados (<em>Data Science</em>)</strong>, uma nova √°rea de conhecimento que vem se moldando acompanhando o desenvolvimento da sociedade em torno da era digital e da grande quantidade de dados gerados e dispon√≠veis pela internet e computa√ß√£o, de onde adv√©m os pilares das inova√ß√µes tecnol√≥gicas: <em>Big Data</em>, <em>Machine Learning</em>, e <em>Internet of Things</em>.</p>
<p>A grande necessidade de computa√ß√£o parapara desenvolver essa nova abordagem, colocaram o <strong>R e o Python</strong> como as <strong>principais linguagens de programa√ß√£o</strong> frente √† esses novos desafios. Apesar de n√£o serem as √∫nicas utilizadas para esses prop√≥sitos, elas rapidamente se tornaram uma das <strong>melhores escolhas</strong>, dado v√°rios fatores como: serem livres, possuir comunidade ativa, grande e contribuidora, serem linguagens de interpreta√ß√£o (orientadas √† objeto), e relativamente f√°ceis de serem aprendidas.</p>
<p>Essas mudan√ßas e adapta√ß√µes da linguagem R para a Ci√™ncia de Dados come√ßaram √† ser implementadas principalmente devido a um pesquisador, <a href="http://hadley.nz/">Hadley Wickham</a>, que iniciou sua contribui√ß√£o √† comunidade R com o desenvolvimento do j√° consagrado pacote <em>ggplot2</em> (Wickham 2009, Wickham 2016) para a composi√ß√£o de gr√°ficos no R (ver mais no cap√≠tulo XX), baseado na gram√°tica de gr√°ficos (Wilkinson 2005).</p>
<p>Depois disso, Wickham dedicou-se ao desenvolvimento do pensamento de uma nova abordagem dentro do manejo de dados, denominada de <strong>Tidy Data</strong> (Dados organizados) (Wickhan 2014), na qual focou na limpeza de dados. A ideia, relativamente simples, diz que dados est√£o <strong>tidy</strong> quando <strong>vari√°veis est√£o nas colunas</strong>, <strong>observa√ß√µes est√£o nas linhas</strong> e <strong>valores est√£o nas c√©lulas</strong>, sendo que para esse √∫ltimo, n√£o deve haver mais de um valor por c√©lula (Figura <a href="intro-r.html#fig:fig-r-dados-tidy">5.5</a>).</p>
<p>√Ä partir dessas ideias, o <a href="https://www.tidyverse.org/"><em>tidyverse</em></a> foi operacionalizado no R como uma cole√ß√£o de pacotes R que atuam no <strong>workflow comum da ci√™ncia de dados</strong>: importa√ß√£o, manipula√ß√£o, explora√ß√£o, visualiza√ß√£o, an√°lise e comunica√ß√£o de dados e an√°lises (Wickhan et al.¬†2019) (Figura <a href="intro-r.html#fig:fig-r-tidyverse">5.4</a>). O principal objetivo do <strong>Tidyverse</strong> √© aproximar a linguagem para melhorar a intera√ß√£o entre ser humano e computador sobre dados, de modo que os pacotes compartilham uma filosofia de design de alto n√≠vel e gram√°tica, al√©m da estrutura de dados de baixo n√≠vel (Wickhan et al.¬†2019).</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-tidyverse"></span>
<img src="img/cap04_tidyverse.png" alt="Modelo das ferramentas necess√°rias em um projeto t√≠pico de ci√™ncia de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto √† essas ferramentas est√° a programa√ß√£o. Adaptado de: Wickhan &amp; Grolemund (2017)." width="90%" />
<p class="caption">
Figura 5.4: Modelo das ferramentas necess√°rias em um projeto t√≠pico de ci√™ncia de dados: importar, organizar, entender (transformar, visualizar, modelar) e comunicar, envolto √† essas ferramentas est√° a programa√ß√£o. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>As principais leituras sobre o tema no R s√£o os artigos Wickham (2014), Wickham et al.¬†(2019), o livro Wickhan &amp; Grolemund (2017), dispon√≠vel on-line neste <a href="https://r4ds.had.co.nz/">link</a>, al√©m do <a href="https://www.tidyverse.org/">site</a> que possui muito mais informa√ß√µes.</p>
</div>
<div id="tidyverse-1" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> <em>tidyverse</em></h3>
<p>Uma vez instalado e carregado, o pacote tidyverse <strong>disponibiliza um conjunto de ferramentas</strong> atrav√©s de v√°rios pacotes. Esses pacotes <strong>compartilham</strong> uma filosofia de design, gram√°tica e estruturas de dados. Podemos entender o <em>tidyverse</em> como um ‚Äúdialeto novo‚Äù para a linguagem R, onde <strong>tidy</strong> quer dizer organizado, arrumado, ordenado, e <strong>verse</strong> √© universo.</p>
<ul>
<li><a href="https://readr.tidyverse.org/"><em>readr</em></a>: importa dados tabulares (.csv e .txt)</li>
<li><a href="https://tibble.tidyverse.org/"><em>tibble</em></a>: implementou o ‚Äútibble,‚Äù com melhorias na classe <code>dataframe</code></li>
<li><a href="https://tidyr.tidyverse.org/"><em>tidyr</em></a>: facilita a transforma√ß√£o de dados para <em>tidy</em></li>
<li><a href="https://dplyr.tidyverse.org/"><em>dplyr</em></a>: facilita a manipula√ß√£o de dados</li>
<li><a href="https://github.com/tidyverse/stringr"><em>stringr</em></a>: facilita a manipula√ß√£o de caracteres</li>
<li><a href="https://github.com/hadley/forcats"><em>forcats</em></a>: facilita a manipula√ß√£o de fatores</li>
<li><a href="https://ggplot2.tidyverse.org/"><em>ggplot2</em></a>: visualiza√ß√£o de dados</li>
<li><a href="https://purrr.tidyverse.org/"><em>purrr</em></a>: programa√ß√£o funcional</li>
</ul>
<p>Al√©m desses principais, fazemos a men√ß√£o de <strong>outros pacotes que est√£o dentro dessa aborgagem</strong>, e que trataremos ainda neste cap√≠tulo, em outro momento do livro, ou que voc√™ leitor deve se familiarizar.</p>
<ul>
<li><a href="https://readxl.tidyverse.org/"><em>readxl</em></a> e <a href="https://cran.r-project.org/package=writexl"><em>writexl</em></a>: importa e exporta dados tabulares (.xlsx)</li>
<li><a href="https://github.com/rstats-db/DBI"><em>DBI</em></a>: interface de banco de dados R</li>
<li><a href="https://github.com/tidyverse/haven"><em>haven</em></a>: importa e exporta dados do SPSS, Stata e SAS</li>
<li><a href="https://github.com/r-lib/httr"><em>httr</em></a>: ferramentas para trabalhar com URLs e HTTP</li>
<li><a href="https://github.com/tidyverse/rvest"><em>rvest</em></a>: coletar facilmente (raspe) p√°ginas da web</li>
<li><a href="https://github.com/r-lib/xml2"><em>xml2</em></a>: trabalhar com arquivos XML</li>
<li><a href="https://github.com/jeroen/jsonlite"><em>jsonlite</em></a>: um analisador e gerador JSON simples e robusto para R</li>
<li><a href="https://github.com/rstats-db/hms"><em>hms</em></a>: hora do dia</li>
<li><a href="https://github.com/tidyverse/lubridate"><em>lubridate</em></a>: facilita o tratamento de datas</li>
<li><a href="https://magrittr.tidyverse.org/"><em>magrittr</em></a>: prov√™ os operadores pipe (<code>%&gt;%</code>, <code>%$%</code>, <code>%&lt;&gt;%</code>)</li>
<li><a href="https://github.com/tidyverse/glue"><em>glue</em></a>: facilita combinar dados e caracteres</li>
<li><a href="https://rmarkdown.rstudio.com/"><em>rmarkdown</em></a>: cria documentos de an√°lise din√¢mica que combinam c√≥digo, sa√≠da renderizada (como figuras) e texto</li>
<li><a href="https://yihui.org/knitr/"><em>knitr</em></a>: projetado para ser um mecanismo transparente para gera√ß√£o de relat√≥rios din√¢micos com R</li>
<li><a href="https://shiny.rstudio.com/"><em>shiny</em></a>: framework de aplicativo Web para R</li>
<li><a href="https://rmarkdown.rstudio.com/flexdashboard/"><em>flexdashboard</em></a>: pain√©is interativos para R</li>
<li><a href="https://here.r-lib.org/"><em>here</em></a>: facilita a defini√ß√£o de diret√≥rios</li>
<li><a href="https://usethis.r-lib.org/"><em>usethis</em></a>: automatiza tarefas durante a configura√ß√£o e desenvolvimento de projetos (Git, ‚ÄòGitHub‚Äô e Projetos RStudio)</li>
<li><a href="https://rdatatable.gitlab.io/data.table/"><em>data.table</em></a>: pacote que fornece uma vers√£o de alto desempenho do <code>data.frame</code> (importar, manipular e expotar)</li>
<li><a href="https://rstudio.github.io/reticulate/"><em>reticulate</em></a>: pacote que fornece ferramentas para integrar Python e R</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: interface R para Apache Spark</li>
<li><a href="https://github.com/tidymodels/broom"><em>broom</em></a>: converte objetos estat√≠sticos em tibbles organizados</li>
<li><a href="https://github.com/tidyverse/modelr"><em>modelr</em></a>: fun√ß√µes de modelagem que funcionam com o pipe</li>
<li><a href="https://www.tidymodels.org/"><em>tidymodels</em></a>: cole√ß√£o de pacotes para modelagem e aprendizado de m√°quina usando os princ√≠pios do tidyverse</li>
</ul>
<p>Para instalar os pacotes do <em>tidyverse</em>, rode o comando abaixo:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="intro-r.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote tidyverse</span></span>
<span id="cb213-2"><a href="intro-r.html#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Quando carregamos o pacote <em>tidyverse</em>, notamos uma mensagem indicando quais pacotes foram carregados, suas repectivas vers√µes e os conflitos com outros pacotes.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="intro-r.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote tidyverse</span></span>
<span id="cb214-2"><a href="intro-r.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ‚îÄ‚îÄ Attaching packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 1.3.0 ‚îÄ‚îÄ</code></pre>
<pre><code>## ‚úì ggplot2 3.3.3     ‚úì purrr   0.3.4
## ‚úì tibble  3.1.0     ‚úì dplyr   1.0.5
## ‚úì tidyr   1.1.3     ‚úì stringr 1.4.0
## ‚úì readr   1.4.0     ‚úì forcats 0.5.1</code></pre>
<pre><code>## ‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Podemos ainda <strong>listar todos os pacotes</strong> do <strong>tidyverse</strong> com a fun√ß√£o <code>tidyverse::tidyverse_packages()</code>.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="intro-r.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar todos os pacotes no tidyverse </span></span>
<span id="cb218-2"><a href="intro-r.html#cb218-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_packages</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;broom&quot;      &quot;cli&quot;        &quot;crayon&quot;     &quot;dbplyr&quot;     &quot;dplyr&quot;     
##  [6] &quot;forcats&quot;    &quot;ggplot2&quot;    &quot;haven&quot;      &quot;hms&quot;        &quot;httr&quot;      
## [11] &quot;jsonlite&quot;   &quot;lubridate&quot;  &quot;magrittr&quot;   &quot;modelr&quot;     &quot;pillar&quot;    
## [16] &quot;purrr&quot;      &quot;readr&quot;      &quot;readxl&quot;     &quot;reprex&quot;     &quot;rlang&quot;     
## [21] &quot;rstudioapi&quot; &quot;rvest&quot;      &quot;stringr&quot;    &quot;tibble&quot;     &quot;tidyr&quot;     
## [26] &quot;xml2&quot;       &quot;tidyverse&quot;</code></pre>
<p>Tamb√©m podemos <strong>verificar os pacotes para serem atualizados</strong> com a fun√ß√£o <code>tidyverse::tidyverse_update()</code>.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="intro-r.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listar e atualizar os pacotes no tidyverse </span></span>
<span id="cb220-2"><a href="intro-r.html#cb220-2" aria-hidden="true" tabindex="-1"></a>tidyverse<span class="sc">::</span><span class="fu">tidyverse_update</span>()</span></code></pre></div>
<pre><code>## All tidyverse packages up-to-date</code></pre>
<p>Todas as fun√ß√µes dos pacotes tidyverse us√£o <strong>fonte min√∫scula</strong> e <strong>usam <code>_</code> (<em>underscore</em>)</strong> para separar os nomes internos das fun√ß√µes, seguindo a mesma sintaxe do Python (‚ÄúSnake Case‚Äù). Neste sentido de padroniza√ß√£o, √© importante destacar ainda que existe um guia pr√≥prio para que os scripts sigam a recomenda√ß√£o de padroniza√ß√£o, o <a href="https://style.tidyverse.org/">The tidyverse style guide</a>, criado pelo Hadley Wickham. Para os desenvolvedores, existe o <a href="https://design.tidyverse.org/">Tidyverse design guide</a> criado pelo <em>Tidyverse team</em>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="intro-r.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes no formato snake_case</span></span>
<span id="cb222-2"><a href="intro-r.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>()</span>
<span id="cb222-3"><a href="intro-r.html#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_xlsx</span>()</span>
<span id="cb222-4"><a href="intro-r.html#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>()</span>
<span id="cb222-5"><a href="intro-r.html#cb222-5" aria-hidden="true" tabindex="-1"></a><span class="fu">left_join</span>()</span>
<span id="cb222-6"><a href="intro-r.html#cb222-6" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>()</span></code></pre></div>
<p>Por fim, para evitar poss√≠veis <strong>conflitos de fun√ß√µes com o mesmo nome entre pacotes</strong>, recomendamos fortemente o h√°bito de usar as fun√ß√µes seguido do operador <code>::</code>. Assim, garante-se que a <strong>fun√ß√£o utilizada √© referente ao pacote daquela fun√ß√£o</strong>. Segue um exemplo com as fun√ß√µes apresentadas anteriormente.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="intro-r.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># funcoes seguidas de seus respectivos pacotes</span></span>
<span id="cb223-2"><a href="intro-r.html#cb223-2" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">read_csv</span>()</span>
<span id="cb223-3"><a href="intro-r.html#cb223-3" aria-hidden="true" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_xlsx</span>()</span>
<span id="cb223-4"><a href="intro-r.html#cb223-4" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb223-5"><a href="intro-r.html#cb223-5" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">left_join</span>()</span>
<span id="cb223-6"><a href="intro-r.html#cb223-6" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">group_by</span>()</span></code></pre></div>
<p>Seguindo essas ideias de organiza√ß√£o de dados, outro conjunto de pacotes foi desenvolvido, chamado de <a href="https://www.tidymodels.org/"><em>tidymodels</em></a> que atuam no <strong>workflow da an√°lise de dados</strong> em ci√™ncia de dados: separa√ß√£o e reamostragem, pre-processamento, ajuste de modelos e m√©tricas de performace de ajustes. Por raz√µes de espa√ßo e especificidade, n√£o entraremos em detalhes dessa abordagem.</p>
<p>Seguindo o workflow da Figura <a href="intro-r.html#fig:fig-r-tidyverse">5.4</a>, iremos ver nos itens das pr√≥ximas se√ß√µes como esses passos s√£o realizados com fun√ß√µes de cada pacote.</p>
</div>
<div id="here" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> here</h3>
<p>Dentro do <strong>workflow do tidyverse</strong>, devemos sempre trabalhar com <strong>Projetos do RStudio</strong>, um tema que focamos com mais detalhes na se√ß√£o XX. Junto com o projeto, tamb√©m podemos fazer uso do pacote <em>here</em>. Ele permite <strong>construir caminhos</strong> para os arquivos do projeto de forma mais simples e com maior reprodutibilidade.</p>
<p>Esse pacote cobre o ponto que discutimos na se√ß√£o XX, dado que muitas vezes <strong>mudar o diret√≥rio</strong> com a fun√ß√£o <code>setwd()</code> tende a ser <strong>demorado</strong>, principalmente quando se trata de um <strong>script em que v√°rias pessoas est√£o trabalhando</strong> em diferentes computadores e sistemas operacionais. Al√©m disso, ele elimina a quest√£o da <strong>fragilidade</strong> dos scripts, pois geralmente um script est√° com os diret√≥rios conectados exatamente a um lugar e a um momento. Por fim, ele tamb√©m <strong>simplifica o trabalho com subdiret√≥rios</strong>, facilitando importar ou exportar arquivos de ou para subpastas.</p>
<p>Seu uso √© relativamente simples: uma vez criado e aberto o RStudio pelo <strong>Projeto do RStudio</strong>, o diret√≥rio automaticamente √© definido para o diret√≥rio do projeto. Depois disso, podemos usar a fun√ß√£o <code>here::here()</code> para definir os subdiret√≥rios onde est√£o os dados. O exemplo da aplica√ß√£o fica para a se√ß√£o seguinte, quando iremos de fato importar um arquivo para o R. Logo abaixo, mostramos como instalar e carregar o pacote <em>here</em>.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="intro-r.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb224-2"><a href="intro-r.html#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;here&quot;</span>)</span>
<span id="cb224-3"><a href="intro-r.html#cb224-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-4"><a href="intro-r.html#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb224-5"><a href="intro-r.html#cb224-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
</div>
<div id="readr-readxl-e-writexl" class="section level3" number="5.5.4">
<h3><span class="header-section-number">5.5.4</span> readr, readxl e writexl</h3>
<p>Dado que possu√≠mos um conjuntos de dados e que geralmente esse conjunto de dados estar√° no formato tabular com umas das extens√µes: .csv, .txt ou .xlsx, iremos usar o pacote <em>readr</em> ou <em>readxl</em> para importar esses dados para o R.</p>
<p>Esses pacotes <strong>leem e escrevem grandes arquivos de forma mais r√°pida</strong>, al√©m de fornecem <strong>medidores de progresso</strong> de importa√ß√£o e exporta√ß√£o, e imprimir a <strong>informa√ß√£o dos modos das colunas</strong> quando faz a importa√ß√£o. Outro ponto bastante positivo, √© que tamb√©m <strong>classificam automaticamente</strong> o modo dos dados de cada coluna, i.e., se uma coluna possui dados num√©ricos ou apenas texto, essa informa√ß√£o ser√° considerada para classificar a coluna toda. A <strong>classe do objeto</strong> atribu√≠do quando lido por esses pacotes √© automaticamente um ‚Äútibble,‚Äù que veremos melhor na se√ß√£o seguinte.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://readr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Usamos as fun√ß√µes <code>readr::read_csv()</code> e <code>readr::write_csv()</code> para importar e exportar arquivos .csv do R, respectivamente. Para dados com a extens√£o .txt, podemos utilizar as fun√ß√µes <code>readr::read_tsv()</code> ou ainda <code>readr::read_delim()</code>. Para arquivos tabulares com a extens√£o .xlsx, temos de instalar dois pacotes adicionais: <em>readxl</em> e <em>writexl</em>, dos quais usaremos as fun√ß√µes <code>readxl::read_excel()</code>, <code>readxl::read_xlsx()</code> ou <code>readxl::read_xls()</code> para importar dados, atentado para o data de podermos indicar a aba com os dados com o argumento <strong>sheet</strong>, e <code>writexl::write_xlsx()</code> para exportar.</p>
<p>Se o arquivo .csv foi criado com separador de decimais sendo <code>.</code> e separador de colunas sendo <code>,</code>, usamos as fun√ß√µes normalmente. Caso tivesse sido criado com separador de decimais sendo <code>,</code> e separador de colunas sendo <code>;</code>, usar√≠amos as fun√ß√µes dessa forma: <code>readr::read_csv2()</code>.</p>
<p>Para exemplificar como importar dados no <strong>formato tidyverse</strong>, vamos importar novamente os dados de <strong>comunidades de anf√≠bios da Mata Atl√¢ntica</strong> (Atlantic Amphibians, Vancine et al.¬†2018), que fizemos o download na se√ß√£o XX. Estamos usando a fun√ß√£o <code>readr::read_csv()</code>, indicando os diret√≥rios com a fun√ß√£o <code>here::here()</code>, e a classe do arquivo √© ‚Äútibble.‚Äù</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="intro-r.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importar lugares</span></span>
<span id="cb225-2"><a href="intro-r.html#cb225-2" aria-hidden="true" tabindex="-1"></a>aa_locais <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb225-3"><a href="intro-r.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;dados&quot;</span>, <span class="st">&quot;tabelas&quot;</span>, <span class="st">&quot;ATLANTIC_AMPHIBIANS_sites.csv&quot;</span>)</span>
<span id="cb225-4"><a href="intro-r.html#cb225-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## 
## ‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
## cols(
##   .default = col_character(),
##   reference_number = col_double(),
##   species_number = col_double(),
##   month_start = col_double(),
##   year_start = col_double(),
##   month_finish = col_double(),
##   year_finish = col_double(),
##   effort_months = col_double(),
##   latitude = col_double(),
##   longitude = col_double(),
##   altitude = col_double(),
##   temperature = col_double(),
##   precipitation = col_double()
## )
## ‚Ñπ Use `spec()` for the full column specifications.</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/data-import.html">11 Data import</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tibble" class="section level3" number="5.5.5">
<h3><span class="header-section-number">5.5.5</span> tibble</h3>
<p>O <strong>tibble</strong> (<code>tbl_sf</code>) √© uma <strong>vers√£o aprimorada</strong> do data frame (<code>data.frame</code>). Ele √© a <strong>classe aconselhada</strong> para que as fun√ß√µes do tidyverse funcionem melhor sobre conjuntos de dados tabulares importados para o R.</p>
<p>Geralmente, quando utilizamos <strong>fun√ß√µes tidyverse para importar dados para o R</strong>, √© essa classe que esses dados adquirem depois de importados. Al√©m da importa√ß√£o de dados, podemos <strong>criar</strong> um tibble no R usando a fun√ß√£o <code>tibble::tibble()</code>, semelhante ao uso da fun√ß√£o <code>data.frame()</code>. Podemos ainda <strong>converter</strong> um <code>data.frame</code> para um <code>tibble</code> usando a fun√ß√£o <code>tibble::as_tibble()</code>. Entretanto, em alguns momentos precisaremos da classe <code>data.frame</code> para algumas fun√ß√µes espec√≠ficas, e podemos <strong>converter</strong> um <code>tibble</code> para <code>data.frame</code> usa-se a fun√ß√£o <code>tibble::as_data_frame()</code>.</p>
<p>Existem <strong>duas diferen√ßas principais</strong> no uso do <code>tibble</code> e do <code>data.frame</code>: impress√£o e subconjunto. Objetos da classe <code>tibbles</code> possuem um m√©todo de impress√£o que mostra a <strong>contagem do n√∫mero de linhas e colunas</strong>, e apenas as <strong>primeiras 10 linhas</strong> e <strong>todas as colunas</strong> que cabem na tela no console, al√©m dos <strong>modos ou tipos das colunas</strong>. Dessa forma, cada coluna ou vari√°vel, pode ser do modo numbers (<code>int</code> ou <code>dbl</code>), character (<code>chr</code>), logical (<code>lgl</code>), factor (<code>fctr</code>), date + time (<code>dttm</code>) date e (<code>date</code>), al√©m de outras <a href="https://tibble.tidyverse.org/articles/types.html">in√∫meras possibilidades</a>.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://tibble.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="intro-r.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - impressao</span></span>
<span id="cb227-2"><a href="intro-r.html#cb227-2" aria-hidden="true" tabindex="-1"></a>aa_locais</span></code></pre></div>
<pre><code>## # A tibble: 1,163 x 25
##    id      reference_number species_number record sampled_habitat active_methods
##    &lt;chr&gt;              &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;         
##  1 amp1001             1001             19 ab     fo,ll           as            
##  2 amp1002             1002             16 co     fo,la,ll        as            
##  3 amp1003             1002             14 co     fo,la,ll        as            
##  4 amp1004             1002             13 co     fo,la,ll        as            
##  5 amp1005             1003             30 co     fo,ll,br        as            
##  6 amp1006             1004             42 co     tp,pp,la,ll,is  &lt;NA&gt;          
##  7 amp1007             1005             23 co     sp              as            
##  8 amp1008             1005             19 co     sp,la,sw        as,sb,tr      
##  9 amp1009             1005             13 ab     fo              &lt;NA&gt;          
## 10 amp1010             1006              1 ab     fo              &lt;NA&gt;          
## # ‚Ä¶ with 1,153 more rows, and 19 more variables: passive_methods &lt;chr&gt;,
## #   complementary_methods &lt;chr&gt;, period &lt;chr&gt;, month_start &lt;dbl&gt;,
## #   year_start &lt;dbl&gt;, month_finish &lt;dbl&gt;, year_finish &lt;dbl&gt;,
## #   effort_months &lt;dbl&gt;, country &lt;chr&gt;, state &lt;chr&gt;, state_abbreviation &lt;chr&gt;,
## #   municipality &lt;chr&gt;, site &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,
## #   coordinate_precision &lt;chr&gt;, altitude &lt;dbl&gt;, temperature &lt;dbl&gt;,
## #   precipitation &lt;dbl&gt;</code></pre>
<p>Para o subconjunto, como vimos anteriormente, para <strong>selecionar colunas e linhas</strong> de objetos bidimensionais podemos utilizar o operador <code>[]</code> ou <code>[[]]</code> associado com n√∫meros separados por v√≠rgulas ou o nome da coluna entre aspas, e o operador <code>$</code> para extrair pelo nome da coluna. Comparando um <code>data.frame</code> a um <code>tibbles</code>, esses √∫ltimos s√£o mais r√≠gidos: eles nunca fazem <strong>correspond√™ncia parcial</strong> e ir√£o <strong>gerar um aviso</strong> se a coluna que voc√™ est√° tentando acessar n√£o existir.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="intro-r.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tibble - subconjunto</span></span>
<span id="cb229-2"><a href="intro-r.html#cb229-2" aria-hidden="true" tabindex="-1"></a>aa_locais<span class="sc">$</span>ref</span></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `ref`.</code></pre>
<pre><code>## NULL</code></pre>
<p>Por fim, podemos <strong>‚Äúespiar‚Äù os dados</strong> utilizando a fun√ß√£o <code>tibble::glimpse()</code> para ter uma no√ß√£o geral de n√∫mero de linhas, colunas, e conte√∫do de todas as colunas. Essa √© fun√ß√£o tidyverse da fun√ß√£o R Base <code>str()</code>.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="intro-r.html#cb232-1" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(aa_locais[, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code></pre></div>
<pre><code>## Rows: 1,163
## Columns: 10
## $ id                    &lt;chr&gt; &quot;amp1001&quot;, &quot;amp1002&quot;, &quot;amp1003&quot;, &quot;amp1004&quot;, &quot;amp‚Ä¶
## $ reference_number      &lt;dbl&gt; 1001, 1002, 1002, 1002, 1003, 1004, 1005, 1005, ‚Ä¶
## $ species_number        &lt;dbl&gt; 19, 16, 14, 13, 30, 42, 23, 19, 13, 1, 1, 2, 4, ‚Ä¶
## $ record                &lt;chr&gt; &quot;ab&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, &quot;co&quot;, ‚Ä¶
## $ sampled_habitat       &lt;chr&gt; &quot;fo,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo,la,ll&quot;, &quot;fo‚Ä¶
## $ active_methods        &lt;chr&gt; &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, &quot;as&quot;, NA, &quot;as&quot;, &quot;as,sb,t‚Ä¶
## $ passive_methods       &lt;chr&gt; &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, &quot;pt&quot;, NA, NA, NA, NA, &quot;pt&quot;, &quot;p‚Ä¶
## $ complementary_methods &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, ‚Ä¶
## $ period                &lt;chr&gt; &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo,da,tw,ni&quot;, &quot;mo‚Ä¶
## $ month_start           &lt;dbl&gt; 9, 12, 12, 12, 7, NA, 4, 4, 4, 5, 5, 5, 5, 5, 5,‚Ä¶</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/tibbles.html">10 Tibbles</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="magrittr-pipe--" class="section level3" number="5.5.6">
<h3><span class="header-section-number">5.5.6</span> magrittr (pipe - %&gt;%)</h3>
<p>O operador pipe <code>%&gt;%</code> permite o <strong>encadeamento de v√°rias fun√ß√µes</strong>, eliminando a necessidade de criar objetos para armazenar resultados intermedi√°rios. Dessa forma, pipes s√£o uma <strong>ferramenta poderosa</strong> para expressar uma <strong>sequ√™ncia de m√∫ltiplas opera√ß√µes</strong>.</p>
<p>O operador pipe <code>%&gt;%</code> vem do pacote <em>magrittr</em>, entretanto, todos os pacotes no tidyverse automaticamente tornam o pipe dispon√≠vel. Essa fun√ß√£o torna os <strong>c√≥digos em R mais simples</strong>, pois realizamos m√∫ltiplas opera√ß√µes em uma √∫nica linha. Ele <strong>captura o resultado de uma declara√ß√£o</strong> e o <strong>torna a entrada da pr√≥xima declara√ß√£o</strong>, ent√£o podemos pensar como ‚ÄúEM SEGUIDA FA√áA‚Äù ao final de cada linha de c√≥digo.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://maggritr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>A principal vantagem do uso dos pipes √© facilitar o <strong>debuging</strong> (achar erros) nos c√≥digos, porque seu uso torna a <strong>linguagem R mais pr√≥xima do que falamos e pensamos</strong>, uma vez que evita o uso de fun√ß√µes dentro de fun√ß√µes (fun√ß√µes compostas).</p>
<p>Digitar <code>%&gt;%</code> √© um pouco chato, dessa forma, existe um atalho para sua inser√ß√£o nos scripts: <code>ctrl + shift + M</code>.</p>
<p>Para deixar esse t√≥pico <strong>menos estranho</strong> √† quem est√° vendo esse opera√ß√£o pela primeira vez, vamos fazer <strong>alguns exemplos</strong>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="intro-r.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb234-2"><a href="intro-r.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>))</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="intro-r.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb236-2"><a href="intro-r.html#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">%&gt;%</span> </span>
<span id="cb236-3"><a href="intro-r.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb236-4"><a href="intro-r.html#cb236-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>()</span></code></pre></div>
<pre><code>## [1] 71.06335</code></pre>
<p>Essas opera√ß√µes ainda est√£o simples, vamos complic√°-las com v√°rias fun√ß√µes compostas. √â nesses casos que a <strong>propriedade orgazacional</strong> do uso do pipe emerge: podemos facilmente ver o <strong>encadeamento de opera√ß√µes</strong>, onde cada fun√ß√£o √© organizada numa linha.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="intro-r.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb238-2"><a href="intro-r.html#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb238-3"><a href="intro-r.html#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="intro-r.html#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"># base r - sem pipe</span></span>
<span id="cb238-5"><a href="intro-r.html#cb238-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">sqrt</span>(<span class="fu">sort</span>(<span class="fu">log10</span>(<span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>)))))</span>
<span id="cb238-6"><a href="intro-r.html#cb238-6" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="intro-r.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fixar amostragem</span></span>
<span id="cb240-2"><a href="intro-r.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb240-3"><a href="intro-r.html#cb240-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-4"><a href="intro-r.html#cb240-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tidyverse - com pipe</span></span>
<span id="cb240-5"><a href="intro-r.html#cb240-5" aria-hidden="true" tabindex="-1"></a>ve <span class="ot">&lt;-</span> <span class="fu">rpois</span>(<span class="dv">100</span>, <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb240-6"><a href="intro-r.html#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log10</span>() <span class="sc">%&gt;%</span></span>
<span id="cb240-7"><a href="intro-r.html#cb240-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb240-8"><a href="intro-r.html#cb240-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb240-9"><a href="intro-r.html#cb240-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sum</span>()</span>
<span id="cb240-10"><a href="intro-r.html#cb240-10" aria-hidden="true" tabindex="-1"></a>ve</span></code></pre></div>
<pre><code>## [1] 99.91426</code></pre>
<p>O uso do pipe vai se <strong>tornar especialmente √∫til</strong> quando seguirmos para os pacotes das pr√≥ximas duas se√ß√µes: <em>tidyr</em> e <em>dplyr</em>. Com esses pacotes iremos fazer opera√ß√µes em linhas e colunas de nossos dados tabulares, ent√£o podemos <strong>encademar uma s√©rie de fun√ß√µes</strong> para manipula√ß√£o, limpeza e an√°lise de dados.</p>
<p>H√° ainda <strong>tr√™s outras varia√ß√µes do pipe</strong> que podem ser √∫teis em alguns momentos, mas que para funcionar precisam que o pacote <em>magrittr</em> seja carregado:</p>
<ul>
<li><code>%T&gt;%</code>: retorna o lado esquerdo em vez do lado direito</li>
<li><code>%$%</code>: ‚Äúexplode‚Äù as vari√°veis em um quadro de dados</li>
<li><code>%&lt;&gt;%</code>: permite atribui√ß√£o usando pipes</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/pipes.html">18 Pipes</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="tidyr" class="section level3" number="5.5.7">
<h3><span class="header-section-number">5.5.7</span> tidyr</h3>
<p>Os conjuntos de <strong>dados tidy</strong> (organizados) s√£o mais f√°ceis de manipular, modelar e visualizar. Um conjunto de dados est√° arrumado ou n√£o, dependendo de como linhas, colunas e c√©lulas s√£o combinadas com observa√ß√µes, vari√°veis e valores. Nos <strong>dados tidy</strong>, as <strong>vari√°veis est√£o nas colunas</strong>, <strong>observa√ß√µes est√£o nas linhas</strong> e <strong>valores est√£o nas c√©lulas</strong>, sendo que para esse √∫ltimo, n√£o deve haver mais de um valor por c√©lula (Figura <a href="intro-r.html#fig:fig-r-dados-tidy">5.5</a>).</p>
<ol style="list-style-type: decimal">
<li>Cada vari√°vel em uma coluna</li>
<li>Cada observa√ß√£o em uma linha</li>
<li>Cada valor como uma c√©lula</li>
</ol>
<div class="figure" style="text-align: center"><span id="fig:fig-r-dados-tidy"></span>
<img src="img/cap04_tidy.png" alt="As tr√™s regras que tornam um conjunto de dados *tidy*. Adaptado de: Wickhan &amp; Grolemund (2017)." width="100%" />
<p class="caption">
Figura 5.5: As tr√™s regras que tornam um conjunto de dados <em>tidy</em>. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://tidyr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Para realizar <strong>diversas transforma√ß√µes nos dados</strong> a fim de ajust√°-los ao formato <strong>tidy</strong>, existe uma s√©rie de fun√ß√µes, para diversas finalidades: unir e separar, valores faltantes (<code>NA</code>), e pivotar (formato <strong>longo</strong> para <strong>largo</strong>), al√©m de outras <a href="https://tidyr.tidyverse.org/reference/index.html">fun√ß√µes espec√≠ficas</a>.</p>
<ul>
<li><code>unite()</code>: junta dados de m√∫ltiplas colunas em uma coluna</li>
<li><code>separate()</code>: separa caracteres em m√∫lplica colunas</li>
<li><code>separate_rows()</code>: separa caracteres em m√∫lplica colunas e linhas</li>
<li><code>drop_na()</code>: retira linhas com <code>NA</code> do conjunto de dados</li>
<li><code>replace_na()</code>: substitui <code>NA</code> do conjunto de dados</li>
<li><code>pivot_wider()</code>: transformar conjunto de dados <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>)</li>
<li><code>pivot_longer()</code>: transformar conjunto de dados <strong>largo</strong> (<em>wide</em>) para <strong>longo</strong> (<em>long</em>)</li>
</ul>
<p>Para exemplicar o funcionamento dessas fun√ß√µes, usaremos os dados de medidas de pinguins chamados <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados est√£o dispon√≠veis no pacote <em>palmerpenguins</em>.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="intro-r.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar o pacote</span></span>
<span id="cb242-2"><a href="intro-r.html#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;palmerpenguins&quot;</span>)</span></code></pre></div>
<p>Esses dados foram coletados e disponibilizados pela <a href="https://www.uaf.edu/cfos/people/faculty/detail/kristen-gorman.php">Dra. Kristen Gorman</a> e pela <a href="https://pal.lternet.edu/">Palmer Station, Antarctica LTER</a>, membro da Long Term Ecological Research Network.</p>
<p>O pacote <em>palmerpenguins</em> cont√©m dois conjuntos de dados. Um √© chamado de <strong>penguins</strong> e √© uma vers√£o simplificada dos dados brutos. O segundo conjunto de dados √© <strong>penguins_raw</strong> e cont√©m todas as vari√°veis e nomes originais baixados. Ambos os conjuntos de dados cont√™m dados para 344 pinguins, de tr√™s esp√©cies diferentes, coletados em tr√™s ilhas no arquip√©lago de Palmer, na Ant√°rtica.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="intro-r.html#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar o pacote palmerpenguins</span></span>
<span id="cb243-2"><a href="intro-r.html#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb243-3"><a href="intro-r.html#cb243-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-4"><a href="intro-r.html#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ajuda dos dados</span></span>
<span id="cb243-5"><a href="intro-r.html#cb243-5" aria-hidden="true" tabindex="-1"></a>?penguins</span>
<span id="cb243-6"><a href="intro-r.html#cb243-6" aria-hidden="true" tabindex="-1"></a>?penguins_raw</span></code></pre></div>
<p>Primeiramente, vamos observar os dados e utilizar a fun√ß√£o <code>tidyr::glimpse()</code> para ter uma no√ß√£o geral.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="intro-r.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visualizar os dados</span></span>
<span id="cb244-2"><a href="intro-r.html#cb244-2" aria-hidden="true" tabindex="-1"></a>penguins_raw</span></code></pre></div>
<pre><code>## # A tibble: 344 x 17
##    studyName `Sample Number` Species       Region Island Stage   `Individual ID`
##    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;          
##  1 PAL0708                 1 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N1A1           
##  2 PAL0708                 2 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N1A2           
##  3 PAL0708                 3 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N2A1           
##  4 PAL0708                 4 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N2A2           
##  5 PAL0708                 5 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N3A1           
##  6 PAL0708                 6 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N3A2           
##  7 PAL0708                 7 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N4A1           
##  8 PAL0708                 8 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N4A2           
##  9 PAL0708                 9 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N5A1           
## 10 PAL0708                10 Adelie Pengu‚Ä¶ Anvers Torge‚Ä¶ Adult,‚Ä¶ N5A2           
## # ‚Ä¶ with 334 more rows, and 10 more variables: Clutch Completion &lt;chr&gt;,
## #   Date Egg &lt;date&gt;, Culmen Length (mm) &lt;dbl&gt;, Culmen Depth (mm) &lt;dbl&gt;,
## #   Flipper Length (mm) &lt;dbl&gt;, Body Mass (g) &lt;dbl&gt;, Sex &lt;chr&gt;,
## #   Delta 15 N (o/oo) &lt;dbl&gt;, Delta 13 C (o/oo) &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="intro-r.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="co"># espiar os dados</span></span>
<span id="cb246-2"><a href="intro-r.html#cb246-2" aria-hidden="true" tabindex="-1"></a>tibble<span class="sc">::</span><span class="fu">glimpse</span>(penguins_raw)</span></code></pre></div>
<pre><code>## Rows: 344
## Columns: 17
## $ studyName             &lt;chr&gt; &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL0708&quot;, &quot;PAL‚Ä¶
## $ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1‚Ä¶
## $ Species               &lt;chr&gt; &quot;Adelie Penguin (Pygoscelis adeliae)&quot;, &quot;Adelie P‚Ä¶
## $ Region                &lt;chr&gt; &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;, &quot;Anvers&quot;‚Ä¶
## $ Island                &lt;chr&gt; &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgersen&quot;, &quot;Torgerse‚Ä¶
## $ Stage                 &lt;chr&gt; &quot;Adult, 1 Egg Stage&quot;, &quot;Adult, 1 Egg Stage&quot;, &quot;Adu‚Ä¶
## $ `Individual ID`       &lt;chr&gt; &quot;N1A1&quot;, &quot;N1A2&quot;, &quot;N2A1&quot;, &quot;N2A2&quot;, &quot;N3A1&quot;, &quot;N3A2&quot;, ‚Ä¶
## $ `Clutch Completion`   &lt;chr&gt; &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;Yes&quot;, &quot;No&quot;, ‚Ä¶
## $ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16,‚Ä¶
## $ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34‚Ä¶
## $ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18‚Ä¶
## $ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,‚Ä¶
## $ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34‚Ä¶
## $ Sex                   &lt;chr&gt; &quot;MALE&quot;, &quot;FEMALE&quot;, &quot;FEMALE&quot;, NA, &quot;FEMALE&quot;, &quot;MALE&quot;‚Ä¶
## $ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18‚Ä¶
## $ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.298‚Ä¶
## $ Comments              &lt;chr&gt; &quot;Not enough blood for isotopes.&quot;, NA, NA, &quot;Adult‚Ä¶</code></pre>
<p>Primeiramente, vamos exemplificar como <strong>juntar e serparar colunas</strong>. Vamos utilizar a fun√ß√£o <code>tidyr::unite()</code> para unir as colunas ‚ÄúRegion‚Äù e ‚ÄúIsland.‚Äù H√° diversos par√¢metros para alterar como a fun√ß√µes funciona, entretanto, √© importante destacar tr≈ù deles: <strong>col</strong> nome da coluna que vai receber as colunas unidas, <strong>sep</strong> indicando o caracter separador das colunas unidas, e <strong>remove</strong> para uma resposta l√≥gica se as colunas unidas s√£o removidas ou n√£o. Vamos unir as colunas ‚ÄúRegion‚Äù e ‚ÄúIsland‚Äù na nova coluna ‚Äúregion_island,‚Äù</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="intro-r.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unir colunas</span></span>
<span id="cb248-2"><a href="intro-r.html#cb248-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_unir <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">unite</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb248-3"><a href="intro-r.html#cb248-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">col =</span> <span class="st">&quot;region_island&quot;</span>,</span>
<span id="cb248-4"><a href="intro-r.html#cb248-4" aria-hidden="true" tabindex="-1"></a>                                  Region<span class="sc">:</span>Island, </span>
<span id="cb248-5"><a href="intro-r.html#cb248-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb248-6"><a href="intro-r.html#cb248-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>De forma contr√°ria podemos utilizar as fun√ß√µes <code>tidyr::separate()</code> e <code>tidyr::separate_rows()</code> para separar elementos de uma coluna em mais colunas. Respectivamente, a primeira fun√ß√£o separa uma colunas em novas colunas conforme a separa√ß√£o e a segunda fun√ß√£o separa uma coluna, distribuindo os elementos tamb√©m nas linhas. Novamente, h√° diversos par√¢metros, mas destacaremos quatro deles: <strong>col</strong> coluna a ser separada, <strong>into</strong> os nomes das novas colunas, <strong>sep</strong> indicando o caracter separador das colunas, e <strong>remove</strong> para uma resposta l√≥gica se as colunas unidas s√£o removidas ou n√£o. Vamos separar a coluna ‚ÄúStage‚Äù nas colunas ‚Äústage‚Äù e ‚Äúegg_stage.‚Äù</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="intro-r.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb249-2"><a href="intro-r.html#cb249-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate</span>(<span class="at">data =</span> penguins_raw, </span>
<span id="cb249-3"><a href="intro-r.html#cb249-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">col =</span> Stage,</span>
<span id="cb249-4"><a href="intro-r.html#cb249-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;stage&quot;</span>, <span class="st">&quot;egg_stage&quot;</span>), </span>
<span id="cb249-5"><a href="intro-r.html#cb249-5" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>,</span>
<span id="cb249-6"><a href="intro-r.html#cb249-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb249-7"><a href="intro-r.html#cb249-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-8"><a href="intro-r.html#cb249-8" aria-hidden="true" tabindex="-1"></a><span class="co"># separar colunas</span></span>
<span id="cb249-9"><a href="intro-r.html#cb249-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_separar_linhas <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">separate_rows</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb249-10"><a href="intro-r.html#cb249-10" aria-hidden="true" tabindex="-1"></a>                                                    Stage,</span>
<span id="cb249-11"><a href="intro-r.html#cb249-11" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">sep =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<p><strong>Valores faltantes</strong> (<code>NA</code>) √© um tipo especial de elemento que discutimos na se√ß√£o XX, e s√£o relativamente comuns em grandes conjuntos de dados. Em Base R vimos algumas formas de lidar com esse tipo de elemento. No formato <strong>tidyverse</strong> existem v√°rias formas de lidar com eles, mas aqui focaremos nas fun√ß√µes <code>tidyr::drop_na()</code> e <code>tidyr::replace_na()</code>, para retirar linhas e substitui-los, respectivamente.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="intro-r.html#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover todas as linhas com nas</span></span>
<span id="cb250-2"><a href="intro-r.html#cb250-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_todas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw)</span>
<span id="cb250-3"><a href="intro-r.html#cb250-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-4"><a href="intro-r.html#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remover linhas de colunas especificas com nas</span></span>
<span id="cb250-5"><a href="intro-r.html#cb250-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_colunas_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb250-6"><a href="intro-r.html#cb250-6" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">any_of</span>(<span class="st">&quot;Comments&quot;</span>))</span>
<span id="cb250-7"><a href="intro-r.html#cb250-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-8"><a href="intro-r.html#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="co"># substituir nas por outro valor</span></span>
<span id="cb250-9"><a href="intro-r.html#cb250-9" aria-hidden="true" tabindex="-1"></a>penguins_raw_subs_na <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">replace_na</span>(<span class="at">data =</span> penguins_raw,</span>
<span id="cb250-10"><a href="intro-r.html#cb250-10" aria-hidden="true" tabindex="-1"></a>                                          <span class="fu">list</span>(<span class="at">Comments =</span> <span class="st">&quot;Unknown&quot;</span>))</span></code></pre></div>
<p>Por fim, trataremos de <strong>pivotagem ou remodelagem</strong> de dados. Veremos como mudar o formato do nosso conjunto de dados de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>) e vice-versa. Essa √© uma opera√ß√£o semelhante √† ‚ÄúTabela Din√¢mica‚Äù das planilhas eletr√¥nicas. Consiste em usar uma coluna para virar outras colunas, de modo que os valores s√£o preenchidos corretamente, reduzindo assim o n√∫mero de linhas, isso na transforma√ß√£o de <strong>longo</strong> (<em>long</em>) para <strong>largo</strong> (<em>wide</em>). Essa opera√ß√£o √© bastante comum em Ecologia de Comunidades, quando queremos transformar uma lista de esp√©cies em uma matriz de comunidades, com v√°rias esp√©cies nas colunas. Para realizar essa opera√ß√£o, usarmos a fun√ß√£o <code>tidyr::pivot_wider()</code>. Dos diversos par√¢metros que podem compor essa fun√ß√£o, dois deles s√£o fundamentais: <strong>names_from</strong> que indica a coluna de onde os nomes ser√£o usados e <strong>values_from</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="intro-r.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb251-2"><a href="intro-r.html#cb251-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">13</span>)]</span>
<span id="cb251-3"><a href="intro-r.html#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="intro-r.html#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb251-5"><a href="intro-r.html#cb251-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_wider <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb251-6"><a href="intro-r.html#cb251-6" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">names_from =</span> Species, </span>
<span id="cb251-7"><a href="intro-r.html#cb251-7" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">values_from =</span> <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code></pre></div>
<p>De modo oposto, podemos partir de um conjunto de dados <strong>largo</strong> (<em>wide</em>), ou seja, com v√°rias colunas, e queremos que essas colunas preecham uma √∫nica coluna, e que os valores antes espalhados nessas v√°rias colunas sejam adicionados um embaixo do outro. Para essa opera√ß√£o, podemos utilizar a fun√ß√£o <code>tidyr::pivot_longer()</code>. Novamente, dos diversos par√¢metros que podem compor essa fun√ß√£o, tr√äs deles s√£o fundamentais: <strong>cols</strong> indicando as colunas que ser√£o usandas para serem pivotadas, <strong>names_to</strong> que indica a coluna de onde os nomes ser√£o usados e <strong>values_to</strong> a coluna com os valores.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="intro-r.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas</span></span>
<span id="cb252-2"><a href="intro-r.html#cb252-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_sel_col <span class="ot">&lt;-</span> penguins_raw[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">10</span><span class="sc">:</span><span class="dv">13</span>)]</span>
<span id="cb252-3"><a href="intro-r.html#cb252-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-4"><a href="intro-r.html#cb252-4" aria-hidden="true" tabindex="-1"></a><span class="co"># pivotar para largo</span></span>
<span id="cb252-5"><a href="intro-r.html#cb252-5" aria-hidden="true" tabindex="-1"></a>penguins_raw_pivot_longer <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">data =</span> penguins_raw_sel_col, </span>
<span id="cb252-6"><a href="intro-r.html#cb252-6" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">cols =</span> <span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>,</span>
<span id="cb252-7"><a href="intro-r.html#cb252-7" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">names_to =</span> <span class="st">&quot;medidas&quot;</span>, </span>
<span id="cb252-8"><a href="intro-r.html#cb252-8" aria-hidden="true" tabindex="-1"></a>                                                 <span class="at">values_to =</span> <span class="st">&quot;valores&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/tidy-data.html">12 Tidy data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="dplyr" class="section level3" number="5.5.8">
<h3><span class="header-section-number">5.5.8</span> dplyr</h3>
<p>O <em>dplyr</em> √© um pacote que <strong>facilita a manipula√ß√£o de dados</strong>, com uma <strong>gram√°tica de manipula√ß√£o de dados</strong> simples e flex√≠vel (por exemplo, como filtragem, reordenamento, sele√ß√£o, entre outras). Ele foi constru√≠do com o intuito de <strong>obter uma forma mais r√°pida e expressiva</strong> de tratar os dados. O <code>tibble</code> √© a vers√£o de data frame mais conveniente para se usar com pacote <em>dplyr</em>.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://dplyr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Sua <strong>gram√°tica simples</strong> cont√©m <strong>fun√ß√µes verbais</strong> para manipula√ß√£o de dados, baseada em:</p>
<ul>
<li>Verbos: <code>mutate()</code>, <code>select()</code>, <code>filter()</code>, <code>arrange()</code>, <code>summarise()</code>, <code>slice()</code>, <code>rename()</code>, etc.</li>
<li>Replica√ß√£o: <code>across()</code>, <code>if_any()</code>, <code>if_all()</code>, <code>where()</code>, <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, etc.</li>
<li>Agrupamento: <code>group_by()</code> e <code>ungroup()</code></li>
<li>Jun√ß√µes: <code>inner_join()</code>, <code>full_join()</code>, <code>left_join()</code>, <code>right_join()</code>, etc.</li>
<li>Combinando: <code>bind_rows()</code> e <code>bind_cols()</code></li>
<li>Fun√ß√µes resumo: <code>n()</code>, <code>n_distinct()</code>, <code>first()</code>, <code>last()</code>, <code>nth()</code>, etc.</li>
</ul>
<p>Para realizar as <strong>manipula√ß√µes nos dados</strong> existe uma s√©rie de fun√ß√µes, para diversas finalidades: manipula√ß√£o de uma tabela, manipula√ß√£o de duas tabela, replica√ß√£o, agrupamento, fun√ß√µes de vetores, al√©m de muitas outras <a href="https://dplyr.tidyverse.org/reference/index.html">fun√ß√µes espec√≠ficas</a>.</p>
<ul>
<li><code>relocate()</code>: muda a ordem das colunas</li>
<li><code>rename()</code>: muda o nome das colunas</li>
<li><code>select()</code>: seleciona colunas pelo nome ou posi√ß√£o</li>
<li><code>pull()</code>: seleciona uma coluna como vetor</li>
<li><code>mutate()</code>: adiciona novas colunas ou resultados em colunas existentes</li>
<li><code>arrange()</code>: reordena as linhas com base nos valores de colunas</li>
<li><code>filter()</code>: seleciona linhas com base em valores de colunas</li>
<li><code>slice()</code>: seleciona linhas de diferente formas</li>
<li><code>distinct()</code>: remove linhas com valores repetidos com base nos valores de colunas</li>
<li><code>count()</code>: conta observa√ß√µes para um grupo</li>
<li><code>group_by()</code>: agrupa linhas pelos valores das colunas</li>
<li><code>summarise()</code>: resume os dados atrav√©s de fun√ß√µes considerando valores das colunas</li>
<li><code>*_join()</code>: fun√ß√µes que juntam dados de duas tabelas atrav√©s de uma coluna chave</li>
</ul>
<p>Todas as fun√ß√µes seguem a mesma <strong>sintaxe</strong>, de modo que o <code>tibble</code> √© sempre o <strong>primeiro argumento</strong> dessas fun√ß√µes, seguido de um <strong>pipe</strong> e pelo o <strong>nome da fun√ß√£o</strong>. Isso permite o <strong>encademanto</strong> de v√°rias opera√ß√µes consecutivas.</p>
<ol style="list-style-type: decimal">
<li>tibble</li>
<li>operador pipe</li>
<li>nome da fun√ß√£o verbal com os argumentos entre par√™nteses</li>
<li>outras fun√ß√µes verbais‚Ä¶</li>
</ol>
<p>As fun√ß√µes verbais <strong>n√£o precisam modificar</strong> o tibble original, sendo que as opera√ß√µes de manipula√ß√µes podem e devem ser atribu√≠das √† um <strong>novo objeto</strong>.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="intro-r.html#cb253-1" aria-hidden="true" tabindex="-1"></a>tb_dplyr <span class="ot">&lt;-</span> tb <span class="sc">%&gt;%</span> </span>
<span id="cb253-2"><a href="intro-r.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal1</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb253-3"><a href="intro-r.html#cb253-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal2</span>(argumento1, argumento2, ...) <span class="sc">%&gt;%</span> </span>
<span id="cb253-4"><a href="intro-r.html#cb253-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">funcao_verbal3</span>(argumento1, argumento2, ...)</span></code></pre></div>
<p>Al√©m de <code>data.frames</code> e <code>tibbles</code>, a manipula√ß√£o pelo formato <em>dplyr</em> torna o trabalho com outros <strong>formatos de classes</strong> e dados acess√≠vel e eficiente, como <code>data.table</code>, SQL e Apache Spark.</p>
<ul>
<li><a href="https://dtplyr.tidyverse.org/"><em>dtplyr</em></a>: manipular conjuntos de dados <code>data.table</code></li>
<li><a href="https://dbplyr.tidyverse.org/"><em>dbplyr</em></a>: manipular conjuntos de dados SQL</li>
<li><a href="https://spark.rstudio.com/"><em>sparklyr</em></a>: manipular conjuntos de dados no Apache Spark</li>
</ul>
<p>Para nossos exemplos, vamos utilizar os <strong>dados de pinguins</strong> <a href="https://allisonhorst.github.io/palmerpenguins"><strong>palmerpenguins</strong></a>. Esses dados est√£o dispon√≠veis no pacote <em>palmerpenguins</em>. Vamos utilizar principalmente o conjunto de dados <strong>penguins</strong>, que √© uma vers√£o simplificada dos dados brutos <strong>penguins_raw</strong>.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="intro-r.html#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb254-2"><a href="intro-r.html#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos <strong>reordenadar as colunas</strong> com a fun√ß√£o <code>dplyr::relocate()</code>, onde simplesmente listamos as colunas que queremos mudar de posi√ß√£o e para onde elas devem ir. Para esse √∫ltimo passo h√° dois argumentos: <strong>.before</strong> que indica qual a coluna que as colunas realocadas devem se mover antes, e o argumentos <strong>.after</strong> indicando onde devem se mover depois. Ambos podem ser informados com os nomes ou posi√ß√µes dessas colunas com n√∫meros.</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="intro-r.html#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - nome</span></span>
<span id="cb255-2"><a href="intro-r.html#cb255-2" aria-hidden="true" tabindex="-1"></a>penguins_relocate_col <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb255-3"><a href="intro-r.html#cb255-3" aria-hidden="true" tabindex="-1"></a> dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> island)</span>
<span id="cb255-4"><a href="intro-r.html#cb255-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-5"><a href="intro-r.html#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar colunas - posicao</span></span>
<span id="cb255-6"><a href="intro-r.html#cb255-6" aria-hidden="true" tabindex="-1"></a>penguins_relocate_ncol <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb255-7"><a href="intro-r.html#cb255-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">relocate</span>(sex, year, <span class="at">.after =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>Podemos ainda <strong>renomear colunas</strong> facilmente com a fun√ß√£o <code>dplyr::rename()</code>, onde primeiramente informamos o nome que queremos que a coluna tenha, seguido do operador <code>=</code> e a coluna do nosso dado. Tamb√©m podemos utilizar a fun√ß√£o <code>dplyr::rename_with()</code>, que faz a <strong>mudan√ßa do nome em m√∫ltiplas colunas</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="intro-r.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome das colunas</span></span>
<span id="cb256-2"><a href="intro-r.html#cb256-2" aria-hidden="true" tabindex="-1"></a>penguins_rename <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb256-3"><a href="intro-r.html#cb256-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">bill_length =</span> bill_length_mm,</span>
<span id="cb256-4"><a href="intro-r.html#cb256-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">bill_depth =</span> bill_depth_mm,</span>
<span id="cb256-5"><a href="intro-r.html#cb256-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">flipper_length =</span> flipper_length_mm,</span>
<span id="cb256-6"><a href="intro-r.html#cb256-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">body_mass =</span> body_mass_g)</span>
<span id="cb256-7"><a href="intro-r.html#cb256-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-8"><a href="intro-r.html#cb256-8" aria-hidden="true" tabindex="-1"></a><span class="co"># mudar o nome de todas as colunas</span></span>
<span id="cb256-9"><a href="intro-r.html#cb256-9" aria-hidden="true" tabindex="-1"></a>penguins_rename_with <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb256-10"><a href="intro-r.html#cb256-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(toupper)</span></code></pre></div>
<p>Outra opera√ß√£o bastante usual dentro da manipula√ß√£o de dados tabulares √© a <strong>sele√ß√£o de colunas</strong>. Podemos fazer essa opera√ß√£o com a fun√ß√£o <code>dplyr::select()</code>, que seleciona colunas pelo nome ou pela posi√ß√£o. Aqui h√° uma s√©rie de possibilidades de sele√ß√£o de colunas, desde utilizar operadores como <code>:</code> para selecionar intervalos de colunas, <code>!</code> para tomar o complemento, al√©m de fun√ß√µes como <code>dplyr::starts_with()</code>, <code>dplyr::ends_with()</code>, <code>dplyr::contains()</code> para <strong>procurar colunas com um padr√£o de texto</strong>.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="intro-r.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por nomes</span></span>
<span id="cb257-2"><a href="intro-r.html#cb257-2" aria-hidden="true" tabindex="-1"></a>penguins_select <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb257-3"><a href="intro-r.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(bill_length_mm<span class="sc">:</span>body_mass_g)</span>
<span id="cb257-4"><a href="intro-r.html#cb257-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-5"><a href="intro-r.html#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar colunas por padrao</span></span>
<span id="cb257-6"><a href="intro-r.html#cb257-6" aria-hidden="true" tabindex="-1"></a>penguins_select_contains <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb257-7"><a href="intro-r.html#cb257-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;_mm&quot;</span>))</span></code></pre></div>
<p>Quando usamos a fun√ß√£o <code>dplyr::select()</code>, mesmo que para uma linha, o retorno √© sempre um <code>tibble</code>. Caso precisemos que essa <strong>coluna se torne um vetor</strong>, dentro do encadeamento dos <code>pipes</code>, usamos a fun√ß√£o <code>dplyr::pull()</code> que <strong>que extrai uma coluna √∫nica coluna como vetor</strong>.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="intro-r.html#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># coluna como vetor</span></span>
<span id="cb258-2"><a href="intro-r.html#cb258-2" aria-hidden="true" tabindex="-1"></a>penguins_select_pull <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb258-3"><a href="intro-r.html#cb258-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(bill_length_mm)</span></code></pre></div>
<p>Uma das opera√ß√µes mais √∫teis dentre as opera√ß√µes para colunas √© <strong>adicionar ou atualizar os valores</strong> de colunas. Para essa opera√ß√£o, usaremos a fun√ß√£o <code>dplyr::mutate()</code>. Podemos ainda usar os argumentos <strong>.before</strong> e <strong>.after</strong> para indicar onde a nova coluna deve ficar, al√©m do par√¢metro <strong>.keep</strong> com diversas possibilidades de manter colunas depois de usar a fun√ß√£o <code>dplyr::mutate()</code>. Por fim,
√© fundamental destacar o uso das <strong>fun√ß√µes de replica√ß√£o</strong>: <code>dplyr::across()</code>, <code>dplyr::if_any()</code> e <code>dplyr::if_all()</code>, para os quais a fun√ß√£o ir√° <strong>fazer altera√ß√µes em m√∫ltiplas colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="intro-r.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># adicionar colunas</span></span>
<span id="cb259-2"><a href="intro-r.html#cb259-2" aria-hidden="true" tabindex="-1"></a>penguins_mutate <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb259-3"><a href="intro-r.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">body_mass_kg =</span> body_mass_g<span class="sc">/</span><span class="fl">1e3</span>, <span class="at">.before =</span> sex)</span>
<span id="cb259-4"><a href="intro-r.html#cb259-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-5"><a href="intro-r.html#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="co"># modificar varias colunas</span></span>
<span id="cb259-6"><a href="intro-r.html#cb259-6" aria-hidden="true" tabindex="-1"></a>penguins_mutate_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb259-7"><a href="intro-r.html#cb259-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor), as.character))</span></code></pre></div>
<p>Al√©m de opera√ß√µes em colunas, podemos fazer <strong>opera√ß√µes em linhas</strong>. Vamos come√ßar com a <strong>reordena√ß√£o das linhas</strong> com base nos valores das colunas. Para essa opera√ß√£o, usamos a fun√ß√£o <code>dplyr::arrange()</code>. Podemos reordenadar por uma ou mais colunas de forma crescente ou de forma decrescente usando a fun√ß√£o <code>desc()</code> ou o operador <code>-</code>. Da mesma forma que na fun√ß√£o <code>dplyr::mutate()</code>, podemos usar as <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>ordenar as linhas para v√°rias colunas de uma vez</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="intro-r.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - crescente</span></span>
<span id="cb260-2"><a href="intro-r.html#cb260-2" aria-hidden="true" tabindex="-1"></a>penguins_arrange <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-3"><a href="intro-r.html#cb260-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(body_mass_g)</span>
<span id="cb260-4"><a href="intro-r.html#cb260-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-5"><a href="intro-r.html#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb260-6"><a href="intro-r.html#cb260-6" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-7"><a href="intro-r.html#cb260-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">desc</span>(body_mass_g))</span>
<span id="cb260-8"><a href="intro-r.html#cb260-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-9"><a href="intro-r.html#cb260-9" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - decrescente</span></span>
<span id="cb260-10"><a href="intro-r.html#cb260-10" aria-hidden="true" tabindex="-1"></a>penguins_arrange_desc_m <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-11"><a href="intro-r.html#cb260-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="sc">-</span>body_mass_g)</span>
<span id="cb260-12"><a href="intro-r.html#cb260-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-13"><a href="intro-r.html#cb260-13" aria-hidden="true" tabindex="-1"></a><span class="co"># reordenar linhas - multiplas colunas</span></span>
<span id="cb260-14"><a href="intro-r.html#cb260-14" aria-hidden="true" tabindex="-1"></a>penguins_arrange_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb260-15"><a href="intro-r.html#cb260-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span></code></pre></div>
<p>Uma das principais e mais usuais opera√ß√µes que podemos realizar em linhas √© a sele√ß√£o de linhas atrav√©s do <strong>filtro por valores de uma ou mais colunas</strong>, utilizando a fun√ß√£o <code>dplyr::filter()</code>. Para realizar os filtros iremos utilizar grande parte dos operadores relacionais e l√≥gicos que listamos na Tabela <a href="intro-r.html#tab:tab-operadores">5.1</a>, especialmente os l√≥gicos para combina√ß√µes de filtros em mais de uma coluna. Al√©m desses operadores, podemos utilizar a fun√ß√£o <code>is.na()</code> para filtros em elementos faltantes, e as fun√ß√µes <code>dplyr::between()</code> e <code>dplyr::near()</code> para valores filtros entre valores, e para valores pr√≥ximos com certa toler√™ncia, respectivamente. Por fim, podemos usar as <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>filtro das linhas para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="intro-r.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb261-2"><a href="intro-r.html#cb261-2" aria-hidden="true" tabindex="-1"></a>penguins_filter <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-3"><a href="intro-r.html#cb261-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span>)</span>
<span id="cb261-4"><a href="intro-r.html#cb261-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-5"><a href="intro-r.html#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb261-6"><a href="intro-r.html#cb261-6" aria-hidden="true" tabindex="-1"></a>penguins_filter_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-7"><a href="intro-r.html#cb261-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">&quot;Adelie&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb261-8"><a href="intro-r.html#cb261-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-9"><a href="intro-r.html#cb261-9" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas</span></span>
<span id="cb261-10"><a href="intro-r.html#cb261-10" aria-hidden="true" tabindex="-1"></a>penguins_filter_in <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-11"><a href="intro-r.html#cb261-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>),</span>
<span id="cb261-12"><a href="intro-r.html#cb261-12" aria-hidden="true" tabindex="-1"></a>                sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>)</span>
<span id="cb261-13"><a href="intro-r.html#cb261-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-14"><a href="intro-r.html#cb261-14" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - na</span></span>
<span id="cb261-15"><a href="intro-r.html#cb261-15" aria-hidden="true" tabindex="-1"></a>penguins_filter_na <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-16"><a href="intro-r.html#cb261-16" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex) <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb261-17"><a href="intro-r.html#cb261-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-18"><a href="intro-r.html#cb261-18" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas - between</span></span>
<span id="cb261-19"><a href="intro-r.html#cb261-19" aria-hidden="true" tabindex="-1"></a>penguins_filter_between <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-20"><a href="intro-r.html#cb261-20" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="dv">3000</span>, <span class="dv">4000</span>))</span>
<span id="cb261-21"><a href="intro-r.html#cb261-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-22"><a href="intro-r.html#cb261-22" aria-hidden="true" tabindex="-1"></a><span class="co"># filtrar linhas por varias colunas</span></span>
<span id="cb261-23"><a href="intro-r.html#cb261-23" aria-hidden="true" tabindex="-1"></a>penguins_filter_if <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb261-24"><a href="intro-r.html#cb261-24" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">if_all</span>(<span class="fu">where</span>(is.integer), <span class="sc">~</span> . <span class="sc">&gt;</span> <span class="dv">200</span>))</span></code></pre></div>
<p>Al√©m da selec√ß√£o de linhas por filtros, podemos fazer a <strong>sele√ß√£o das linhas por intervalos</strong>, indicando quais <strong>linhas desejamos</strong>, usando a fun√ß√£o <code>dplyr::slice()</code>, e informando o argumento <strong>n</strong> para o n√∫mero da linha ou intervalo das linhas. Essa fun√ß√£o possui varia√ß√µes no sufixo muito interessantes: <code>dplyr::slice_head()</code> e <code>dplyr::slice_tail()</code> seleciona as primeiras e √∫ltimas linhas, <code>dplyr::slice_min()</code> e <code>dplyr::slice_max()</code> seleciona linhas com os maiores e menores valores de uma coluna, e <code>dplyr::slice_sample()</code> seleciona linhas aleatoriamente.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="intro-r.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas</span></span>
<span id="cb262-2"><a href="intro-r.html#cb262-2" aria-hidden="true" tabindex="-1"></a>penguins_slice <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-3"><a href="intro-r.html#cb262-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">300</span><span class="sc">:</span><span class="fu">n</span>()))</span>
<span id="cb262-4"><a href="intro-r.html#cb262-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-5"><a href="intro-r.html#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - head</span></span>
<span id="cb262-6"><a href="intro-r.html#cb262-6" aria-hidden="true" tabindex="-1"></a>penguins_slice_head <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-7"><a href="intro-r.html#cb262-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb262-8"><a href="intro-r.html#cb262-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-9"><a href="intro-r.html#cb262-9" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - max</span></span>
<span id="cb262-10"><a href="intro-r.html#cb262-10" aria-hidden="true" tabindex="-1"></a>penguins_slice_max <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-11"><a href="intro-r.html#cb262-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_max</span>(body_mass_g, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb262-12"><a href="intro-r.html#cb262-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-13"><a href="intro-r.html#cb262-13" aria-hidden="true" tabindex="-1"></a><span class="co"># seleciona linhas - sample</span></span>
<span id="cb262-14"><a href="intro-r.html#cb262-14" aria-hidden="true" tabindex="-1"></a>penguins_slice_sample <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb262-15"><a href="intro-r.html#cb262-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span></code></pre></div>
<p>A √∫ltima opera√ß√£o que apresentaremos aqui para linhas ser√° a <strong>retirada de linhas com valores repetidos com base nos valores de colunas</strong> utilizandos a fun√ß√£o <code>dplyr::distinct()</code>. Essa fun√ß√£o por padr√£o retorna apenas a coluna utilizada para retirar as linhas com valores repetidos, sendo necess√°rio acrescentar o argumento <strong>.keep_all</strong> para retornar todas as colunas. Por fim, podemos usar as <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>retirar linhas com valores repetidos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="intro-r.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos</span></span>
<span id="cb263-2"><a href="intro-r.html#cb263-2" aria-hidden="true" tabindex="-1"></a>penguins_distinct <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb263-3"><a href="intro-r.html#cb263-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g)</span>
<span id="cb263-4"><a href="intro-r.html#cb263-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-5"><a href="intro-r.html#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos - manter as outras colunas</span></span>
<span id="cb263-6"><a href="intro-r.html#cb263-6" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb263-7"><a href="intro-r.html#cb263-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(body_mass_g, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb263-8"><a href="intro-r.html#cb263-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-9"><a href="intro-r.html#cb263-9" aria-hidden="true" tabindex="-1"></a><span class="co"># retirar linhas com valores repetidos para varias colunas</span></span>
<span id="cb263-10"><a href="intro-r.html#cb263-10" aria-hidden="true" tabindex="-1"></a>penguins_distinct_keep_all_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb263-11"><a href="intro-r.html#cb263-11" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.integer)), <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Agora entraremos no assunto de resumo das observa√ß√µes. Podemos fazer <strong>contagens resumos dos nossos dados</strong>, utilizando para isso a fun√ß√£o <code>dplyr::count()</code>. Essa fun√ß√£o ir√° contar valores de uma ou mais colunas, semelhante √† fun√ß√£o Base R <code>table()</code>, mas num contexto <code>tidyverse</code>.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="intro-r.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para um coluna</span></span>
<span id="cb264-2"><a href="intro-r.html#cb264-2" aria-hidden="true" tabindex="-1"></a>penguins_count <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb264-3"><a href="intro-r.html#cb264-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species)</span>
<span id="cb264-4"><a href="intro-r.html#cb264-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-5"><a href="intro-r.html#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="co"># contagens de valores para mais de uma coluna</span></span>
<span id="cb264-6"><a href="intro-r.html#cb264-6" aria-hidden="true" tabindex="-1"></a>penguins_count_two <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb264-7"><a href="intro-r.html#cb264-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species, island)</span></code></pre></div>
<p>Uma grande parte das opera√ß√µes feita nos dados s√£o realizadas em <strong>grupos definidos por valores de colunas ou vari√°veis categ√≥ricas</strong>. A fun√ß√£o <code>dplyr::group_by()</code> transforma um <code>tibble</code> e converte em um <code>tibble</code> agrupado, onde as opera√ß√µes s√£o realizadas ‚Äúpor grupo.‚Äù Essa fun√ß√£o √© utilizada geralmente com a fun√ß√£o <code>dplyr::summarise()</code>, que veremos logo em seguida. O agrupamento n√£o altera a apar√™ncia dos dados (al√©m de informar como est√£o agrupados). A fun√ß√£o <code>dplyr::ungroup()</code> remove o agrupamento. Podemos ainda usar <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>fazer os agrupamentos para mais de uma coluna</strong>, dependendo de resultados booleanos.</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="intro-r.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb265-2"><a href="intro-r.html#cb265-2" aria-hidden="true" tabindex="-1"></a>penguins_group_by <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb265-3"><a href="intro-r.html#cb265-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species)</span>
<span id="cb265-4"><a href="intro-r.html#cb265-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-5"><a href="intro-r.html#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="co"># agrupamento</span></span>
<span id="cb265-6"><a href="intro-r.html#cb265-6" aria-hidden="true" tabindex="-1"></a>penguins_group_by_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb265-7"><a href="intro-r.html#cb265-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.factor)))</span></code></pre></div>
<p>Como dissemos, muitas vezes queremos <strong>resumir nossos dados</strong>, principalmente para ter uma no√ß√£o geral das vari√°veis (colunas) ou mesmo come√ßar a <strong>an√°lise explorat√≥ria resumindo vari√°veis cont√≠nuas por grupos de vari√°veis categ√≥ricas</strong>. Dessa forma, ao utilizar a fun√ß√£o <code>dplyr::summarise()</code> teremos um novo <code>tibble</code> com os dados resumidos, que √© a <strong>agrega√ß√£o ou resumo dos dados atrav√©s de fun√ß√µes</strong>. Da mesma forma que outras fun√ß√µes, podemos usar <strong>fun√ß√µes de replica√ß√£o</strong> para <strong>resumir valores para mais de uma coluna</strong>, dependendo de resultados booleanos. .</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="intro-r.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb266-2"><a href="intro-r.html#cb266-2" aria-hidden="true" tabindex="-1"></a>penguins_summarise <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb266-3"><a href="intro-r.html#cb266-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb266-4"><a href="intro-r.html#cb266-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">body_mass_g_mean =</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb266-5"><a href="intro-r.html#cb266-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">body_mass_g_sd =</span> <span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb266-6"><a href="intro-r.html#cb266-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-7"><a href="intro-r.html#cb266-7" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo</span></span>
<span id="cb266-8"><a href="intro-r.html#cb266-8" aria-hidden="true" tabindex="-1"></a>penguins_summarise_across <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb266-9"><a href="intro-r.html#cb266-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb266-10"><a href="intro-r.html#cb266-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)))</span></code></pre></div>
<p>Muitas vezes teremos de <strong>combinar duas ou mais tabelas de dados</strong>. Podemos utilizar as fun√ß√µes Base R <code>rbind</code> e <code>cbind</code>, como vimos. Entrentanto, pode ser interessante avan√ßar para as fun√ß√µes <code>dplyr::bind_rows()</code> e <code>dplyr::bind_cols()</code> do formato <em>tidyverse</em>. A ideia √© muito semelhante: a primeira fun√ß√£o combina dados por linhas e a segunda por colunas. Entretanto, h√° vantagens no uso dessas fun√ß√µes, como a identifica√ß√£o das linhas pelo argumento <strong>.id</strong> para a primera fun√ß√£o, e a confer√™ncia do nome das colunas pelo argumento <strong>.name_repair</strong> para a segunda fun√ß√£o.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="intro-r.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecionar as linhas para dois tibbles</span></span>
<span id="cb267-2"><a href="intro-r.html#cb267-2" aria-hidden="true" tabindex="-1"></a>penguins_01 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb267-3"><a href="intro-r.html#cb267-3" aria-hidden="true" tabindex="-1"></a>penguins_02 <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">slice</span>(penguins, <span class="dv">51</span><span class="sc">:</span><span class="dv">55</span>)</span>
<span id="cb267-4"><a href="intro-r.html#cb267-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-5"><a href="intro-r.html#cb267-5" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar linhas</span></span>
<span id="cb267-6"><a href="intro-r.html#cb267-6" aria-hidden="true" tabindex="-1"></a>penguins_bind_rows <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(penguins_01, penguins_02, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb267-7"><a href="intro-r.html#cb267-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-8"><a href="intro-r.html#cb267-8" aria-hidden="true" tabindex="-1"></a><span class="co"># combinar colunas</span></span>
<span id="cb267-9"><a href="intro-r.html#cb267-9" aria-hidden="true" tabindex="-1"></a>penguins_bind_cols <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(penguins_01, penguins_02, <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span>)</span></code></pre></div>
<p>Finalmente, veremos o √∫ltimo conjunto de fun√ß√µes do pacote <em>dplyr</em>, a <strong>jun√ß√£o de tabelas</strong>. Nessa opera√ß√£o, fazemos a <strong>combina√ß√£o de pares de conjunto de dados tabulares por uma ou mais colunas chaves</strong>. H√° dois tipos de jun√ß√µes: jun√ß√£o de muta√ß√£o e jun√ß√£o de filtragem. A <strong>jun√ß√£o de muta√ß√£o</strong> primeiro combina as observa√ß√µes por suas chaves e, em seguida, <strong>copia as vari√°veis (colunas) de uma tabela para a outra</strong>. √â fundamental destacar a import√¢ncia da <strong>coluna chave</strong>, que √© indicada pelo argumento <strong>by</strong>. Essa coluna deve conter <strong>elementos que sejam comuns √†s duas tabelas</strong> para que haja a combina√ß√£o dos elementos.</p>
<p>Existem quatro tipos de jun√ß√µes, que s√£o realizadas pelas fun√ß√µes <code>dplyr::inner_join()</code>, <code>dplyr::left_join()</code>, <code>dplyr::full_join()</code> e <code>dplyr::right_join()</code>, e que podem ser representadas na Figura <a href="intro-r.html#fig:fig-r-join">5.6</a>.</p>
<div class="figure" style="text-align: center"><span id="fig:fig-r-join"></span>
<img src="img/cap04_join.png" alt="Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017)." width="80%" />
<p class="caption">
Figura 5.6: Diferentes tipos de joins, representados com um diagram de Venn. Adaptado de: Wickhan &amp; Grolemund (2017).
</p>
</div>
<p>Considerando a nomenclatura de uma tabela de dados sendo como <code>x</code> e <code>y</code>, temos:</p>
<ul>
<li><code>inner_join(x, y)</code>: mant√©m apenas as observa√ß√µes em <code>x</code> e em <code>y</code></li>
<li><code>left_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>x</code></li>
<li><code>right_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>y</code></li>
<li><code>full_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>x</code> e em <code>y</code></li>
</ul>
<p>Aqui, vamos demostrar apenas a fun√ß√£o <code>dplyr::left_join()</code>, trazendo os dados do conjunto de dados do <strong>penguins_raw</strong> para o conjunto de dados do <strong>penguins</strong>.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="intro-r.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add uma coluna chave de ids</span></span>
<span id="cb268-2"><a href="intro-r.html#cb268-2" aria-hidden="true" tabindex="-1"></a>penguin_islands <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb268-3"><a href="intro-r.html#cb268-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">island =</span> <span class="fu">c</span>(<span class="st">&quot;Torgersen&quot;</span>, <span class="st">&quot;Biscoe&quot;</span>, <span class="st">&quot;Dream&quot;</span>, <span class="st">&quot;Alpha&quot;</span>),</span>
<span id="cb268-4"><a href="intro-r.html#cb268-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">longitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.083333</span>, <span class="sc">-</span><span class="fl">63.775636</span>, <span class="sc">-</span><span class="fl">64.233333</span>, <span class="sc">-</span><span class="dv">63</span>),</span>
<span id="cb268-5"><a href="intro-r.html#cb268-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">latitude =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">64.766667</span>, <span class="sc">-</span><span class="fl">64.818569</span>, <span class="sc">-</span><span class="fl">64.733333</span>, <span class="sc">-</span><span class="fl">64.316667</span>)</span>
<span id="cb268-6"><a href="intro-r.html#cb268-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb268-7"><a href="intro-r.html#cb268-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb268-8"><a href="intro-r.html#cb268-8" aria-hidden="true" tabindex="-1"></a><span class="co"># juncao - left</span></span>
<span id="cb268-9"><a href="intro-r.html#cb268-9" aria-hidden="true" tabindex="-1"></a>penguins_left_join <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb268-10"><a href="intro-r.html#cb268-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(penguin_islands, <span class="at">by =</span> <span class="st">&quot;island&quot;</span>)</span></code></pre></div>
<p>J√° a <strong>jun√ß√£o de filtragem</strong> combinam as observa√ß√µes da mesma maneira que as jun√ß√µes de muta√ß√£o, mas <strong>afetam as observa√ß√µes, n√£o as vari√°veis (colunas)</strong>. Existem dois tipos:</p>
<ul>
<li><code>semi_join(x, y)</code>: mant√©m todas as observa√ß√µes em <code>x</code> que t√™m uma correspond√™ncia em <code>y</code></li>
<li><code>anti_join(x, y)</code>: alimina todas as observa√ß√µes em <code>x</code> que t√™m uma correspond√™ncia em <code>y</code></li>
</ul>
<p><em>Semi-joins</em> s√£o √∫teis para <strong>corresponder tabelas de resumo filtradas de volta √†s linhas originais</strong>, removendo as linhas que n√£o estavam antes do join. <em>Anti-joins</em> s√£o √∫teis para <strong>diagnosticar incompatibilidades de jun√ß√£o</strong>, por exemplo, ao verificar os elementos que n√£o combinam entre duas tabelas de dados.</p>
<p>Temos ainda <strong>opera√ß√µes de conjuntos</strong> e <strong>compara√ß√£o de dados</strong>.</p>
<ul>
<li><code>union(x, y)</code>: retorna todas as linhas que aparecem em <code>x</code>, <code>y</code> ou mais dos conjuntos de dados</li>
<li><code>interesect(x, y)</code>: retorna apenas as linhas que aparecem em <code>x</code> e em <code>y</code></li>
<li><code>setdiff(x, y)</code>: retorna as linhas que aparecem <code>x</code>, mas n√£o em <code>y</code></li>
<li><code>setequal(x, y)</code>: retorna se <code>x</code> e <code>y</code> s√£o iguais e quais suas diferen√ßas</li>
</ul>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/relational-data.html">13 Relational data</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="stringr" class="section level3" number="5.5.9">
<h3><span class="header-section-number">5.5.9</span> stringr</h3>
<p>O pacote <em>stringr</em> fornece um conjunto de fun√ß√µes para a <strong>manipula√ß√£o de caracteres ou strings</strong>. O pacote concentra-se nas fun√ß√µes de manipula√ß√£o mais importantes e comumente usadas. Para fun√ß√£o para espec√≠ficas, recomenda-se usar para o pacote <em>stringi</em>, que fornece um conjunto mais abrangente de fun√ß√µes. As fun√ß√µes do <em>stringr</em> podem ser agrupadas em algumas opera√ß√µes para tarefas espec√≠ficas como correspond√™ncia de padr√µes, espa√ßo em branco, mai√∫sculas e min√∫sculas, al√©m de outras fun√ß√µes.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://stringr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Demonstraremos <strong>algumas fun√ß√µes para algumas opera√ß√µes mais comuns</strong>, utilizando um vetor de um elemento, com o string ‚Äúpenguins.‚Äù</p>
<p>Podemos explorar o <strong>comprimento</strong> de strings com a fun√ß√£o <code>stringr::str_length()</code>.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="intro-r.html#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comprimento</span></span>
<span id="cb269-2"><a href="intro-r.html#cb269-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_length</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p><strong>Extrair um string</strong> por sua posi√ß√£o usando a fun√ß√£o <code>stringr::str_sub()</code> ou por um padr√£o com <code>stringr::str_extract()</code>.</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="intro-r.html#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair pela posicao</span></span>
<span id="cb271-2"><a href="intro-r.html#cb271-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sub</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">end =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;pen&quot;</code></pre>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="intro-r.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair por padr√£o</span></span>
<span id="cb273-2"><a href="intro-r.html#cb273-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_extract</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;p&quot;</code></pre>
<p><strong>Substituir strings</strong> por outros strings com <code>stringr::str_replace()</code>.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="intro-r.html#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sustituir</span></span>
<span id="cb275-2"><a href="intro-r.html#cb275-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_replace</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;a&quot;</span>, <span class="at">replacement =</span> <span class="st">&quot;y&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p><strong>Separar</strong> strings por um padr√£o com a fun√ß√£o <code>stringr::str_split()</code>.</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="intro-r.html#cb277-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_split</span>(<span class="at">string =</span> <span class="st">&quot;p-e-n-g-u-i-n-s&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;-&quot;</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,] &quot;p&quot;  &quot;e&quot;  &quot;n&quot;  &quot;g&quot;  &quot;u&quot;  &quot;i&quot;  &quot;n&quot;  &quot;s&quot;</code></pre>
<p><strong>Inserir espa√ßos em brancos</strong> pela esquerda ou direira com a fun√ß√£o <code>stringr::str_pad()</code>.</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="intro-r.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inserir espacos em branco</span></span>
<span id="cb279-2"><a href="intro-r.html#cb279-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;  penguins&quot;</code></pre>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="intro-r.html#cb281-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins  &quot;</code></pre>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="intro-r.html#cb283-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_pad</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins &quot;</code></pre>
<p>Tamb√©m podemos <strong>remover espa√ßos em branco</strong> do come√ßo, final ou ambo, utilizando <code>stringr::str_trim()</code>.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="intro-r.html#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remover espacos em branco</span></span>
<span id="cb285-2"><a href="intro-r.html#cb285-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;left&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins &quot;</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="intro-r.html#cb287-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;right&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot; penguins&quot;</code></pre>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="intro-r.html#cb289-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_trim</span>(<span class="at">string =</span> <span class="st">&quot; penguins &quot;</span>, <span class="at">side =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<p>Podemos tamb√©m <strong>alterar min√∫sculas e mai√∫sculas</strong> em diferentes, com v√°rias fun√ß√µes.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="intro-r.html#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar minusculas e maiusculas</span></span>
<span id="cb291-2"><a href="intro-r.html#cb291-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(<span class="at">string =</span> <span class="st">&quot;Penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;penguins&quot;</code></pre>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="intro-r.html#cb293-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_upper</span>(<span class="at">string =</span> <span class="st">&quot;penguins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;PENGUINS&quot;</code></pre>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="intro-r.html#cb295-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_sentence</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="intro-r.html#cb297-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_to_title</span>(<span class="at">string =</span> <span class="st">&quot;penGuins&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Penguins&quot;</code></pre>
<p>Podemos ainda <strong>ordenar os elementos</strong> de um vetor por ordem alfab√©tica, usando <code>stringr::str_sort()</code>.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="intro-r.html#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordenar</span></span>
<span id="cb299-2"><a href="intro-r.html#cb299-2" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters)</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
## [20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="intro-r.html#cb301-1" aria-hidden="true" tabindex="-1"></a>stringr<span class="sc">::</span><span class="fu">str_sort</span>(<span class="at">x =</span> letters, <span class="at">dec =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;z&quot; &quot;y&quot; &quot;x&quot; &quot;w&quot; &quot;v&quot; &quot;u&quot; &quot;t&quot; &quot;s&quot; &quot;r&quot; &quot;q&quot; &quot;p&quot; &quot;o&quot; &quot;n&quot; &quot;m&quot; &quot;l&quot; &quot;k&quot; &quot;j&quot; &quot;i&quot; &quot;h&quot;
## [20] &quot;g&quot; &quot;f&quot; &quot;e&quot; &quot;d&quot; &quot;c&quot; &quot;b&quot; &quot;a&quot;</code></pre>
<p>Podemos ainda utilizar essas fun√ß√µes em complemento com o pacote <em>dplyr</em>, para <strong>alterar os strings de colunas</strong> ou <strong>nome das colunas</strong>.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="intro-r.html#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar valores das colunas</span></span>
<span id="cb303-2"><a href="intro-r.html#cb303-2" aria-hidden="true" tabindex="-1"></a>penguins_stringr_valores <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb303-3"><a href="intro-r.html#cb303-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">species =</span> stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(species))</span>
<span id="cb303-4"><a href="intro-r.html#cb303-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-5"><a href="intro-r.html#cb303-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alterar nome das colunas</span></span>
<span id="cb303-6"><a href="intro-r.html#cb303-6" aria-hidden="true" tabindex="-1"></a>penguins_stringr_nomes <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb303-7"><a href="intro-r.html#cb303-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename_with</span>(stringr<span class="sc">::</span>str_to_title)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/strings.html">14 Strings</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="forcats" class="section level3" number="5.5.10">
<h3><span class="header-section-number">5.5.10</span> forcats</h3>
<p>O pacote <em>forcats</em> fornece um conjunto de ferramentas √∫teis para <strong>manipular fatores</strong>. Como dito anteriormente, usamos fatores geralmente quando temos <strong>dados categ√≥ricos</strong>, que s√£o vari√°veis que possuem um conjunto de valores fixos e conhecidos. As fun√ß√µes s√£o utilizadas principalmente para: mudar a ordem dos n√≠veis, mudar os valores dos n√≠veis, adicionar e remover n√≠veis, combinar m√∫ltiplos n√≠veis, al√©m de outras opera√ß√µes.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://forcats.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Vamos utilizar ainda os dados <strong>penguins</strong> e <strong>penguins_raw</strong> para exemplificar o uso do pacote <em>forcats</em>.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="intro-r.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carrega o pacote palmerpenguins</span></span>
<span id="cb304-2"><a href="intro-r.html#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code></pre></div>
<p>Primeiramente, vamos <strong>converter</strong> dados de <strong>string</strong> para <strong>fator</strong>, utilizando a fun√ß√£o <code>forcats::as_factor()</code>.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="intro-r.html#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="co"># string</span></span>
<span id="cb305-2"><a href="intro-r.html#cb305-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">as_factor</span>(penguins_raw<span class="sc">$</span>Species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [3] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## [5] Adelie Penguin (Pygoscelis adeliae) Adelie Penguin (Pygoscelis adeliae)
## 3 Levels: Adelie Penguin (Pygoscelis adeliae) ...</code></pre>
<p>Podemos facilmente mudar o <strong>nome dos n√≠veis</strong> utilizando a <code>forcats::fct_recode()</code>.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="intro-r.html#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="co"># muda o nome dos niveis</span></span>
<span id="cb307-2"><a href="intro-r.html#cb307-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_recode</span>(penguins<span class="sc">$</span>species, <span class="at">a =</span> <span class="st">&quot;Adelie&quot;</span>, <span class="at">c =</span> <span class="st">&quot;Chinstrap&quot;</span>, <span class="at">g =</span> <span class="st">&quot;Gentoo&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] a a a a a a
## Levels: a c g</code></pre>
<p>Para <strong>inverter os n√≠veis</strong>, usamos a fun√ß√£o <code>forcats::fct_rev()</code>.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="intro-r.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inverte os niveis</span></span>
<span id="cb309-2"><a href="intro-r.html#cb309-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_rev</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Gentoo Chinstrap Adelie</code></pre>
<p>Uma opera√ß√£o muito comum com fatores √© <strong>mudar a ordem dos n√≠veis</strong>. Quando precisamos <strong>especificar a ordem dos n√≠veis</strong>, podemos fazer essa opera√ß√£o manualmente com a fun√ß√£o <code>forcats::fct_relevel()</code>.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="intro-r.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especifica a ordem dos niveis</span></span>
<span id="cb311-2"><a href="intro-r.html#cb311-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_relevel</span>(penguins<span class="sc">$</span>species, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>, <span class="st">&quot;Adelie&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Chinstrap Gentoo Adelie</code></pre>
<p>Como vimos, a <strong>reordena√ß√£o</strong> dos n√≠veis pode ser feita <strong>manualmente</strong>. Mas existe outras formas <strong>autom√°ticas de reordena√ß√£o</strong> seguindo algumas <strong>regras</strong>, para as quais existem fun√ß√µes espec√≠ficas.</p>
<ul>
<li><code>forcats::fct_inorder()</code>: pela ordem em que aparecem pela primeira vez</li>
<li><code>forcats::fct_infreq()</code>: por n√∫mero de observa√ß√µes com cada n√≠vel (o maior primeiro)</li>
<li><code>forcats::fct_inseq()</code>: por valor num√©rico de n√≠vel</li>
</ul>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="intro-r.html#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># niveis pela ordem em que aparecem</span></span>
<span id="cb313-2"><a href="intro-r.html#cb313-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_inorder</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="intro-r.html#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ordem (decrescente) de frequencia</span></span>
<span id="cb315-2"><a href="intro-r.html#cb315-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Chinstrap</code></pre>
<p>Por fim, podemos fazer a <strong>agrega√ß√£o de n√≠veis raros em um n√≠vel</strong> utilizando a fun√ß√£o <code>forcats::fct_lump()</code>.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="intro-r.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># agregacao de niveis raros em um nivel</span></span>
<span id="cb317-2"><a href="intro-r.html#cb317-2" aria-hidden="true" tabindex="-1"></a>forcats<span class="sc">::</span><span class="fu">fct_lump</span>(penguins<span class="sc">$</span>species) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## [1] Adelie Adelie Adelie Adelie Adelie Adelie
## Levels: Adelie Gentoo Other</code></pre>
<p>Podemos ainda utilizar essas fun√ß√µes em complemento com o pacote <em>dplyr</em>, para fazer <strong>manipula√ß√µes de fatores nas colunas</strong>.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="intro-r.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformar varias colunas em fator</span></span>
<span id="cb319-2"><a href="intro-r.html#cb319-2" aria-hidden="true" tabindex="-1"></a>penguins_raw_multi_factor <span class="ot">&lt;-</span> penguins_raw <span class="sc">%&gt;%</span> </span>
<span id="cb319-3"><a href="intro-r.html#cb319-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), forcats<span class="sc">::</span>as_factor))</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/factors.html">15 Factors</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="lubridate" class="section level3" number="5.5.11">
<h3><span class="header-section-number">5.5.11</span> lubridate</h3>
<p>O pacote <em>lubridate</em> fornece um conjunto de fun√ß√µes para a <strong>manipula√ß√£o de dados data e tempo</strong>. Dessa forma, esse pacote facilita o manejo desse tipo de dado no R, pois geralmente esses dados n√£o s√£o intuitivos e mudam dependendo do tipo de objeto de data e hora. Al√©m disso, os m√©todos que usam datas e hor√°rios devem levar em considera√ß√£o fusos hor√°rios, anos bissextos, hor√°rios de ver√£o e al√©m de outras particularidades. Existem diversas fun√ß√µes nesse pacote, sendo as mesmas focadas em: transforma√ß√µes de data/tempo, componentes, arredondamentos, dura√ß√µes, per√≠odos, intervalos, al√©m de muitas outras fun√ß√µes espec√≠ficas.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://lubridate.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Apesar de estar inserido no escopo do <em>tidyverse</em>, este pacote n√£o √© instalado com os demais, <strong>requisitando sua instala√ß√£o solo</strong>.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="intro-r.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># instalar</span></span>
<span id="cb320-2"><a href="intro-r.html#cb320-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;lubridate&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="intro-r.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># carregar</span></span>
<span id="cb321-2"><a href="intro-r.html#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>Existem tr√äs tipos de dados data/tempo:</p>
<ul>
<li><strong>Data</strong>: tempo em dias, meses e anos <code>&lt;date&gt;</code></li>
<li><strong>Tempo</strong>: tempo dentro de um dia <code>&lt;time&gt;</code></li>
<li><strong>Data-tempo</strong>: tempo em um instante (data mais tempo) <code>&lt;dttm&gt;</code></li>
</ul>
<p>Para trabalhar exclusivamente com hor√°rios, podemos utilizar o pacote <em>hms</em>.</p>
<p>√â fundamental tamb√©m destacar que algumas letras ter√£o um significado temporal, sendo abrevia√ß√µes de diferentes per√≠odos em ingl√™s: <strong>y</strong>ear (ano), <strong>m</strong>onth (m√™s), <strong>w</strong>eak (semana), <strong>d</strong>ay (dia), <strong>h</strong>our (hora), <strong>m</strong>inute (minuto), e <strong>s</strong>econd (segundo).</p>
<p>Para acessar a <strong>informa√ß√£o da data e hor√°rios atuais</strong> podemos utilizar as fun√ß√µes <code>lubridate::today()</code> e <code>lubridate::now()</code>.</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="intro-r.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrai a data nesse instante</span></span>
<span id="cb322-2"><a href="intro-r.html#cb322-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09&quot;</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="intro-r.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extraie a data e tempo nesse instante</span></span>
<span id="cb324-2"><a href="intro-r.html#cb324-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">now</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 10:40:59 -03&quot;</code></pre>
<p>Al√©m dessas informa√ß√µes instant√¢neas, existem <strong>tr√™s maneiras</strong> de criar um dado de data/tempo.</p>
<ul>
<li>De um string</li>
<li>De componentes individuais de data e hora</li>
<li>De um objeto de data/tempo existente</li>
</ul>
<p>Os dados de data/tempo geralmente est√£o no formato de <strong>strings</strong>. Podemos transformar os dados especificando a ordem dos componentes, ou seja, a ordem em que ano, m√™s e dia aparecem no string, usando as letras <code>y</code> (ano), <code>m</code> (m√™s) e <code>d</code> (dia) na mesma ordem, por exemplo, <code>lubridate::dmy()</code>.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="intro-r.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb326-2"><a href="intro-r.html#cb326-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-03-2021&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03&quot;</code></pre>
<p>Essas fun√ß√µes tamb√©m aceitam n√∫meros sem aspas, al√©m de serem <strong>muito vers√°teis</strong> e <strong>funcionarem em outros diversos formatos</strong>.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="intro-r.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># strings e numeros para datas</span></span>
<span id="cb328-2"><a href="intro-r.html#cb328-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03-Mar-2021&quot;</span>)</span>
<span id="cb328-3"><a href="intro-r.html#cb328-3" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="dv">03032021</span>)</span>
<span id="cb328-4"><a href="intro-r.html#cb328-4" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03032021&quot;</span>)</span>
<span id="cb328-5"><a href="intro-r.html#cb328-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03/03/2021&quot;</span>)</span>
<span id="cb328-6"><a href="intro-r.html#cb328-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;03.03.2021&quot;</span>)</span></code></pre></div>
<p>Al√©m da data, podemos <strong>especificar hor√°rios</strong> atrelados √† essas datas. Para criar uma data e tempo, adicionamos um underscore (<code>_</code>) e os <code>h</code> (hora), <code>m</code> (minuto) e <code>s</code> (segundo) ao nome da fun√ß√£o, al√©m do argumento <strong>tz</strong> para especificar <strong>fuso hor√°rio</strong>.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="intro-r.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># especificar horarios e fuso horario</span></span>
<span id="cb329-2"><a href="intro-r.html#cb329-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_h</span>(<span class="st">&quot;03-03-2021 13&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="intro-r.html#cb331-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hm</span>(<span class="st">&quot;03-03-2021 13:32&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="intro-r.html#cb333-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 UTC&quot;</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="intro-r.html#cb335-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dmy_hms</span>(<span class="st">&quot;03-03-2021 13:32:01&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-03 13:32:01 -03&quot;</code></pre>
<p>Podemos ainda ter <strong>componentes individuais</strong> de data-hora em <strong>m√∫ltiplas colunas</strong>. Para realizar essa transforma√ß√£o, podemos usar as fun√ß√µes <code>lubridate::make_date()</code> e <code>lubridate::make_datetime()</code>.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="intro-r.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dados com componentes individuais</span></span>
<span id="cb337-2"><a href="intro-r.html#cb337-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb337-3"><a href="intro-r.html#cb337-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ano =</span> <span class="fu">c</span>(<span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2021</span>),</span>
<span id="cb337-4"><a href="intro-r.html#cb337-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb337-5"><a href="intro-r.html#cb337-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dia =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">20</span>, <span class="dv">31</span>),</span>
<span id="cb337-6"><a href="intro-r.html#cb337-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hora =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">14</span>, <span class="dv">18</span>), </span>
<span id="cb337-7"><a href="intro-r.html#cb337-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">minuto =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">44</span>, <span class="dv">55</span>)</span>
<span id="cb337-8"><a href="intro-r.html#cb337-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb337-9"><a href="intro-r.html#cb337-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb337-10"><a href="intro-r.html#cb337-10" aria-hidden="true" tabindex="-1"></a><span class="co"># data de componentes individuais</span></span>
<span id="cb337-11"><a href="intro-r.html#cb337-11" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb337-12"><a href="intro-r.html#cb337-12" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">data =</span> lubridate<span class="sc">::</span><span class="fu">make_datetime</span>(ano, mes, dia, hora, minuto))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##     ano   mes   dia  hora minuto data               
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;             
## 1  2021     1    12     2      2 2021-01-12 02:02:00
## 2  2021     2    20    14     44 2021-02-20 14:44:00
## 3  2021     3    31    18     55 2021-03-31 18:55:00</code></pre>
<p>Por fim, podemo criar datas <strong>modificando entre data-tempo e data</strong>, utilizando as fun√ß√µes <code>lubridate::as_datetime()</code> e <code>lubridate::as_date()</code>.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="intro-r.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data para data-horario</span></span>
<span id="cb339-2"><a href="intro-r.html#cb339-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_datetime</span>(<span class="fu">today</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 UTC&quot;</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="intro-r.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data-horario para data</span></span>
<span id="cb341-2"><a href="intro-r.html#cb341-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as_date</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09&quot;</code></pre>
<p>Uma vez que entendemos como podemos <strong>criar dados de data/tempo</strong>, podemos explorar fun√ß√µes para <strong>acessar e definir componentes individuais</strong>. Podemos explorar <strong>cada componente</strong> dos dados de data/tempo. Para essa tarefa existe uma grande quantidade de fun√ß√µes para <strong>acessar</strong> de partes de datas e hor√°rios.</p>
<ul>
<li><code>year()</code>: acessa o ano</li>
<li><code>month()</code>: acessa o m√™s</li>
<li><code>month()</code>: acessa o dia</li>
<li><code>yday()</code>: acessa o dia do ano</li>
<li><code>mday()</code>: acessa o dia do m√™s</li>
<li><code>wday()</code>: acessa o dia da semana</li>
<li><code>hour()</code>: acessa a hora</li>
<li><code>minute()</code>: acessa os minutos</li>
<li><code>second()</code>: acessa os segundos</li>
</ul>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="intro-r.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extrair</span></span>
<span id="cb343-2"><a href="intro-r.html#cb343-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 2021</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="intro-r.html#cb345-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="intro-r.html#cb347-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Mar
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="intro-r.html#cb349-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">day</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="intro-r.html#cb351-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="intro-r.html#cb353-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">wday</span>(<span class="fu">now</span>(), <span class="at">label =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] Tue
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="intro-r.html#cb355-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">second</span>(<span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] 0.06090832</code></pre>
<p>Al√©m de acessar componentes de datas e hor√°rios, podemos usar essas fun√ß√µes para fazer a <strong>inclus√£o</strong> de informa√ß√µes de datas e tempo.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="intro-r.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data</span></span>
<span id="cb357-2"><a href="intro-r.html#cb357-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">dmy_hms</span>(<span class="st">&quot;04-03-2021 01:04:56&quot;</span>)</span>
<span id="cb357-3"><a href="intro-r.html#cb357-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-4"><a href="intro-r.html#cb357-4" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir</span></span>
<span id="cb357-5"><a href="intro-r.html#cb357-5" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">year</span>(data) <span class="ot">&lt;-</span> <span class="dv">2020</span></span>
<span id="cb357-6"><a href="intro-r.html#cb357-6" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">month</span>(data) <span class="ot">&lt;-</span> <span class="dv">01</span></span>
<span id="cb357-7"><a href="intro-r.html#cb357-7" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hour</span>(data) <span class="ot">&lt;-</span> <span class="dv">13</span></span></code></pre></div>
<p>Mais convenientemente, podemos utilizar a fun√ß√£o <code>update()</code> para alterar <strong>v√°rios valores de uma vez</strong>.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="intro-r.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># incluir varios valores</span></span>
<span id="cb358-2"><a href="intro-r.html#cb358-2" aria-hidden="true" tabindex="-1"></a><span class="fu">update</span>(data, <span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">1</span>, <span class="at">mday =</span> <span class="dv">1</span>, <span class="at">hour =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-01-01 01:04:56 UTC&quot;</code></pre>
<p>Muitas vezes precisamos fazer <strong>opera√ß√µes com datas</strong>, como a <strong>aritm√©tica com datas</strong>: subtra√ß√£o, adi√ß√£o e divis√£o. Para tanto, √© preciso entender tr√™s classes importantes que representam intervalos de tempo.</p>
<ul>
<li><strong>dura√ß√µes</strong>: representam um n√∫mero exato de segundos</li>
<li><strong>per√≠odos</strong>: representam unidades humanas como semanas e meses</li>
<li><strong>intervalos</strong>: representam um ponto inicial e final</li>
</ul>
<p>Quando fazemos uma <strong>subtra√ß√£o de datas</strong>, criamos um objeto da classe <code>difftime</code>. Essa classe pode ser um pouco complicada de trabalhar, ent√£o dentro do <em>lubridate</em>, podemos usar fun√ß√µes que convertem essa classe em <strong>dura√ß√£o</strong>, da classe <code>Duration</code>. As dura√ß√µes sempre registram o intervalo de tempo em segundos, com alguma unidade de tempo maior entre par√™nteses. H√° uma s√©rie de fun√ß√µes para tratar dessa classe.</p>
<ul>
<li><code>duration()</code>: cria data em dura√ß√£o</li>
<li><code>as.duration()</code>: converte datas em dura√ß√£o</li>
<li><code>dyears()</code>: dura√ß√£o de anos</li>
<li><code>dmonths()</code>: dura√ß√£o de meses</li>
<li><code>dweeks()</code>: dura√ß√£o de semanas</li>
<li><code>ddays()</code>: dura√ß√£o de dias</li>
<li><code>dhours()</code>: dura√ß√£o de horas</li>
<li><code>dminutes()</code>: dura√ß√£o de minutos</li>
<li><code>dseconds()</code>: dura√ß√£o de segundos</li>
</ul>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="intro-r.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtracao de datas</span></span>
<span id="cb360-2"><a href="intro-r.html#cb360-2" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb360-3"><a href="intro-r.html#cb360-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb360-4"><a href="intro-r.html#cb360-4" aria-hidden="true" tabindex="-1"></a><span class="co"># conversao para duracao</span></span>
<span id="cb360-5"><a href="intro-r.html#cb360-5" aria-hidden="true" tabindex="-1"></a>tempo_estudando_r_dur <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">as.duration</span>(tempo_estudando_r)</span>
<span id="cb360-6"><a href="intro-r.html#cb360-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb360-7"><a href="intro-r.html#cb360-7" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duracoes</span></span>
<span id="cb360-8"><a href="intro-r.html#cb360-8" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">90</span>, <span class="st">&quot;seconds&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="intro-r.html#cb362-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="fl">1.5</span>, <span class="st">&quot;minutes&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;90s (~1.5 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="intro-r.html#cb364-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">duration</span>(<span class="dv">1</span>, <span class="st">&quot;days&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;86400s (~1 days)&quot;</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="intro-r.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao da duracao</span></span>
<span id="cb366-2"><a href="intro-r.html#cb366-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dseconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100s (~1.67 minutes)&quot;</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="intro-r.html#cb368-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dminutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;6000s (~1.67 hours)&quot;</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="intro-r.html#cb370-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dhours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;360000s (~4.17 days)&quot;</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="intro-r.html#cb372-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;8640000s (~14.29 weeks)&quot;</code></pre>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="intro-r.html#cb374-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dweeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;60480000s (~1.92 years)&quot;</code></pre>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="intro-r.html#cb376-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;3155760000s (~100 years)&quot;</code></pre>
<p>Podemos ainda utilizar as dura√ß√µes para fazer <strong>opera√ß√µes aritm√©ticas com datas</strong> como adi√ß√£o, subtra√ß√£o e multiplica√ß√£o.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="intro-r.html#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando duracoes a datas</span></span>
<span id="cb378-2"><a href="intro-r.html#cb378-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">ddays</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-10&quot;</code></pre>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="intro-r.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo duracoes de datas</span></span>
<span id="cb380-2"><a href="intro-r.html#cb380-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">dyears</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-03-08 18:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="intro-r.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># multiplicando duracoes</span></span>
<span id="cb382-2"><a href="intro-r.html#cb382-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">*</span> <span class="fu">dyears</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] &quot;126230400s (~4 years)&quot;</code></pre>
<p>Al√©m das dura√ß√µes, podemos usar <strong>per√≠odos</strong>, que s√£o <strong>extens√µes de tempo</strong> n√£o fixados em segundos como as dura√ß√µes, mas flex√≠veis, com o tempo em dias, semanas, meses ou anos, permitindo uma interpreta√ß√£o mais intuitiva das datas. Novamente, h√° uma s√©rie de fun√ß√µes para realizar essas opera√ß√µes.</p>
<ul>
<li><code>period()</code>: cria data em per√≠odo</li>
<li><code>as.period()</code>: converte datas em per√≠odo</li>
<li><code>seconds()</code>: per√≠odo em segundos</li>
<li><code>minutes()</code>: per√≠odo em minutos</li>
<li><code>hours()</code>: per√≠odo em horas</li>
<li><code>days()</code>: per√≠odo em dias</li>
<li><code>weeks()</code>: per√≠odo em semanas</li>
<li><code>months()</code>: per√≠odo em meses</li>
<li><code>years()</code>: per√≠odo em anos</li>
</ul>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="intro-r.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando periodos</span></span>
<span id="cb384-2"><a href="intro-r.html#cb384-2" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">90</span>, <span class="dv">5</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;5M 90S&quot;</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="intro-r.html#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="fu">period</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="st">&quot;second&quot;</span>, <span class="st">&quot;minute&quot;</span>, <span class="st">&quot;hour&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;week&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;20d 2H 1M 3S&quot;</code></pre>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="intro-r.html#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># transformacao de periodos</span></span>
<span id="cb388-2"><a href="intro-r.html#cb388-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">seconds</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100S&quot;</code></pre>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="intro-r.html#cb390-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">minutes</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100M 0S&quot;</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="intro-r.html#cb392-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">hours</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="intro-r.html#cb394-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">days</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="intro-r.html#cb396-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;700d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="intro-r.html#cb398-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">years</span>(<span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] &quot;100y 0m 0d 0H 0M 0S&quot;</code></pre>
<p>Al√©m disso, podemos fazer <strong>opera√ß√µes com os per√≠odos</strong>, somando e subtraindo.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="intro-r.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># somando datas</span></span>
<span id="cb400-2"><a href="intro-r.html#cb400-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-05-18&quot;</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="intro-r.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subtraindo datas</span></span>
<span id="cb402-2"><a href="intro-r.html#cb402-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">-</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-12-29&quot;</code></pre>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="intro-r.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando datas recorrentes</span></span>
<span id="cb404-2"><a href="intro-r.html#cb404-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">today</span>() <span class="sc">+</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2021-03-09&quot; &quot;2021-03-16&quot; &quot;2021-03-23&quot; &quot;2021-03-30&quot; &quot;2021-04-06&quot;
##  [6] &quot;2021-04-13&quot; &quot;2021-04-20&quot; &quot;2021-04-27&quot; &quot;2021-05-04&quot; &quot;2021-05-11&quot;
## [11] &quot;2021-05-18&quot;</code></pre>
<p>Por fim, veremos os <strong>intervalos</strong>. Intervalos s√£o <strong>per√≠odos de tempo limitados por duas datas</strong>, possuindo uma <strong>dura√ß√£o com um ponto de partida</strong>, que o faz preciso para determinar uma dura√ß√£o. Intervalos s√£o objetos da classe <code>Interval</code>. Da mesma forma que para dura√ß√£o e intervalos, h√° uma s√©rie de fun√ß√µes para realizar essas opera√ß√µes.</p>
<ul>
<li><code>interval()</code>: cria data em intervalo</li>
<li><code>%--%</code>: cria data em intervalo</li>
<li><code>as.interval()</code>: converte datas em intervalo</li>
<li><code>int_start()</code>: acessa ou atribui data inicial de um intervalo</li>
<li><code>int_end()</code>: acessa ou atribui data final de um intervalo</li>
<li><code>int_length()</code>: comprimento de um intervalo em segundos</li>
<li><code>int_flip()</code>: inverte a ordem da data de in√≠cio e da data de t√©rmino em um intervalo</li>
<li><code>int_shift()</code>: desloca as datas de in√≠cio e t√©rmino de um intervalo</li>
<li><code>int_aligns()</code>: testa se dois intervalos compartilham um ponto final</li>
<li><code>int_standardize()</code>: garante que todos os intervalos sejam positivos</li>
<li><code>int_diff()</code>: retorna os intervalos que ocorrem entre os elementos de data-hora</li>
<li><code>int_overlaps()</code>: testa se dois intervalos se sobrep√µem</li>
<li><code>%within%</code>: testa se o primeiro intervalo est√° contido no segundo</li>
</ul>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="intro-r.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># criando duas datas - inicio de estudos do r e nascimento do meu filho</span></span>
<span id="cb406-2"><a href="intro-r.html#cb406-2" aria-hidden="true" tabindex="-1"></a>r_inicio <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;30-11-2011&quot;</span>)</span>
<span id="cb406-3"><a href="intro-r.html#cb406-3" aria-hidden="true" tabindex="-1"></a>filho_nascimento <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(<span class="st">&quot;26-09-2013&quot;</span>)</span>
<span id="cb406-4"><a href="intro-r.html#cb406-4" aria-hidden="true" tabindex="-1"></a>r_hoje <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb406-5"><a href="intro-r.html#cb406-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-6"><a href="intro-r.html#cb406-6" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval</span></span>
<span id="cb406-7"><a href="intro-r.html#cb406-7" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">interval</span>(r_inicio, r_hoje)</span>
<span id="cb406-8"><a href="intro-r.html#cb406-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-9"><a href="intro-r.html#cb406-9" aria-hidden="true" tabindex="-1"></a><span class="co"># criando intervalos - interval %--%</span></span>
<span id="cb406-10"><a href="intro-r.html#cb406-10" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="ot">&lt;-</span> filho_nascimento <span class="sc">%--%</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb406-11"><a href="intro-r.html#cb406-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-12"><a href="intro-r.html#cb406-12" aria-hidden="true" tabindex="-1"></a><span class="co"># operacoes com intervalos</span></span>
<span id="cb406-13"><a href="intro-r.html#cb406-13" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_start</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2011-11-30 UTC&quot;</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="intro-r.html#cb408-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_end</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 UTC&quot;</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="intro-r.html#cb410-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_length</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 292636800</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="intro-r.html#cb412-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_flip</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] 2021-03-09 UTC--2011-11-30 UTC</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="intro-r.html#cb414-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_shift</span>(r_intervalo, <span class="fu">duration</span>(<span class="at">days =</span> <span class="dv">30</span>))</span></code></pre></div>
<pre><code>## [1] 2011-12-30 UTC--2021-04-08 UTC</code></pre>
<p>Uma opera√ß√£o de destaque √© <strong>verificar a sobreposi√ß√£o</strong> entre dois intervalos.</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="intro-r.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar sobreposicao - int_overlaps</span></span>
<span id="cb416-2"><a href="intro-r.html#cb416-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">int_overlaps</span>(r_intervalo, filho_intervalo)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="intro-r.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar se intervalor contido</span></span>
<span id="cb418-2"><a href="intro-r.html#cb418-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%within%</span> filho_intervalo</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="intro-r.html#cb420-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">%within%</span> r_intervalo</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Podemos ainda <strong>calcular quantos per√≠odos existem dentro de um intervalo</strong>, utilizando as opera√ß√µes de <code>/</code> e <code>%/%</code>.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="intro-r.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - anos</span></span>
<span id="cb422-2"><a href="intro-r.html#cb422-2" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9.271233</code></pre>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="intro-r.html#cb424-1" aria-hidden="true" tabindex="-1"></a>r_intervalo <span class="sc">%/%</span> lubridate<span class="sc">::</span><span class="fu">years</span>()</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="intro-r.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># periodos dentro de um intervalo - dias e semandas</span></span>
<span id="cb426-2"><a href="intro-r.html#cb426-2" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">days</span>()</span></code></pre></div>
<pre><code>## [1] 2721</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="intro-r.html#cb428-1" aria-hidden="true" tabindex="-1"></a>filho_intervalo <span class="sc">/</span> lubridate<span class="sc">::</span><span class="fu">weeks</span>()</span></code></pre></div>
<pre><code>## [1] 388.7143</code></pre>
<p>Ainda podemos fazer <strong>transforma√ß√µes dos dados para per√≠odos</strong> e ter todas as unidades de data e tempo que o intervalo compreende.</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="intro-r.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tempo total estudando r</span></span>
<span id="cb430-2"><a href="intro-r.html#cb430-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(r_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;9y 3m 9d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="intro-r.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># idade do meu filho</span></span>
<span id="cb432-2"><a href="intro-r.html#cb432-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">as.period</span>(filho_intervalo)</span></code></pre></div>
<pre><code>## [1] &quot;7y 5m 11d 0H 0M 0S&quot;</code></pre>
<p>Por fim, <strong>fusos hor√°rios</strong> tendem a ser um fator complicador quando precisamos analisar informa√ß√µes instant√¢neas de tempo (hor√°rio) de outras partes do planeta, ou mesmo fazer convers√µes dos hor√°rio. No <em>lubridate</em> h√° fun√ß√µes para ajudar nesse assunto. Para isso, podemos utilizar a fun√ß√£o <code>lubridate::with_tz()</code>, e no argumento <strong>tzone</strong> informar o fuso hor√°rio para a transforma√ß√£o do hor√°rio.</p>
<p>Podemos descobrir o <strong>fuso hor√°rio que o R est√° considerando</strong> com a fun√ß√£o <code>Sys.timezone()</code>.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="intro-r.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fuso horario no r</span></span>
<span id="cb434-2"><a href="intro-r.html#cb434-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code></pre></div>
<pre><code>## [1] &quot;America/Sao_Paulo&quot;</code></pre>
<p>No R h√° uma <strong>listagem dos nomes dos fusos hor√°rios</strong> que podemos utilizar no argumento <strong>tzone</strong> para diferentes fusos hor√°rios.</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="intro-r.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co"># verificar os fuso horarios</span></span>
<span id="cb436-2"><a href="intro-r.html#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] 607</code></pre>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="intro-r.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">OlsonNames</span>())</span></code></pre></div>
<pre><code>## [1] &quot;Africa/Abidjan&quot;     &quot;Africa/Accra&quot;       &quot;Africa/Addis_Ababa&quot;
## [4] &quot;Africa/Algiers&quot;     &quot;Africa/Asmara&quot;      &quot;Africa/Asmera&quot;</code></pre>
<p>Podemos nos perguntar que s√£o em outra parte do globo, ou fazer as convers√µes facilmente no <em>lubridate</em>.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="intro-r.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="co"># que horas sao agoram em...</span></span>
<span id="cb440-2"><a href="intro-r.html#cb440-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;America/Sao_Paulo&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 10:41:00 -03&quot;</code></pre>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="intro-r.html#cb442-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 13:41:00 GMT&quot;</code></pre>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="intro-r.html#cb444-1" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">with_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;Europe/Berlin&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 14:41:00 CET&quot;</code></pre>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="intro-r.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="co"># altera o fuso sem mudar a hora</span></span>
<span id="cb446-2"><a href="intro-r.html#cb446-2" aria-hidden="true" tabindex="-1"></a>lubridate<span class="sc">::</span><span class="fu">force_tz</span>(lubridate<span class="sc">::</span><span class="fu">now</span>(), <span class="at">tzone =</span> <span class="st">&quot;GMT&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2021-03-09 10:41:00 GMT&quot;</code></pre>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/dates-and-times.html">16 Dates and times</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
<div id="purrr" class="section level3" number="5.5.12">
<h3><span class="header-section-number">5.5.12</span> purrr</h3>
<p>Pacote <em>purrr</em> implementa a <strong>Programa√ß√£o Funcional</strong> no R, fornecendo um conjunto completo e consistente de ferramentas para trabalhar com fun√ß√µes e vetores. A programa√ß√£o funcional √© um assunto bastante extenso, sendo mais conhecido no R pela fam√≠lia de fun√ß√µes <code>purrr::map()</code>, que permite substituir muitos <strong>loops for</strong> por um c√≥digo mais sucinto e f√°cil de ler. N√£o iremos aqui focar nas outras fun√ß√µes.</p>
<p>Todas as fun√ß√µes deste pacote s√£o listadas na <a href="https://purrr.tidyverse.org/reference/index.html">p√°gina de refer√™ncia</a> do pacote.</p>
<p>Um <strong>loop for</strong> pode ser entendido como uma <strong>itera√ß√£o</strong>: um bloco de c√≥digos √© repetido mudando um contador de uma lista de possibilidades. Vamos exemplificar com uma itera√ß√£o bem simples, onde iremos imprimir no console os valores de 1 a 10, utilizando a fun√ß√£o <code>for()</code>, um contador <code>i</code> em um vetor de dez n√∫meros <code>1:10</code> que ser√° iterado, no bloco de c√≥digos definido entre <code>{}</code>, i.e, usando a fun√ß√£o <code>print()</code> para imprimir os valores.</p>
<p>A ideia √© <strong>bastante simples</strong>: a fun√ß√£o <code>for()</code> vai atribuir o primeiro valor da lista ao contador <code>i</code>, esse contador ser√° utilizado em todo o bloco de c√≥digos. Quando o bloco terminar, o segundo valor √© atribu√≠do ao contador <code>i</code> e entra no bloco de c√≥digos, repetindo esse processo at√© que todos os elementos da lista seja atribu√≠da ao contador.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="intro-r.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for</span></span>
<span id="cb448-2"><a href="intro-r.html#cb448-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb448-3"><a href="intro-r.html#cb448-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb448-4"><a href="intro-r.html#cb448-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Com essa ideia em mente, a <strong>programa√ß√£o funcional</strong> utilizando a fun√ß√£o <code>purrr::map()</code>, ficaria dessa forma.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="intro-r.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loop for com map</span></span>
<span id="cb450-2"><a href="intro-r.html#cb450-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(<span class="at">.x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">.f =</span> print)</span></code></pre></div>
<p>Nessa estrutura, temos:</p>
<p><code>map(.x, .f)</code></p>
<ul>
<li><strong>.x</strong>: um vetor, lista ou data frame<br />
</li>
<li><strong>.f</strong>: uma fun√ß√£o</li>
</ul>
<p>Num outro exemplo, iremos aplicar a fun√ß√£o <code>sum()</code> para <strong>somar os valores de v√°rios elementos de uma lista</strong>.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="intro-r.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># map</span></span>
<span id="cb451-2"><a href="intro-r.html#cb451-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))</span>
<span id="cb451-3"><a href="intro-r.html#cb451-3" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(x, sum)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 15
## 
## [[2]]
## [1] 16
## 
## [[3]]
## [1] 3
## 
## [[4]]
## [1] 10</code></pre>
<p>H√° <strong>diferente tipos de retornos</strong> da fam√≠lia <code>purrr::map()</code>.</p>
<ul>
<li><code>map()</code>: retorna uma lista</li>
<li><code>map_chr()</code>: retorna um vetor de strings</li>
<li><code>map_dbl()</code>: retorna um vetor num√©rico (double)</li>
<li><code>map_int()</code>: retorna um vetor num√©rico (integer)</li>
<li><code>map_lgl()</code>: retorna um vetor l√≥gico</li>
<li><code>map_dfr()</code>: retorna um data frame (por linhas)</li>
<li><code>map_dfc()</code>: retorna um data frame (por colunas)</li>
</ul>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="intro-r.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variacoes da funcao map</span></span>
<span id="cb453-2"><a href="intro-r.html#cb453-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_dbl</span>(x, sum)</span></code></pre></div>
<pre><code>## [1] 15 16  3 10</code></pre>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb455-1"><a href="intro-r.html#cb455-1" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map_chr</span>(x, paste, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1 2 3 4 5&quot; &quot;4 5 7&quot;     &quot;1 1 1&quot;     &quot;2 2 2 2 2&quot;</code></pre>
<p>Essas <strong>funcionalidades</strong> j√° eram conhecidas no Base R pelas fun√ß√µes da <strong>fam√≠lia <code>apply</code></strong>: <code>apply()</code>, <code>lapply()</code>, <code>sapply()</code>, <code>vapply()</code>, <code>mapply()</code>, <code>rapply()</code> e <code>tapply()</code>. Essas fun√ß√µes formam a base de combina√ß√µes mais complexas e ajudam a <strong>realizar opera√ß√µes com poucas linhas de c√≥digo</strong>, para diferentes retornos.</p>
<p>Temos ainda <strong>duas variantes</strong> da fun√ß√£o <code>map()</code>: <code>purrr::map2()</code> e <code>purrr::pmap()</code>, para duas ou mais listas, respectivamente. Como vimos para a primeira fun√ß√£o, existem duas varia√ß√µes do sufixo para <strong>modificar o retorno</strong> da fun√ß√£o.</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb457-1"><a href="intro-r.html#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="co"># listas</span></span>
<span id="cb457-2"><a href="intro-r.html#cb457-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb457-3"><a href="intro-r.html#cb457-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb457-4"><a href="intro-r.html#cb457-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb457-5"><a href="intro-r.html#cb457-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb457-6"><a href="intro-r.html#cb457-6" aria-hidden="true" tabindex="-1"></a><span class="co"># map2</span></span>
<span id="cb457-7"><a href="intro-r.html#cb457-7" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map2_dbl</span>(x, y, prod)</span></code></pre></div>
<pre><code>## [1]  9 25  0  1</code></pre>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb459-1"><a href="intro-r.html#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pmap</span></span>
<span id="cb459-2"><a href="intro-r.html#cb459-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">pmap_dbl</span>(<span class="fu">list</span>(x, y, z), prod)</span></code></pre></div>
<pre><code>## [1]  27 125   0   1</code></pre>
<p>Essa fun√ß√µes podem ser usadas em conjunto para <strong>implementar rotinas de manipula√ß√£o e an√°lise de dados</strong> com poucas linhas de c√≥digo, mas que n√£o exploraremos em sua complitude aqui. Listamos dois exemplos simples.</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="intro-r.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="co"># resumo dos dados</span></span>
<span id="cb461-2"><a href="intro-r.html#cb461-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb461-3"><a href="intro-r.html#cb461-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb461-4"><a href="intro-r.html#cb461-4" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb461-5"><a href="intro-r.html#cb461-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map_dbl</span>(mean)</span></code></pre></div>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="intro-r.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># analise dos dados</span></span>
<span id="cb462-2"><a href="intro-r.html#cb462-2" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb462-3"><a href="intro-r.html#cb462-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_split</span>(island, species) <span class="sc">%&gt;%</span> </span>
<span id="cb462-4"><a href="intro-r.html#cb462-4" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(bill_depth_mm <span class="sc">~</span> bill_length_mm, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span> </span>
<span id="cb462-5"><a href="intro-r.html#cb462-5" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb462-6"><a href="intro-r.html#cb462-6" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="st">&quot;r.squared&quot;</span>)</span></code></pre></div>
<p>Para se aprofundar no tema, recomendamos a leitura do cap√≠tulo <a href="https://r4ds.had.co.nz/iteration.html">21 Iteration</a> de Wickhan &amp; Grolemund (2017).</p>
</div>
</div>
<div id="exerc√≠cios" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Exerc√≠cios</h2>
<div id="base-r" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Base R</h3>
<ol style="list-style-type: decimal">
<li><p>Use o R para verificar o resultado da opera√ß√£o <code>7 + 7 √∑ 7 + 7 x 7 - 7</code>.</p></li>
<li><p>Verifique atrav√©s do R se <code>3x2¬≥</code> √© maior que <code>2x3¬≤</code>.</p></li>
<li><p>Crie dois objetos (qualquer nome) com os valores 100 e 300. Multiplique esses objetos (fun√ß√£o <code>prod()</code>) e atribuam ao objeto <strong>mult</strong>. Fa√ßa o logaritmo natural (fun√ß√£o <code>log()</code>) do objeto mult e atribuam ao objeto <strong>ln</strong>.</p></li>
<li><p>Quantos pacotes existem no CRAN nesse momento? Execute essa combina√ß√£o no Console: <code>nrow(available.packages(repos = "http://cran.r-project.org"))</code>.</p></li>
<li><p>Instale o pacote <em>tidyverse</em> do CRAN.</p></li>
<li><p>Escolha n√∫meros para jogar na mega-sena usando o R, nomeando o objeto como <strong>mega</strong>. Lembrando: s√£o 6 valores de 1 a 60 e atribuam a um objeto.</p></li>
<li><p>Crie um fator chamado <strong>tr</strong>, com dois n√≠veis (‚Äúcont‚Äù e ‚Äútrat‚Äù) para descrever 100 locais de amostragem, 50 de cada tratamento. O fator deve ser dessa forma <code>cont, cont, cont, ...., cont, trat, trat, ...., trat</code>.</p></li>
<li><p>Crie uma matriz chamada <strong>ma</strong>, resultante da disposi√ß√£o de um vetor composto por 10000 valores aleat√≥rios entre 0 e 10. A matriz deve conter 100 linhas e ser disposta por colunas.</p></li>
<li><p>Crie um data frame chamado <strong>df</strong>, resultante da composi√ß√£o desses vetores:</p></li>
</ol>
<ul>
<li><code>id: 1:50</code></li>
<li><code>sp: sp01, sp02, ..., sp49, sp50</code></li>
<li><code>ab: 50 valores aleat√≥rios entre 0 a 5</code></li>
</ul>
<ol start="10" style="list-style-type: decimal">
<li><p>Crie uma lista com os objetos criados anteriormente: <strong>mega</strong>, <strong>tr</strong>, <strong>ma</strong> e <strong>df</strong>.</p></li>
<li><p>Selecione os elmentos √≠mpares do objeto <strong>tr</strong>, e atribua ao objeto <strong>tr_impar</strong>.</p></li>
<li><p>Selecione as linhas com ids pares do objeto <strong>df</strong>, e atribua ao objeto <strong>df_ids_par</strong>.</p></li>
<li><p>Fa√ßa uma amostragem de 10 linhas do objeto <strong>df</strong>, e atribua ao objeto <strong>df_amos10</strong>.</p></li>
</ol>
</div>
<div id="tidyverse-2" class="section level3" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> <em>tidyverse</em></h3>
<ol style="list-style-type: decimal">
<li>Reescreva as opera√ß√µes abaixo utilizando pipes <code>%&gt;%</code>.</li>
</ol>
<ul>
<li><code>log10(cumsum(1:100))</code></li>
<li><code>sum(sqrt(abs(rnorm(100))))</code></li>
<li><code>sum(sort(sample(1:10, 10000, rep = TRUE)))</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><p>Use a fun√ß√£o <code>download.file()</code> e <code>unzip()</code> para baixar e extrair o arquivo do data paper de m√©dios e grandes mam√≠feros: <a href="https://doi.org/10.1002/ecy.2785">ATLANTIC MAMMALS</a>. Em seguinda, importe para o R, usando a fun√ß√£o <code>readxl::read_excel()</code>.</p></li>
<li><p>Use a fun√ß√£o <code>tibble::glimpse()</code> para ter uma no√ß√£o geral dos dados importados no item anterior.</p></li>
<li><p>Compare os dados de penguins (<em>palmerpenguins::penguins_raw</em> e <em>palmerpenguins::penguins</em>). Monte uma s√©rie de fun√ß√µes dos pacotes <em>tidyr</em> e <em>dplyr</em> para fazer limpar os dados e fazer com que o primeiro dados seja igual ao segundo.</p></li>
<li><p>Usando os dados de penguins (<em>palmerpenguins::penguins</em>), calcule a correla√ß√£o de Pearson entre comprimento e profundidade do bico para cada esp√©cie e para todas as esp√©cies. Compare os √≠ndices de correla√ß√£o para exemplificar o Paradoxo de Simpsom.</p></li>
<li><p>Oficialmente, a pandemia de COVID-19 come√ßou com o primeiro caso no dia 26 de fevereiro de 2020. Calcule quantos anos, meses, dias, semanas, horas, minutos e segundos se passou desde ent√£o.</p></li>
</ol>
</div>
</div>
<div id="para-se-aprofundar" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Para se aprofundar</h2>
<p>Listamos a seguir livros, apostilas e links com material que recomendamos para seguir com sua aprendizagem em R e tidyverse.</p>
<div id="livros" class="section level3" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Livros</h3>
<p><strong>Portugu√™s</strong></p>
<p>Curso-R. 2021. Ci√™ncia de Dados em R. [<a href="https://livro.curso-r.com/" class="uri">https://livro.curso-r.com/</a>]</p>
<p>Faria PD, Parga JPFA. 2020. Introdu√ß√£o √† Linguagem R: seus fundamentos e sua pr√°tica. [<a href="https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica" class="uri">https://www.researchgate.net/publication/345985082_Introducao_a_Linguagem_R_seus_fundamentos_e_sua_pratica</a>]</p>
<p>Oliveira PF, Guerra S, Mcdonnell, R. 2018. Ci√™ncia de dados com R ‚Äì Introdu√ß√£o. IBPAD. [<a href="https://cdr.ibpad.com.br/" class="uri">https://cdr.ibpad.com.br/</a>]</p>
<p><strong>Ingl√™s</strong></p>
<p>Adler J. 2012. R in a Nutshell: A Desktop Quick Reference. 2 ed.¬†O‚ÄôReilly Media.</p>
<p>Burns P. 2011. The R Inferno. [<a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf" class="uri">https://www.burns-stat.com/pages/Tutor/R_inferno.pdf</a>]</p>
<p>Cotton R. 2013. Learning R: A Step-by-Step Function Guide to Data Analysis. O‚ÄôReilly Media.</p>
<p>Crawley MJ. 2012. The R Book. 2 ed.¬†Wiley.</p>
<p>Davies TM. 2016. The Book of R: A First Course in Programming and Statistics. No Starch Press.</p>
<p>Douglas A, Roos D, Mancini F, Couto A, Lusseau D. An Introduction to R. 2021 [<a href="https://intro2r.com/" class="uri">https://intro2r.com/</a>]</p>
<p>Engel C. 2019. Introduction to R. [<a href="https://cengel.github.io/R-intro/" class="uri">https://cengel.github.io/R-intro/</a>]</p>
<p>Gillespie C., Lovelace R, 2016. Efficient R programming. O‚ÄôReilly Media. [<a href="https://bookdown.org/csgillespie/efficientR/" class="uri">https://bookdown.org/csgillespie/efficientR/</a>]</p>
<p>Grolemund G. 2014. Hands-On Programming with R. O‚ÄôReilly Media.</p>
<p>Grolemund G. 2017. The Essentials of Data Science: Knowledge Discovery Using R. Chapman and Hall/CRC.</p>
<p>Hastle T, Tibshirani R, Friedman J. 2016. The Elements of Statistical Learning: Data Mining, Inference, and Prediction. 2 ed.¬†Springer. [<a href="https://web.stanford.edu/~hastie/ElemStatLearn" class="uri">https://web.stanford.edu/~hastie/ElemStatLearn</a>]</p>
<p>Irizarry RA, Love MI. 2016. Data Analysis for the Life Sciences with R. Chapman and Hall/CRC.</p>
<p>Irizarry RA. 2019. Introduction to Data Science: Data Analysis and Prediction Algorithms with R. Chapman and Hall/CRC. [<a href="https://rafalab.github.io/dsbook/" class="uri">https://rafalab.github.io/dsbook/</a>]</p>
<p>Ismay C., Kim AY. 2019. Statistical Inference via Data Science: A ModernDive into R and the Tidyverse. Chapman and Hall/CRC. [<a href="https://moderndive.com/" class="uri">https://moderndive.com/</a>]</p>
<p>James G, Witten D, Hastie T, Tibshirani R. 2013. An Introduction to Statistical Learning: with Applications in R. 2 ed.¬†Springer. [<a href="http://faculty.marshall.usc.edu/gareth-james/ISL/" class="uri">http://faculty.marshall.usc.edu/gareth-james/ISL/</a>]</p>
<p>Kabacoff RI. 2015. R in Action: Data analysis and graphics with R. 2 ed.¬†Manning.</p>
<p>Lander JP. 2017. R for Everyone: Advanced Analytics and Graphics. Addison-Wesley Professional.</p>
<p>Matloff N. 2011. The Art of R Programming: A Tour of Statistical Software Design. No Starch Press.</p>
<p>Peng DP. 2020. R Programming for Data Science. [<a href="https://bookdown.org/rdpeng/rprogdatascience/" class="uri">https://bookdown.org/rdpeng/rprogdatascience/</a>]</p>
<p>Long JD, Teetor P. 2019. R Cookbook.2 ed.¬†O‚ÄôReilly Media. [<a href="https://rc2e.com/" class="uri">https://rc2e.com/</a>]</p>
<p>Wickham H, Grolemund G. 2017. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. O‚ÄôReilly Media. [<a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>]</p>
<p>Wickham H. 2019. Advanced R. 2 ed.¬†Chapman and Hall/CRC. [<a href="https://adv-r.hadley.nz/" class="uri">https://adv-r.hadley.nz/</a>]</p>
<p>Wickham H. 2015. R Packages: Organize, Test, Document, and Share Your Code. O‚ÄôReilly Media. [<a href="https://r-pkgs.org/" class="uri">https://r-pkgs.org/</a>]</p>
<p>Wright C, Ellis S, Hicks S &amp; Peng R D. 2021. Tidyverse Skills for Data Science in R. [<a href="https://jhudatascience.org/tidyversecourse/" class="uri">https://jhudatascience.org/tidyversecourse/</a>]</p>
<p>Zumel N, Mount J. 2014. Practical Data Science with R Paperback. Manning.</p>
</div>
<div id="links" class="section level3" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Links</h3>
<p><a href="https://paulvanderlaken.com/2017/08/10/r-resources-cheatsheets-tutorials-books">R resources (free courses, books, tutorials, &amp; cheat sheets)</a></p>
<p><a href="https://ourcodingclub.github.io/course">Data Science for Ecologists and Environmental Scientists</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="voltando-ao-b√°sico-como-dominar-a-arte-de-fazer-perguntas-cientificamente-relevantes.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="gr√°ficos.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/paternogbc/livro_r_ecologia/edit/master/04_r_tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["livro_r_ecologia.pdf", "livro_r_ecologia.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
